(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-83058c84"],{"1a2d":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s}));var a=n("b775");function r(e){return Object(a.a)({url:"/user_login",method:"get",params:e})}function i(e){return Object(a.a)({url:"/user_login",method:"post",data:e})}function s(e){return Object(a.a)({url:"/user_login",method:"put",data:e})}},2:function(e,t){},3:function(e,t){},"39ed":function(e,t,n){},4:function(e,t){},5:function(e,t){},be4b:function(e,t,n){"use strict";n("39ed")},e382:function(e,t,n){"use strict";n.r(t);var a,r=n("ade3"),i=(n("34ef"),n("ac6a"),n("5df3"),n("20d6"),n("7f7f"),n("6b54"),n("5530")),s=n("c7eb"),o=(n("96cf"),n("1da1")),c=n("7e1e"),l=n("1a2d"),d=n("d055"),u=n.n(d),p=n("3452"),h=n.n(p),m=n("c4e3"),f=n.n(m),b=n("5f87"),v=n("21a6"),g=n.n(v),y=n("1146"),_=n.n(y),w={filters:{},data:function(){return{userName:"",roles:"",role:"",roledata:"",password:"dc123456",userlist:[],categorylist:[],categorylist1:[],labellist:[],listLoading:!0,downloadLoading:!1,_id:"",categorytitle:"",labeltitle:"",address:"",addresstime:"",userId:"",number:"",name:"",phone:"",checkList:"",labelindex:"",labelcategoryindex:"",dialogStatus:"",dialogFormVisible:!1,dialogFormVisible1:!1,textMap:{update:"Edit",create:"Create"},searchReq:{},qrCodeUrl:"",qrCodeDialogVisible:!1,currentQRCode:"",currentUser:{},encryptionKey:"your-secure-encryption-key",qrCodeList:[],batchQRCodeVisible:!1,selectAll:!1,total:0,listQuery:{page:1,limit:10},importDialogVisible:!1,uploadHeaders:{Authorization:Object(b.a)()}}},created:function(){this.getUserRole(),this.fetchData()},beforeCreate:function(){},methods:(a={getUserRole:function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.b)("role",{query:{}});case 2:t=e.sent,n=t.data,this.userlist=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),fetchData:function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,n,a,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.listLoading=!0,t={query:Object(i.a)({},this.searchReq),populate:JSON.stringify([{path:"role"}]),page:this.listQuery.page,limit:this.listQuery.limit},e.prev=2,e.next=5,Object(c.b)("user_login",t);case 5:n=e.sent,a=n.data,r=n.total,this.categorylist=a,this.categorylist1=this.categorylist,this.total=r,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("获取数据失败:",e.t0);case 16:return e.prev=16,this.listLoading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),handleEdit:function(e){this.dialogFormVisible=!0,this._id=e._id,this.password=e.password,this.role=e.role._id?e.role._id:e.role,this.number=e.userName,this.name=e.nickName,this.phone=e.phone,this.dialogStatus="edit",this.qrCodeUrl=""},handleDelete:function(e){var t=this;console.log(e),this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){removeData("user_login",{query:{_id:e._id}}).then((function(e){console.log(e),t.fetchData()}))}))},handisshow:function(e){var t=this,n={query:{_id:e._id},update:{status:!e.status}};console.log(n),Object(l.c)(n).then((function(e){console.log(e),200==e.code?(t.dialogFormVisible=!1,t.fetchData(),t.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):t.$notify({title:"修改失败",message:"edit failly",type:"warning",duration:2e3})}))},AddFilter:function(){this._id="",this.userId="",this.number="",this.role="",this.password="Enterprise123",this.name="",this.phone="",this.dialogFormVisible=!0,this.dialogStatus="create",this.qrCodeUrl=""},generateEncryptedId:function(){var e=uuidv4();return h.a.AES.encrypt(e,"your-secret-key").toString()},encryptLoginData:function(e){var t=JSON.stringify({id:e._id,userName:e.userName,password:e.password});return h.a.AES.encrypt(t,this.encryptionKey).toString()},createData:function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,n,a,r,i=this;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==this.number||""==this.name||""==this.password||""==this.phone||""==this.role){e.next=22;break}if(t=this.categorylist.findIndex((function(e){return e.usernumber===i.number})),-1!=t){e.next=19;break}return n={_id:Date.now().toString(),userName:this.number,password:this.password},a=this.encryptLoginData(n),e.prev=5,e.next=8,u.a.toDataURL(a);case 8:this.qrCodeUrl=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),console.error("QR Code generation failed:",e.t0),e.abrupt("return");case 15:r={nickName:this.name,userName:this.number,password:this.password,phone:this.phone,role:this.role,qrCode:this.qrCodeUrl},Object(l.b)(r).then((function(e){200==e.code?(i.dialogFormVisible=!1,i.fetchData(),i.currentQRCode=i.qrCodeUrl,i.currentUser={nickName:i.name,userName:i.number},i.qrCodeDialogVisible=!0,i.$notify({title:"添加成功",message:"请及时保存登录二维码",type:"success",duration:3e3})):i.$notify({title:"添加失败",message:"添加失败",type:"warning",duration:2e3})})),e.next=20;break;case 19:this.$notify({title:"此用户已是管理人员",message:"Again input",type:"warning",duration:2e3});case 20:e.next=23;break;case 22:this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 23:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}(),editData:function(){var e=this;if(""!=this.number&&""!=this.name&&""!=this.phone&&""!=this.password&&""!=this.role){var t={query:{_id:this._id},update:{nickName:this.name,userName:this.number,password:this.password,phone:this.phone,role:this.role}};Object(l.c)(t).then((function(t){200==t.code?(e.dialogFormVisible=!1,e.fetchData(),e.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):e.$notify({title:"修改失败",message:"edit failly",type:"warning",duration:2e3})}))}else this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3})},clearclick:function(){this.categorylist=this.categorylist1},Search:function(){this.searchReq={},this.userName?this.searchReq.userName={$regex:this.userName}:delete this.searchReq.userName,console.log(this.searchReq),this.fetchData()},searchrole:function(){if(this.roledata){var e=this.searchByIndexOf1(this.roledata,this.categorylist1);this.categorylist=e}else this.categorylist=this.categorylist1},searchByIndexOf:function(e,t){if(t instanceof Array){for(var n=t.length,a=[],r=0;r<n;r++)t[r].username.indexOf(e)>=0&&a.push(t[r]);return a}},searchByIndexOf1:function(e,t){if(t instanceof Array){for(var n=t.length,a=[],r=0;r<n;r++)t[r].role==e&&a.push(t[r]);return a}},printQRCode:function(){var e=window.open("","_blank");e.document.write('\n        <html>\n          <head>\n            <title>打印二维码</title>\n            <style>\n              body { display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }\n              .print-container { text-align: center; }\n              img { max-width: 200px; }\n              p { margin: 10px 0; font-size: 14px; }\n            </style>\n          </head>\n          <body>\n            <div class="print-container">\n              <img src="'.concat(this.qrCodeUrl,'" alt="登录二维码">\n              <p>用户名：').concat(this.name,"</p>\n              <p>账号：").concat(this.number,"</p>\n            </div>\n          </body>\n        </html>\n      ")),e.document.close(),e.print()},downloadQRCode:function(){var e=document.createElement("a");e.download="登录码_".concat(this.name,"_").concat(this.number,".png"),e.href=this.qrCodeUrl,document.body.appendChild(e),e.click(),document.body.removeChild(e)},showQRCode:function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.encryptLoginData({_id:t._id,userName:t.userName,password:t.password}),e.prev=1,e.next=4,u.a.toDataURL(n);case 4:this.currentQRCode=e.sent,this.currentUser={nickName:t.nickName,userName:t.userName},this.qrCodeDialogVisible=!0,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("QR Code generation failed:",e.t0),this.$notify({title:"错误",message:"二维码生成失败",type:"error"});case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(a,"printQRCode",(function(){var e=window.open("","_blank");e.document.write('\n        <html>\n          <head>\n            <title>打印二维码</title>\n            <style>\n              body { display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }\n              .print-container { text-align: center; }\n              img { max-width: 200px; }\n              p { margin: 10px 0; font-size: 14px; }\n            </style>\n          </head>\n          <body>\n            <div class="print-container">\n              <img src="'.concat(this.currentQRCode,'" alt="登录二维码">\n              <p>用户名：').concat(this.currentUser.nickName,"</p>\n              <p>账号：").concat(this.currentUser.userName,"</p>\n            </div>\n          </body>\n        </html>\n      ")),e.document.close(),e.print()})),"downloadQRCode",(function(){var e=document.createElement("a");e.download="登录码_".concat(this.currentUser.nickName,"_").concat(this.currentUser.userName,".png"),e.href=this.currentQRCode,document.body.appendChild(e),e.click(),document.body.removeChild(e)})),"showBatchQRCode",function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t=this;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(this.categorylist.map(function(){var e=Object(o.a)(Object(s.a)().mark((function e(n){var a,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.encryptLoginData({_id:n._id,userName:n.userName,password:n.password}),e.next=3,u.a.toDataURL(a);case 3:return r=e.sent,e.abrupt("return",{id:n._id,nickName:n.nickName,userName:n.userName,qrCode:r,selected:!1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:this.qrCodeList=e.sent,this.batchQRCodeVisible=!0,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("批量生成二维码失败:",e.t0),this.$notify({title:"错误",message:"批量生成二维码失败",type:"error"});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()),"printSelectedQRCodes",function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,n,a,r,i=this;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.qrCodeList.filter((function(e){return e.selected})),0!==t.length){e.next=4;break}return this.$message.warning("请至少选择一个二维码"),e.abrupt("return");case 4:return n=t.map((function(e){return i.createQRCodeWithInfo(e.qrCode,e.nickName,e.userName)})),e.next=7,Promise.all(n);case 7:a=e.sent,(r=window.open("","_blank")).document.write('\n        <html>\n          <head>\n            <title>批量打印二维码</title>\n            <style>\n              body { \n                padding: 20px;\n                font-family: Arial, sans-serif;\n              }\n              .qrcode-grid {\n                display: grid;\n                grid-template-columns: repeat(2, 1fr);\n                gap: 20px;\n              }\n              .qrcode-item {\n                text-align: center;\n                padding: 15px;\n                border: 1px solid #eee;\n                page-break-inside: avoid;\n              }\n              .qrcode-item img {\n                width: 300px;\n                height: 380px;\n              }\n              @media print {\n                .qrcode-item {\n                  border: none;\n                }\n              }\n            </style>\n          </head>\n          <body>\n            <div class="qrcode-grid">\n              '.concat(a.map((function(e,t){return'\n                <div class="qrcode-item">\n                  <img src="'.concat(e,'" alt="登录二维码">\n                </div>\n              ')})).join(""),"\n            </div>\n          </body>\n        </html>\n      ")),r.document.close(),setTimeout((function(){r.print()}),500);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()),"downloadSelectedQRCodes",function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,n,a,r,i,c,l,d,u=this;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.qrCodeList.filter((function(e){return e.selected})),0!==t.length){e.next=4;break}return this.$message.warning("请至少选择一个二维码"),e.abrupt("return");case 4:if(1!==t.length){e.next=16;break}return n=t[0],e.next=8,this.createQRCodeWithInfo(n.qrCode,n.nickName,n.userName);case 8:return a=e.sent,(r=document.createElement("a")).download="登录码_".concat(n.nickName,"_").concat(n.userName,".png"),r.href=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),e.abrupt("return");case 16:return i=new f.a,c=t.map(function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var n,a,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.createQRCodeWithInfo(t.qrCode,t.nickName,t.userName);case 2:return n=e.sent,e.next=5,fetch(n);case 5:return a=e.sent,e.next=8,a.blob();case 8:r=e.sent,i.file("登录码_".concat(t.nickName,"_").concat(t.userName,".png"),r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=20,Promise.all(c);case 20:return e.next=22,i.generateAsync({type:"blob"});case 22:l=e.sent,(d=document.createElement("a")).download="登录二维码.zip",d.href=URL.createObjectURL(l),document.body.appendChild(d),d.click(),document.body.removeChild(d);case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()),"handleSelectAll",(function(e){this.qrCodeList.forEach((function(t){t.selected=e}))})),"createQRCodeWithInfo",function(){var e=Object(o.a)(Object(s.a)().mark((function e(t,n,a){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=document.createElement("canvas"),i=r.getContext("2d"),s=new Image;r.width=300,r.height=380,i.fillStyle="#ffffff",i.fillRect(0,0,r.width,r.height),s.onload=function(){i.drawImage(s,50,30,200,200),i.fillStyle="#333333",i.font="14px Arial",i.textAlign="center",i.beginPath(),i.strokeStyle="#EBEEF5",i.moveTo(30,250),i.lineTo(270,250),i.stroke(),i.fillText("用户名：".concat(n),r.width/2,280),i.fillText("账号：".concat(a),r.width/2,310),e(r.toDataURL("image/png"))},s.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),"downloadQRCode",function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createQRCodeWithInfo(this.currentQRCode,this.currentUser.nickName,this.currentUser.userName);case 2:t=e.sent,(n=document.createElement("a")).download="登录码_".concat(this.currentUser.nickName,"_").concat(this.currentUser.userName,".png"),n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()),"downloadSelectedQRCodes",function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,n,a,r,i,c,l,d,u=this;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.qrCodeList.filter((function(e){return e.selected})),0!==t.length){e.next=4;break}return this.$message.warning("请至少选择一个二维码"),e.abrupt("return");case 4:if(1!==t.length){e.next=16;break}return n=t[0],e.next=8,this.createQRCodeWithInfo(n.qrCode,n.nickName,n.userName);case 8:return a=e.sent,(r=document.createElement("a")).download="登录码_".concat(n.nickName,"_").concat(n.userName,".png"),r.href=a,document.body.appendChild(r),r.click(),document.body.removeChild(r),e.abrupt("return");case 16:return i=new f.a,c=t.map(function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var n,a,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.createQRCodeWithInfo(t.qrCode,t.nickName,t.userName);case 2:return n=e.sent,e.next=5,fetch(n);case 5:return a=e.sent,e.next=8,a.blob();case 8:r=e.sent,i.file("登录码_".concat(t.nickName,"_").concat(t.userName,".png"),r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=20,Promise.all(c);case 20:return e.next=22,i.generateAsync({type:"blob"});case 22:l=e.sent,(d=document.createElement("a")).download="登录二维码.zip",d.href=URL.createObjectURL(l),document.body.appendChild(d),d.click(),document.body.removeChild(d);case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()),"printSelectedQRCodes",function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,n,a,r,i=this;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.qrCodeList.filter((function(e){return e.selected})),0!==t.length){e.next=4;break}return this.$message.warning("请至少选择一个二维码"),e.abrupt("return");case 4:return n=t.map((function(e){return i.createQRCodeWithInfo(e.qrCode,e.nickName,e.userName)})),e.next=7,Promise.all(n);case 7:a=e.sent,(r=window.open("","_blank")).document.write('\n        <html>\n          <head>\n            <title>批量打印二维码</title>\n            <style>\n              body { \n                padding: 20px;\n                font-family: Arial, sans-serif;\n              }\n              .qrcode-grid {\n                display: grid;\n                grid-template-columns: repeat(2, 1fr);\n                gap: 20px;\n              }\n              .qrcode-item {\n                text-align: center;\n                padding: 15px;\n                border: 1px solid #eee;\n                page-break-inside: avoid;\n              }\n              .qrcode-item img {\n                width: 300px;\n                height: 380px;\n              }\n              @media print {\n                .qrcode-item {\n                  border: none;\n                }\n              }\n            </style>\n          </head>\n          <body>\n            <div class="qrcode-grid">\n              '.concat(a.map((function(e,t){return'\n                <div class="qrcode-item">\n                  <img src="'.concat(e,'" alt="登录二维码">\n                </div>\n              ')})).join(""),"\n            </div>\n          </body>\n        </html>\n      ")),r.document.close(),setTimeout((function(){r.print()}),500);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()),Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(a,"handleSizeChange",(function(e){this.listQuery.limit=e,this.fetchData()})),"handleCurrentChange",(function(e){this.listQuery.page=e,this.fetchData()})),"handleImport",(function(){this.importDialogVisible=!0})),"beforeUpload",(function(e){var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel"===e.type,n=e.size/1024/1024<2;return t?!!n||(this.$message.error("文件大小不能超过 2MB!"),!1):(this.$message.error("只能上传 Excel 文件!"),!1)})),"handleUploadSuccess",function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var n,a=this;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.raw){e.next=3;break}return this.$message.error("无效的文件"),e.abrupt("return");case 3:try{(n=new FileReader).onload=function(){var e=Object(o.a)(Object(s.a)().mark((function e(t){var n,r,i,o,l;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new Uint8Array(t.target.result),r=_.a.read(n,{type:"array"}),i=r.Sheets[r.SheetNames[0]],o=_.a.utils.sheet_to_json(i),l=[],o.map((function(e){var t={userName:e.userName,password:e.password||"dc123456",nickName:e.nickName,phone:e.phone,department:e.department,position:e.position,status:"true"===e.status||!0===e.status};l.push(t)})),console.log(l),e.next=10,Object(c.a)("user_login",l);case 10:a.$message.success("导入成功"),a.importDialogVisible=!1,a.fetchData(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("处理数据失败:",e.t0),a.$message.error("导入失败：数据格式错误");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),n.onerror=function(){a.$message.error("文件读取失败")},n.readAsArrayBuffer(t.raw)}catch(e){console.error("导入失败:",e),this.$message.error("导入失败")}case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),"handleUploadError",(function(e){console.error("上传失败:",e),this.$message.error("文件上传失败")})),"downloadTemplate",(function(){var e=_.a.utils.book_new(),t=_.a.utils.json_to_sheet([{userName:"示例账号",password:"默认密码",nickName:"张三",phone:"13800138000",department:"技术部",position:"工程师",status:"true"}]);t["!cols"]=[{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:20}],_.a.utils.book_append_sheet(e,t,"用户导入模板");var n=_.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});g.a.saveAs(new Blob([n],{type:"application/octet-stream"}),"用户导入模板.xlsx")})))},C=w,x=(n("be4b"),n("2877")),k=Object(x.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"screen"},[n("div",{staticClass:"screen_content"},[n("div",{staticClass:"screen_content_first"},[n("i",{staticClass:"el-icon-search"},[e._v("筛选搜索")]),e._v(" "),n("div",{staticClass:"screen_content_first_btutton"},[n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:e.handleImport}},[e._v("\n            导入用户\n          ")]),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("\n            导出用户\n          ")]),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-document"},on:{click:e.downloadTemplate}},[e._v("\n            下载模板\n          ")])],1)]),e._v(" "),n("div",{staticClass:"screen_content_second"},[n("div",{staticClass:"screen_content_second_one"},[n("div",{staticStyle:{width:"140px"}},[e._v("用户名称:")]),e._v(" "),n("el-input",{attrs:{clearable:"",placeholder:"请输入用户名称"},on:{clear:function(t){return e.clearclick()}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.Search()}}},[e._v("查询搜索\n          ")])],1),e._v(" "),"超级管理员"==e.$store.state.user.roles?n("div",{staticClass:"screen_content_second_one"},[n("div",{staticStyle:{width:"80px"}},[e._v("用户角色:")]),e._v(" "),n("el-select",{staticStyle:{width:""},attrs:{filterable:"",placeholder:"请选择用户角色"},on:{change:e.searchrole,clear:function(t){return e.clearclick()}},model:{value:e.roledata,callback:function(t){e.roledata=t},expression:"roledata"}},e._l(e.userlist,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e()])])]),e._v(" "),n("div",{staticClass:"screen1"},[n("div",{staticClass:"screen_content"},[n("div",{staticClass:"screen_content_first"},[n("i",{staticClass:"el-icon-tickets"},[e._v("管理员列表")]),e._v(" "),n("div",{staticClass:"screen_content_first_btutton"},[n("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.AddFilter}},[e._v("添加管理人员\n          ")]),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-printer",type:"success"},on:{click:e.showBatchQRCode}},[e._v("\n            批量打印二维码\n          ")])],1)])])]),e._v(" "),n("div",{staticClass:"filter-container"}),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.categorylist,border:"","element-loading-text":"Loading",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"用户名称","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"link-type"},[e._v(e._s(t.row.nickName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"账号","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.userName))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"密码","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.password))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"用户角色","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.role?t.row.role.name:"无")+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"审核状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?n("el-tag",{attrs:{type:"success"}},[e._v("在线")]):n("el-tag",{attrs:{type:"warning"}},[e._v("不在线")])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"created_at","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),e._v(" "),n("span",[e._v(e._s(e._f("parseTime")(t.row.createAt,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"登录二维码","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.showQRCode(t.row)}}},[e._v("\n          查看二维码\n        ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-button",{staticStyle:{"margin-right":"8px"},attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleEdit(a)}}},[e._v("\n          编辑\n        ")]),e._v(" "),n("el-button",{staticStyle:{"margin-right":"8px"},attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a)}}},[e._v("\n          删除\n        ")]),e._v(" "),a.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handisshow(a)}}},[e._v("\n          下线\n        ")]):n("el-button",{staticStyle:{"margin-right":"8px"},attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handisshow(a)}}},[e._v("\n          上线\n        ")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogFormVisible,title:"管理人员信息"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{"label-position":"left","label-width":"70px"}},[n("el-form-item",{attrs:{label:"用户账号","label-width":"120"}},[n("el-input",{attrs:{placeholder:"管理人员的账号"},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"用户密码","label-width":"120"}},[n("el-input",{attrs:{placeholder:"请输入管理人员的密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"联系姓名","label-width":"120"}},[n("el-input",{attrs:{placeholder:"请输入管理人员的姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"联系方式","label-width":"120"}},[n("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"用户角色","label-width":"120"}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择用户角色"},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},e._l(e.userlist,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e._id}})})),1)],1),e._v(" "),"create"===e.dialogStatus&&e.qrCodeUrl?n("el-form-item",{attrs:{label:"登录码","label-width":"120"}},[n("div",{staticClass:"qrcode-container"},[n("img",{attrs:{src:e.qrCodeUrl,alt:"登录二维码"}}),e._v(" "),n("div",{staticClass:"qrcode-info"},[n("p",{staticClass:"qrcode-tip"},[e._v("请保存此登录二维码，可用于快速登录")])]),e._v(" "),n("div",{staticClass:"qrcode-buttons"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.printQRCode}},[n("i",{staticClass:"el-icon-printer"}),e._v(" 打印二维码\n            ")]),e._v(" "),n("el-button",{attrs:{type:"success",size:"small"},on:{click:e.downloadQRCode}},[n("i",{staticClass:"el-icon-download"}),e._v(" 下载二维码\n            ")])],1)])]):e._e()],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"==e.dialogStatus?e.createData():e.editData()}}},[e._v("确定\n      ")])],1)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.qrCodeDialogVisible,title:"登录二维码",width:"400px"},on:{"update:visible":function(t){e.qrCodeDialogVisible=t}}},[n("div",{staticClass:"qrcode-container"},[n("img",{attrs:{src:e.currentQRCode,alt:"登录二维码"}}),e._v(" "),n("div",{staticClass:"qrcode-info"},[n("p",[n("span",{staticClass:"info-label"},[e._v("用户名：")]),e._v(e._s(e.currentUser.nickName))]),e._v(" "),n("p",[n("span",{staticClass:"info-label"},[e._v("账号：")]),e._v(e._s(e.currentUser.userName))]),e._v(" "),n("p",{staticClass:"qrcode-tip"},[e._v("扫描二维码可快速登录系统")])]),e._v(" "),n("div",{staticClass:"qrcode-buttons"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.printQRCode}},[n("i",{staticClass:"el-icon-printer"}),e._v(" 打印二维码\n        ")]),e._v(" "),n("el-button",{attrs:{type:"success",size:"small"},on:{click:e.downloadQRCode}},[n("i",{staticClass:"el-icon-download"}),e._v(" 下载二维码\n        ")])],1)])]),e._v(" "),n("el-dialog",{attrs:{visible:e.batchQRCodeVisible,title:"批量二维码管理",width:"800px"},on:{"update:visible":function(t){e.batchQRCodeVisible=t}}},[n("div",{staticClass:"batch-qrcode-container"},[n("div",{staticClass:"batch-actions"},[n("el-checkbox",{on:{change:e.handleSelectAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}},[e._v("全选")]),e._v(" "),n("div",{staticClass:"action-buttons"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.printSelectedQRCodes}},[n("i",{staticClass:"el-icon-printer"}),e._v(" 打印选中\n          ")]),e._v(" "),n("el-button",{attrs:{type:"success",size:"small"},on:{click:e.downloadSelectedQRCodes}},[n("i",{staticClass:"el-icon-download"}),e._v(" 下载选中\n          ")])],1)],1),e._v(" "),n("div",{staticClass:"qrcode-list"},e._l(e.qrCodeList,(function(t){return n("el-card",{key:t.id,staticClass:"qrcode-item"},[n("div",{staticClass:"qrcode-checkbox"},[n("el-checkbox",{model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"item.selected"}})],1),e._v(" "),n("img",{attrs:{src:t.qrCode,alt:"登录二维码"}}),e._v(" "),n("div",{staticClass:"qrcode-info"},[n("p",[n("span",{staticClass:"info-label"},[e._v("用户名：")]),e._v(e._s(t.nickName))]),e._v(" "),n("p",[n("span",{staticClass:"info-label"},[e._v("账号：")]),e._v(e._s(t.userName))])])])})),1)])]),e._v(" "),n("el-dialog",{attrs:{title:"导入用户",visible:e.importDialogVisible,width:"400px"},on:{"update:visible":function(t){e.importDialogVisible=t}}},[n("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#","auto-upload":!1,"on-change":e.handleUploadSuccess,"before-upload":e.beforeUpload,"show-file-list":!1}},[n("i",{staticClass:"el-icon-upload"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),n("em",[e._v("点击上传")])]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传 xlsx/xls 文件，且不超过 2MB")])])],1),e._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)}),[],!1,null,"86df6644",null);t.default=k.exports}}]);