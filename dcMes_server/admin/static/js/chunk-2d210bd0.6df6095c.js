(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d210bd0"],{b8bf:function(e,t,n){"use strict";n.r(t);var a=n("c7eb"),r=(n("96cf"),n("1da1")),s=n("7e1e"),c={name:"TaskSelect",props:{value:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,options:[],selectedTasks:[]}},watch:{value:{immediate:!0,handler:function(e){this.selectedTasks=e,e&&e.length>0&&this.fetchSelectedTasks(e)}}},methods:{remoteSearch:function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=18;break}return this.loading=!0,e.prev=2,e.next=5,Object(s.b)("task",{query:{title:{$regex:t,$options:"i"}},limit:20});case 5:n=e.sent,this.options=n.data,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),this.$message.error("搜索任务失败");case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:e.next=19;break;case 18:this.options=[];case 19:case"end":return e.stop()}}),e,this,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}(),fetchSelectedTasks:function(){var e=Object(r.a)(Object(a.a)().mark((function e(t){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(s.b)("task",{query:{_id:{$in:t}}});case 5:n=e.sent,this.options=n.data,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),handleChange:function(e){this.$emit("input",e)}}},i=c,o=n("2877"),l=Object(o.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入任务标题搜索","remote-method":e.remoteSearch,loading:e.loading},on:{change:e.handleChange},model:{value:e.selectedTasks,callback:function(t){e.selectedTasks=t},expression:"selectedTasks"}},e._l(e.options,(function(t){return n("el-option",{key:t._id,attrs:{label:t.title,value:t._id}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(t.title))]),e._v(" "),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("\n      "+e._s(t.type)+"\n    ")])])})),1)}),[],!1,null,null,null);t.default=l.exports}}]);