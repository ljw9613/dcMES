(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-commons"],{"3b8b":function(e,t,n){"use strict";var s=n("c7eb"),o=(n("96cf"),n("1da1")),a=n("77d2"),i=n("7e1e"),c=(n("9339"),{name:"WorkDialog",props:{materialId:{type:String,default:""},visible:{type:Boolean,default:!1},workTableData:{type:Array,default:function(){return[]}}},data:function(){return{workColumns:[{prop:"processName",label:"工序名称"},{prop:"processCode",label:"工序编号"},{prop:"sort",label:"工序顺序"}]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},watch:{visible:function(e){}},methods:{handleClose:function(){this.dialogVisible=!1},refreshMachineStatus:function(){var e=this;if(this.workTableData.length){var t=this.workTableData.map((function(e){return e.machineId&&e.machineId._id}));t.length?Object(a.b)({machineIds:t}).then((function(t){console.log(t),e.$message.success("设备在线状态刷新成功")})):this.$message.warning("当前无可刷新设备")}else this.$message.warning("请先选择工序")},confirmWork:function(){var e=Object(o.a)(Object(s.a)().mark((function e(){var t,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=0;case 2:if(!(t<this.workTableData.length)){e.next=11;break}if(n=this.workTableData[t],console.log(n),!n.machineId||!n.machineId._id){e.next=8;break}return e.next=8,Object(i.d)("machine",{query:{_id:n.machineId._id},update:{processStepId:n._id,materialId:this.materialId}});case 8:t++,e.next=2;break;case 11:this.$message.success("生产设备对应当前生产工序已替换"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this.$message.error("启动生产任务失败");case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}()}}),r=c,l=(n("a771"),n("2877")),u=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"生产工序设备确认","append-to-body":"",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.workTableData}},[e._l(e.workColumns,(function(t){return n("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label},scopedSlots:e._u([{key:"default",fn:function(s){return[n("span",[e._v("\n                    "+e._s(s.row[t.prop])+"\n                ")])]}}],null,!0)})})),e._v(" "),n("el-table-column",{attrs:{prop:"machineId",label:"设备信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{class:{"error-row":!t.row.machineId}},[t.row.machineId?[e._v("\n                        "+e._s(t.row.machineId.machineName)+"\n                        "),n("el-tag",[e._v(" ("+e._s(t.row.machineId.machineIp)+", "+e._s(t.row.machineId.machineCode)+")")])]:[e._v("\n                        未绑定设备\n                    ")]],2)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"machineId.status",label:"设备在线状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{class:{"error-row":!t.row.machineId}},[t.row.machineId?[n("el-tag",{attrs:{type:t.row.machineId.status?"success":"danger"}},[e._v("\n                            "+e._s(t.row.machineId.status?"在线":"离线")+"\n                        ")])]:[e._v("\n                        未绑定设备\n                    ")]],2)]}}])})],2),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmWork}},[e._v("一键替换")]),e._v(" "),n("el-button",{attrs:{type:"warning"},on:{click:e.refreshMachineStatus}},[e._v("设备在线刷新")])],1)],1)}),[],!1,null,"b57093aa",null);t.a=u.exports},"49e2":function(e,t,n){"use strict";n("ff8b")},"5aee":function(e,t,n){"use strict";var s=n("7624"),o={name:"IconSelects",props:["IconData"],data:function(){return{userChooseIcon:"",chooseIcons:"请选择图标",iconList:[]}},watch:{IconData:function(e){e&&(console.log(e),this.userChooseIcon=e,this.chooseIcons=e)}},created:function(){this.iconList=s.a},methods:{editClicks:function(){this.userChooseIcon=this.IconData,this.chooseIcons=this.IconData},setIcon:function(e){console.log(e),this.userChooseIcon=e,this.chooseIcons=e,this.$emit("update:IconData",e)}}},a=o,i=(n("49e2"),n("2877")),c=Object(i.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chooseIcons"},[n("el-popover",{attrs:{placement:"top-start","append-to-body":!1,width:"30vw",trigger:"click"}},[n("div",{staticClass:"iconDiv",attrs:{slot:"reference"},slot:"reference"},[n("div",{staticClass:"iconName"},[n("i",{class:e.userChooseIcon}),e._v("\n         "+e._s(e.chooseIcons))])]),e._v(" "),n("div",{staticClass:"iconList"},e._l(e.iconList,(function(t){return n("i",{key:t,class:[t,"icon"],staticStyle:{"font-size":"20px"},on:{click:function(n){return e.setIcon(t)}}})})),0)])],1)}),[],!1,null,"3b31ed31",null);t.a=c.exports},"88c3":function(e,t,n){},a771:function(e,t,n){"use strict";n("88c3")},ff8b:function(e,t,n){}}]);