(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2e247dad"],{"7c64":function(t,e,a){"use strict";a.r(e);var n=a("5530"),i=a("c7eb"),s=(a("96cf"),a("1da1")),l=a("7e1e"),r=a("32db"),o=a("dacb"),c={filters:{},components:{UploadList:r.a,WangEditor:o.a},data:function(){return{inputVisible:!1,inputValue:"",tableList:[],total:0,currentPage:1,pageSize:10,newsType:"",newsTitle:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{newsTitle:"",newsType:"",newsContent:"",publishDate:null,tags:[],image:"",newsTitle_en:"",newsType_en:"",newsContent_en:""}}},created:function(){this.fetchData()},beforeCreate:function(){},methods:{handleInputConfirm:function(){var t=this.inputValue.trim();t&&this.dataForm.tags.push(t),this.inputVisible=!1,this.inputValue=""},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleClose:function(t){var e=this.dataForm.tags.indexOf(t);-1!==e&&this.dataForm.tags.splice(e,1)},baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeDialog:function(){this.dialogFormVisible=!1,this.clearForm()},clearForm:function(){this.dataForm={newsTitle:"",newsType:"",newsContent:"",publishDate:null,tags:[],image:""}},fetchData:function(){var t=Object(s.a)(Object(i.a)().mark((function t(){var e,a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:{newsTitle:{$regex:this.newsTitle}},limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(l.b)("companyNews",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dataForm=Object(n.a)({},t),this.dialogStatus="edit"},handleDelete:function(t){var e=this;this.$confirm("删除商品",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(s.a)(Object(i.a)().mark((function a(){var n;return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n={query:{_id:t._id}},Object(l.c)("companyNews",n).then(function(){var t=Object(s.a)(Object(i.a)().mark((function t(a){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"delete Successfully",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},AddNews:function(){this.dataForm={newsTitle:"",newsType:"",newsContent:"",publishDate:null,tags:[],image:"",newsTitle_en:"",newsType_en:"",newsContent_en:""},this.dialogFormVisible=!0,this.dialogStatus="create"},createNews:function(){var t=Object(s.a)(Object(i.a)().mark((function t(){var e;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.newsTitle||""==this.dataForm.newsType||""==this.dataForm.newsContent||""==this.dataForm.publishDate||""==this.dataForm.image){t.next=10;break}if(e=Object(n.a)({},this.dataForm),!this.validateForm()){t.next=8;break}return t.next=6,Object(l.a)("companyNews",e);case 6:200===t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({title:"添加成功",message:"添加成功",type:"success",duration:2e3})):this.$notify({title:"添加失败",message:"添加失败，请重试",type:"error",duration:2e3});case 8:t.next=11;break;case 10:this.$notify({title:"请填写必要信息",message:"新闻标题为必填项",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editNews:function(){var t=Object(s.a)(Object(i.a)().mark((function t(){var e;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.newsTitle||""==this.dataForm.newsType||""==this.dataForm.newsContent||""==this.dataForm.publishDate){t.next=10;break}return e={query:{_id:this.dataForm._id},update:Object(n.a)({},this.dataForm)},t.next=6,Object(l.d)("companyNews",e);case 6:200===t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({title:"修改成功",message:"修改成功",type:"success",duration:2e3})):this.$notify({title:"修改失败",message:"修改失败，请重试",type:"error",duration:2e3}),t.next=11;break;case 10:this.$notify({title:"请填写必要信息",message:"新闻标题为必填项",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),validateForm:function(){return""!==this.dataForm.newsTitle},search:function(){this.fetchData()}}},u=c,d=(a("b505"),a("2877")),p=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[t._v("新闻标题:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入新闻标题"},model:{value:t.newsTitle,callback:function(e){t.newsTitle=e},expression:"newsTitle"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("查询搜索\n          ")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("公司新闻列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddNews}},[t._v("添加公司新闻\n        ")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"新闻标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.newsTitle))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"新闻封面",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.image,alt:"新闻封面"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"新闻类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.newsType)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上传时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.parseTime(e.row.publishDate,"{y}-{m}-{d} {h}:{i}"))+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"新闻标签",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.tags,(function(e,n){return a("el-tag",{key:n},[t._v("\n            "+t._s(e)+"\n          ")])}))}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(n)}}},[t._v("编辑查看\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(n)}}},[t._v("删除\n          ")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"公司新闻信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"dataForm",staticStyle:{width:"100%"},attrs:{inline:!0,"label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{required:"",label:"新闻标题"}},[a("el-input",{attrs:{placeholder:"新闻标题"},model:{value:t.dataForm.newsTitle,callback:function(e){t.$set(t.dataForm,"newsTitle",e)},expression:"dataForm.newsTitle"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"新闻封面"}},[a("ZrFile",{attrs:{max:1,value:t.dataForm.image},on:{"update:value":function(e){return t.$set(t.dataForm,"image",e)}}})],1),t._v(" "),a("el-form-item",{attrs:{label:"发布时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.dataForm.publishDate,callback:function(e){t.$set(t.dataForm,"publishDate",e)},expression:"dataForm.publishDate"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"新闻类型"}},[a("el-select",{attrs:{placeholder:"请选择新闻类型"},model:{value:t.dataForm.newsType,callback:function(e){t.$set(t.dataForm,"newsType",e)},expression:"dataForm.newsType"}},[a("el-option",{attrs:{label:"公司新闻",value:"公司新闻"}}),t._v(" "),a("el-option",{attrs:{label:"行业资讯",value:"行业资讯"}}),t._v(" "),a("el-option",{attrs:{label:"企业文化",value:"企业文化"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"新闻标签","label-width":"120"}},[t._l(t.dataForm.tags,(function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(e)}}},[t._v("\n                  "+t._s(e)+"\n                ")])})),t._v(" "),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("英文")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:"12"}},[a("el-form-item",{attrs:{label:"新闻标题(Title)"}},[a("el-input",{attrs:{placeholder:"title"},model:{value:t.dataForm.newsTitle_en,callback:function(e){t.$set(t.dataForm,"newsTitle_en",e)},expression:"dataForm.newsTitle_en"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:"12"}},[a("el-form-item",{attrs:{label:"新闻类型（Type）"}},[a("el-select",{attrs:{placeholder:"select a news type"},model:{value:t.dataForm.newsType_en,callback:function(e){t.$set(t.dataForm,"newsType_en",e)},expression:"dataForm.newsType_en"}},[a("el-option",{attrs:{label:"公司新闻(Company News)",value:"Company News"}}),t._v(" "),a("el-option",{attrs:{label:"行业资讯(Industry information)",value:"Industry information"}}),t._v(" "),a("el-option",{attrs:{label:"企业文化(corporate culture)",value:"corporate culture"}})],1)],1)],1)],1)],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("新闻内容")]),t._v(" "),a("WangEditor",{attrs:{value:t.dataForm.newsContent},on:{"update:value":function(e){return t.$set(t.dataForm,"newsContent",e)}}}),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("新闻内容（Content）")]),t._v(" "),a("WangEditor",{attrs:{value:t.dataForm.newsContent_en},on:{"update:value":function(e){return t.$set(t.dataForm,"newsContent_en",e)}}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createNews():t.editNews()}}},[t._v("确定\n      ")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"7116b870",null);e.default=p.exports},"8d93":function(t,e,a){},b505:function(t,e,a){"use strict";a("8d93")}}]);