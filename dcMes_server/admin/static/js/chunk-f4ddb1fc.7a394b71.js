(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f4ddb1fc","chunk-802040da","chunk-2da4d1b6","chunk-4c3a0513","chunk-2d222794"],{2:function(t,e){},2268:function(t,e,a){"use strict";a("7059")},"23e2":function(t,e,a){"use strict";a("fae1")},3:function(t,e){},"3e48":function(t,e,a){"use strict";a.r(e);var s=a("c466"),r={name:"TaskClaimDetails",props:{visible:{type:Boolean,default:!1},details:{type:Object,default:function(){return{}}}},data:function(){return{isTimelineExpanded:!1}},methods:{handleClose:function(){this.$emit("update:visible",!1)},formatDate:function(t){return Object(s.a)(t,"yyyy-MM-dd HH:mm")},formatNumber:function(t){return Object(s.b)(t)},getClaimStatusType:function(t){return{"å¾…å®¡æ ¸":"warning","å·²é€šè¿‡":"success","å·²æ‹’ç»":"danger"}[t]||"info"},getProgressStatusType:function(t){return{"æœªå¼€å§‹":"info","æ²Ÿé€šä¸­":"warning","åˆä½œæˆåŠŸ":"success","å¯„é€æ ·å“":"primary","æ ·å“è·Ÿè¸ª":"primary","å·²æ”¶è´§":"success","å†…å®¹åˆ¶ä½œä¸­":"primary","ä½œå“å·²å‘å¸ƒ":"success","æ•°æ®ç»Ÿè®¡ä¸­":"warning","å·²å®Œæˆ":"success","å·²å–æ¶ˆ":"danger","åˆä½œå¤±è´¥":"danger"}[t]||"info"},getTimelineItemType:function(t){return{"æœªå¼€å§‹":"info","æ²Ÿé€šä¸­":"warning","æ‰§è¡Œä¸­":"primary","å·²å®Œæˆ":"success","å·²å–æ¶ˆ":"danger"}[t]||"info"}}},i=r,n=(a("2268"),a("2877")),l=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"ä»»åŠ¡è¯¦æƒ…",visible:t.visible,width:"70%","close-on-click-modal":!1,"custom-class":"claim-details-dialog","append-to-body":""},on:{"update:visible":function(e){t.visible=e},close:t.handleClose}},[a("div",{staticClass:"claim-details"},[a("div",{staticClass:"detail-section"},[a("div",{staticClass:"section-title"},[t._v("åŸºæœ¬ä¿¡æ¯")]),t._v(" "),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("ç»çºªäºº")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.details.agentName))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("å…³è”è¾¾äºº")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.details.expertName))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("è®¤é¢†çŠ¶æ€")]),t._v(" "),a("div",{staticClass:"info-content"},[a("el-tag",{attrs:{type:t.getClaimStatusType(t.details.claimStatus)}},[t._v("\n              "+t._s(t.details.claimStatus)+"\n            ")])],1)]),t._v(" "),a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("è®¤é¢†æ—¶é—´")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.formatDate(t.details.claimTime)))])]),t._v(" "),a("div",{staticClass:"info-item full-width"},[a("div",{staticClass:"info-label"},[t._v("è®¤é¢†è¯´æ˜")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.details.remark||"æ— "))])])])]),t._v(" "),a("div",{staticClass:"detail-section"},[a("div",{staticClass:"section-title",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[a("span",[t._v("è¿›åº¦è®°å½•")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.isTimelineExpanded=!t.isTimelineExpanded}}},[t._v("\n          "+t._s(t.isTimelineExpanded?"æ”¶èµ·":"å±•å¼€")+"\n          "),a("i",{class:t.isTimelineExpanded?"el-icon-arrow-up":"el-icon-arrow-down"})])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isTimelineExpanded,expression:"isTimelineExpanded"}],staticClass:"progress-timeline"},[a("el-timeline",t._l(t.details.progressSteps,(function(e,s){return a("el-timeline-item",{key:s,attrs:{timestamp:t.formatDate(e.updateTime),type:t.getTimelineItemType(e.status)}},[a("div",{staticClass:"progress-item"},[a("div",{staticClass:"progress-header"},[a("el-tag",{attrs:{type:t.getProgressStatusType(e.status),size:"small"}},[t._v("\n                  "+t._s(e.status)+"\n                ")]),t._v(" "),a("span",{staticClass:"progress-step"},[t._v(t._s(e.step))])],1),t._v(" "),e.remark?a("div",{staticClass:"progress-remark"},[t._v("\n                "+t._s(e.remark)+"\n              ")]):t._e()])])})),1)],1)]),t._v(" "),t.details.result&&t.details.result.contentList?a("div",{staticClass:"detail-section"},[a("div",{staticClass:"section-title"},[t._v("æ‰§è¡Œç»“æœ")]),t._v(" "),a("div",{staticClass:"result-section"},[a("div",{staticClass:"sub-title"},[t._v("å†…å®¹åˆ—è¡¨")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.details.result.contentList,border:"",size:"small"}},[a("el-table-column",{attrs:{label:"å¹³å°",prop:"platform",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"ç±»å‹",prop:"type",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"å‘å¸ƒæ—¶é—´",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.formatDate(e.row.publishTime))+"\n            ")]}}],null,!1,2436397959)}),t._v(" "),a("el-table-column",{attrs:{label:"é“¾æ¥"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",href:e.row.link,target:"_blank"}},[t._v("\n                "+t._s(e.row.link)+"\n              ")])]}}],null,!1,422598859)}),t._v(" "),a("el-table-column",{attrs:{label:"è§†é¢‘ä»£ç ",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.videoCode?a("span",[t._v(t._s(e.row.videoCode))]):a("span",[t._v("-")])]}}],null,!1,2314334044)}),t._v(" "),a("el-table-column",{attrs:{label:"å†…å®¹æ•ˆæœæ•°æ®"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"performance-data"},[a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-video-play"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("æ’­æ”¾é‡")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.views))+"\n                  ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("ç‚¹èµæ•°")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.likes))+"\n                  ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("è¯„è®ºæ•°")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.comments||0))+"\n                  ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-share"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("æ€»åˆ†äº«æ•°")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.shares||0))+"\n                  ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-money"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("è§†é¢‘GMV")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.videoGmv||0))+"\n                  ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-money"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("ç›´æ’­GMV")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.liveGmv||0))+"\n                  ")])])])]}}],null,!1,3232213187)})],1)],1),t._v(" "),a("div",{staticClass:"result-section"},[a("div",{staticClass:"sub-title"},[t._v("æ•ˆæœæ•°æ®")]),t._v(" "),a("div",{staticClass:"data-grid"},[a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-video-play"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("æ€»æ’­æ”¾é‡:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              "+t._s(t.formatNumber(t.details.result.totalPerformance.totalViews||0))+"\n            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("æ€»ç‚¹èµæ•°:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              "+t._s(t.formatNumber(t.details.result.totalPerformance.totalLikes||0))+"\n            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("æ€»è¯„è®ºæ•°:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              "+t._s(t.formatNumber(t.details.result.totalPerformance.totalComments||0))+"\n            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-share"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("æ€»åˆ†äº«æ•°:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              "+t._s(t.formatNumber(t.details.result.totalPerformance.totalShares||0))+"\n            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-money"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("æ€»è§†é¢‘GMV:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              Â¥"+t._s(t.formatNumber(t.details.result.totalPerformance.totalVideoGmv||0))+"\n            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-money"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("æ€»ç›´æ’­GMV:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              Â¥"+t._s(t.formatNumber(t.details.result.totalPerformance.totalLiveGmv||0))+"\n            ")])])])])]):t._e()])])}),[],!1,null,"662b5f48",null);e.default=l.exports},4:function(t,e){},"6c29b":function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=(a("96cf"),a("1da1")),i=a("5530"),n=a("c466"),l=a("7e1e"),o={dicts:["expert_platform","task_type","content_type"],components:{TagInput:a("b5c9").a},name:"TaskResultDialog",props:{visible:{type:Boolean,default:!1},currentClaim:{type:Object,default:function(){return{}}},taskInfo:{type:Object,default:function(){return{}}}},data:function(){return{resultForm:{contentList:[],totalPerformance:{totalViews:0,totalLikes:0,totalComments:0,totalShares:0,totalGmv:0}},resultRules:{contentList:{type:"array",required:!0,message:"è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªå†…å®¹",trigger:"change"}},productOptions:[{value:"äº§å“1",label:"äº§å“1"},{value:"äº§å“2",label:"äº§å“2"}]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}},getTotalViews:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.views||0)}),0)},getTotalLikes:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.likes||0)}),0)},getTotalComments:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.comments||0)}),0)},getTotalShares:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.shares||0)}),0)},getTotalVideoGmv:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.videoGmv||0)}),0)},getTotalLiveGmv:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.liveGmv||0)}),0)}},watch:{visible:function(t){t&&this.initForm()}},methods:{formatNumber:n.b,initForm:function(){this.resultForm={contentList:[],totalPerformance:{totalViews:0,totalLikes:0,totalComments:0,totalShares:0,totalGmv:0}},this.currentClaim.result&&this.currentClaim.result.contentList&&(this.resultForm.contentList=this.currentClaim.result.contentList.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{performanceData:Object(i.a)({views:0,likes:0,comments:0,shares:0,liveGmv:0,videoGmv:0,gmv:0},t.performanceData)})})))},addContent:function(){this.resultForm.contentList.push({platform:"",type:"",link:"",videoCode:"",adCode:"",products:[],publishTime:null,performanceData:{views:0,likes:0,comments:0,shares:0,liveGmv:0,videoGmv:0,gmv:0}})},removeContent:function(t){var e=this;this.$confirm("ç¡®å®šè¦åˆ é™¤è¯¥å†…å®¹å—ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then((function(){e.resultForm.contentList.splice(t,1)})).catch((function(){}))},handleCancel:function(){this.dialogVisible=!1},handleSubmit:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs.resultForm.validate();case 3:return e={totalViews:this.getTotalViews,totalLikes:this.getTotalLikes,totalComments:this.getTotalComments,totalShares:this.getTotalShares,totalGmv:this.getTotalGmv},t.next=6,Object(l.d)("taskClaim",{query:{_id:this.currentClaim._id},update:{result:{contentList:this.resultForm.contentList,totalPerformance:e},status:"æ•°æ®ç»Ÿè®¡ä¸­"}});case 6:return t.next=8,Object(l.d)("taskClaim",{query:{_id:this.currentClaim._id},update:{$push:{progressSteps:{step:"æäº¤æ‰§è¡Œç»“æœ",status:"æ•°æ®ç»Ÿè®¡ä¸­",updateTime:new Date,updatedBy:this.$store.getters.id,remark:"æäº¤äº†".concat(this.resultForm.contentList.length,"ä¸ªå†…å®¹çš„æ‰§è¡Œç»“æœ")}}}});case 8:return t.next=10,Object(l.a)("messageLog",{title:"ä»»åŠ¡ç»“æœæäº¤é€šçŸ¥",content:"ä»»åŠ¡ã€".concat(this.taskInfo.title,"ã€‘çš„æ‰§è¡Œç»“æœå·²æäº¤ï¼Œè¯·æŸ¥çœ‹"),type:"TASK_RESULT_SUBMITTED",taskId:this.currentClaim.taskId,taskClaimId:this.currentClaim._id,sender:{userId:this.$store.state.user.id,role:"TRACKER"},receivers:[{userId:this.currentClaim.agentId._id,role:"AGENT",isRead:!1},{userId:this.taskInfo.createBy,role:"ADMIN",isRead:!1}],isSystem:!1});case 10:this.$message.success("æ‰§è¡Œç»“æœæäº¤æˆåŠŸ"),this.dialogVisible=!1,this.$emit("submit-success"),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.error("æäº¤æ‰§è¡Œç»“æœå¤±è´¥:",t.t0),this.$message.error("æäº¤æ‰§è¡Œç»“æœå¤±è´¥");case 19:case"end":return t.stop()}}),t,this,[[0,15]])})));return function(){return t.apply(this,arguments)}}()}},c=o,u=(a("b695"),a("2877")),m=Object(u.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"æäº¤æ‰§è¡Œç»“æœ",visible:t.dialogVisible,width:"70%","custom-class":"result-dialog","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"resultForm",attrs:{model:t.resultForm,rules:t.resultRules,"label-width":"100px"}},[a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-video-camera"}),t._v("\n                å†…å®¹åˆ—è¡¨\n            ")]),t._v(" "),a("div",{staticClass:"content-list"},[t._l(t.resultForm.contentList,(function(e,s){return a("div",{key:s,staticClass:"content-item"},[a("div",{staticClass:"content-header"},[a("span",{staticClass:"content-index"},[t._v("å†…å®¹ #"+t._s(s+1))]),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.removeContent(s)}}})],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"å¹³å°",prop:"contentList."+s+".platform",rules:{required:!0,message:"è¯·é€‰æ‹©å¹³å°",trigger:"change"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©å¹³å°",clearable:""},model:{value:e.platform,callback:function(a){t.$set(e,"platform",a)},expression:"content.platform"}},t._l(t.dict.type.expert_platform,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"ç±»å‹",prop:"contentList."+s+".type",rules:{required:!0,message:"è¯·é€‰ç±»å‹",trigger:"change"}}},[a("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©å†…å®¹å½¢å¼",clearable:""},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"content.type"}},t._l(t.dict.type.content_type,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"å‘å¸ƒæ—¶é—´",prop:"contentList."+s+".publishTime",rules:{required:!0,message:"è¯·é€‰æ‹©å‘å¸ƒæ—¶é—´",trigger:"change"}}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"é€‰æ‹©å‘å¸ƒæ—¶é—´"},model:{value:e.publishTime,callback:function(a){t.$set(e,"publishTime",a)},expression:"content.publishTime"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"å†…å®¹é“¾æ¥",prop:"contentList."+s+".link",rules:{required:!0,message:"è¯·è¾“å…¥å†…å®¹é“¾æ¥",trigger:"blur"}}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥å†…å®¹é“¾æ¥"},model:{value:e.link,callback:function(a){t.$set(e,"link",a)},expression:"content.link"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"è§†é¢‘ä»£ç ",prop:"contentList."+s+".videoCode"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥è§†é¢‘/ç›´æ’­ä»£ç "},model:{value:e.videoCode,callback:function(a){t.$set(e,"videoCode",a)},expression:"content.videoCode"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"å¹¿å‘Šç ",prop:"contentList."+s+".adCode"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥å¹¿å‘Šç "},model:{value:e.adCode,callback:function(a){t.$set(e,"adCode",a)},expression:"content.adCode"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"å¸¦è´§äº§å“",prop:"contentList."+s+".products"}},[a("TagInput",{model:{value:e.products,callback:function(a){t.$set(e,"products",a)},expression:"content.products"}})],1),t._v(" "),a("div",{staticClass:"performance-data"},[a("div",{staticClass:"sub-title"},[t._v("æ•ˆæœæ•°æ®")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"æ’­æ”¾é‡",prop:"contentList."+s+".performanceData.views"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.views,callback:function(a){t.$set(e.performanceData,"views",a)},expression:"content.performanceData.views"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"ç‚¹èµæ•°",prop:"contentList."+s+".performanceData.likes"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.likes,callback:function(a){t.$set(e.performanceData,"likes",a)},expression:"content.performanceData.likes"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"è¯„è®ºæ•°",prop:"contentList."+s+".performanceData.comments"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.comments,callback:function(a){t.$set(e.performanceData,"comments",a)},expression:"content.performanceData.comments"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"ç‚¹èµæ•°",prop:"contentList."+s+".performanceData.likes"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.likes,callback:function(a){t.$set(e.performanceData,"likes",a)},expression:"content.performanceData.likes"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"è¯„è®ºæ•°",prop:"contentList."+s+".performanceData.comments"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.comments,callback:function(a){t.$set(e.performanceData,"comments",a)},expression:"content.performanceData.comments"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"åˆ†äº«æ•°",prop:"contentList."+s+".performanceData.shares"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.shares,callback:function(a){t.$set(e.performanceData,"shares",a)},expression:"content.performanceData.shares"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"ç›´æ’­GMV",prop:"contentList."+s+".performanceData.liveGmv"}},[a("el-input-number",{attrs:{min:0,precision:2,"controls-position":"right"},model:{value:e.performanceData.liveGmv,callback:function(a){t.$set(e.performanceData,"liveGmv",a)},expression:"content.performanceData.liveGmv"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"è§†é¢‘GMV",prop:"contentList."+s+".performanceData.videoGmv"}},[a("el-input-number",{attrs:{min:0,precision:2,"controls-position":"right"},model:{value:e.performanceData.videoGmv,callback:function(a){t.$set(e.performanceData,"videoGmv",a)},expression:"content.performanceData.videoGmv"}})],1)],1)],1)],1)],1)})),t._v(" "),a("div",{staticClass:"add-content-btn"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:t.addContent}},[t._v("\n                        æ·»åŠ å†…å®¹\n                    ")])],1)],2)]),t._v(" "),a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-data-analysis"}),t._v("\n                åˆè®¡æ•ˆæœæ•°æ®\n            ")]),t._v(" "),a("div",{staticClass:"total-performance"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-video-play"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("æ€»æ’­æ”¾é‡")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalViews)))])])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-star-on"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("æ€»ç‚¹èµæ•°")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalLikes)))])])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-chat-dot-round"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("æ€»è¯„è®ºæ•°")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalComments)))])])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-share"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("æ€»åˆ†äº«æ•°")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalShares)))])])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-money"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("è§†é¢‘GMV")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("Â¥"+t._s(t.formatNumber(t.getTotalVideoGmv)))])])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-money"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("ç›´æ’­GMV")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("Â¥"+t._s(t.formatNumber(t.getTotalLiveGmv)))])])])])],1)],1)])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleCancel}},[t._v("å– æ¶ˆ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("ç¡® å®š")])],1)],1)}),[],!1,null,"7228cc5a",null);e.default=m.exports},7059:function(t,e,a){},"7ae7":function(t,e,a){"use strict";a.r(e);var s=(a("ac6a"),a("5df3"),a("b85c")),r=a("2909"),i=(a("6b54"),a("a481"),a("7f7f"),a("5530")),n=(a("6762"),a("2fdb"),a("c7eb")),l=(a("96cf"),a("1da1")),o=a("7e1e"),c=a("c466"),u=a("3e48"),m=a("6c29b"),d=a("cf83"),p=a("90b6"),v={dicts:["broker_task_progress","tracker_task_progress","task_progress"],name:"TaskClaim",components:{TaskClaimDetails:u.default,TaskResultDialog:m.default,TaskProgressDialog:d.default,ExpertDatabase:p.default},props:{taskId:{type:String,required:!0}},data:function(){return{currentUserId:"",isAdmin:!1,isAgent:!1,isTracker:!1,taskInfo:{},claimList:[],expertOptions:[],claimDialogVisible:!1,claimForm:{expertId:"",trackerId:"",remark:""},claimRules:{expertId:[{required:!0,message:"è¯·é€‰æ‹©è¾¾äºº",trigger:"change"}],trackerId:[{required:!0,message:"è¯·é€‰æ‹©ä»»åŠ¡è·Ÿè¸ªå‘˜",trigger:"change"}]},showProgressHistory:!1,showResultDialog:!1,progressDialogVisible:!1,progressForm:{status:"",trackerId:"",step:"",remark:"",trackingInfo:{buildConnectionSource:"",cooperationDate:null,receiveTime:null,estimatedPublishTime:null,actualPublishTime:null,adCode:""}},progressRules:{status:[{required:!0,message:"è¯·é€‰æ‹©è¿›åº¦çŠ¶æ€",trigger:"change"}]},resultDialogVisible:!1,currentClaim:null,detailsDialogVisible:!1,currentClaimDetails:{},trackerOptions:[],statusList:[],taskConfig:{requireClaimAudit:!1},batchClaimDialogVisible:!1,batchClaimForm:{experts:[],remark:""},batchClaimRules:{experts:[{required:!0,message:"è¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ªè¾¾äºº",trigger:"change"}]}}},created:function(){this.getCurrentUser(),this.fetchData(),this.loadTrackerOptions()},methods:{checkAgentPermission:function(t){return console.log("ğŸš€ ~ checkAgentPermission ~ row:",t),!t.progressSteps.some((function(t){return"åˆä½œæˆåŠŸ"===t.status}))},checkTrackerPermission:function(t){return t.progressSteps.some((function(t){return"åˆä½œæˆåŠŸ"===t.status}))},deleteClaim:function(){var t=Object(l.a)(Object(n.a)().mark((function t(e){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.d)("taskClaim",{query:{_id:e._id},update:{isDeleted:!0}});case 2:this.fetchData();case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),getCurrentUser:function(){var t=Object(l.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{console.log("this.$store.getters.roles: ",this.$store.getters),this.isAdmin=this.$store.getters.roles.label.includes("Admin"),this.isAgent=this.$store.getters.roles.label.includes("Agent")||this.$store.getters.roles.label.includes("Admin"),this.isTracker=this.$store.getters.roles.label.includes("Tracker")||this.$store.getters.roles.label.includes("Admin"),this.currentUserId=this.$store.getters.id}catch(t){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",t)}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),fetchData:function(){var t=Object(l.a)(Object(n.a)().mark((function t(){var e,a,s;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.b)("task",{query:{_id:this.taskId}});case 3:return e=t.sent,this.taskInfo=e.data[0],console.log("ğŸš€ ~ fetchData ~  this.taskInfo:",this.taskInfo),a={taskId:this.taskId,isDeleted:!1},this.isAdmin||(this.isAgent&&(a.agentId=this.$store.state.user.id),this.isTracker&&(a.trackerId=this.$store.state.user.id)),t.next=10,Object(o.b)("taskClaim",{query:a,populate:JSON.stringify([{path:"agentId"},{path:"expertId"},{path:"trackerId"}])});case 10:s=t.sent,this.claimList=s.data.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{agentName:t.agentId.nickName,expertName:t.expertId.nickname,platformId:t.expertId.platformId,trackerName:t.trackerId&&t.trackerId.nickName?t.trackerId.nickName:"æœªæŒ‡å®š"})})),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.error("è·å–æ•°æ®å¤±è´¥:",t.t0),this.$message.error("è·å–æ•°æ®å¤±è´¥");case 18:case"end":return t.stop()}}),t,this,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),loadExpertOptions:function(){var t=Object(l.a)(Object(n.a)().mark((function t(){var e;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.b)("expert",{query:{}});case 3:e=t.sent,this.expertOptions=e.data.map((function(t){return{value:t._id,label:"".concat(t.name,"(").concat(t.platformName,")")}})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("è·å–è¾¾äººåˆ—è¡¨å¤±è´¥:",t.t0),this.$message.error("è·å–è¾¾äººåˆ—è¡¨å¤±è´¥");case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),loadTrackerOptions:function(){var t=Object(l.a)(Object(n.a)().mark((function t(){var e;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.b)("user_login",{query:{role:"6734de3a55647e147063f158"}});case 3:e=t.sent,console.log("ä»»åŠ¡è·Ÿè¸ªå‘˜: ",e),this.trackerOptions=e.data.map((function(t){return{value:t._id,label:t.nickName||t.username}})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("è·å–ä»»åŠ¡è·Ÿè¸ªå‘˜åˆ—è¡¨å¤±è´¥:",t.t0),this.$message.error("è·å–ä»»åŠ¡è·Ÿè¸ªå‘˜åˆ—è¡¨å¤±è´¥");case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),handleClaim:function(){this.loadExpertOptions(),this.claimForm={expertId:"",remark:""},this.claimDialogVisible=!0},submitClaim:function(){var t=Object(l.a)(Object(n.a)().mark((function t(){var e=this;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.$refs.claimForm.validate(function(){var t=Object(l.a)(Object(n.a)().mark((function t(a){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}return t.next=3,Object(o.a)("taskClaim",{taskId:e.taskId,agentId:e.currentUserId,expertId:e.claimForm.expertId,claimStatus:e.taskConfig.requireClaimAudit?"å¾…å®¡æ ¸":"å·²é€šè¿‡",remark:e.claimForm.remark});case 3:e.$message.success(e.taskConfig.requireClaimAudit?"è®¤é¢†æˆåŠŸï¼Œè¯·ç­‰å¾…å®¡æ ¸":"è®¤é¢†æˆåŠŸ"),e.claimDialogVisible=!1,e.fetchData();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(t){console.error("è®¤é¢†å¤±è´¥:",t),this.$message.error("è®¤é¢†å¤±è´¥")}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleAudit:function(){var t=Object(l.a)(Object(n.a)().mark((function t(e,a){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.d)("taskClaim",{query:{_id:e._id},update:{claimStatus:a,auditTime:new Date,auditRemark:"å·²æ‹’ç»"===a?"ä¸ç¬¦åˆè¦æ±‚":"ç¬¦åˆè¦æ±‚"}});case 3:this.$message.success("å®¡æ ¸å®Œæˆ"),this.fetchData(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.$message.error("å®¡æ ¸å¤±");case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}(),handleUpdateProgress:function(t){if(this.currentClaim=t,this.progressForm={status:t.status||"",trackerId:t.trackerId||"",step:"",remark:"",trackingInfo:{buildConnectionSource:"",cooperationDate:null,receiveTime:null,estimatedPublishTime:null,actualPublishTime:null,adCode:""}},t.progressSteps&&t.progressSteps.length>0){var e=t.progressSteps[t.progressSteps.length-1];e.trackingInfo&&(this.progressForm.trackingInfo={buildConnectionSource:e.trackingInfo.buildConnectionSource||"",cooperationDate:e.trackingInfo.cooperationDate||null,receiveTime:e.trackingInfo.receiveTime||null,estimatedPublishTime:e.trackingInfo.estimatedPublishTime||null,actualPublishTime:e.trackingInfo.actualPublishTime||null,adCode:e.trackingInfo.adCode||""})}this.progressDialogVisible=!0},handleProgressSubmit:function(){var t=Object(l.a)(Object(n.a)().mark((function t(e){var a;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a={status:e.status,$push:{progressSteps:{step:e.step,status:e.status,updateTime:new Date,updatedBy:this.$store.state.user.userId,remark:e.remark,trackingInfo:e.trackingInfo}}},console.log(this.taskInfo,"this.taskInfo"),"åˆä½œæˆåŠŸ"!==e.status){t.next=9;break}return a.trackerId=e.trackerId,console.log(this.currentClaim,"this.currentClaim"),console.log(this.taskInfo,"this.taskInfo"),t.next=9,Object(o.a)("messageLog",{title:"è·Ÿè¸ªå‘˜æŒ‡æ´¾é€šçŸ¥",content:"ä»»åŠ¡ã€".concat(this.taskInfo.title,"ã€‘å·²æŒ‡æ´¾è·Ÿè¸ªå‘˜"),type:"TRACKER_ASSIGNED",taskId:this.currentClaim.taskId,taskClaimId:this.currentClaim._id,sender:{userId:this.$store.state.user.id,role:"AGENT"},receivers:[{userId:e.trackerId,role:"TRACKER",isRead:!1},{userId:this.taskInfo.createBy,role:"ADMIN",isRead:!1}],isSystem:!1});case 9:return t.next=11,Object(o.d)("taskClaim",{query:{_id:this.currentClaim._id},update:a});case 11:return t.next=13,Object(o.a)("messageLog",{title:"ä»»åŠ¡è¿›åº¦æ›´æ–°",content:"ä»»åŠ¡ã€".concat(this.taskInfo.title,"ã€‘çš„è¿›åº¦å·²æ›´æ–°ä¸ºï¼š").concat(e.status),type:"TASK_PROGRESS",taskId:this.currentClaim.taskId,taskClaimId:this.currentClaim._id,sender:{userId:this.$store.state.user.id,role:this.isTracker?"TRACKER":"AGENT"},receivers:[{userId:this.currentClaim.agentId&&this.currentClaim.agentId._id,role:"AGENT",isRead:!1},{userId:this.currentClaim.trackerId&&this.currentClaim.trackerId._id,role:"TRACKER",isRead:!1},{userId:this.taskInfo.createBy,role:"ADMIN",isRead:!1}],isSystem:!1});case 13:this.$message.success("è¿›åº¦æ›´æ–°æˆåŠŸ"),this.fetchData(),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),console.error("è¿›åº¦æ›´æ–°å¤±è´¥:",t.t0),this.$message.error("è¿›åº¦æ›´æ–°å¤±è´¥");case 21:case"end":return t.stop()}}),t,this,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),handleSubmitResult:function(t){this.currentClaim=t,this.resultDialogVisible=!0},handleViewDetails:function(t){this.currentClaimDetails=Object(i.a)(Object(i.a)({},t),{},{result:t.result?Object(i.a)(Object(i.a)({},t.result),{},{performanceData:Object(i.a)({views:0,likes:0,comments:0,shares:0,gmv:0},t.result.performanceData||{})}):null}),this.detailsDialogVisible=!0},formatDate:function(t){return t?Object(c.a)(new Date(t),"yyyy-MM-dd HH:mm"):""},getClaimStatusType:function(t){return{"å¾…å®¡æ ¸":"warning","å·²é€šè¿‡":"success","å·²æ‹’ç»":"danger"}[t]||"info"},getProgressStatusType:function(t){return{"æœªå¼€å§‹":"info","æ²Ÿé€šä¸­":"warning","åˆä½œæˆåŠŸ":"success","å¯„é€æ ·å“":"primary","æ ·å“è·Ÿè¸ª":"primary","å·²æ”¶è´§":"success","å†…å®¹åˆ¶ä½œä¸­":"primary","ä½œå“å·²å‘å¸ƒ":"success","æ•°æ®ç»Ÿè®¡ä¸­":"warning","å·²å®Œæˆ":"success","å·²å–æ¶ˆ":"danger","åˆä½œå¤±è´¥":"danger"}[t]||"info"},getTaskTypeTag:function(t){return{"å“ç‰Œå®£ä¼ ":"primary","è¾¾äººæ¨å¹¿":"success","è¾¾äººç›´æ’­":"warning","è¾¾äººè§†":"danger","ç›´æ’­å¸¦è´§":"info"}[t]||"info"},getTaskStatusTag:function(t){return{"è¿›è¡Œä¸­":"success","å·²ç»“æŸ":"info","å·²å–æ¶ˆ":"danger","å¾…å¼€å§‹":"warning"}[t]||"info"},formatNumber:function(t){return t||0===t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"},calculateTotalViews:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.views||0)}),0):0},calculateTotalLikes:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.likes||0)}),0):0},calculateTotalComments:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.comments||0)}),0):0},calculateTotalShares:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.shares||0)}),0):0},calculateTotalGmv:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.gmv||0)}),0):0},getTimelineItemType:function(t){return{"æœªå¼€å§‹":"info","æ²Ÿé€šä¸­":"warning","æ‰§è¡Œä¸­":"primary","å·²å®Œæˆ":"success","å·²å–æ¶ˆ":"danger"}[t]||"info"},getAvailableStatuses:function(){if(this.isAgent)return console.log(this.dict.type.broker_task_progress,"this.dict.type.broker_task_progress"),this.statusList=[].concat(Object(r.a)(this.dict.type.broker_task_progress),[{label:"åˆä½œæˆåŠŸ",value:"åˆä½œæˆåŠŸ",type:"success"}]);if(this.isTracker){var t=[{label:"åˆä½œæˆåŠŸ",value:"åˆä½œæˆåŠŸ",type:"success"}];return t=[].concat(Object(r.a)(t),Object(r.a)(this.dict.type.tracker_task_progress)),this.statusList=t}return this.statusList},openProgressDialog:function(t){this.currentClaim=t,this.progressDialogVisible=!0},calculateTotalMetric:function(t,e){return t&&Array.isArray(t)?t.reduce((function(t,a){return t+(a.performanceData&&a.performanceData[e]||0)}),0):0},calculateTotalInteractions:function(t){return t&&Array.isArray(t)?t.reduce((function(t,e){var a=e.performanceData||{};return t+(a.likes||0)+(a.comments||0)+(a.shares||0)}),0):0},getContentTimelineType:function(t){return{"çŸ­è§†é¢‘":"primary","ç›´æ’­":"success","å›¾æ–‡":"warning"}[t.contentType]||"info"},handleBatchClaim:function(){this.batchClaimForm={experts:[],remark:""},this.batchClaimDialogVisible=!0},handleExpertSelectionChange:function(t){this.batchClaimForm.experts=t},checkExpertClaimed:function(){var t=Object(l.a)(Object(n.a)().mark((function t(e){var a;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.b)("taskClaim",{query:{taskId:this.taskId,expertId:e,isDeleted:!1}});case 3:return a=t.sent,t.abrupt("return",a.data.length>0);case 7:return t.prev=7,t.t0=t.catch(0),console.error("æ£€æŸ¥è¾¾äººè®¤é¢†çŠ¶æ€å¤±è´¥:",t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),submitBatchClaim:function(){var t=Object(l.a)(Object(n.a)().mark((function t(){var e,a,r,i,l,c;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.batchClaimForm.experts.length){t.next=4;break}return this.$message.warning("è¯·é€‰æ‹©è‡³å°‘ä¸€ä¸ªè¾¾äºº"),t.abrupt("return");case 4:e=[],a=[],r=Object(s.a)(this.batchClaimForm.experts),t.prev=7,r.s();case 9:if((i=r.n()).done){t.next=17;break}return l=i.value,t.next=13,this.checkExpertClaimed(l._id);case 13:t.sent?e.push(l.name||l.nickname):(c={taskId:this.taskId,agentId:this.currentUserId,expertId:l._id,claimStatus:this.taskConfig.requireClaimAudit?"å¾…å®¡æ ¸":"å·²é€šè¿‡",remark:this.batchClaimForm.remark},a.push(Object(o.a)("taskClaim",c)));case 15:t.next=9;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(7),r.e(t.t0);case 22:return t.prev=22,r.f(),t.finish(22);case 25:if(!(e.length>0)){t.next=29;break}if(this.$message.warning("ä»¥ä¸‹è¾¾äººå·²è®¤é¢†è¿‡è¯¥ä»»åŠ¡: ".concat(e.join(", "))),0!==a.length){t.next=29;break}return t.abrupt("return");case 29:return t.next=31,Promise.all(a);case 31:this.$message.success(this.taskConfig.requireClaimAudit?"æ‰¹é‡è®¤é¢†æˆåŠŸï¼Œè¯·ç­‰å¾…å®¡æ ¸":"æ‰¹é‡è®¤é¢†æˆåŠŸ"),this.batchClaimDialogVisible=!1,this.fetchData(),t.next=40;break;case 36:t.prev=36,t.t1=t.catch(0),console.error("æ‰¹é‡è®¤é¢†å¤±è´¥:",t.t1),this.$message.error("æ‰¹é‡è®¤é¢†å¤±è´¥");case 40:case"end":return t.stop()}}),t,this,[[0,36],[7,19,22,25]])})));return function(){return t.apply(this,arguments)}}(),checkExpertSelectable:function(t){return!this.claimList.some((function(e){return e.expertId._id===t._id}))},getKpiTarget:function(t){return this.taskInfo.cooperationDetails&&this.taskInfo.cooperationDetails.kpiTargets?this.taskInfo.cooperationDetails.kpiTargets[t]:null},getCommercialTerm:function(t){return this.taskInfo.cooperationDetails&&this.taskInfo.cooperationDetails.commercialTerms?this.taskInfo.cooperationDetails.commercialTerms[t]:null}},computed:{showTrackingInfo:function(){return["åˆä½œæˆåŠŸ","å¯„é€æ ·å“","æ ·å“è·Ÿè¸ª","å·²æ”¶è´§","å†…å®¹åˆ¶ä½œä¸­","ä½œå“å·²å‘å¸ƒ"].includes(this.progressForm.status)},computedTaskStatus:function(){if(!this.taskInfo.startTime||!this.taskInfo.endTime)return"æœªçŸ¥";var t=(new Date).getTime(),e=new Date(this.taskInfo.startTime).getTime(),a=new Date(this.taskInfo.endTime).getTime();return t<e?"å¾…å¼€å§‹":t>=e&&t<=a?"è¿›è¡Œä¸­":t>a?"å·²ç»“æŸ":"å·²å–æ¶ˆ"===this.taskInfo.status?"å·²å–æ¶ˆ":"æœªçŸ¥"},hasKpiTargets:function(){return this.taskInfo.cooperationDetails&&this.taskInfo.cooperationDetails.kpiTargets&&(this.taskInfo.cooperationDetails.kpiTargets.viewsTarget||this.taskInfo.cooperationDetails.kpiTargets.interactionTarget||this.taskInfo.cooperationDetails.kpiTargets.salesTarget)},hasCommercialTerms:function(){return this.taskInfo.cooperationDetails&&this.taskInfo.cooperationDetails.commercialTerms&&this.taskInfo.cooperationDetails.commercialTerms.budget}}},f=v,h=(a("f693"),a("2877")),_=Object(h.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-claim"},[a("el-card",{staticClass:"task-info"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("ä»»åŠ¡ä¿¡æ¯")])]),t._v(" "),a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[t.taskInfo.title?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("ä»»åŠ¡æ ‡é¢˜ï¼š")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.taskInfo.title))])]):t._e(),t._v(" "),t.taskInfo.type?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("ä»»åŠ¡ç±»å‹ï¼š")]),t._v(" "),a("el-tag",{attrs:{type:t.getTaskTypeTag(t.taskInfo.type)}},[t._v(t._s(t.taskInfo.type))])],1):t._e(),t._v(" "),t.computedTaskStatus?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("ä»»åŠ¡çŠ¶æ€ï¼š")]),t._v(" "),a("el-tag",{attrs:{type:t.getTaskStatusTag(t.computedTaskStatus)}},[t._v(t._s(t.computedTaskStatus))])],1):t._e()]),t._v(" "),a("div",{staticClass:"info-row"},[t.taskInfo.startTime?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("å¼€å§‹æ—¶é—´ï¼š")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatDate(t.taskInfo.startTime)))])]):t._e(),t._v(" "),t.taskInfo.endTime?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("ç»“æŸæ—¶é—´ï¼š")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatDate(t.taskInfo.endTime)))])]):t._e(),t._v(" "),t.taskInfo.createTime?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("å‘å¸ƒæ—¶é—´ï¼š")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatDate(t.taskInfo.createTime)))])]):t._e()])]),t._v(" "),t.taskInfo.cooperationDetails&&(t.taskInfo.cooperationDetails.brandName||t.taskInfo.cooperationDetails.productName)?a("div",{staticClass:"section-title"},[t._v("\n            å“ç‰Œåˆä½œä¿¡æ¯")]):t._e(),t._v(" "),t.taskInfo.cooperationDetails&&(t.taskInfo.cooperationDetails.brandName||t.taskInfo.cooperationDetails.productName)?a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.brandName?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("å“ç‰Œåç§°ï¼š")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.taskInfo.cooperationDetails.brandName))])]):t._e(),t._v(" "),t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.productName?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("äº§å“åç§°ï¼š")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.taskInfo.cooperationDetails.productName))])]):t._e()])]):t._e(),t._v(" "),a("div",{staticClass:"section-title"},[t._v("åˆä½œè¦æ±‚")]),t._v(" "),a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("åˆä½œå¹³å°ï¼š")]),t._v(" "),t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.requirements&&t.taskInfo.cooperationDetails.requirements.platformType?t._l(t.taskInfo.cooperationDetails.requirements.platformType,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"}},[t._v("\n                            "+t._s(e)+"\n                        ")])})):t._e()],2),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("å†…å®¹å½¢å¼ï¼š")]),t._v(" "),t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.requirements&&t.taskInfo.cooperationDetails.requirements.contentType?t._l(t.taskInfo.cooperationDetails.requirements.contentType,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{type:"success"}},[t._v("\n                            "+t._s(e)+"\n                        ")])})):t._e()],2)]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item full-width"},[a("span",{staticClass:"label"},[t._v("è¾¾äººè¦æ±‚ï¼š")]),t._v(" "),t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.requirements&&t.taskInfo.cooperationDetails.requirements.expertRequirements?a("div",{staticClass:"requirement-list"},[t.taskInfo.cooperationDetails.requirements.expertRequirements.fansCountMin?a("div",{staticClass:"requirement-item"},[a("i",{staticClass:"el-icon-user"}),t._v(" ç²‰ä¸æ•°ï¼š"+t._s(t.formatNumber(t.taskInfo.cooperationDetails.requirements.expertRequirements.fansCountMin))+" - "+t._s(t.formatNumber(t.taskInfo.cooperationDetails.requirements.expertRequirements.fansCountMax))+"\n                        ")]):t._e(),t._v(" "),t.taskInfo.cooperationDetails.requirements.expertRequirements.expertCategory&&t.taskInfo.cooperationDetails.requirements.expertRequirements.expertCategory.length?a("div",{staticClass:"requirement-item"},[a("i",{staticClass:"el-icon-collection-tag"}),t._v(" è¾¾äººç±»ç›®ï¼š\n                            "),t._l(t.taskInfo.cooperationDetails.requirements.expertRequirements.expertCategory,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"small",type:"warning"}},[t._v("\n                                "+t._s(e)+"\n                            ")])}))],2):t._e(),t._v(" "),t.taskInfo.cooperationDetails.requirements.expertRequirements.otherRequirements?a("div",{staticClass:"requirement-item"},[a("i",{staticClass:"el-icon-info"}),t._v(" å…¶ä»–è¦æ±‚ï¼š"+t._s(t.taskInfo.cooperationDetails.requirements.expertRequirements.otherRequirements)+"\n                        ")]):t._e()]):t._e()])])]),t._v(" "),a("div",{staticClass:"section-title"},[t._v("ä»»åŠ¡æè¿°")]),t._v(" "),a("div",{staticClass:"task-description"},[t._v("\n            "+t._s(t.taskInfo.description||"æš‚æ— æè¿°")+"\n        ")]),t._v(" "),t.hasKpiTargets?a("div",{staticClass:"section-title"},[t._v("KPIç›®æ ‡")]):t._e(),t._v(" "),t.hasKpiTargets?a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[t.getKpiTarget("viewsTarget")?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("æ’­æ”¾é‡ç›®æ ‡ï¼š")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatNumber(t.getKpiTarget("viewsTarget"))))])]):t._e(),t._v(" "),t.getKpiTarget("interactionTarget")?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("äº’åŠ¨é‡ç›®æ ‡ï¼š")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatNumber(t.getKpiTarget("interactionTarget"))))])]):t._e(),t._v(" "),t.getKpiTarget("salesTarget")?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("é”€å”®ç›®æ ‡ï¼š")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatNumber(t.getKpiTarget("salesTarget"))))])]):t._e()])]):t._e(),t._v(" "),t.hasCommercialTerms?a("div",{staticClass:"section-title"},[t._v("å•†åŠ¡æ¡æ¬¾")]):t._e(),t._v(" "),t.hasCommercialTerms?a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[t.getCommercialTerm("budget")?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("è¾¾äººé¢„ç®—ï¼š")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.getCommercialTerm("budget"))+"å…ƒ")])]):t._e()])]):t._e(),t._v(" "),a("div",{staticClass:"section-title"},[t._v("å¤‡æ³¨ä¿¡æ¯")]),t._v(" "),a("div",{staticClass:"info-section"},[t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.remarks&&t.taskInfo.cooperationDetails.remarks.length?a("div",{staticClass:"remarks-list"},[a("el-table",{attrs:{data:t.taskInfo.cooperationDetails.remarks,border:"",size:"small"}},[a("el-table-column",{attrs:{label:"å¤‡æ³¨åç§°",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"å¤‡æ³¨ç±»å‹",prop:"type"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small"}},[t._v(t._s(e.row.type))])]}}],null,!1,3884746098)}),t._v(" "),a("el-table-column",{attrs:{label:"å¤‡æ³¨é“¾æ¥","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",href:e.row.url,target:"_blank"}},[t._v(t._s(e.row.url))])]}}],null,!1,3178991531)}),t._v(" "),a("el-table-column",{attrs:{label:"ä¸Šä¼ æ—¶é—´",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(t.formatDate(e.row.uploadTime))+"\n                        ")]}}],null,!1,1630876477)})],1)],1):a("div",{staticClass:"empty-remarks"},[t._v("\n                æš‚æ— å¤‡æ³¨ä¿¡æ¯\n            ")])])]),t._v(" "),a("el-card",{staticClass:"claim-list"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("ä»»åŠ¡è®¤é¢†åˆ—è¡¨")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"warning",size:"small"},on:{click:function(e){t.showProgressHistory=!t.showProgressHistory}}},[t._v("\n                "+t._s(t.showProgressHistory?"éšè—ä»»åŠ¡è¿›åº¦å†å²":"å±•å¼€ä»»åŠ¡è¿›åº¦å†å²")+"\n            ")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"warning",size:"small"},on:{click:function(e){t.showResultDialog=!t.showResultDialog}}},[t._v("\n                "+t._s(t.showResultDialog?"éšè—æ‰§è¡Œç»“æœåˆ—è¡¨":"å±•å¼€æ‰§è¡Œç»“æœåˆ—è¡¨")+"\n            ")]),t._v(" "),t.isAgent?a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"success",size:"small"},on:{click:t.handleBatchClaim}},[t._v("\n                è®¤é¢†ä»»åŠ¡\n            ")]):t._e()],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.claimList,border:""}},[a("el-table-column",{attrs:{label:"ç»çºªäºº",prop:"agentName",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"å…³è”è¾¾äºº",prop:"expertName",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"è¾¾äººè´¦å·ID",prop:"platformId",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"ä»»åŠ¡è·Ÿè¸ªå‘˜",prop:"trackerName",width:"120"}}),t._v(" "),t.isAdmin&&t.taskConfig.requireClaimAudit?a("el-table-column",{attrs:{label:"è®¤é¢†çŠ¶æ€",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.getClaimStatusType(e.row.claimStatus)}},[t._v(t._s(e.row.claimStatus))])]}}],null,!1,609898553)}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"è®¤é¢†æ—¶é—´",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.formatDate(e.row.claimTime))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"å½“å‰ä»»åŠ¡è¿›åº¦",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.getProgressStatusType(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),t.showProgressHistory?a("el-table-column",{attrs:{label:"è¿›åº¦å†å²",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.progressSteps&&e.row.progressSteps.length?a("el-timeline",t._l(e.row.progressSteps,(function(e,s){return a("el-timeline-item",{key:s,attrs:{type:t.getProgressStatusType(e.status),size:"small",timestamp:t.formatDate(e.updateTime)}},[a("div",{staticClass:"progress-item"},[a("div",{staticClass:"progress-header"},[a("el-tag",{attrs:{size:"mini",type:t.getProgressStatusType(e.status)}},[t._v("\n                                        "+t._s(e.status)+"\n                                    ")]),t._v(" "),a("span",{staticClass:"progress-step"},[t._v(t._s(e.step))])],1),t._v(" "),e.remark?a("div",{staticClass:"progress-remark"},[t._v("\n                                    "+t._s(e.remark)+"\n                                ")]):t._e()])])})),1):a("span",[t._v("æš‚æ— è¿›åº¦")])]}}],null,!1,4116868277)}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"æ‰§è¡Œç»“æœ",width:"600"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.result&&e.row.result.contentList&&e.row.result.contentList.length?[a("div",{staticClass:"result-summary",staticStyle:{width:"150px"}},[a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("æ€»æ’­æ”¾é‡ï¼š")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.formatNumber(t.calculateTotalMetric(e.row.result.contentList,"views"))))])]),t._v(" "),a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("æ€»äº’åŠ¨é‡ï¼š")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.formatNumber(t.calculateTotalInteractions(e.row.result.contentList))))])]),t._v(" "),a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("æ€»è§†é¢‘é”€å”®é¢ï¼š")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v("Â¥"+t._s(t.formatNumber(t.calculateTotalMetric(e.row.result.contentList,"videoGmv"))))])]),t._v(" "),a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("æ€»ç›´æ’­é”€å”®é¢ï¼š")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v("Â¥"+t._s(t.formatNumber(t.calculateTotalMetric(e.row.result.contentList,"liveGmv"))))])])]),t._v(" "),t.showResultDialog?a("el-table",{staticClass:"content-table",attrs:{data:e.row.result.contentList,size:"mini",border:""}},[a("el-table-column",{attrs:{label:"å‘å¸ƒå¹³å°",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"mini",type:"primary"}},[t._v(t._s(e.row.platform))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"å†…å®¹ç±»å‹",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{staticStyle:{"margin-top":"4px"},attrs:{size:"mini",type:"success"}},[t._v(t._s(e.row.type))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"è§†é¢‘é“¾æ¥",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",href:e.row.link,target:"_blank"}},[t._v(t._s(e.row.link))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"å¹¿å‘Šç ",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                    "+t._s(e.row.adCode)+"\n                                ")]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"å‘å¸ƒæ—¶é—´",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"publish-time"},[t._v(t._s(t.formatDate(e.row.publishTime)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"æ•°æ®è¡¨ç°"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"metrics-container"},[a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-video-play"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.views)))])]),t._v(" "),a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.likes)))])]),t._v(" "),a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.comments)))])]),t._v(" "),a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-share"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.shares)))])]),t._v(" "),a("div",{staticClass:"metric-item highlight"},[t._v("\n                                            è§†é¢‘GMVï¼šÂ¥"+t._s(t.formatNumber(e.row.performanceData.videoGmv))+"\n                                        ")]),t._v(" "),a("div",{staticClass:"metric-item highlight"},[t._v("\n                                            ç›´æ’­GMVï¼šÂ¥"+t._s(t.formatNumber(e.row.performanceData.liveGmv))+"\n                                        ")])])]}}],null,!0)})],1):t._e()]:a("span",{staticClass:"no-result"},[t._v("æš‚æ— æ‰§è¡Œç»“æœ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"æ“ä½œ",width:t.isAdmin&&t.taskConfig.requireClaimAudit||t.isTracker?300:200,fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.handleViewDetails(e.row)}}},[t._v("\n                        æŸ¥çœ‹è¯¦æƒ…\n                    ")]),t._v(" "),t.isAdmin&&t.taskConfig.requireClaimAudit?["å¾…å®¡æ ¸"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleAudit(e.row,"å·²é€šè¿‡")}}},[t._v("\n                            é€šè¿‡\n                        ")]):t._e(),t._v(" "),"å¾…å®¡æ ¸"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleAudit(e.row,"å·²æ‹’ç»")}}},[t._v("\n                            æ‹’ç»\n                        ")]):t._e()]:t._e(),t._v(" "),t.isAdmin?[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.deleteClaim(e.row)}}},[t._v("\n                            åˆ é™¤\n                        ")])]:t._e(),t._v(" "),t.isAgent&&e.row.agentId._id===t.currentUserId&&t.checkAgentPermission(e.row)?["å·²é€šè¿‡"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleUpdateProgress(e.row)}}},[t._v("\n                            æ›´æ–°è¿›åº¦\n                        ")]):t._e()]:t._e(),t._v(" "),e.row.trackerId&&e.row.trackerId._id===t.currentUserId&&t.checkTrackerPermission(e.row)?["å·²é€šè¿‡"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleUpdateProgress(e.row)}}},[t._v("\n                            æ›´æ–°è¿›åº¦\n                        ")]):t._e(),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleSubmitResult(e.row)}}},[t._v("\n                            æäº¤ç»“æœ\n                        ")])]:t._e()]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"è®¤é¢†ä»»åŠ¡",visible:t.claimDialogVisible,"append-to-body":"",width:"50%"},on:{"update:visible":function(e){t.claimDialogVisible=e}}},[a("el-form",{ref:"claimForm",attrs:{model:t.claimForm,rules:t.claimRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"é€‰æ‹©è¾¾äºº",prop:"expertId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"è¯·é€‰æ‹©è¾¾äºº"},model:{value:t.claimForm.expertId,callback:function(e){t.$set(t.claimForm,"expertId",e)},expression:"claimForm.expertId"}},t._l(t.expertOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"è®¤é¢†è¯´æ˜"}},[a("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.claimForm.remark,callback:function(e){t.$set(t.claimForm,"remark",e)},expression:"claimForm.remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.claimDialogVisible=!1}}},[t._v("å– æ¶ˆ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitClaim}},[t._v("ç¡® å®š")])],1)],1),t._v(" "),a("task-progress-dialog",{attrs:{visible:t.progressDialogVisible,"current-claim":t.currentClaim,"status-list":t.getAvailableStatuses()},on:{"update:visible":function(e){t.progressDialogVisible=e},submit:t.handleProgressSubmit}}),t._v(" "),a("task-result-dialog",{attrs:{visible:t.resultDialogVisible,"current-claim":t.currentClaim,"task-info":t.taskInfo},on:{"update:visible":function(e){t.resultDialogVisible=e},"submit-success":t.fetchData}}),t._v(" "),a("task-claim-details",{attrs:{visible:t.detailsDialogVisible,details:t.currentClaimDetails},on:{"update:visible":function(e){t.detailsDialogVisible=e}}}),t._v(" "),a("el-dialog",{attrs:{title:"æ‰¹é‡è®¤é¢†ä»»åŠ¡",visible:t.batchClaimDialogVisible,"append-to-body":"",width:"90%"},on:{"update:visible":function(e){t.batchClaimDialogVisible=e}}},[a("el-form",{ref:"batchClaimForm",attrs:{model:t.batchClaimForm,rules:t.batchClaimRules,"label-width":"100px"}},[a("expert-database",{ref:"expertSelector",attrs:{"is-select-mode":!0,multiple:!0,maxSelect:10,"check-selectable":t.checkExpertSelectable},on:{"selection-change":t.handleExpertSelectionChange}}),t._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"è®¤é¢†è¯´æ˜"}},[a("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.batchClaimForm.remark,callback:function(e){t.$set(t.batchClaimForm,"remark",e)},expression:"batchClaimForm.remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.batchClaimDialogVisible=!1}}},[t._v("å– æ¶ˆ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitBatchClaim}},[t._v("ç¡® å®š")])],1)],1)],1)}),[],!1,null,null,null);e.default=_.exports},"8fe3":function(t,e,a){},"90b6":function(t,e,a){"use strict";a.r(e);var s=(a("f576"),a("28a5"),a("2909")),r=(a("5df3"),a("34ef"),a("6762"),a("2fdb"),a("7514"),a("ade3")),i=(a("a481"),a("6b54"),a("5530")),n=a("c7eb"),l=(a("96cf"),a("1da1")),o=(a("ac6a"),a("456d"),a("7f7f"),a("c5f6"),a("7e1e")),c=a("c8d1"),u=a("1146"),m=a.n(u),d=a("7015"),p=a("b728"),v={name:"ExpertDatabase",props:{isSelectMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},selectedIds:{type:Array,default:function(){return[]}},maxSelect:{type:Number,default:999},checkSelectable:{type:Function,default:null}},dicts:["delivery_method","expert_platform","category","level","brand"],components:{EditDialog:c.default,ZrAddressSelect:p.a},data:function(){return{searchForm:{name:"",mainNickname:"",mainPlatform:"",mainCategory:"",minFollowers:null,maxFollowers:null,area:[],platformName:"",platformId:"",platformNickname:"",platformUrl:"",whatsappAccount:"",agency:"",productPriceMin:null,productPriceMax:null,gpmMin:null,gpmMax:null,sellingMethod:[],followerWomanMin:null,followerWomanMax:null,monthlySalesMin:null,monthlySalesMax:null,monthlySalesAmountMin:null,monthlySalesAmountMax:null,cooperationBrands:[]},showAdvanced:!1,platformOptions:[{value:"æŠ–éŸ³",label:"æŠ–éŸ³"},{value:"å°çº¢ä¹¦",label:"å°çº¢ä¹¦"},{value:"å¾®åš",label:"å¾®åš"},{value:"Bç«™",label:"Bç«™"}],tableList:[],total:0,currentPage:1,pageSize:10,listLoading:!0,dialogFormVisible:!1,dialogStatus:"",dataForm:{avatar:"",name:"",phone:"",bio:"",mainPlatform:"",mainNickname:"",mainFollowers:0,mainCategory:"",contactInfo:"",agency:"",averageViews:0,monthlySales:0,monthlySalesAmount:0,followerAgeRange:"",followerMan:0,followerWoman:0,followerInterests:[],followerLocation:[],hotCategoryRatio:[],platforms:[],top3Products:[],sellingMethod:"",productPrice:0,gpm:0,cooperationHistory:[],collaborationCount:0,level:""},detailForm:{cooperationHistory:[]},importDialogVisible:!1,fileList:[],importing:!1,templateHeaders:["å¹³å°åç§°*","å¹³å°ID*","å¹³å°æ˜µç§°*","å¹³å°é“¾æ¥","ç²‰ä¸æ•°é‡","åˆ†ç±»","å¹³å‡äº’åŠ¨ç‡","å¹³å‡æ’­æ”¾é‡","è§†é¢‘å¹³å‡æ—¶é•¿","åœ°åŒº","å›½å®¶","çœä»½","åŸå¸‚","è”ç³»æ–¹å¼","ç­¾çº¦æœºæ„","WhatsAppè´¦å·","ç”µè¯","ç²‰ä¸å¹´é¾„èŒƒå›´","ç”·æ€§ç²‰ä¸æ¯”ä¾‹","å¥³æ€§ç²‰ä¸æ¯”ä¾‹","çƒ­é”€å“ç±»æ¯”","Top3äº§å“","å¸¦è´§æ–¹å¼","æœ€ä½å®¢å•ä»·","æœ€é«˜å®¢å•ä»·","GPM"],selection:[],detailDialogVisible:!1}},created:function(){this.fetchData()},methods:Object(r.a)(Object(r.a)({searchData:function(){console.log("ğŸš€ ~ searchData ~ this.searchForm.area:",this.searchForm.area);var t={query:{$and:[]},populate:JSON.stringify([{path:"createBy",select:"nickName"}])};if(this.searchForm.name&&t.query.$and.push({name:{$regex:this.searchForm.name,$options:"i"}}),this.searchForm.platformName&&t.query.$and.push({platformName:{$regex:this.searchForm.platformName,$options:"i"}}),this.searchForm.platformId&&t.query.$and.push({platformId:{$regex:this.searchForm.platformId,$options:"i"}}),this.searchForm.platformNickname&&t.query.$and.push({nickname:{$regex:this.searchForm.platformNickname,$options:"i"}}),this.searchForm.mainCategory&&t.query.$and.push({category:{$regex:this.searchForm.mainCategory,$options:"i"}}),this.searchForm.area&&this.searchForm.area.length>0&&t.query.$and.push({$or:this.searchForm.area.map((function(t){return{area:{$all:t}}}))}),!(null===this.searchForm.minFollowers&&null===this.searchForm.maxFollowers||0===this.searchForm.minFollowers&&0===this.searchForm.maxFollowers)){var e={};null!==this.searchForm.minFollowers&&(e.$gte=this.searchForm.minFollowers),null!==this.searchForm.maxFollowers&&(e.$lte=this.searchForm.maxFollowers),Object.keys(e).length>0&&t.query.$and.push({followers:e})}if(this.searchForm.category&&this.searchForm.category.length>0&&t.query.$and.push({category:{$all:this.searchForm.category}}),this.searchForm.level&&t.query.$and.push({level:{$regex:this.searchForm.level,$options:"i"}}),this.searchForm.platformUrl&&t.query.$and.push({platformUrl:{$regex:this.searchForm.platformUrl,$options:"i"}}),this.searchForm.whatsappAccount&&t.query.$and.push({whatsappAccount:{$regex:this.searchForm.whatsappAccount,$options:"i"}}),this.searchForm.agency&&t.query.$and.push({agency:{$regex:this.searchForm.agency,$options:"i"}}),this.searchForm.level&&t.query.$and.push({level:{$regex:this.searchForm.level,$options:"i"}}),this.searchForm.productPriceMin||this.searchForm.productPriceMax){var a={};this.searchForm.productPriceMin&&(a.$gte=this.searchForm.productPriceMin),this.searchForm.productPriceMax&&(a.$lte=this.searchForm.productPriceMax),Object.keys(a).length>0&&t.query.$and.push({productPrice:a})}if(this.searchForm.gpmMin||this.searchForm.gpmMax){var s={};this.searchForm.gpmMin&&(s.$gte=this.searchForm.gpmMin),this.searchForm.gpmMax&&(s.$lte=this.searchForm.gpmMax),Object.keys(s).length>0&&t.query.$and.push({gpm:s})}if(this.searchForm.sellingMethod&&this.searchForm.sellingMethod.length>0&&t.query.$and.push({sellingMethod:{$all:this.searchForm.sellingMethod}}),null!==this.searchForm.followerWomanMin&&0!==this.searchForm.followerWomanMin||null!==this.searchForm.followerWomanMax&&0!==this.searchForm.followerWomanMax){var r={};null!==this.searchForm.followerWomanMin&&0!==this.searchForm.followerWomanMin&&(r.$gte=this.searchForm.followerWomanMin),null!==this.searchForm.followerWomanMax&&0!==this.searchForm.followerWomanMax&&(r.$lte=this.searchForm.followerWomanMax),Object.keys(r).length>0&&t.query.$and.push({followerWoman:r})}if(null!==this.searchForm.monthlySalesMin&&0!==this.searchForm.monthlySalesMin||null!==this.searchForm.monthlySalesMax&&0!==this.searchForm.monthlySalesMax){var i={};null!==this.searchForm.monthlySalesMin&&0!==this.searchForm.monthlySalesMin&&(i.$gte=this.searchForm.monthlySalesMin),null!==this.searchForm.monthlySalesMax&&0!==this.searchForm.monthlySalesMax&&(i.$lte=this.searchForm.monthlySalesMax),Object.keys(i).length>0&&t.query.$and.push({monthlySales:i})}if(null!==this.searchForm.monthlySalesAmountMin&&0!==this.searchForm.monthlySalesAmountMin||null!==this.searchForm.monthlySalesAmountMax&&0!==this.searchForm.monthlySalesAmountMax){var n={};null!==this.searchForm.monthlySalesAmountMin&&0!==this.searchForm.monthlySalesAmountMin&&(n.$gte=this.searchForm.monthlySalesAmountMin),null!==this.searchForm.monthlySalesAmountMax&&0!==this.searchForm.monthlySalesAmountMax&&(n.$lte=this.searchForm.monthlySalesAmountMax),Object.keys(n).length>0&&t.query.$and.push({monthlySalesAmount:n})}return this.searchForm.cooperationBrands&&this.searchForm.cooperationBrands.length>0&&t.query.$and.push({"cooperationHistory.brandName":{$in:this.searchForm.cooperationBrands}}),t.query.$and.length||delete t.query.$and,t},fetchData:function(){var t=Object(l.a)(Object(n.a)().mark((function t(){var e,a;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e=this.searchData(),t.next=4,Object(o.b)("expert",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),search:function(){this.currentPage=1,this.fetchData()},handleEdit:function(t){this.dialogStatus="update",this.dataForm=Object(i.a)({},t),this.dialogFormVisible=!0},handleSubmit:function(t){"create"===this.dialogStatus?this.createExpert(t):this.updateExpert(t)},handleView:function(t){this.detailDialogVisible=!0,this.detailForm=Object(i.a)(Object(i.a)({},t),{},{cooperationHistory:t.cooperationHistory||[]})},handleDelete:function(t){var e=this;this.$confirm("ç¡®è®¤åˆ é™¤è¾¾äºº?","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(Object(l.a)(Object(n.a)().mark((function a(){return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(o.c)("expert",{query:{_id:t._id}});case 2:e.$message.success("åˆ é™¤æˆåŠŸ"),e.fetchData();case 4:case"end":return a.stop()}}),a)})))).catch((function(){}))},detailDialogClose:function(){this.detailDialogVisible=!1,this.detailForm={}},addExpert:function(){this.dialogStatus="create",this.dataForm={avatar:"",name:"",phone:"",bio:"",mainPlatform:"",mainNickname:"",mainFollowers:0,mainCategory:"",contactInfo:"",area:[],agency:"",averageViews:0,monthlySales:0,monthlySalesAmount:0,followerAgeRange:"",followerMan:0,followerWoman:0,followerInterests:[],followerLocation:[],hotCategoryRatio:[],top3Products:[],platforms:[],sellingMethod:"",productPrice:0,gpm:0,cooperationHistory:[],collaborationCount:0,level:""},this.dialogFormVisible=!0},createExpert:function(){var t=Object(l.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("ğŸš€ ~ createExpert ~ this.dataForm:",this.dataForm),t.next=3,Object(o.a)("expert",this.dataForm);case 3:200===t.sent.code?(this.$message.success("æ·»åŠ æˆåŠŸ"),this.dialogFormVisible=!1,this.fetchData()):this.$message.error("æ·»åŠ å¤±è´¥");case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),updateExpert:function(){var t=Object(l.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.d)("expert",{query:{_id:this.dataForm._id},update:this.dataForm});case 2:200===t.sent.code?(this.$message.success("æ›´æ–°æˆåŠŸ"),this.dialogFormVisible=!1,this.fetchData()):this.$message.error("æ›´æ–°å¤±è´¥");case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleAvatarSuccess:function(t,e){this.dataForm.avatar=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("ä¸Šä¼ å¤´åƒå›¾ç‰‡åªèƒ½æ˜¯ JPG æ ¼å¼!"),a||this.$message.error("ä¸Šä¼ å¤´åƒå›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 2MB!"),e&&a},fansNumber:function(t){return t<1e3?t.toString():t<1e4?(t/1e3).toFixed(1)+"k":t<1e6||t<1e7?(t/1e4).toFixed(1)+"w":t<1e8?(t/1e7).toFixed(1)+"åƒä¸‡":(t/1e8).toFixed(1)+"äº¿"},formatFansNumber:function(t){var e=t.reduce((function(t,e){return t+e.followers}),0);return e<1e3?e.toString():e<1e4?(e/1e3).toFixed(1)+"k":e<1e6||e<1e7?(e/1e4).toFixed(1)+"w":(e/1e7).toFixed(1)+"åƒä¸‡"},formatNumber:function(t){return null==t?"0":t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},toggleAdvanced:function(){this.showAdvanced=!this.showAdvanced},resetForm:function(){this.$refs.searchForm.resetFields(),this.searchForm={name:"",platformName:"",platformId:"",platformNickname:"",platformUrl:"",agency:"",whatsappAccount:"",level:"",category:"",sellingMethod:[],area:[],cooperationBrands:[],minFollowers:null,maxFollowers:null,followerWomanMin:null,followerWomanMax:null,monthlySalesMin:null,monthlySalesMax:null,monthlySalesAmountMin:null,monthlySalesAmountMax:null},this.currentPage=1,this.fetchData()},exportData:function(){var t=Object(l.a)(Object(n.a)().mark((function t(){var e,a,s,i,l,c,u,d,p,v=this;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.$message({message:"æ­£åœ¨å¯¼å‡ºæ•°æ®,è¯·ç¨å€™...",type:"info"}),e=this.$loading({lock:!0,text:"å¯¼å‡ºä¸­...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),(a=this.searchData()).limit=1e6,t.next=7,Object(o.b)("expert",a);case 7:if((s=t.sent).data&&0!==s.data.length){t.next=12;break}return this.$message.warning("æ²¡æœ‰æ•°æ®å¯ä¾›å¯¼å‡º"),e.close(),t.abrupt("return");case 12:i=Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({avatar:"å¤´åƒURL",name:"å§“å",phone:"ç”µè¯",bio:"ä¸ªäººç®€ä»‹",platformName:"å¹³å°åç§°",platformId:"å¹³å°ID",nickname:"å¹³å°æ˜µç§°",followers:"ç²‰ä¸æ•°é‡",category:"åˆ†ç±»",level:"è¾¾äººç­‰çº§",sellingMethod:"å¸¦è´§æ–¹å¼",averageEngagement:"å¹³å‡äº’åŠ¨ç‡",averageViews:"å¹³å‡æ’­æ”¾é‡",videoDuration:"è§†é¢‘å¹³å‡æ—¶é•¿",country:"å›½å®¶",region:"åœ°åŒº",city:"åŸå¸‚",contactInfo:"è”ç³»å¼",agency:"ç­¾çº¦æœºæ„",followerAgeRange:"ç²‰ä¸å¹´é¾„èŒƒå›´",followerMan:"ç”·æ€§ç²‰ä¸æ¯”ä¾‹",followerWoman:"å¥³æ€§ç²‰ä¸æ¯”ä¾‹",followerInterests:"ç²‰ä¸å…´è¶£",followerLocation:"ç²‰ä¸åœ°ç†åˆ†å¸ƒ",hotCategoryRatio:"çƒ­é”€å“ç±»å æ¯”",top3Products:"Top3äº§å“"},"sellingMethod","å¸¦è´§æ–¹å¼"),"productPrice","å•†å“å®¢å•ä»·"),"gpm","GPM"),"monthlySales","æœˆé”€é‡"),"monthlySalesAmount","æœˆé”€å”®é¢"),"collaborationCount","åˆä½œæ¬¡æ•°"),"createAt","åˆ›å»ºæ—¶é—´"),"updateAt","æ›´æ–°æ—¶é—´"),l=s.data.map((function(t){var e={};return Object.keys(i).forEach((function(a){var s=t[a];switch(a){case"followers":case"averageViews":s=v.fansNumber(s);break;case"followerMan":case"followerWoman":case"hotCategoryRatio":case"averageEngagement":s=s?s+"%":"0%";break;case"productPrice":s=s?"Â¥"+s:"æœªè®¾ç½®";break;case"followerInterests":case"top3Products":case"sellingMethod":s=Array.isArray(s)?s.join("ã€"):"";break;case"followerLocation":s=Array.isArray(s)?s.map((function(t){return t.join("-")})).join("ã€"):"";break;case"createAt":case"updateAt":s=s?new Date(s).toLocaleString():""}e[i[a]]=s||"æœªè®¾ç½®"})),t.cooperationHistory&&t.cooperationHistory.length>0&&t.cooperationHistory.forEach((function(t,a){var s="åˆä½œè®°å½•".concat(a+1,"_");e[s+"å“ç‰Œ"]=t.brands||"",e[s+"è§†é¢‘/ç›´æ’­"]=t.videos||"",e[s+"è¯„åˆ†"]=t.score||"",e[s+"é”€å”®é¢"]=t.sales?"Â¥"+v.formatNumber(t.sales):"",e[s+"å¤‡æ³¨"]=t.remark||""})),e})),c=m.a.utils.book_new(),u=m.a.utils.json_to_sheet(l),d=[],Object.keys(l[0]).forEach((function(t){d.push({wch:Math.max(2*t.length,15)})})),u["!cols"]=d,m.a.utils.book_append_sheet(c,u,"è¾¾äººæ•°æ®"),p="è¾¾äººæ•°æ®_".concat((new Date).toLocaleDateString(),".xlsx"),m.a.writeFile(c,p),e.close(),this.$message.success("å¯¼å‡ºæˆåŠŸ!"),t.next=31;break;case 26:t.prev=26,t.t0=t.catch(0),console.error("å¯¼å‡ºé”™è¯¯:",t.t0),this.$message.error("å¯¼å‡ºå¤±è´¥: "+(t.t0.message||"æœªçŸ¥é”™è¯¯")),loading.close();case 31:case"end":return t.stop()}}),t,this,[[0,26]])})));return function(){return t.apply(this,arguments)}}(),getEngagementClass:function(t){return t?t>=5?"text-success":t>=3?"text-warning":"text-danger":""},formatArea:function(t){if(!Array.isArray(t)||0===t.length)return"æœªå¡«å†™åœ°åŒºä¿¡æ¯";for(var e=[],a=d,s=function(){var s=t[r],i=a.find((function(t){return t.value===s}));i&&(e.push(i.label),a=i.children||[])},r=0;r<t.length;r++)s();return e.join(" / ")},hasPermission:function(t){var e=this.$store.state.user;return console.log("userInfo: ",e),!!this.$store.getters.roles.label.includes("Admin")||t.createBy===e.id},getGPMClass:function(t){return t?t>=1e3?"text-success":t>=500?"text-warning":"text-danger":""},showImportDialog:function(){this.importDialogVisible=!0,this.fileList=[]},handleFileChange:function(t){this.fileList=[t]},importData:function(){var t=Object(l.a)(Object(n.a)().mark((function t(){var e,a,r=this;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.fileList.length){t.next=3;break}return this.$message.warning("è¯·å…ˆé€‰æ‹©è¦å¯¼å…¥çš„æ–‡ä»¶"),t.abrupt("return");case 3:try{this.importing=!0,e=this.fileList[0].raw,(a=new FileReader).onload=function(){var t=Object(l.a)(Object(n.a)().mark((function t(e){var a,i,l,c,u,d,p,v,f,h,_,b,g,k,C;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=new Uint8Array(e.target.result),i=m.a.read(a,{type:"array"}),l=i.SheetNames[0],c=i.Sheets[l],u=m.a.utils.sheet_to_json(c),d=u.map((function(t){return r.processImportRow(t)})),p=d.filter((function(t){return!t.platformName||!t.platformId||!t.nickname})),!(p.length>0)){t.next=10;break}return r.$message.error("å­˜åœ¨æ•°æ®ç¼ºå°‘å¿…å¡«å­—æ®µï¼ˆå¹³å°åç§°ã€å¹³å°IDã€å¹³å°æ˜µç§°ï¼‰ï¼Œè¯·æ£€æŸ¥"),t.abrupt("return");case 10:if(v=d.map((function(t){return t.platformId})),f=v.filter((function(t,e){return v.indexOf(t)!==e})),!(f.length>0)){t.next=15;break}return r.$message.error("Excelä¸­å­˜åœ¨é‡å¤çš„å¹³å°ID: ".concat(f.join(", "))),t.abrupt("return");case 15:return t.prev=15,t.next=18,Object(o.b)("expert",{query:{platformId:{$in:v}},select:"platformId platformName nickname"});case 18:if(!((h=t.sent).data&&h.data.length>0)){t.next=40;break}return _=h.data.map((function(t){return{platformId:t.platformId,platformName:t.platformName,nickname:t.nickname}})),t.next=23,r.$confirm("ä»¥ä¸‹å¹³å°IDçš„è¾¾äººå·²å­˜åœ¨ï¼Œæ˜¯å¦æ›´æ–°ï¼Ÿ\n".concat(_.map((function(t){return"å¹³å°ID: ".concat(t.platformId,", å¹³å°: ").concat(t.platformName,", æ˜µç§°: ").concat(t.nickname)})).join("\n")),"ç¡®è®¤æ›´æ–°",{confirmButtonText:"æ›´æ–°",cancelButtonText:"å–æ¶ˆ",type:"warning",dangerouslyUseHTMLString:!0}).catch((function(){return!1}));case 23:if(t.sent){t.next=27;break}return r.$message.info("å·²å–æ¶ˆå¯¼å…¥"),t.abrupt("return");case 27:return b=h.data.map((function(t){return t.platformId})),g=[],k=[],console.log("existingIds: ",b),d.forEach((function(t){console.log("item: ",t.platformId),b.includes(t.platformId)?k.push(t):g.push(t)})),console.log("æ–°å¢æ•°æ®: ",g),console.log("æ›´æ–°æ•°æ®: ",k),t.next=36,Promise.all([g.length>0?Object(o.a)("expert",g):Promise.resolve()].concat(Object(s.a)(k.map((function(t){return Object(o.d)("expert",{query:{platformId:t.platformId},update:t})})))));case 36:t.sent,r.$message.success("å¯¼å…¥å®Œæˆï¼æ–°å¢: ".concat(g.length,"æ¡, æ›´æ–°: ").concat(k.length,"æ¡")),t.next=45;break;case 40:return console.log("processedData: ",d),C=Array.isArray(d)?d:[d],t.next=44,Object(o.a)("expert",C);case 44:r.$message.success("å¯¼å…¥å®Œæˆï¼æ–°å¢: ".concat(C.length,"æ¡"));case 45:r.importDialogVisible=!1,r.fetchData(),t.next=53;break;case 49:t.prev=49,t.t0=t.catch(15),console.error("å¯¼å…¥é”™è¯¯:",t.t0),r.$message.error("å¯¼å…¥å¤±è´¥ï¼š"+(t.t0.message||"æœªçŸ¥é”™è¯¯"));case 53:case"end":return t.stop()}}),t,null,[[15,49]])})));return function(e){return t.apply(this,arguments)}}(),a.readAsArrayBuffer(e)}catch(t){console.error("å¤„ç†æ–‡ä»¶æ—¶å‡ºé”™:",t),this.$message.error("å¤„ç†æ–‡ä»¶æ—¶å‡ºé”™ï¼š"+(t.message||"æœªçŸ¥é”™è¯¯"))}finally{this.importing=!1}case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),processImportRow:function(t){var e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ã€";return t?Array.isArray(t)?t:String(t).split(e).filter(Boolean):[]};return{platformName:t["å¹³å°åç§°*"]||"",platformId:t["å¹³å°ID*"]?String(t["å¹³å°ID*"]).trim():"",platformUrl:t["å¹³å°é“¾æ¥"]||"",nickname:t["å¹³å°æ˜µç§°*"]||"",followers:this.parseNumber(t["ç²‰ä¸æ•°é‡"]),category:e(t["åˆ†ç±»"]),averageEngagement:this.parseNumber(t["å¹³å‡äº’åŠ¨ç‡"]),averageViews:this.parseNumber(t["å¹³å‡æ’­æ”¾é‡"]),videoDuration:this.parseNumber(t["è§†é¢‘å¹³å‡æ—¶é•¿"]),area:e(t["åœ°åŒº"]),country:t["å›½å®¶"]||"",region:t["çœä»½"]||"",city:t["åŸå¸‚"]||"",contactInfo:t["è”ç³»æ–¹å¼"]||"",agency:t["ç­¾çº¦æœºæ„"]||"",whatsappAccount:t["WhatsAppè´¦å·"]||"",phone:t["ç”µè¯"]||"",followerAgeRange:t["ç²‰ä¸å¹´é¾„èŒƒå›´"]||"",followerMan:this.parseNumber(t["ç”·æ€§ç²‰ä¸æ¯”ä¾‹"]),followerWoman:this.parseNumber(t["å¥³æ€§ç²‰ä¸æ¯”ä¾‹"]),followerInterests:e(t["ç²‰ä¸å…´è¶£"]),followerLocation:e(t["ç²‰ä¸åœ°ç†ä½ç½®"]).map((function(t){return"string"==typeof t?t.split("-"):[t]})),hotCategoryRatio:e(t["çƒ­é”€å“ç±»å æ¯”"]),top3Products:e(t["Top3äº§å“"]),sellingMethod:e(t["å¸¦è´§æ–¹å¼"]),productPriceMin:this.parseNumber(t["æœ€ä½å®¢å•ä»·"]),productPriceMax:this.parseNumber(t["æœ€é«˜å®¢å•ä»·"]),gpm:this.parseNumber(t.GPM),collaborationCount:0,createBy:this.$store.state.user.id,updateBy:this.$store.state.user.id,createAt:new Date,updateAt:new Date}},parseNumber:function(t){if(!t)return 0;var e=Number(t.toString().replace(/[^0-9.-]/g,""));return isNaN(e)?0:e},batchImportExperts:function(){var t=Object(l.a)(Object(n.a)().mark((function t(e){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.a)("expert",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),downloadTemplate:function(){var t=[this.templateHeaders.reduce((function(t,e){return t[e]="",t}),{})],e=m.a.utils.book_new(),a=m.a.utils.json_to_sheet(t,{header:this.templateHeaders}),s=this.templateHeaders.map((function(t){return{wch:Math.max(2*t.length,15)}}));a["!cols"]=s,m.a.utils.book_append_sheet(e,a,"è¾¾äººæ•°æ®æ¨¡æ¿"),m.a.writeFile(e,"è¾¾äººæ•°æ®å¯¼å…¥æ¨¡æ¿.xlsx")},handleSelectionChange:function(t){console.log("val: ",t),this.isSelectMode&&(this.selection=t,this.$emit("selection-change",t))},handleSelectable:function(t){return!(this.checkSelectable&&!this.checkSelectable(t))&&(this.multiple?this.selection.length<this.maxSelect||this.selection.includes(t):0===this.selection.length||this.selection.includes(t))},getSelectedExperts:function(){return this.selection},clearSelection:function(){this.$refs.baseTable&&this.$refs.baseTable.$refs.table&&(this.$refs.baseTable.$refs.table.clearSelection(),this.selection=[])},setSelection:function(t){var e=this;this.clearSelection(),this.$refs.baseTable&&this.$refs.baseTable.$refs.table&&t.forEach((function(t){e.$refs.baseTable.$refs.table.toggleRowSelection(t,!0)}))},formatDate:function(t){if(!t)return"æš‚æ— æ•°æ®";var e=new Date(t);if(isNaN(e.getTime()))return"æ— æ•ˆæ—¥æœŸ";var a=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(r," ").concat(i,":").concat(n)}},"formatNumber",(function(t){return t||0===t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"})),"openUrl",(function(t){t&&window.open(t,"_blank")})),watch:{selectedIds:{immediate:!0,handler:function(t){if(this.isSelectMode&&t&&t.length){var e=this.tableList.filter((function(e){return t.includes(e._id)}));this.setSelection(e)}}}}},f=v,h=(a("23e2"),a("2877")),_=Object(h.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("ç­›é€‰æœç´¢")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.toggleAdvanced}},[t._v("\n        "+t._s(t.showAdvanced?"æ”¶èµ·":"å±•å¼€")+"é«˜çº§æœç´¢\n      ")])],1),t._v(" "),a("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{model:t.searchForm}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"è¾¾äººå§“å"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥è¾¾äººå§“å",clearable:""},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"åˆä½œå¹³å°"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©å¹³å°",clearable:""},model:{value:t.searchForm.platformName,callback:function(e){t.$set(t.searchForm,"platformName",e)},expression:"searchForm.platformName"}},t._l(t.dict.type.expert_platform,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"å¹³å°ID"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥å¹³å°ID",clearable:""},model:{value:t.searchForm.platformId,callback:function(e){t.$set(t.searchForm,"platformId",e)},expression:"searchForm.platformId"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"å¹³å°æ˜µç§°"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥å¹³å°æ˜µç§°",clearable:""},model:{value:t.searchForm.platformNickname,callback:function(e){t.$set(t.searchForm,"platformNickname",e)},expression:"searchForm.platformNickname"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"å¹³å°é“¾æ¥"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥å¹³å°é“¾æ¥",clearable:""},model:{value:t.searchForm.platformUrl,callback:function(e){t.$set(t.searchForm,"platformUrl",e)},expression:"searchForm.platformUrl"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"ç­¾çº¦æœºæ„"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç­¾çº¦æœºæ„",clearable:""},model:{value:t.searchForm.agency,callback:function(e){t.$set(t.searchForm,"agency",e)},expression:"searchForm.agency"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"è¾¾äººç­‰çº§"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©è¾¾äººç­‰çº§",clearable:""},model:{value:t.searchForm.level,callback:function(e){t.$set(t.searchForm,"level",e)},expression:"searchForm.level"}},t._l(t.dict.type.level,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"WhatsApp"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥WhatsAppè´¦å·",clearable:""},model:{value:t.searchForm.whatsappAccount,callback:function(e){t.$set(t.searchForm,"whatsappAccount",e)},expression:"searchForm.whatsappAccount"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"è¾¾äººåˆ†ç±»"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©è¾¾äººåˆ†ç±»",clearable:""},model:{value:t.searchForm.category,callback:function(e){t.$set(t.searchForm,"category",e)},expression:"searchForm.category"}},t._l(t.dict.type.category,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"å¸¦è´§æ–¹å¼"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"","collapse-tags":"",placeholder:"è¯·é€‰æ‹©å¸¦è´§æ–¹å¼"},model:{value:t.searchForm.sellingMethod,callback:function(e){t.$set(t.searchForm,"sellingMethod",e)},expression:"searchForm.sellingMethod"}},t._l(t.dict.type.delivery_method,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"å›½å®¶"}},[a("ZrAddressSelect",{attrs:{checkStrictly:!0,isMultiple:!0},model:{value:t.searchForm.area,callback:function(e){t.$set(t.searchForm,"area",e)},expression:"searchForm.area"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"åˆä½œå“ç‰Œ"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",clearable:"",placeholder:"è¯·é€‰æ‹©æˆ–è€…è¾“å…¥åˆä½œå“ç‰Œ"},model:{value:t.searchForm.cooperationBrands,callback:function(e){t.$set(t.searchForm,"cooperationBrands",e)},expression:"searchForm.cooperationBrands"}},t._l(t.dict.type.brand,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdvanced,expression:"showAdvanced"}]},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"ç²‰ä¸æ•°èŒƒå›´"}},[a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"æœ€å°å€¼"},model:{value:t.searchForm.minFollowers,callback:function(e){t.$set(t.searchForm,"minFollowers",e)},expression:"searchForm.minFollowers"}}),t._v(" "),a("span",{staticStyle:{margin:"0 10px"}},[t._v("-")]),t._v(" "),a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"æœ€å¤§å€¼"},model:{value:t.searchForm.maxFollowers,callback:function(e){t.$set(t.searchForm,"maxFollowers",e)},expression:"searchForm.maxFollowers"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"å¥³æ€§å æ¯”èŒƒå›´"}},[a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,max:100,placeholder:"æœ€å°å€¼"},model:{value:t.searchForm.followerWomanMin,callback:function(e){t.$set(t.searchForm,"followerWomanMin",e)},expression:"searchForm.followerWomanMin"}}),t._v(" "),a("span",{staticStyle:{margin:"0 10px"}},[t._v("-")]),t._v(" "),a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,max:100,placeholder:"æœ€å¤§å€¼"},model:{value:t.searchForm.followerWomanMax,callback:function(e){t.$set(t.searchForm,"followerWomanMax",e)},expression:"searchForm.followerWomanMax"}})],1)],1)],1)],1)]),t._v(" "),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdvanced,expression:"showAdvanced"}]},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"æœˆé”€é‡èŒƒå›´"}},[a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"æœ€å°å€¼"},model:{value:t.searchForm.monthlySalesMin,callback:function(e){t.$set(t.searchForm,"monthlySalesMin",e)},expression:"searchForm.monthlySalesMin"}}),t._v(" "),a("span",{staticStyle:{margin:"0 10px"}},[t._v("-")]),t._v(" "),a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"æœ€å¤§å€¼"},model:{value:t.searchForm.monthlySalesMax,callback:function(e){t.$set(t.searchForm,"monthlySalesMax",e)},expression:"searchForm.monthlySalesMax"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"æœˆé”€å”®é¢èŒƒå›´"}},[a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"æœ€å°å€¼"},model:{value:t.searchForm.monthlySalesAmountMin,callback:function(e){t.$set(t.searchForm,"monthlySalesAmountMin",e)},expression:"searchForm.monthlySalesAmountMin"}}),t._v(" "),a("span",{staticStyle:{margin:"0 10px"}},[t._v("-")]),t._v(" "),a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"æœ€å¤§å€¼"},model:{value:t.searchForm.monthlySalesAmountMax,callback:function(e){t.$set(t.searchForm,"monthlySalesAmountMax",e)},expression:"searchForm.monthlySalesAmountMax"}})],1)],1)],1)],1)]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("æŸ¥è¯¢æœç´¢")]),t._v(" "),a("el-button",{on:{click:t.resetForm}},[t._v("é‡ç½®")]),t._v(" "),t.isSelectMode?t._e():[a("el-button",{attrs:{type:"success"},on:{click:t.exportData}},[t._v("å¯¼å‡ºæ•°æ®")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:t.showImportDialog}},[t._v("å¯¼å…¥æ•°æ®")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:t.downloadTemplate}},[t._v("ä¸‹è½½æ¨¡æ¿")])]],2)],1)],1),t._v(" "),t.isSelectMode?t._e():a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("è¾¾äººåˆ—è¡¨")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.addExpert}},[t._v("æ·»åŠ è¾¾äºº")])],1)])]),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{"selection-change":t.handleSelectionChange,handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[t.isSelectMode?a("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.handleSelectable}}):t._e(),t._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"expert-expand",attrs:{"label-position":"left",inline:""}},[a("el-row",{staticClass:"expand-section"},[a("div",{staticClass:"section-title"},[t._v("ç²‰ä¸ç”»åƒ")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"ç²‰ä¸å¹´é¾„"}},[a("span",[t._v(t._s(e.row.followerAgeRange||"æš‚æ— æ•°æ®"))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"æ€§åˆ«æ¯”ä¾‹"}},[a("span",[t._v("ç”·: "+t._s(e.row.followerMan)+"% / å¥³: "+t._s(e.row.followerWoman)+"%")])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"ç²‰ä¸å…´è¶£"}},t._l(e.row.followerInterests,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)],1)],1),t._v(" "),a("el-row",{staticClass:"expand-section"},[a("div",{staticClass:"section-title"},[t._v("å•†ä¸šæ•°æ®")]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"çƒ­é”€å“ç±»å æ¯”"}},[a("span",[t._v(t._s(e.row.hotCategoryRatio)+"%")])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"å®¢å•ä»·"}},[a("span",[t._v("Â¥"+t._s(e.row.productPrice||0))])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"GPM"}},[a("span",[t._v(t._s(e.row.gpm||0))])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"å¸¦è´§æ–¹å¼"}},t._l(e.row.sellingMethod,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)],1)],1),t._v(" "),a("el-row",{staticClass:"expand-section"},[a("div",{staticClass:"section-title"},[t._v("ç»çºªäººä¿¡æ¯")]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"ç»çºªäºº"}},[a("span",[t._v(t._s(e.row.createBy&&e.row.createBy.nickName||"æš‚æ— æ•°æ®"))])])],1)],1),t._v(" "),e.row.cooperationHistory&&e.row.cooperationHistory.length?a("el-row",{staticClass:"expand-section"},[a("div",{staticClass:"section-title"},[t._v("å†å²åˆä½œè®°å½•")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.cooperationHistory,size:"mini",border:""}},[a("el-table-column",{attrs:{prop:"brands",label:"åˆä½œå“ç‰Œ",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"videos",label:"è§†é¢‘/ç›´æ’­",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"score",label:"è¯„åˆ†",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sales",label:"é”€å”®é¢",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    Â¥"+t._s(t.formatNumber(e.row.sales))+"\n                  ")]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"å¤‡æ³¨"}})],1)],1):t._e()],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"å¹³å°ID",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"info"}},[t._v(t._s(e.row.platformId))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"æ˜µç§°",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.nickname)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"å¹³å°",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.platformName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"åˆ†ç±»",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.category,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n            "+t._s(e)+"\n          ")])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"å¸¦è´§æ–¹å¼",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.sellingMethod,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n            "+t._s(e)+"\n          ")])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"ç­¾çº¦æœºæ„",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.agency?a("span",[a("i",{staticClass:"el-icon-office-building"}),t._v(" "+t._s(e.row.agency)+"\n          ")]):a("span",[t._v("-")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"ç»çºªäºº",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.createBy&&e.row.createBy.nickName||"æš‚æ— æ•°æ®"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"è¾¾äººç­‰çº§",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.row.level))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"ç²‰ä¸æ•°",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.fansNumber(e.row.followers))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"å¥³ç²‰å æ¯”",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.followerWoman||0)+"%")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"äº’åŠ¨ç‡",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.getEngagementClass(e.row.averageEngagement)},[t._v("\n            "+t._s(e.row.averageEngagement)+"%\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"å¹³å‡æ’­æ”¾",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.fansNumber(e.row.averageViews))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"æœˆé”€é‡",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.monthlySales||0)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"æœˆé”€å”®é¢",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.monthlySalesAmount||0)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"åœ°åŒº",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.area?a("div",[t._v("\n            "+t._s(t.formatArea(e.row.area))+"\n          ")]):a("div",[t._v("æœªå¡«å†™åœ°åŒºä¿¡æ¯")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"å¹³å°é“¾æ¥",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.platformUrl?a("el-link",{attrs:{type:"primary",href:e.row.platformUrl,target:"_blank"}},[a("i",{staticClass:"el-icon-link"}),t._v(" è®¿é—®\n          ")]):a("span",[t._v("-")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"WhatsApp",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.whatsappAccount?a("span",[a("i",{staticClass:"el-icon-chat-dot-square"}),t._v(" "+t._s(e.row.whatsappAccount)+"\n          ")]):a("span",[t._v("-")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"å®¢å•ä»·",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.productPriceMin||e.row.productPriceMax?[t._v("\n            Â¥"+t._s(e.row.productPriceMin||0)+" - Â¥"+t._s(e.row.productPriceMax||0)+"\n          ")]:a("span",[t._v("-")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"GPM",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.getGPMClass(e.row.gpm)},[t._v("\n            "+t._s(e.row.gpm||0)+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"åˆä½œæ¬¡æ•°",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("\n            "+t._s(e.row.collaborationCount||0)+"\n          ")])]}}])}),t._v(" "),t.isSelectMode?t._e():a("el-table-column",{attrs:{align:"center",label:"æ“ä½œ",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleView(s)}}},[t._v("æŸ¥çœ‹è¯¦æƒ…")]),t._v(" "),t.hasPermission(s)?[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("ç¼–è¾‘")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("åˆ é™¤")])]:t._e()]]}}],null,!1,397326986)})],1)],2),t._v(" "),a("edit-dialog",{attrs:{dialogFormVisible:t.dialogFormVisible,dialogStatus:t.dialogStatus,dataForm:t.dataForm},on:{"update:dialogFormVisible":function(e){t.dialogFormVisible=e},"update:dialog-form-visible":function(e){t.dialogFormVisible=e},submit:t.handleSubmit}}),t._v(" "),a("el-dialog",{attrs:{title:"è¾¾äººè¯¦æƒ…",visible:t.detailDialogVisible,width:"80%","custom-class":"modern-expert-dialog"},on:{"update:visible":function(e){t.detailDialogVisible=e},close:t.detailDialogClose}},[a("div",{staticClass:"expert-detail-container"},[a("el-card",{staticClass:"detail-card account-info"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("i",{staticClass:"el-icon-user"}),t._v(" "),a("span",[t._v("è´¦å·ä¿¡æ¯")])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[t._v("åŸºç¡€ä¿¡æ¯")]),t._v(" "),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("æ‰€å±å¹³å°")]),t._v(" "),a("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v(t._s(t.detailForm.platformName))])],1),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("å¹³å°ID")]),t._v(" "),a("el-tag",{attrs:{type:"info",effect:"plain"}},[t._v(t._s(t.detailForm.platformId))])],1),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("å¹³å°æ˜µç§°")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v(t._s(t.detailForm.nickname))])])]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("è´¦å·é“¾æ¥")]),t._v(" "),t.detailForm.platformUrl?a("el-link",{attrs:{type:"primary",href:t.detailForm.platformUrl,target:"_blank"}},[a("i",{staticClass:"el-icon-link"}),t._v(" è®¿é—®ä¸»é¡µ\n                ")]):a("span",{staticClass:"empty-value"},[t._v("æš‚æ— é“¾æ¥")])],1),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("è¾¾äººç­‰çº§")]),t._v(" "),a("el-tag",{staticClass:"level-tag",attrs:{type:"warning",effect:"dark"}},[t._v(t._s(t.detailForm.level))])],1),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("ç»çºªäºº")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.detailForm.createBy&&t.detailForm.createBy.nickName||"æš‚æ— "))])])]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item full-width"},[a("span",{staticClass:"label"},[t._v("è´¦å·åˆ†ç±»")]),t._v(" "),a("div",{staticClass:"tags-container"},t._l(t.detailForm.category,(function(e){return a("el-tag",{key:e,staticClass:"category-tag",attrs:{size:"small",effect:"light"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)])])])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[t._v("è”ç³»æ–¹å¼")]),t._v(" "),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("ç”µè¯")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.detailForm.phone||"æš‚æ— "))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("WhatsApp")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.detailForm.whatsappAccount||"æš‚æ— "))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("ç­¾çº¦æœºæ„")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.detailForm.agency||"æš‚æ— "))])])]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item full-width"},[a("span",{staticClass:"label"},[t._v("å…¶ä»–è”ç³»æ–¹å¼")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.detailForm.contactInfo||"æš‚æ— "))])])])])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[t._v("å¹³å°æ•°æ®")]),t._v(" "),a("div",{staticClass:"stats-grid"},[a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-value"},[t._v(t._s(t.fansNumber(t.detailForm.followers)))]),t._v(" "),a("div",{staticClass:"stat-label"},[t._v("ç²‰ä¸æ•°é‡")])]),t._v(" "),a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-value",class:t.getEngagementClass(t.detailForm.averageEngagement)},[t._v("\n                "+t._s(t.detailForm.averageEngagement)+"%\n              ")]),t._v(" "),a("div",{staticClass:"stat-label"},[t._v("å¹³å‡äº’åŠ¨ç‡")])]),t._v(" "),a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-value"},[t._v(t._s(t.fansNumber(t.detailForm.averageViews)))]),t._v(" "),a("div",{staticClass:"stat-label"},[t._v("å¹³å‡æ’­æ”¾é‡")])]),t._v(" "),a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-value"},[t._v("Â¥"+t._s(t.formatNumber(t.detailForm.monthlySalesAmount)))]),t._v(" "),a("div",{staticClass:"stat-label"},[t._v("æœˆé”€å”®é¢")])])])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[t._v("ç²‰ä¸ç”»åƒ")]),t._v(" "),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("ç”·æ€§ç²‰ä¸")]),t._v(" "),a("div",{staticClass:"percentage-bar"},[a("div",{staticClass:"percentage-value"},[t._v(t._s(t.detailForm.followerMan)+"%")]),t._v(" "),a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"progress-inner male",style:{width:t.detailForm.followerMan+"%"}})])])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("å¥³æ€§ç²‰ä¸")]),t._v(" "),a("div",{staticClass:"percentage-bar"},[a("div",{staticClass:"percentage-value"},[t._v(t._s(t.detailForm.followerWoman)+"%")]),t._v(" "),a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"progress-inner female",style:{width:t.detailForm.followerWoman+"%"}})])])])])])])]),t._v(" "),a("el-card",{staticClass:"detail-card sales-history"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("i",{staticClass:"el-icon-shopping-cart-full"}),t._v(" "),a("span",[t._v("å¸¦è´§æ•°æ®ä¸åˆä½œå†å²")])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-data-line"}),t._v(" "),a("span",[t._v("å¸¦è´§æ•°æ®")])]),t._v(" "),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("çƒ­é”€å“ç±»å æ¯”")]),t._v(" "),a("div",{staticClass:"tags-container"},t._l(t.detailForm.hotCategoryRatio,(function(e){return a("el-tag",{key:e,staticClass:"category-tag",attrs:{size:"small",effect:"light"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("å¸¦è´§æ–¹å¼")]),t._v(" "),a("div",{staticClass:"tags-container"},t._l(t.detailForm.sellingMethod,(function(e){return a("el-tag",{key:e,attrs:{type:"success",effect:"light",size:"small"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)])]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("å®¢å•ä»·åŒºé—´")]),t._v(" "),a("span",{staticClass:"value"},[t._v("Â¥"+t._s(t.detailForm.productPriceMin||0)+" - Â¥"+t._s(t.detailForm.productPriceMax||0))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("GPM")]),t._v(" "),a("span",{staticClass:"value",class:t.getGPMClass(t.detailForm.gpm)},[t._v(t._s(t.detailForm.gpm||0))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("æœˆé”€é‡")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v(t._s(t.detailForm.monthlySales||0))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("æœˆé”€å”®é¢")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v("Â¥"+t._s(t.detailForm.monthlySalesAmount||0))])])]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item full-width"},[a("span",{staticClass:"label"},[t._v("å¸¦è´§TOP3äº§å“")]),t._v(" "),a("div",{staticClass:"tags-container"},t._l(t.detailForm.top3Products,(function(e){return a("el-tag",{key:e,attrs:{type:"warning",effect:"light",size:"small"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)])])])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-time"}),t._v(" "),a("span",[t._v("åˆä½œå†å²")]),t._v(" "),a("span",{staticClass:"cooperation-count"},[t._v("å…±"+t._s((t.detailForm.cooperationHistory||[]).length)+"æ¬¡åˆä½œ")])]),t._v(" "),a("el-table",{staticClass:"history-table",staticStyle:{width:"100%"},attrs:{data:t.detailForm.cooperationHistory||[],"max-height":400}},[a("el-table-column",{attrs:{label:"å“ç‰Œä¿¡æ¯",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"brand-info"},[a("div",{staticClass:"brand-name"},[t._v(t._s(e.row.brandName))]),t._v(" "),a("el-tag",{attrs:{size:"mini",effect:"plain"}},[t._v(t._s(e.row.brandCategory))])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"è§†é¢‘æ•°æ®",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"video-stats"},[a("div",{staticClass:"stat-item"},[a("i",{staticClass:"el-icon-video-camera"}),t._v(" "),e.row.videoUrl?a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.openUrl(e.row.videoUrl)}}},[t._v("\n                      æŸ¥çœ‹è§†é¢‘\n                    ")]):a("span",[t._v("æš‚æ— è§†é¢‘")])],1),t._v(" "),a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("å‘å¸ƒæ—¶é—´ï¼š")]),t._v(" "),a("span",[t._v(t._s(t.formatDate(e.row.videoPublishTime)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("GMVï¼š")]),t._v(" "),a("span",{staticClass:"highlight"},[t._v("Â¥"+t._s(t.formatNumber(e.row.videoGMV)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("è®¢å•æ•°ï¼š")]),t._v(" "),a("span",[t._v(t._s(t.formatNumber(e.row.videoOrders)))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"äº’åŠ¨æ•°æ®",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"interaction-stats"},[a("div",{staticClass:"stat-row"},[a("i",{staticClass:"el-icon-view"}),t._v(" "),a("span",[t._v(t._s(t.formatNumber(e.row.videoViews)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",[t._v(t._s(t.formatNumber(e.row.videoLikes)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),a("span",[t._v(t._s(t.formatNumber(e.row.videoComments)))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"ç›´æ’­æ•°æ®",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"live-stats"},[a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("ç›´æ’­æ—¶é—´ï¼š")]),t._v(" "),a("span",[t._v(t._s(t.formatDate(e.row.liveTime)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("GMVï¼š")]),t._v(" "),a("span",{staticClass:"highlight"},[t._v("Â¥"+t._s(t.formatNumber(e.row.liveGMV)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("è®¢å•æ•°ï¼š")]),t._v(" "),a("span",[t._v(t._s(t.formatNumber(e.row.liveOrders)))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"è¯„ä»·",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"evaluation"},[a("el-rate",{attrs:{disabled:"","show-score":""},model:{value:e.row.score,callback:function(a){t.$set(e.row,"score",a)},expression:"scope.row.score"}}),t._v(" "),e.row.remark?a("div",{staticClass:"remark"},[a("i",{staticClass:"el-icon-tickets"}),t._v("\n                    "+t._s(e.row.remark)+"\n                  ")]):t._e()],1)]}}])})],1)],1)])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"å¯¼å…¥è¾¾äººæ•°æ®",visible:t.importDialogVisible,width:"500px"},on:{"update:visible":function(e){t.importDialogVisible=e}}},[a("div",{staticClass:"import-dialog"},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#","auto-upload":!1,"on-change":t.handleFileChange,"file-list":t.fileList,accept:".xlsx,.xls"}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–"),a("em",[t._v("ç‚¹å‡»ä¸Šä¼ ")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("åªèƒ½ä¸Šä¼  xlsx/xls æ–‡ä»¶")])])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.importDialogVisible=!1}}},[t._v("å–æ¶ˆ")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.importing},on:{click:t.importData}},[t._v("å¼€å§‹å¯¼å…¥")])],1)])],1)}),[],!1,null,"1a4e3556",null);e.default=_.exports},b695:function(t,e,a){"use strict";a("8fe3")},c466:function(t,e,a){"use strict";function s(t){return t?(("string"==typeof t||"number"==typeof t)&&(t=new Date(t)),console.log(t),t.getFullYear()+"-"+(t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())):""}function r(t){return t||0===t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"}a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return r})),a("6b54"),a("a481")},cf83:function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=(a("96cf"),a("1da1")),i=(a("6762"),a("2fdb"),a("ac6a"),a("456d"),a("7e1e")),n={dicts:["tracker_task_progress"],name:"TaskProgressDialog",props:{visible:{type:Boolean,default:!1},currentClaim:{type:Object,default:function(){return{}}},statusList:{type:Array,default:function(){return[]}}},data:function(){return{isAdmin:!1,isAgent:!1,isTracker:!1,currentUserId:"",form:{status:"",trackerId:"",step:"",remark:"",trackingInfo:{buildConnectionSource:"",cooperationDate:null,receiveTime:null,estimatedPublishTime:null}},rules:{status:[{required:!0,message:"è¯·é€‰æ‹©è¿›åº¦çŠ¶æ€",trigger:"change"}],step:[{message:"è¯·è¾“å…¥è¿›åº¦è¯´æ˜",trigger:"blur"}],"trackingInfo.buildConnectionSource":[{required:!0,message:"è¯·è¾“å…¥å»ºè”æ¥æº",trigger:"blur"}],"trackingInfo.cooperationDate":[{required:!0,message:"è¯·é€‰æ‹©ç¡®å®šåˆä½œæ—¥",trigger:"change"}],"trackingInfo.receiveTime":[{required:!0,message:"è¯·é€‰æ‹©æ”¶è´§æ—¶é—´",trigger:"change"}],"trackingInfo.estimatedPublishTime":[{required:!0,message:"è¯·é€‰æ‹©é¢„è®¡å‘å¸ƒæ—¶é—´",trigger:"change"}]},trackerOptions:[]}},watch:{visible:{immediate:!0,handler:function(t){t&&(this.initForm(),this.getCurrentUser(),this.loadTrackerOptions())}},currentClaim:{immediate:!0,handler:function(t){t&&Object.keys(t).length>0&&this.initForm()}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}},showTrackingInfo:function(){return console.log(this.dict.type),this.dict.type.tracker_task_progress.map((function(t){return t.value})).includes(this.form.status)},availableStatuses:function(){return this.statusList}},methods:{handleClose:function(){this.dialogVisible=!1},getCurrentUser:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.isAdmin=this.$store.getters.roles.label.includes("Admin"),this.isAgent=this.$store.getters.roles.label.includes("Agent")||this.$store.getters.roles.label.includes("Admin"),this.isTracker=this.$store.getters.roles.label.includes("Tracker")||this.$store.getters.roles.label.includes("Admin"),this.currentUserId=this.$store.state.user.id}catch(t){console.error("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",t)}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),initForm:function(){if(this.currentClaim){var t=this.currentClaim.progressSteps||[],e=(t.length>0?t[t.length-1]:{}).trackingInfo||{};this.form={status:this.currentClaim.status||"",trackerId:this.currentClaim.trackerId||"",step:"",remark:"",trackingInfo:{buildConnectionSource:e.buildConnectionSource||"",cooperationDate:e.cooperationDate||null,receiveTime:e.receiveTime||null,estimatedPublishTime:e.estimatedPublishTime||null}}}},loadTrackerOptions:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i.b)("user_login",{query:{role:"6734de3a55647e147063f158"}});case 3:(e=t.sent).data&&(this.trackerOptions=e.data.map((function(t){return{value:t._id,label:t.nickName||t.username}}))),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("è·å–ä»»åŠ¡è·Ÿè¸ªå‘˜åˆ—è¡¨å¤±è´¥:",t.t0),this.$message.error("è·å–ä»»åŠ¡è·Ÿè¸ªå‘˜åˆ—è¡¨å¤±è´¥");case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),handleSubmit:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs.progressForm.validate();case 3:if("åˆä½œæˆåŠŸ"!==this.form.status){t.next=13;break}if(this.form.trackerId){t.next=7;break}return this.$message.error("è¯·é€‰æ‹©ä»»åŠ¡è·Ÿè¸ªå‘˜"),t.abrupt("return");case 7:if(this.form.trackingInfo.buildConnectionSource){t.next=10;break}return this.$message.error("è¯·è¾“å…¥å»ºè”æ¥æº"),t.abrupt("return");case 10:if(this.form.trackingInfo.cooperationDate){t.next=13;break}return this.$message.error("è¯·é€‰æ‹©ç¡®å®šåˆä½œæ—¥"),t.abrupt("return");case 13:if("å·²ç­¾æ”¶"!==this.form.status||this.form.trackingInfo.receiveTime){t.next=16;break}return this.$message.error("è¯·é€‰æ‹©æ”¶è´§æ—¶é—´"),t.abrupt("return");case 16:if("å†…å®¹åˆ¶ä½œä¸­"!==this.form.status||this.form.trackingInfo.estimatedPublishTime){t.next=19;break}return this.$message.error("è¯·é€‰æ‹©é¢„è®¡å‘å¸ƒæ—¶é—´"),t.abrupt("return");case 19:this.$emit("submit",this.form),this.handleClose(),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),console.error("è¡¨å•éªŒè¯å¤±è´¥:",t.t0);case 26:case"end":return t.stop()}}),t,this,[[0,23]])})));return function(){return t.apply(this,arguments)}}()}},l=n,o=a("2877"),c=Object(o.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"æ›´æ–°è¿›åº¦",visible:t.dialogVisible,width:"60%","custom-class":"progress-dialog","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[a("el-form",{ref:"progressForm",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"è¿›åº¦çŠ¶æ€",prop:"status"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.availableStatuses,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),"åˆä½œæˆåŠŸ"===t.form.status?a("el-form-item",{attrs:{label:"ä»»åŠ¡è·Ÿè¸ªå‘˜",prop:"trackerId",rules:{required:!0,message:"è¯·é€‰æ‹©ä»»åŠ¡è·Ÿè¸ªå‘˜",trigger:"change"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"è¯·é€‰æ‹©ä»»åŠ¡è·Ÿè¸ªå‘˜"},model:{value:t.form.trackerId,callback:function(e){t.$set(t.form,"trackerId",e)},expression:"form.trackerId"}},t._l(t.trackerOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t._v(" "),t.isAgent?[a("div",{staticClass:"tracking-info-section"},[["åˆä½œæˆåŠŸ"].includes(t.form.status)?a("el-form-item",{attrs:{label:"å»ºè”æ¥æº",prop:"trackingInfo.buildConnectionSource"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥å»ºè”æ¥æº"},model:{value:t.form.trackingInfo.buildConnectionSource,callback:function(e){t.$set(t.form.trackingInfo,"buildConnectionSource",e)},expression:"form.trackingInfo.buildConnectionSource"}})],1):t._e(),t._v(" "),["åˆä½œæˆåŠŸ"].includes(t.form.status)?a("el-form-item",{attrs:{label:"ç¡®å®šåˆä½œæ—¥",prop:"trackingInfo.cooperationDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"é€‰æ‹©ç¡®å®šåˆä½œæ—¥"},model:{value:t.form.trackingInfo.cooperationDate,callback:function(e){t.$set(t.form.trackingInfo,"cooperationDate",e)},expression:"form.trackingInfo.cooperationDate"}})],1):t._e()],1)]:t._e(),t._v(" "),t.isTracker?[a("div",{staticClass:"tracking-info-section"},[["å·²ç­¾æ”¶"].includes(t.form.status)?a("el-form-item",{attrs:{label:"æ”¶è´§æ—¶é—´",prop:"trackingInfo.receiveTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"é€‰æ‹©æ”¶è´§æ—¶é—´"},model:{value:t.form.trackingInfo.receiveTime,callback:function(e){t.$set(t.form.trackingInfo,"receiveTime",e)},expression:"form.trackingInfo.receiveTime"}})],1):t._e()],1)]:t._e(),t._v(" "),a("el-form-item",{attrs:{label:"è¿›åº¦å¤‡æ³¨",prop:"step"}},[a("el-input",{attrs:{placeholder:"è¿›åº¦å¤‡æ³¨"},model:{value:t.form.step,callback:function(e){t.$set(t.form,"step",e)},expression:"form.step"}})],1)],2),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("å– æ¶ˆ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("ç¡® å®š")])],1)],1)}),[],!1,null,null,null);e.default=c.exports},eccf:function(t,e,a){},f693:function(t,e,a){"use strict";a("eccf")},fae1:function(t,e,a){}}]);