import{_ as S,r as i,u as U,o as q,a as M,C as B,l as E,d as l,e as a,t as r,f as n,i as H,F as w,g as x,p as F,k as P,b as V,c as s,q as $,h as g}from"./index-WZzBQvbR.js";import{g as j}from"./api-h7D4b6WS.js";const A={class:"container"},R={class:"nybanner"},W={class:"fadeInUp animated nybanner_txt animate__animated animate__fadeInUp"},G={class:"main_list"},J={class:"nav fadeInUp animated nybanner_txt animate__animated animate__fadeInUp"},K=["onClick"],O={key:0,class:"main_list_con"},Q=["onClick"],X=["src"],Y=["innerHTML"],Z=["innerHTML"],ee={class:"spans"},ae={class:"span2"},ne={key:1,class:"nothing"},te={class:"pagination_outer"},se={class:"pagination"},le={__name:"new",setup(oe){i("");let y=i([]),b=i(null),h=i(null),u=i(10),m=i(1),v=i(null);const T=U(),L=e=>{T.push({path:"/newDetail",query:{id:e._id}})};q(()=>{d().then(()=>{_()})});const _=()=>{b.value.forEach((e,o)=>{setTimeout(()=>{e.style.opacity="1"},o*300)})};let C=M([{label:"全部",label_en:"All",active:!1,type:null},{label:"公司新闻",label_en:"Company News",active:!1,type:"公司新闻"},{label:"行业资讯",label_en:"Industry Information",active:!1,type:"行业资讯"},{label:"企业文化",label_en:"Corporate Culture",active:!1,type:"企业文化"}]);const D=e=>{C.forEach(o=>{o.active=!1}),e.active=!0,v.value=e.type,d(e.type).then(()=>{_()})},I=e=>{m.value=e,d(v.value).then(()=>{_()})},z=e=>{u.value=e,d(v.value).then(()=>{_()})},d=async e=>{console.log(e);let o={query:{newsType:e},limit:u.value,skip:(m.value-1)*u.value,count:!0};console.log(o,"req");let c=await j("companyNews",o);console.log("res",c),c.code===200&&(y.value=c.data,h.value=c.countnum)},k=B(()=>y.value.map(e=>({...e,formattedTime:new Date(e.publishDate).toLocaleDateString()})));let p=E();return(e,o)=>{const c=V("el-pagination");return s(),l("div",A,[a("div",R,[a("div",W,[a("h1",null,r(n(p).mainLanguage=="chinese"?"新闻中心":"NEWS"),1),a("p",null,[H(r(n(p).mainLanguage=="chinese"?"为客户提供全面的智能制造解决方案和服务":"Provide customers with comprehensive intelligent manufacturing solutions and services")+" ",1),a("span",null,r(n(p).mainLanguage=="chinese"?"数字化转型和升级":"Digital transformation and upgrading"),1)])])]),a("div",G,[a("div",J,[(s(!0),l(w,null,x(n(C),(t,f)=>(s(),l("div",{class:"nav_md",key:f},[a("a",{href:"#",class:$(t.active?"nav_md_txtblue":""),onClick:N=>D(t)},[a("h4",null,r(n(g)(t,"label")),1)],10,K)]))),128))]),k.value.length>0?(s(),l("div",O,[(s(!0),l(w,null,x(k.value,(t,f)=>(s(),l("div",{class:"main_list_box fadeInUp animated nybanner_txt animate__animated animate__fadeInUp",key:f,onClick:N=>L(t)},[a("div",{class:"animate",ref_for:!0,ref_key:"box",ref:b},[a("img",{src:t.image,alt:""},null,8,X),a("h3",null,r(n(g)(t,"newsTitle")),1),n(p).mainLanguage=="chinese"?(s(),l("p",{key:0,innerHTML:t.newsContent},null,8,Y)):(s(),l("p",{key:1,innerHTML:t.newsContent_en},null,8,Z)),a("span",ee,r(n(g)(t,"newsType")),1),a("span",ae,r(n(g)(t,"formattedTime")),1)],512)],8,Q))),128))])):(s(),l("div",ne,"暂无内容"))]),a("div",te,[a("div",se,[n(h)?(s(),F(c,{key:0,background:"",class:"pagination",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:z,onCurrentChange:I,"current-page":n(m),"page-size":n(u),"page-sizes":[10,20,50,100],total:n(h)},null,8,["current-page","page-size","total"])):P("",!0)])])])}}},ce=S(le,[["__scopeId","data-v-174b8a79"]]);export{ce as default};
