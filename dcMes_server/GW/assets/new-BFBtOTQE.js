import{_ as H,r as o,h as M,o as B,i as E,H as P,l as F,c as l,b as a,t as r,u as n,q as V,F as x,k as T,x as j,e as L,j as R,a as s,y as W,m as h}from"./index-pQ6d-6p_.js";import{g as $}from"./api-Bwklrrn_.js";const A={class:"container"},G={class:"nybanner"},J={class:"fadeInUp animated nybanner_txt animate__animated animate__fadeInUp"},K={class:"main_list"},O={class:"nav fadeInUp animated nybanner_txt animate__animated animate__fadeInUp"},Q=["onClick"],X={key:0,class:"main_list_con"},Y=["onClick"],Z=["src"],ee=["innerHTML"],ae=["innerHTML"],ne={class:"spans"},te={class:"span2"},se={key:1,class:"nothing"},le={class:"pagination_outer"},oe={key:0,class:"pagination"},ie={__name:"new",setup(re){let y=o(!1);const z=()=>{y.value=window.innerWidth<=800};o("");let b=o([]),k=o(null),g=o(null),u=o(10),m=o(1),v=o(null);const D=M(),I=e=>{D.push({path:"/newDetail",query:{id:e._id}})};B(()=>{d().then(()=>{_()}),z()});const _=()=>{k.value.forEach((e,i)=>{setTimeout(()=>{e.style.opacity="1"},i*300)})};let C=E([{label:"全部",label_en:"All",active:!1,type:null},{label:"公司新闻",label_en:"Company News",active:!1,type:"公司新闻"},{label:"行业资讯",label_en:"Industry Information",active:!1,type:"行业资讯"},{label:"企业文化",label_en:"Corporate Culture",active:!1,type:"企业文化"}]);const N=e=>{C.forEach(i=>{i.active=!1}),e.active=!0,v.value=e.type,d(e.type).then(()=>{_()})},S=e=>{m.value=e,d(v.value).then(()=>{_()})},U=e=>{u.value=e,d(v.value).then(()=>{_()})},d=async e=>{console.log(e);let i={query:{newsType:e},limit:u.value,skip:(m.value-1)*u.value,count:!0};console.log(i,"req");let c=await $("companyNews",i);console.log("res",c),c.code===200&&(b.value=c.data,g.value=c.countnum)},w=P(()=>b.value.map(e=>({...e,formattedTime:new Date(e.publishDate).toLocaleDateString()})));let p=F();return(e,i)=>{const c=R("el-pagination");return s(),l("div",A,[a("div",G,[a("div",J,[a("h1",null,r(n(p).mainLanguage=="chinese"?"新闻中心":"NEWS"),1),a("p",null,[V(r(n(p).mainLanguage=="chinese"?"为客户提供全面的智能制造解决方案和服务":"Provide customers with comprehensive intelligent manufacturing solutions and services")+" ",1),a("span",null,r(n(p).mainLanguage=="chinese"?"数字化转型和升级":"Digital transformation and upgrading"),1)])])]),a("div",K,[a("div",O,[(s(!0),l(x,null,T(n(C),(t,f)=>(s(),l("div",{class:"nav_md",key:f},[a("div",{class:W(t.active?"nav_md_txtblue":""),onClick:q=>N(t)},[a("h4",null,r(n(h)(t,"label")),1)],10,Q)]))),128))]),w.value.length>0?(s(),l("div",X,[(s(!0),l(x,null,T(w.value,(t,f)=>(s(),l("div",{class:"main_list_box fadeInUp animated nybanner_txt animate__animated animate__fadeInUp",key:f,onClick:q=>I(t)},[a("div",{class:"animate",ref_for:!0,ref_key:"box",ref:k},[a("img",{src:t.image,alt:""},null,8,Z),a("h3",null,r(n(h)(t,"newsTitle")),1),n(p).mainLanguage=="chinese"?(s(),l("p",{key:0,innerHTML:t.newsContent},null,8,ee)):(s(),l("p",{key:1,innerHTML:t.newsContent_en},null,8,ae)),a("span",ne,r(n(h)(t,"newsType")),1),a("span",te,r(n(h)(t,"formattedTime")),1)],512)],8,Y))),128))])):(s(),l("div",se,"暂无内容"))]),a("div",le,[n(y)?L("",!0):(s(),l("div",oe,[n(g)?(s(),j(c,{key:0,background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:U,onCurrentChange:S,"current-page":n(m),"page-size":n(u),"page-sizes":[10,20,50,100],total:n(g)},null,8,["current-page","page-size","total"])):L("",!0)]))])])}}},_e=H(ie,[["__scopeId","data-v-368e414a"]]);export{_e as default};
