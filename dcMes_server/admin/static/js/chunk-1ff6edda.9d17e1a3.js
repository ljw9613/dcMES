(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1ff6edda"],{"19c2":function(e,t,i){"use strict";i.r(t);var o=i("5530"),s=(i("7f7f"),i("ac6a"),i("5df3"),i("4f7f"),i("2909")),a=i("c7eb"),r=(i("96cf"),i("1da1")),n=i("7e1e"),c=i("5aee"),l=i("46ac"),u={components:{IconSelect:c.a},porps:["dialogFormVisible"],data:function(){return{menu:!1,dialogFormVisible:!1,add:!0,_id:null,postList:{},optionsList:null,isShow:!1}},created:function(){var e=Object(r.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),methods:{getTree:function(e,t){var i=this.$refs.menuTree.getCheckedNodes(),o=this.$refs.menuTree.getHalfCheckedNodes(),a=i.map((function(e){return e._id})),r=o.map((function(e){return e._id}));this.postList.menuList=Object(s.a)(new Set([].concat(Object(s.a)(a),Object(s.a)(r))))},getSelectData:function(){var e=Object(r.a)(Object(a.a)().mark((function e(){var t,i;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.b)("menu",{query:{},sort:{sortNum:1}});case 2:t=e.sent,i=t.data,this.optionsList=Object(l.a)(i,null,[]);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),AddClick:function(){var e=this;this.menu=!1,this.isShow=!1,this.postList={},this.add=!0,this.dialogFormVisible=!0,this.getSelectData(),this.$nextTick((function(){e.menu=!0,e.isShow=!0}))},EditClick:function(e){var t=this;this.menu=!1,this.add=!1,this.isShow=!0,this._id=e._id,this.postList=e,this.dialogFormVisible=!0,this.getSelectData(),this.$nextTick((function(){t.menu=!0,t.initTreeSelection(),t.$forceUpdate()}))},createData:function(){var e=Object(r.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.postList.name){e.next=5;break}return this.$message.warning("角色名称不能为空"),e.abrupt("return");case 5:if(this.postList.label){e.next=8;break}return this.$message.warning("角色标识不能为空"),e.abrupt("return");case 8:return t=Object(o.a)({},this.postList),e.next=12,Object(n.a)("role",t);case 12:e.sent?(this.$emit("custom-event"),this.dialogFormVisible=!1,this.postList={type:"目录",sortNum:1,status:!0},this.$notify({title:"添加角色成功",message:"Add Successfully",type:"success",duration:2e3})):this.$notify({title:"添加失败，请重试或刷新",message:"Add unsuccessful",type:"warning",duration:2e3});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getMenuList:function(e){return e.filter((function(t,i){return e.indexOf(t)===i}))},editData:function(){if(this.postList.name)if(this.postList.label){delete this.postList._id;var e={query:{_id:this._id},update:Object(o.a)({},this.postList)};Object(n.d)("role",e);this.dialogFormVisible=!1,this.$emit("custom-event"),this.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})}else this.$message.warning("角色标识不能为空");else this.$message.warning("角色名称不能为空")},getParentId:function(e){Array.isArray(e)&&(this.postList.parentId=e[e.length-1])},initTreeSelection:function(){var e=this;this.postList.menuList&&this.postList.menuList.length>0&&this.$nextTick((function(){e.$refs.menuTree.setCheckedKeys(e.postList.menuList)}))}}},d=u,p=i("2877"),m=Object(p.a)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-dialog",{attrs:{title:e.add?"添加角色":"编辑角色",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[e.isShow?i("el-form",{ref:"dataForm",attrs:{"label-position":"right"},model:{value:e.postList,callback:function(t){e.postList=t},expression:"postList"}},[i("el-form-item",{attrs:{label:"角色名称","label-width":"100px",required:""}},[i("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.postList.name,callback:function(t){e.$set(e.postList,"name",t)},expression:"postList.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色标识","label-width":"100px",required:""}},[i("el-input",{attrs:{placeholder:"请输入角色标识"},model:{value:e.postList.label,callback:function(t){e.$set(e.postList,"label",t)},expression:"postList.label"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"菜单权限","label-width":"100px",required:""}},[e.menu?i("el-card",{attrs:{shadow:"never"}},[i("el-tree",{ref:"menuTree",attrs:{data:e.optionsList,"default-checked-keys":e.postList.menuList,props:{value:"_id",label:"menuName"},"node-key":"_id","show-checkbox":""},on:{check:e.getTree},model:{value:e.postList.menuList,callback:function(t){e.$set(e.postList,"menuList",t)},expression:"postList.menuList"}})],1):e._e()],1),e._v(" "),i("el-form-item",{attrs:{label:"备注","label-width":"100px"}},[i("el-input",{attrs:{placeholder:"请输入备注",type:"textarea"},model:{value:e.postList.remark,callback:function(t){e.$set(e.postList,"remark",t)},expression:"postList.remark"}})],1)],1):e._e(),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.add?e.createData():e.editData()}}},[e._v("确定\n      ")])],1)],1)],1)}),[],!1,null,"cf67a4ee",null);t.default=m.exports},7624:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var o=["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"].map((function(e){return"el-icon-"+e}))}}]);