// 创建条码映射关系
const barcodeMapping = {
  "WA2002DNJ0191": "2131182024-NO.TKVNVCB001 20250110BLDCA030100",
  "WA2002DNJ0172": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030102",
  "WA2002DNJ0198": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030103",
  "WA2002DNJ0183": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030104",
  "WA2002DNJ0173": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030105",
  "WA2002DNJ0182": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030106",
  "WA2002DNJ0192": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030107",
  "WA2002DNJ0177": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030108",
  "WA2002DNJ0184": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030109",
  "WA2002DNJ0174": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030110",
  "WA2002DNJ0185": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030111",
  "WA2002DNJ0175": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030112",
  "WA2002DNJ0186": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030113",
  "WA2002DNJ0176": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030114",
  "WA2002DNJ0187": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030115",
  "WA2002DNJ0178": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030116",
  "WA2002DNJ0188": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030117",
  "WA2002DNJ0179": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030118",
  "WA2002DNJ0189": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030119",
  "WA2002DNJ0180": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030120",
  "WA2002DNJ0190": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030121",
  "WA2002DNJ0181": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030122",
  "WA2002DNJ0193": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030123",
  "WA2002DNJ0194": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030124",
  "WA2002DNJ0195": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030125",
  "WA2002DNJ0196": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030126",
  "WA2002DNJ0197": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030127",
  "WA2002DNJ0199": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030128",
  "WA2002DNJ0200": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030129",
  "WA2002DNJ0201": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030130",
  "WA2002DNJ0202": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030131",
  "WA2002DNJ0203": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030132",
  "WA2002DNJ0204": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030133",
  "WA2002DNJ0205": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030134",
  "WA2002DNJ0206": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030135",
  "WA2002DNJ0207": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030136",
  "WA2002DNJ0208": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030137",
  "WA2002DNJ0209": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030138",
  "WA2002DNJ0210": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030139",
  "WA2002DNJ0211": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030140",
  "WA2002DNJ0212": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030141",
  "WA2002DNJ0213": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030142",
  "WA2002DNJ0214": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030143",
  "WA2002DNJ0215": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030144",
  "WA2002DNJ0216": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030145",
  "WA2002DNJ0217": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030146",
  "WA2002DNJ0218": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030147",
  "WA2002DNJ0219": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030148",
  "WA2002DNJ0220": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030149",
  "WA2002DNJ0221": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030150",
  "WA2002DNJ0222": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030151",
  "WA2002DNJ0223": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030152",
  "WA2002DNJ0224": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030153",
  "WA2002DNJ0225": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030154",
  "WA2002DNJ0226": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030155",
  "WA2002DNJ0227": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030156",
  "WA2002DNJ0228": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030157",
  "WA2002DNJ0229": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030158",
  "WA2002DNJ0230": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030159",
  "WA2002DNJ0231": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030160",
  "WA2002DNJ0232": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030161",
  "WA2002DNJ0233": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030162",
  "WA2002DNJ0234": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030163",
  "WA2002DNJ0235": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030164",
  "WA2002DNJ0236": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030165",
  "WA2002DNJ0237": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030166",
  "WA2002DNJ0238": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030167",
  "WA2002DNJ0239": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030168",
  "WA2002DNJ0240": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030169",
  "WA2002DNJ0241": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030170",
  "WA2002DNJ0242": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030171",
  "WA2002DNJ0243": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030172",
  "WA2002DNJ0244": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030173",
  "WA2002DNJ0245": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030174",
  "WA2002DNJ0246": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030175",
  "WA2002DNJ0247": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030176",
  "WA2002DNJ0248": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030177",
  "WA2002DNJ0249": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030178",
  "WA2002DNJ0250": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030179",
  "WA2002DNJ0251": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030180",
  "WA2002DNJ0252": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030181",
  "WA2002DNJ0253": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030182",
  "WA2002DNJ0254": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030183",
  "WA2002DNJ0255": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030184",
  "WA2002DNJ0256": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030185",
  "WA2002DNJ0257": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030186",
  "WA2002DNJ0258": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030187",
  "WA2002DNJ0259": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030188",
  "WA2002DNJ0260": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030189",
  "WA2002DNJ0261": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030190",
  "WA2002DNJ0262": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030191",
  "WA2002DNJ0263": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030192",
  "WA2002DNJ0264": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030193",
  "WA2002DNJ0265": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030194",
  "WA2002DNJ0266": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030195",
  "WA2002DNJ0267": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030196",
  "WA2002DNJ0268": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030197",
  "WA2002DNJ0269": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030198",
  "WA2002DNJ0270": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030199",
  "WA2002DNJ0271": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030200",
  "WA2002DNJ0272": "2131182024-NO.TKVNVCB001WLS26263-5020250110BLDCA030201"
};

// 为每个条码映射创建一个更新操作
// 方法1：使用循环逐个更新（适用于MongoDB Shell）
Object.entries(barcodeMapping).forEach(([oldBarcode, newBarcode]) => {
  db.material_process_flow.updateMany(
    { "processNodes.barcode": oldBarcode },
    [
      {
        $set: {
          processNodes: {
            $map: {
              input: "$processNodes",
              as: "node",
              in: {
                $cond: [
                  { $eq: ["$$node.barcode", oldBarcode] },
                  { $mergeObjects: ["$$node", { barcode: newBarcode }] },
                  "$$node"
                ]
              }
            }
          }
        }
      }
    ]
  );
  print(`已替换条码: ${oldBarcode} -> ${newBarcode}`);
});
