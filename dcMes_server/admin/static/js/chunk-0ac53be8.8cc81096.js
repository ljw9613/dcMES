(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0ac53be8","chunk-05025044"],{"0b13":function(e,t,a){},2212:function(e,t,a){"use strict";a.r(t);var r=a("c7eb"),n=(a("96cf"),a("1da1")),s=a("5530"),o={name:"EditDialog",components:{ZrSelect:a("6ace").a},props:{visible:{type:Boolean,default:!1},dialogStatus:{type:String,default:"create"},rowData:{type:Object,default:function(){return{}}}},data:function(){return{form:{workOrderNo:"",status:"PENDING",saleOrderId:"",saleOrderNo:"",productionOrderId:"",productionOrderNo:"",materialId:"",productModel:"",productName:"",productionLineId:"",lineName:"",businessType:"NORMAL",planQuantity:0,inputQuantity:0,outputQuantity:0,planStartTime:"",planEndTime:"",remark:""},rules:{workOrderNo:[{required:!0,message:"请输入工单号",trigger:"blur"}],status:[{required:!0,message:"请选择工单状态",trigger:"change"}],saleOrderId:[{required:!0,message:"请选择销售单号",trigger:"change"}],productionOrderId:[{required:!0,message:"请选择生产单号",trigger:"change"}],materialId:[{required:!0,message:"请选择产品",trigger:"change"}],productionLineId:[{required:!0,message:"请选择产线",trigger:"change"}],businessType:[{required:!0,message:"请选择业务类型",trigger:"change"}],planQuantity:[{required:!0,message:"请输入计划数量",trigger:"blur"}],planStartTime:[{required:!0,message:"请选择计划开始时间",trigger:"change"}],planEndTime:[{required:!0,message:"请选择计划结束时间",trigger:"change"}]},submitLoading:!1}},computed:{dialogTitle:function(){return"create"===this.dialogStatus?"新增生产计划工单":"编辑生产计划工单"},productionOrderQuery:function(){return{}}},watch:{visible:function(e){e&&this.initFormData()},rowData:{handler:function(e){e&&this.visible&&this.initFormData()},deep:!0}},methods:{initFormData:function(){"edit"===this.dialogStatus?this.form=Object(s.a)({},this.rowData):this.form={workOrderNo:"",status:"PENDING",saleOrderId:"",saleOrderNo:"",productionOrderId:"",productionOrderNo:"",materialId:"",productModel:"",productName:"",productionLineId:"",lineName:"",businessType:"NORMAL",planQuantity:0,inputQuantity:0,outputQuantity:0,planStartTime:"",planEndTime:"",remark:""}},handleSaleOrderSelect:function(e){e&&(this.form.saleOrderNo=e.FBillNo,this.form.productionOrderId="",this.form.productionOrderNo="")},materialQuery:function(){return this.form.saleOrderNo?{FNumber:this.form.saleOrderNo}:{}},handleProductionOrderSelect:function(e){e&&(this.form.productionOrderNo=e.FBillNo,this.form.productModel=e.FSpecification||"",this.form.productName=e.FMaterialName||"",this.form.planQuantity=e.FQty||0,this.form.materialId=e.FMaterialId)},handleMaterialSelect:function(e){e&&(this.form.productModel=e.FSpecification,this.form.productName=e.FName)},handleProductionLineSelect:function(e){e&&(this.form.lineName=e.lineName)},handleClose:function(){this.$emit("update:visible",!1),this.$refs.form&&this.$refs.form.resetFields()},handleSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(n.a)(Object(r.a)().mark((function t(a){var n;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){e.submitLoading=!0;try{n=Object(s.a)({},e.form),e.$emit("submit",n),e.handleClose()}catch(t){e.$message.error("提交失败")}finally{e.submitLoading=!1}}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},i=o,l=(a("6204"),a("2877")),c=Object(l.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.visible,width:"60%"},on:{"update:visible":function(t){e.visible=t},close:e.handleClose}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px",size:"small"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工单号",prop:"workOrderNo"}},[a("el-input",{attrs:{placeholder:"请输入工单号",disabled:"edit"===e.dialogStatus},model:{value:e.form.workOrderNo,callback:function(t){e.$set(e.form,"workOrderNo",t)},expression:"form.workOrderNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工单状态",prop:"status"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择工单状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"待生产",value:"PENDING"}}),e._v(" "),a("el-option",{attrs:{label:"生产中",value:"IN_PROGRESS"}}),e._v(" "),a("el-option",{attrs:{label:"已完成",value:"COMPLETED"}}),e._v(" "),a("el-option",{attrs:{label:"已取消",value:"CANCELLED"}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"销售单号",prop:"saleOrderId"}},[a("zr-select",{attrs:{collection:"k3_SAL_SaleOrder","search-fields":["FBillNo"],"label-key":"FBillNo","sub-key":"FCustId",multiple:!1,placeholder:"请输入销售单号搜索"},on:{select:e.handleSaleOrderSelect},scopedSlots:e._u([{key:"option",fn:function(t){var r=t.item;return[a("div",{staticClass:"item-option"},[a("div",{staticClass:"item-info"},[a("span",{staticClass:"name"},[e._v(e._s(r.FBillNo))]),e._v(" "),a("el-tag",{attrs:{size:"mini",type:"info"}},[e._v(e._s(r.FCustId))])],1),e._v(" "),a("div",{staticClass:"sub-info"},[a("small",[e._v(e._s(e._f("formatDate")(r.FDate)))])])])]}}]),model:{value:e.form.saleOrderId,callback:function(t){e.$set(e.form,"saleOrderId",t)},expression:"form.saleOrderId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"生产单号",prop:"productionOrderId"}},[a("zr-select",{attrs:{collection:"k3_PRD_MO","search-fields":["FBillNo"],"label-key":"FBillNo","sub-key":"FMaterialName",multiple:!1,"additional-query":e.productionOrderQuery,placeholder:"请输入生产单号搜索"},on:{select:e.handleProductionOrderSelect},scopedSlots:e._u([{key:"option",fn:function(t){var r=t.item;return[a("div",{staticClass:"item-option"},[a("div",{staticClass:"item-info"},[a("span",{staticClass:"name"},[e._v(e._s(r.FBillNo))]),e._v(" "),a("el-tag",{attrs:{size:"mini",type:"info"}},[e._v(e._s(r.FMaterialName))])],1),e._v(" "),a("div",{staticClass:"sub-info"},[a("small",[e._v("计划数量: "+e._s(r.FQty))])])])]}}]),model:{value:e.form.productionOrderId,callback:function(t){e.$set(e.form,"productionOrderId",t)},expression:"form.productionOrderId"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品",prop:"materialId"}},[a("zr-select",{attrs:{collection:"k3_BD_MATERIAL","search-fields":["FNumber","FName","FSpecification"],"label-key":"FName","value-key":"FMaterialId","tag-key":"FNumber","sub-key":"FSpecification",multiple:!1,placeholder:"请输入产品信息搜索","additional-query":e.materialQuery},on:{select:e.handleMaterialSelect},model:{value:e.form.materialId,callback:function(t){e.$set(e.form,"materialId",t)},expression:"form.materialId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产线",prop:"productionLineId"}},[a("zr-select",{attrs:{collection:"production_line","search-fields":["lineCode","lineName"],"label-key":"lineName","tag-key":"lineCode","sub-key":"workshop",multiple:!1,placeholder:"请输入产线信息搜索"},on:{select:e.handleProductionLineSelect},model:{value:e.form.productionLineId,callback:function(t){e.$set(e.form,"productionLineId",t)},expression:"form.productionLineId"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划数量",prop:"planQuantity"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,"controls-position":"right"},model:{value:e.form.planQuantity,callback:function(t){e.$set(e.form,"planQuantity",t)},expression:"form.planQuantity"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"投入数量",prop:"inputQuantity"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,"controls-position":"right"},model:{value:e.form.inputQuantity,callback:function(t){e.$set(e.form,"inputQuantity",t)},expression:"form.inputQuantity"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产出数量",prop:"outputQuantity"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,"controls-position":"right"},model:{value:e.form.outputQuantity,callback:function(t){e.$set(e.form,"outputQuantity",t)},expression:"form.outputQuantity"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计划开始时间",prop:"planStartTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择计划开始时间"},model:{value:e.form.planStartTime,callback:function(t){e.$set(e.form,"planStartTime",t)},expression:"form.planStartTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"计划结束时间",prop:"planEndTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择计划结束时间"},model:{value:e.form.planEndTime,callback:function(t){e.$set(e.form,"planEndTime",t)},expression:"form.planEndTime"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注信息"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)}),[],!1,null,"f99d5d62",null);t.default=c.exports},6204:function(e,t,a){"use strict";a("e539")},6635:function(e,t,a){"use strict";a("0b13")},ab03:function(e,t,a){"use strict";a.r(t);var r=a("ade3"),n=(a("6b54"),a("a481"),a("f576"),a("8615"),a("6762"),a("2fdb"),a("456d"),a("ac6a"),a("c7eb")),s=(a("96cf"),a("1da1")),o=a("7e1e"),i={name:"ProductionOrder",dicts:["product_type"],components:{EditDialog:a("2212").default},data:function(){return{searchForm:{workOrderNo:"",status:"",saleOrderNo:"",productionOrderNo:"",productModel:"",lineName:"",businessType:"",dateRange:[]},tableList:[],total:0,currentPage:1,pageSize:10,listLoading:!0,showAdvanced:!1,dialogFormVisible:!1,dialogStatus:"",detailDialogVisible:!1,selection:[],dataForm:{}}},methods:Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({getStatusType:function(e){return{PENDING:"info",IN_PROGRESS:"warning",COMPLETED:"success",CANCELLED:"danger"}[e]||"info"},getStatusText:function(e){return{PENDING:"待生产",IN_PROGRESS:"生产中",COMPLETED:"已完成",CANCELLED:"已取消"}[e]||e},getBusinessTypeText:function(e){return{NORMAL:"正常生产",REWORK:"返工",SAMPLE:"样品",OTHER:"其他"}[e]||e},searchData:function(){var e={query:{$and:[]}};return this.searchForm.workOrderNo&&e.query.$and.push({workOrderNo:{$regex:this.searchForm.workOrderNo,$options:"i"}}),this.searchForm.status&&e.query.$and.push({status:this.searchForm.status}),this.searchForm.saleOrderNo&&e.query.$and.push({saleOrderNo:{$regex:this.searchForm.saleOrderNo,$options:"i"}}),this.searchForm.productionOrderNo&&e.query.$and.push({productionOrderNo:{$regex:this.searchForm.productionOrderNo,$options:"i"}}),this.searchForm.productModel&&e.query.$and.push({productModel:{$regex:this.searchForm.productModel,$options:"i"}}),this.searchForm.lineName&&e.query.$and.push({lineName:{$regex:this.searchForm.lineName,$options:"i"}}),this.searchForm.businessType&&e.query.$and.push({businessType:this.searchForm.businessType}),this.searchForm.dateRange&&2===this.searchForm.dateRange.length&&e.query.$and.push({planStartTime:{$gte:new Date(this.searchForm.dateRange[0]),$lte:new Date(this.searchForm.dateRange[1])}}),e.query.$and.length||delete e.query.$and,e},resetForm:function(){this.$refs.searchForm.resetFields(),this.searchForm={workOrderNo:"",status:"",saleOrderNo:"",productionOrderNo:"",productModel:"",lineName:"",businessType:"",dateRange:[]},this.currentPage=1,this.fetchData()},fetchData:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,(t=this.searchData()).page=this.currentPage,t.skip=(this.currentPage-1)*this.pageSize,t.limit=this.pageSize,t.count=!0,e.next=9,Object(o.b)("production_plan_work_order",t);case 9:a=e.sent,this.tableList=a.data,this.total=a.countnum,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),this.$message.error("获取数据失败");case 18:return e.prev=18,this.listLoading=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[1,14,18,21]])})));return function(){return e.apply(this,arguments)}}(),exportData:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t,a,r,s,i,l,c,u,d=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.$message({message:"正在导出数据,请稍候...",type:"info"}),t=this.$loading({lock:!0,text:"导出中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),(a=this.searchData()).limit=1e6,e.next=7,Object(o.b)("k3_PRD_MO",a);case 7:if((r=e.sent).data&&0!==r.data.length){e.next=12;break}return this.$message.warning("没有数据可供导出"),t.close(),e.abrupt("return");case 12:s={FBillNo:"单据编号",FDocumentStatus:"单据状态",FDate:"单据日期",FWorkShopID_FName:"生产车间",FMaterialId:"物料编码",FMaterialName:"物料名称",FSpecification:"规格型号",FProductType:"产品类型",FUnitId:"单位",FQty:"数量",FPlanStartDate:"计划开工时间",FPlanFinishDate:"计划完工时间"},i=r.data.map((function(e){var t={};return Object.keys(s).forEach((function(a){a.includes("Date")?t[s[a]]=d.formatDate(e[a]):t[s[a]]=e[a]})),t})),l=XLSX.utils.book_new(),c=XLSX.utils.json_to_sheet(i),u=Object.values(s).map((function(e){return{wch:Math.max(2*e.length,15)}})),c["!cols"]=u,XLSX.utils.book_append_sheet(l,c,"生产订单数据"),XLSX.writeFile(l,"生产订单数据.xlsx"),t.close(),this.$message.success("导出成功"),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),this.$message.error("导出失败");case 28:case"end":return e.stop()}}),e,this,[[0,24]])})));return function(){return e.apply(this,arguments)}}(),baseTableHandleCurrentChange:function(e){this.currentPage=e,this.fetchData()},baseTableHandleSizeChange:function(e){this.pageSize=e,this.fetchData()},toggleAdvanced:function(){this.showAdvanced=!this.showAdvanced},formatDate:function(e){if(!e)return"暂无数据";var t=new Date(e);if(isNaN(t.getTime()))return"无效日期";var a=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(r,"-").concat(n)},formatNumber:function(e){return e||0===e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"},search:function(){this.currentPage=1,this.fetchData()},handleSelectionChange:function(e){this.selection=e},handleView:function(e){this.dataForm=JSON.parse(JSON.stringify(e)),this.dialogStatus="view",this.dialogFormVisible=!0},handleEdit:function(e){this.dialogStatus="edit",this.dataForm=JSON.parse(JSON.stringify(e)),this.dialogFormVisible=!0},handleDelete:function(e){var t=this;this.$confirm("确认要删除该生产订单吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s.a)(Object(n.a)().mark((function a(){return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(o.c)("k3_PRD_MO",e._id);case 3:t.$message.success("删除成功"),t.fetchData(),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),t.$message.error("删除失败");case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))).catch((function(){t.$message.info("已取消删除")}))},handleSubmit:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"create"!==this.dialogStatus){e.next=7;break}return e.next=4,Object(o.a)("production_plan_work_order",t);case 4:this.$message.success("添加成功"),e.next=10;break;case 7:return e.next=9,Object(o.d)("production_plan_work_order",{query:{_id:t._id},update:t});case 9:this.$message.success("更新成功");case 10:this.fetchData(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),this.$message.error("操作失败");case 17:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),handleAdd:function(){this.dialogStatus="create",this.dataForm={},this.dialogFormVisible=!0}},"handleEdit",(function(e){this.dialogStatus="edit",this.dataForm=JSON.parse(JSON.stringify(e)),this.dialogFormVisible=!0})),"handleView",(function(e){this.$message.info("查看详情功能待实现")})),"handleDelete",(function(e){var t=this;this.$confirm("确认删除该工单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s.a)(Object(n.a)().mark((function a(){return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(o.c)("production_plan_work_order",e._id);case 3:t.$message.success("删除成功"),t.fetchData(),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),t.$message.error("删除失败");case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))).catch((function(){}))})),"handleBatchDelete",(function(){var e=this;this.selection.length?this.$confirm("确认删除选中的 ".concat(this.selection.length," 条记录吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s.a)(Object(n.a)().mark((function t(){var a;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.selection.map((function(e){return e._id})),t.next=4,Object(o.c)("production_plan_work_order",a);case 4:e.$message.success("批量删除成功"),e.fetchData(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.$message.error("批量删除失败");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))).catch((function(){})):this.$message.warning("请选择要删除的记录")})),"handleSelectionChange",(function(e){this.selection=e})),"handleSubmit",function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"create"!==this.dialogStatus){e.next=7;break}return e.next=4,Object(o.a)("production_plan_work_order",t);case 4:this.$message.success("新增成功"),e.next=10;break;case 7:return e.next=9,Object(o.d)("production_plan_work_order",t._id,t);case 9:this.$message.success("更新成功");case 10:this.fetchData(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),this.$message.error("操作失败");case 17:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()),created:function(){this.fetchData()}},l=i,c=(a("6635"),a("2877")),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("筛选搜索")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.toggleAdvanced}},[e._v("\n                "+e._s(e.showAdvanced?"收起":"展开")+"高级搜索\n            ")])],1),e._v(" "),a("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{model:e.searchForm}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"工单号"}},[a("el-input",{attrs:{placeholder:"请输入工单号",clearable:""},model:{value:e.searchForm.workOrderNo,callback:function(t){e.$set(e.searchForm,"workOrderNo",t)},expression:"searchForm.workOrderNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"工单状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择工单状态",clearable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"待生产",value:"PENDING"}}),e._v(" "),a("el-option",{attrs:{label:"生产中",value:"IN_PROGRESS"}}),e._v(" "),a("el-option",{attrs:{label:"已完成",value:"COMPLETED"}}),e._v(" "),a("el-option",{attrs:{label:"已取消",value:"CANCELLED"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"销售单号"}},[a("el-input",{attrs:{placeholder:"请输入销售单号",clearable:""},model:{value:e.searchForm.saleOrderNo,callback:function(t){e.$set(e.searchForm,"saleOrderNo",t)},expression:"searchForm.saleOrderNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"生产单号"}},[a("el-input",{attrs:{placeholder:"请输入生产单号",clearable:""},model:{value:e.searchForm.productionOrderNo,callback:function(t){e.$set(e.searchForm,"productionOrderNo",t)},expression:"searchForm.productionOrderNo"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产品型号"}},[a("el-input",{attrs:{placeholder:"请输入产品型号",clearable:""},model:{value:e.searchForm.productModel,callback:function(t){e.$set(e.searchForm,"productModel",t)},expression:"searchForm.productModel"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"产线名称"}},[a("el-input",{attrs:{placeholder:"请输入产线名称",clearable:""},model:{value:e.searchForm.lineName,callback:function(t){e.$set(e.searchForm,"lineName",t)},expression:"searchForm.lineName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"业务类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择业务类型",clearable:""},model:{value:e.searchForm.businessType,callback:function(t){e.$set(e.searchForm,"businessType",t)},expression:"searchForm.businessType"}},[a("el-option",{attrs:{label:"正常生产",value:"NORMAL"}}),e._v(" "),a("el-option",{attrs:{label:"返工",value:"REWORK"}}),e._v(" "),a("el-option",{attrs:{label:"样品",value:"SAMPLE"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"OTHER"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"计划时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.searchForm.dateRange,callback:function(t){e.$set(e.searchForm,"dateRange",t)},expression:"searchForm.dateRange"}})],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询搜索")]),e._v(" "),a("el-button",{on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.exportData}},[e._v("导出数据")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增工单")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:!e.selection.length},on:{click:e.handleBatchDelete}},[e._v("\n                    批量删除\n                ")])],1)],1)],1),e._v(" "),e._m(0),e._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:e.currentPage,"highlight-current-row":!0,pageSize:e.pageSize,tableData:e.tableList,tableDataloading:e.listLoading,total:e.total},on:{"selection-change":e.handleSelectionChange,handleCurrentChange:e.baseTableHandleCurrentChange,handleSizeChange:e.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"工单号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.handleView(t.row)}}},[e._v(e._s(t.row.workOrderNo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"工单状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.getStatusType(t.row.status)}},[e._v("\n                        "+e._s(e.getStatusText(t.row.status))+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售单号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.saleOrderNo)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"生产单号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.productionOrderNo)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"产品型号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.productModel)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"产品名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.productName)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"产线名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.lineName)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"业务类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.getBusinessTypeText(t.row.businessType))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.planQuantity)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"投入数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.inputQuantity)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"产出数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.outputQuantity)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划开始时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.formatDate(t.row.planStartTime))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划结束时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.formatDate(t.row.planEndTime))+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[a("i",{staticClass:"el-icon-edit"}),e._v(" 编辑\n                    ")]),e._v(" "),a("el-button",{staticClass:"delete-btn",attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[a("i",{staticClass:"el-icon-delete"}),e._v(" 删除\n                    ")])]}}])})],1)],2),e._v(" "),a("edit-dialog",{attrs:{visible:e.dialogFormVisible,"dialog-status":e.dialogStatus,"row-data":e.dataForm},on:{"update:visible":function(t){e.dialogFormVisible=t},submit:e.handleSubmit}})],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[e._v("生产管理列表")])])])])}],!1,null,"fdc5297a",null);t.default=u.exports},e539:function(e,t,a){}}]);