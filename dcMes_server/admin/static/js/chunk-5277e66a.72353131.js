(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5277e66a"],{"1a2d":function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r}));var a=i("b775");function s(e){return Object(a.a)({url:"/user_login",method:"get",params:e})}function n(e){return Object(a.a)({url:"/user_login",method:"post",data:e})}function r(e){return Object(a.a)({url:"/user_login",method:"put",data:e})}},9026:function(e,t,i){},e382:function(e,t,i){"use strict";i.r(t);var a=(i("20d6"),i("7f7f"),i("5530")),s=i("c7eb"),n=(i("96cf"),i("1da1")),r=i("7e1e"),l=i("1a2d"),o={filters:{},data:function(){return{userName:"",roles:"",role:"",roledata:"",password:"Enterprise123",userlist:[],categorylist:[],categorylist1:[],labellist:[],listLoading:!0,downloadLoading:!1,_id:"",categorytitle:"",labeltitle:"",address:"",addresstime:"",userId:"",number:"",name:"",phone:"",checkList:"",labelindex:"",labelcategoryindex:"",dialogStatus:"",dialogFormVisible:!1,dialogFormVisible1:!1,textMap:{update:"Edit",create:"Create"},searchReq:{}}},created:function(){this.getUserRole(),this.fetchData()},beforeCreate:function(){},methods:{getUserRole:function(){var e=Object(n.a)(Object(s.a)().mark((function e(){var t,i;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.b)("role",{query:{}});case 2:t=e.sent,i=t.data,this.userlist=i;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),fetchData:function(){var e=Object(n.a)(Object(s.a)().mark((function e(){var t,i,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.listLoading=!0,t={query:Object(a.a)({},this.searchReq),populate:JSON.stringify([{path:"role"}])},e.next=4,Object(r.b)("user_login",t);case 4:i=e.sent,n=i.data,this.categorylist=n,this.categorylist1=this.categorylist,this.listLoading=!1;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleEdit:function(e){this.dialogFormVisible=!0,this._id=e._id,this.password=e.password,this.role=e.role._id?e.role._id:e.role,this.number=e.userName,this.name=e.nickName,this.phone=e.phone,this.dialogStatus="edit"},handisshow:function(e){var t=this,i={query:{_id:e._id},update:{status:!e.status}};Object(l.c)(i).then((function(e){200==e.code?(t.dialogFormVisible=!1,t.fetchData(),t.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):t.$notify({title:"修改失败",message:"edit failly",type:"warning",duration:2e3})}))},AddFilter:function(){this._id="",this.userId="",this.number="",this.role="部门管理员",this.password="Enterprise123",this.name="",this.phone="",this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var e=this;if(""!=this.number&&""!=this.name&&""!=this.password&&""!=this.phone&&""!=this.role)if(-1==this.categorylist.findIndex((function(t){return t.usernumber===e.number}))){var t={nickName:this.name,userName:this.number,password:this.password,phone:this.phone,role:this.role};Object(l.b)(t).then((function(t){200==t.code?(e.dialogFormVisible=!1,e.fetchData(),e.$notify({title:"添加成功",message:"edit Successfully",type:"success",duration:2e3})):e.$notify({title:"添加失败",message:"edit failly",type:"warning",duration:2e3})}))}else this.$notify({title:"此用户已是管理人员",message:"Again input",type:"warning",duration:2e3});else this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3})},editData:function(){var e=this;if(""!=this.number&&""!=this.name&&""!=this.phone&&""!=this.password&&""!=this.role){var t={query:{_id:this._id},update:{nickName:this.name,userName:this.number,password:this.password,phone:this.phone,role:this.role}};Object(l.c)(t).then((function(t){200==t.code?(e.dialogFormVisible=!1,e.fetchData(),e.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):e.$notify({title:"修改失败",message:"edit failly",type:"warning",duration:2e3})}))}else this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3})},clearclick:function(){this.categorylist=this.categorylist1},Search:function(){this.searchReq={},this.userName?this.searchReq.userName={$regex:this.userName}:delete this.searchReq.userName,this.fetchData()},searchrole:function(){if(this.roledata){var e=this.searchByIndexOf1(this.roledata,this.categorylist1);this.categorylist=e}else this.categorylist=this.categorylist1},searchByIndexOf:function(e,t){if(t instanceof Array){for(var i=t.length,a=[],s=0;s<i;s++)t[s].username.indexOf(e)>=0&&a.push(t[s]);return a}},searchByIndexOf1:function(e,t){if(t instanceof Array){for(var i=t.length,a=[],s=0;s<i;s++)t[s].role==e&&a.push(t[s]);return a}}}},c=o,u=(i("fe8f"),i("2877")),d=Object(u.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"screen"},[i("div",{staticClass:"screen_content"},[e._m(0),e._v(" "),i("div",{staticClass:"screen_content_second"},[i("div",{staticClass:"screen_content_second_one"},[i("div",{staticStyle:{width:"140px"}},[e._v("用户名称:")]),e._v(" "),i("el-input",{attrs:{clearable:"",placeholder:"请输入用户名称"},on:{clear:function(t){return e.clearclick()}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.Search()}}},[e._v("查询搜索\n          ")])],1),e._v(" "),"超级管理员"==e.$store.state.user.roles?i("div",{staticClass:"screen_content_second_one"},[i("div",{staticStyle:{width:"80px"}},[e._v("用户角色:")]),e._v(" "),i("el-select",{staticStyle:{width:""},attrs:{filterable:"",placeholder:"请选择用户角色"},on:{change:e.searchrole,clear:function(t){return e.clearclick()}},model:{value:e.roledata,callback:function(t){e.roledata=t},expression:"roledata"}},e._l(e.userlist,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e()])])]),e._v(" "),i("div",{staticClass:"screen1"},[i("div",{staticClass:"screen_content"},[i("div",{staticClass:"screen_content_first"},[i("i",{staticClass:"el-icon-tickets"},[e._v("管理员列表")]),e._v(" "),i("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.AddFilter}},[e._v("添加管理人员\n        ")])],1)])]),e._v(" "),i("div",{staticClass:"filter-container"}),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.categorylist,border:"","element-loading-text":"Loading",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"用户名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"link-type"},[e._v(e._s(t.row.nickName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"账号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.userName))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"密码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.password))]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"用户角色",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.role?t.row.role.name:"无")+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"审核状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?i("el-tag",{attrs:{type:"success"}},[e._v("在线")]):i("el-tag",{attrs:{type:"warning"}},[e._v("不在线")])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"created_at",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"el-icon-time"}),e._v(" "),i("span",[e._v(e._s(e._f("parseTime")(t.row.createAt,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑\n        ")]),e._v(" "),a.status?i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handisshow(a)}}},[e._v("下线\n        ")]):i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handisshow(a)}}},[e._v("上线\n        ")])]}}])})],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"管理人员信息"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{"label-position":"left","label-width":"70px"}},[i("el-form-item",{attrs:{label:"用户账号","label-width":"120"}},[i("el-input",{attrs:{placeholder:"管理人员的账号"},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"用户密码","label-width":"120"}},[i("el-input",{attrs:{placeholder:"请输入管理人员的密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系姓名","label-width":"120"}},[i("el-input",{attrs:{placeholder:"请输入管理人员的姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系方式","label-width":"120"}},[i("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"用户角色","label-width":"120"}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择用户角色"},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},e._l(e.userlist,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e._id}})})),1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"==e.dialogStatus?e.createData():e.editData()}}},[e._v("确定\n      ")])],1)],1)],1)}),[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"screen_content_first"},[i("i",{staticClass:"el-icon-search"},[e._v("筛选搜索")]),e._v(" "),i("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"0be5b2c7",null);t.default=d.exports},fe8f:function(e,t,i){"use strict";i("9026")}}]);