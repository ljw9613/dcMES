(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-366a7338"],{"3ca7":function(e,t,a){},a901:function(e,t,a){"use strict";a.r(t);var o=a("c7eb"),n=a("5530"),i=(a("96cf"),a("1da1")),r=a("7e1e"),s=(a("28a5"),a("7f7f"),a("4360")),l={name:"upload-list",props:["value","type","disabled"],data:function(){return{uploadData:null,filename:"",loading:null,dlgVisible:!1,dataUrl:"",recvFile:null}},computed:{fileList:{get:function(){console.log("this.value",this.value,"[]"==this.value);var e=JSON.parse(""!=this.value&&this.value?this.value:"[]");return console.log(e),e.map((function(e){return console.log(e.url),{url:"http://192.168.6.250/dcMes_server/"+e.url,name:e.name}}))},set:function(e){this.$emit("input",e),this.$emit("change",e)}}},created:function(){var e=s.a.getters.userName;this.uploadData={userName:e},this.dataUrl="https://duhuservice.cnts.gov.cn/seafoodStreetServer/api/v1/upload-file"},methods:{handleChange:function(e,t){console.log(JSON.stringify(e))},beforeUpload:function(e){this.loading=this.$loading({lock:!0,text:"æ­£åœ¨ä¸Šä¼ ",spinner:"el-icon-loading",target:document.querySelector("#div1")})},finish:function(){console.log("finish"),this.dlgVisible=!1},handleRemove:function(e,t){this.fileList=t,console.log(e,t)},handleError:function(){},onok:function(){var e=this.$refs.uploada.fileList,t=e.length-1;console.log(t,e,"=-===="),console.log("http://192.168.6.250/dcMes_server/"+this.recvFile.response),this.fileList.push({url:"http://192.168.6.250/dcMes_server/"+this.recvFile.response,name:this.filename}),console.log(JSON.stringify(this.fileList)),this.dlgVisible=!1,this.$emit("input",JSON.stringify(this.fileList.map((function(e){return{url:e.url.split("/").pop(),name:e.name}}))))},handleSuccess:function(e,t){console.log(JSON.stringify(t)),this.loading.close(),this.filename=t.name.split(".")[0],this.recvFile=t,this.onok()},handlePreview:function(e){window.open(e.url)},handleExceed:function(e,t){this.$message.warning("å½“å‰é™åˆ¶é€‰æ‹© 3 ä¸ªæ–‡ä»¶ï¼Œæœ¬æ¬¡é€‰æ‹©äº† ".concat(e.length," ä¸ªæ–‡ä»¶ï¼Œå…±é€‰æ‹©äº† ").concat(e.length+t.length," ä¸ªæ–‡ä»¶"))},beforeRemove:function(e,t){var a=this;this.$confirm("ç¡®å®šç§»é™¤ ".concat(e.name,"ï¼Ÿ")).then((function(e){a.$emit("input",JSON.stringify(a.fileList))}))}}},c=l,d=a("2877"),u=Object(d.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{margin:"10px"},attrs:{id:"div1"}},[a("el-upload",{ref:"uploada",staticClass:"upload-demo",attrs:{disabled:e.disabled,data:e.uploadData,action:e.dataUrl,"before-upload":e.beforeUpload,"on-success":e.handleSuccess,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-error":e.handleError,"before-remove":e.beforeRemove,"on-change":e.handleChange,limit:10,"on-exceed":e.handleExceed,"file-list":e.fileList,"list-type":"img"===e.type?"picture-card":""}},[a("el-button",{attrs:{disabled:e.disabled,size:"small",type:"primary"}},[e._v("ç‚¹å‡»ä¸Šä¼ ")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("è¯·ä¸Šä¼ æ–‡ä»¶")])],1),e._v(" "),a("el-dialog",{attrs:{title:"å‘½åæ–‡ä»¶","append-to-body":!0,"close-on-click-modal":!1,visible:e.dlgVisible},on:{close:e.finish}},[a("el-form",[a("el-form-item",{attrs:{label:"æ–‡ä»¶å"}},[a("el-input",{attrs:{type:"text"},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onok()}}},[e._v("ç¡® å®š")])],1)],1)],1)}),[],!1,null,null,null),h=u.exports,m=(a("cf6a"),a("2b0e")),f=a("4e15"),p=a("b442"),g=m.default.extend({components:{Editor:f.a,Toolbar:f.b,ZrFile:p.a},props:{value:{type:String,default:""}},data:function(){var e=this;return{editor:null,html:this.value,img:"",toolbarConfig:{},editorConfig:{placeholder:"è¯·è¾“å…¥å†…å®¹...",MENU_CONF:{uploadImage:{customBrowseAndUpload:function(t){t(e.img)}},uploadVideo:{fieldName:"file",server:"/fengyangServer/api/v1/upload-file",maxFileSize:52428800,maxNumberOfFiles:3,allowedFileTypes:["video/*"],meta:{},metaWithUrl:!1,headers:{},withCredentials:!0,timeout:1e6,onBeforeUpload:function(t){return e.$message({message:"è§†é¢‘æ­£åœ¨ä¸Šä¼ ä¸­,è¯·è€å¿ƒç­‰å¾…",duration:0,customClass:"uploadTip",iconClass:"el-icon-loading",showClose:!0}),t},customInsert:function(t,a){e.$message.closeAll(),200===t.code?console.log({message:"".concat(t.data.originalName," ä¸Šä¼ æˆåŠŸ")}):console.log({message:"".concat(t.data.originalName," ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡æ–°å°è¯•")}),a(t.data.url,t.data.url)},onProgress:function(e){console.log(e)},onError:function(e,t,a){console.log("".concat(e.name," ä¸Šä¼ å‡ºé”™"),t,a),Notification.error({title:"é”™è¯¯",message:"".concat(e.name," ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡æ–°å°è¯•")})}}}},mode:"default"}},watch:{value:function(e){console.log("Watch",e),this.html=e}},methods:{onCreated:function(e){this.editor=Object.seal(e)},onChange:function(e){console.log("onChange",e.children),this.$emit("update:value",this.html)},onDestroyed:function(e){console.log("onDestroyed",e)},onMaxLength:function(e){console.log("onMaxLength",e)},onFocus:function(e){console.log("onFocus",e)},onBlur:function(e){console.log("onBlur",e)},customAlert:function(e){window.alert("customAlert in Vue demo\n".concat(type,":\n").concat(e))},customPaste:function(e,t,a){console.log("ClipboardEvent ç²˜è´´äº‹ä»¶å¯¹è±¡",t),a(!0)}},mounted:function(){},beforeDestroy:function(){this.html="";var e=this.editor;null!=e&&e.destroy()}}),v=g,b=(a("1c3c"),Object(d.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{border:"1px solid #ccc",width:"100%"}},[a("Toolbar",{staticStyle:{"border-bottom":"1px solid #ccc"},attrs:{editor:e.editor,defaultConfig:e.toolbarConfig,mode:e.mode}}),e._v(" "),a("ZrFile",{attrs:{max:1,value:e.img},on:{"update:value":function(t){e.img=t}}}),e._v(" "),a("Editor",{staticStyle:{height:"500px",width:"100%","overflow-y":"hidden"},attrs:{defaultConfig:e.editorConfig,mode:e.mode},on:{onCreated:e.onCreated,onChange:e.onChange,onDestroyed:e.onDestroyed,onMaxLength:e.onMaxLength,onFocus:e.onFocus,onBlur:e.onBlur,customAlert:e.customAlert,customPaste:e.customPaste},model:{value:e.html,callback:function(t){e.html=t},expression:"html"}})],1)}),[],!1,null,null,null)),_={filters:{},components:{UploadList:h,WangEditor:b.exports},data:function(){return{tableList:[],total:0,currentPage:1,pageSize:10,options:{},searchReq:{},honorName:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{honorName:{type:String,required:!0},awardDate:Date,honorName_en:String,honorDescription_en:String,honorDescription:String,image:String},textMap:{update:"Edit",create:"Create"}}},created:function(){this.fetchData()},beforeCreate:function(){},methods:{baseTableHandleCurrentChange:function(e){this.currentPage=e,this.fetchData()},baseTableHandleSizeChange:function(e){this.pageSize=e,this.fetchData()},closeProcessRecordDialog:function(){this.tableList=[],this.total=0,this.currentPage=1,this.pageSize=10,this.processRecordShow=!1},getslect:function(e){console.log("value",e)},fetchData:function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.listLoading=!0,t={query:Object(n.a)({},this.searchReq),limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},e.next=4,Object(r.b)("companyHonors",t);case 4:a=e.sent,console.log("ğŸš€ ~ fetchData ~ result:",a),this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),beforeClose:function(){var e=this;this.$confirm("ç¡®è®¤å…³é—­ï¼Ÿ").then((function(t){e.dialogFormVisible=!1,e.QRDialog=!1,e.approveDialog=!1,done()})).catch((function(e){}))},handleEdit:function(e){this.dialogFormVisible=!0,this.dataForm=JSON.parse(JSON.stringify(e)),this.dialogStatus="edit"},handleDelete:function(e){var t=this;this.$confirm("åˆ é™¤è£èª‰",{confirmButtonText:"åˆ é™¤",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(Object(i.a)(Object(o.a)().mark((function a(){var n;return Object(o.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n={query:{_id:e._id}},Object(r.c)("companyHonors",n).then(function(){var e=Object(i.a)(Object(o.a)().mark((function e(a){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(a),200==a.code?(t.fetchData(),t.$notify({title:"åˆ é™¤æˆåŠŸ",message:"delete Successfully",type:"success",duration:2e3})):t.$notify({title:"åˆ é™¤å¤±è´¥",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},AddFilter:function(){this.dataForm={honorName:"",awardDate:"",honorDescription:"",honorName_en:"",honorDescription_en:"",image:""},this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(this.dataForm,"this.dataForm"),""==this.dataForm.honorName||""==this.dataForm.awardDate||""==this.dataForm.honorDescription||""==this.dataForm.image){e.next=9;break}return t=Object(n.a)({},this.dataForm),e.next=5,Object(r.a)("companyHonors",t);case 5:200==e.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({honorName:"æ·»åŠ æˆåŠŸ",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({honorName:"æ·»åŠ å¤±è´¥",message:"edit failly",type:"warning",duration:2e3}),e.next=10;break;case 9:this.$notify({honorName:"è¯·å®Œå–„ä¿¡æ¯",message:"Again input",type:"warning",duration:2e3});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),editData:function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==this.dataForm.honorName||""==this.dataForm.awardDate||""==this.dataForm.honorDescription||""==this.dataForm.image){e.next=10;break}return t={query:{_id:this.dataForm._id},update:Object(n.a)({},this.dataForm)},console.log("data"),console.log(t),e.next=6,Object(r.d)("companyHonors",t);case 6:200==e.sent.code?(this.dialogFormVisible=!1,this.approveDialog=!1,this.fetchData(),this.$notify({honorName:"ä¿®æ”¹æˆåŠŸ",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({honorName:"ä¿®æ”¹å¤±è´¥",message:"edit failly",type:"warning",duration:2e3}),e.next=11;break;case 10:this.$notify({honorName:"è¯·å®Œå–„ä¿¡æ¯",message:"Again input",type:"warning",duration:2e3});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),clearclick:function(){this.tableList=this.tableList1},Search:function(){this.searchReq={},this.honorName?this.searchReq.honorName={$regex:this.honorName}:delete this.searchReq.honorName,this.fetchData()}}},y=_,w=(a("d666"),Object(d.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[e._m(0),e._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[e._v("è£èª‰åç§°:")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"è¯·è¾“å…¥è£èª‰åç§°"},model:{value:e.honorName,callback:function(t){e.honorName=t},expression:"honorName"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.Search()}}},[e._v("æŸ¥è¯¢æœç´¢\n          ")])],1)])])]),e._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[e._v("è£èª‰åˆ—è¡¨")]),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.AddFilter}},[e._v("æ·»åŠ è£èª‰\n        ")])],1)])]),e._v(" "),a("div",{staticClass:"filter-container"}),e._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:e.currentPage,"highlight-current-row":!0,pageSize:e.pageSize,tableData:e.tableList,tableDataloading:e.listLoading,total:e.total},on:{handleCurrentChange:e.baseTableHandleCurrentChange,handleSizeChange:e.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"è£èª‰åç§°",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"link-type"},[e._v(e._s(t.row.honorName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"è£èª‰æ—¶é—´",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.parseTime(t.row.awardDate,"{y}-{m}-{d} {h}:{i}")))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"è£èª‰æè¿°",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.honorDescription)+" ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"è£èª‰å›¾ç‰‡",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.image,alt:"ä¸“åˆ©å›¾ç‰‡"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"æ“ä½œ"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleEdit(o)}}},[e._v("ç¼–è¾‘æŸ¥çœ‹\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(o)}}},[e._v("åˆ é™¤\n          ")])]}}])})],1)],2),e._v(" "),a("el-dialog",{attrs:{"before-close":e.beforeClose,visible:e.dialogFormVisible,title:"è£èª‰ä¿¡æ¯"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{inline:!0,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{required:"",label:"è£èª‰åç§°","label-width":"120"}},[a("el-input",{attrs:{placeholder:"è£èª‰åç§°"},model:{value:e.dataForm.honorName,callback:function(t){e.$set(e.dataForm,"honorName",t)},expression:"dataForm.honorName"}})],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"è£èª‰æ—¶é—´","label-width":"120"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"é€‰æ‹©æ—¥æœŸæ—¶é—´"},model:{value:e.dataForm.awardDate,callback:function(t){e.$set(e.dataForm,"awardDate",t)},expression:"dataForm.awardDate"}})],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"è£èª‰æè¿°","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"è£èª‰æè¿°"},model:{value:e.dataForm.honorDescription,callback:function(t){e.$set(e.dataForm,"honorDescription",t)},expression:"dataForm.honorDescription"}})],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"è£èª‰å›¾ç‰‡é“¾æ¥","label-width":"120"}},[a("ZrFile",{attrs:{max:1,value:e.dataForm.image},on:{"update:value":function(t){return e.$set(e.dataForm,"image",t)}}})],1),e._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[e._v("è‹±æ–‡")]),e._v(" "),a("el-form-item",{attrs:{label:"è£èª‰åç§°(title)","label-width":"120"}},[a("el-input",{attrs:{placeholder:"è£èª‰åç§°(title)"},model:{value:e.dataForm.honorName_en,callback:function(t){e.$set(e.dataForm,"honorName_en",t)},expression:"dataForm.honorName_en"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"è£èª‰æè¿°(description)","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"è£èª‰æè¿°(description)"},model:{value:e.dataForm.honorDescription_en,callback:function(t){e.$set(e.dataForm,"honorDescription_en",t)},expression:"dataForm.honorDescription_en"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("å–æ¶ˆ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"==e.dialogStatus?e.createData():e.editData()}}},[e._v("ç¡®å®š\n      ")])],1)],1)],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[e._v("ç­›é€‰æœç´¢")]),e._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"fcd83166",null));t.default=w.exports},d666:function(e,t,a){"use strict";a("3ca7")}}]);