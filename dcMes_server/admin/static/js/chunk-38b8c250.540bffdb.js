(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-38b8c250","chunk-359af2df","chunk-ce46be46"],{"0eed":function(e,t,a){},"1fef":function(e,t,a){},2295:function(e,t,a){"use strict";a("a9ed")},"4e86":function(e,t,a){"use strict";a.r(t);var r={name:"MaterialFlowChart",components:{FlowNode:a("af3b").default},props:{visible:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},flowData:{type:Array,default:function(){return[]}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{handleDialogClosed:function(){this.$emit("update:visible",!1)}}},s=r,n=(a("2295"),a("2877")),c=Object(n.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"material-flow-dialog",attrs:{title:"ç‰©æ–™å·¥è‰ºæµç¨‹å›¾",visible:e.dialogVisible,width:"90%","append-to-body":!0,"modal-append-to-body":!0,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.handleDialogClosed}},[a("div",{staticClass:"flow-chart-container"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"flow-container"},[e.flowData&&0!==e.flowData.length?[a("flow-node",{attrs:{node:e.flowData[0]}})]:a("div",{staticClass:"empty-data"},[e._v("\n                æš‚æ— æµç¨‹å›¾æ•°æ®\n            ")])],2)])])}),[],!1,null,"1c0588fe",null);t.default=c.exports},"7a56a":function(e,t,a){"use strict";a("1fef")},a9ed:function(e,t,a){},af3b:function(e,t,a){"use strict";a.r(t);var r={name:"FlowNode",props:{node:{type:Object,required:!0}}},s=(a("7a56a"),a("2877")),n=Object(s.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-level"},[a("div",{staticClass:"node-container"},[a("div",{staticClass:"material-node",class:{"root-node":!e.node.materialQuantity}},[a("div",{staticClass:"node-title"},[e._v(e._s(e.node.materialName))]),e._v(" "),e.node.craftName?a("div",{staticClass:"node-subtitle"},[e._v("\n                å·¥è‰ºï¼š"+e._s(e.node.craftName)+"\n            ")]):e._e(),e._v(" "),e.node.materialCode?a("div",{staticClass:"node-info"},[e._v("\n                ç¼–ç ï¼š"+e._s(e.node.materialCode)+"\n            ")]):e._e(),e._v(" "),e.node.scanOperation?a("div",{staticClass:"node-info"},[e._v("\n                æ‰«ç æ“ä½œï¼š"+e._s(e.node.scanOperation?"éœ€è¦æ‰«ç ":"ä¸éœ€è¦æ‰«ç ")+"\n            ")]):e._e(),e._v(" "),e.node.isComponent?a("div",{staticClass:"node-info"},[e._v("\n                æ˜¯å¦ç»„ä»¶ï¼š"+e._s(e.node.isComponent?"æ˜¯":"å¦")+"\n            ")]):e._e(),e._v(" "),e.node.materialQuantity?a("div",{staticClass:"node-info"},[e._v("\n                ç”¨é‡ï¼š"+e._s(e.node.materialQuantity)+e._s(e.node.unit||"ä¸ª")+"\n            ")]):e._e()])]),e._v(" "),e.node.children&&e.node.children.length?[e._m(0),e._v(" "),a("div",{staticClass:"process-level"},e._l(e.node.children,(function(t){return a("div",{key:t._id,staticClass:"process-container"},[a("div",{staticClass:"process-node"},[a("div",{staticClass:"node-title"},[e._v(e._s(t.sort)+"."+e._s(t.processName))]),e._v(" "),a("div",{staticClass:"node-content"},[t.children&&t.children.length?e._l(t.children,(function(e){return a("div",{key:e._id,staticClass:"sub-material"},[a("flow-node",{attrs:{node:e}})],1)})):a("div",{staticClass:"no-materials"},[e._v("\n                            æš‚æ— å…³è”ç‰©æ–™\n                        ")])],2)])])})),0)]:e._e()],2)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"arrow-container"},[t("div",{staticClass:"arrow-right"})])}],!1,null,"d061e8cc",null);t.default=n.exports},dfb4:function(e,t,a){"use strict";a("0eed")},e9f7:function(e,t,a){"use strict";a.r(t);var r=(a("28a5"),a("55dd"),a("5df3"),a("4f7f"),a("7f7f"),a("5530")),s=(a("6b54"),a("a481"),a("f576"),a("8615"),a("6762"),a("2fdb"),a("456d"),a("c7eb")),n=(a("96cf"),a("1da1")),c=a("ade3"),o=a("3835"),i=(a("ffc1"),a("ac6a"),a("7e1e")),l=a("b810"),u={name:"MaterialManagement",dicts:["product_type"],components:{MaterialFlowChart:a("4e86").default},data:function(){return{searchForm:{FNumber:"",FName:"",FSpecification:"",FDocumentStatus:"",FForbidStatus:"",FOldNumber:"",FBaseUnitId_FNumber:"",FStockId_FNumber:"",F_TFQJ_CheckBox:"",FNameEn:"",FCreateOrgId:"",FUseOrgId:""},tableList:[],total:0,currentPage:1,pageSize:10,listLoading:!0,showAdvanced:!1,dialogFormVisible:!1,dialogStatus:"",detailDialogVisible:!1,selection:[],dataForm:{FNumber:"",FName:"",FSpecification:"",FDocumentStatus:"",FForbidStatus:"",FOldNumber:"",FBaseUnitId_FNumber:"",FBaseUnitId_FName:"",FStockId_FNumber:"",FStockId_FName:"",F_TFQJ_CheckBox:"",FNameEn:"",FCreateOrgId:"",FUseOrgId:"",FDescription:"",FMnemonicCode:"",FMaterialGroup:"",FCreatorId:"",FCreateDate:null,FModifierId:"",FModifyDate:null,diNum:""},DINum:"",rules:{FName:[{required:!0,message:"è¯·è¾“å…¥ç‰©æ–™åç§°",trigger:"blur"}],FBaseUnitId_FNumber:[{required:!0,message:"è¯·é€‰æ‹©åŸºæœ¬å•ä½",trigger:"change"}],FStockId_FNumber:[{required:!0,message:"è¯·é€‰æ‹©ä»“åº“",trigger:"change"}],FCreateOrgId:[{required:!0,message:"è¯·é€‰æ‹©åˆ›å»ºç»„ç»‡",trigger:"change"}],FUseOrgId:[{required:!0,message:"è¯·é€‰æ‹©ä½¿ç”¨ç»„ç»‡",trigger:"change"}],diNum:[{max:100,message:"DIç é•¿åº¦ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦",trigger:"blur"}]},flowChartDialogVisible:!1,flowChartLoading:!1,flowChartData:[],defaultProps:{children:"children",label:"label"},processedFlowChartData:[],productDiNumId:null,syncProgressTimer:null,syncDialogVisible:!1,syncForm:{syncType:"date",materialNumbers:"",dateRange:[],documentStatus:"C"}}},methods:{getStatusType:function(e){return{DRAFT:"info",APPROVED:"success",PROCESSING:"warning"}[e]||"info"},getStatusText:function(e){return{DRAFT:"è‰ç¨¿",APPROVED:"å·²å®¡æ ¸",PROCESSING:"å®¡æ ¸ä¸­"}[e]||e},searchData:function(){var e={query:{$and:[]}};return Object.entries(this.searchForm).forEach((function(t){var a=Object(o.a)(t,2),r=a[0],s=a[1];if(s)switch(r){case"FNumber":case"FName":case"FSpecification":case"FOldNumber":case"FNameEn":e.query.$and.push(Object(c.a)({},r,{$regex:s,$options:"i"}));break;case"FDocumentStatus":case"FForbidStatus":case"FBaseUnitId_FNumber":case"FStockId_FNumber":case"F_TFQJ_CheckBox":case"FBOMCATEGORY":case"FBOMUSE":case"FITEMPPROPERTY":e.query.$and.push(Object(c.a)({},r,s))}})),e.query.$and.length||delete e.query.$and,e},resetForm:function(){this.$refs.searchForm.resetFields(),this.searchForm={FNumber:"",FName:"",FSpecification:"",FDocumentStatus:"",FForbidStatus:"",FOldNumber:"",FBaseUnitId_FNumber:"",FStockId_FNumber:"",F_TFQJ_CheckBox:"",FNameEn:"",FCreateOrgId:"",FUseOrgId:"",FBOMCATEGORY:"",FBOMUSE:"",FITEMPPROPERTY:""},this.showAdvanced=!1,this.currentPage=1,this.pageSize=10,this.fetchData(),this.$message.success("é‡ç½®æˆåŠŸ")},fetchData:function(){var e=Object(n.a)(Object(s.a)().mark((function e(){var t,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,(t=this.searchData()).page=this.currentPage,t.skip=(this.currentPage-1)*this.pageSize,t.limit=this.pageSize,t.count=!0,t.sort={FNumber:1},e.next=10,Object(i.b)("k3_BD_MATERIAL",t);case 10:200===(a=e.sent).code?(this.tableList=a.data,this.total=a.countnum):this.$message.error(a.msg||"èŽ·å–æ•°æ®å¤±è´¥"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("èŽ·å–æ•°æ®å¤±è´¥:",e.t0),this.$message.error("èŽ·å–æ•°æ®å¤±è´¥: "+e.t0.message);case 18:return e.prev=18,this.listLoading=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[1,14,18,21]])})));return function(){return e.apply(this,arguments)}}(),exportData:function(){var e=Object(n.a)(Object(s.a)().mark((function e(){var t,a,r,n,c,o,l,u,d=this;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.$message({message:"æ­£åœ¨å¯¼å‡ºæ•°æ®,è¯·ç¨å€™...",type:"info"}),t=this.$loading({lock:!0,text:"å¯¼å‡ºä¸­...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),(a=this.searchData()).limit=1e6,e.next=7,Object(i.b)("k3_PRD_MO",a);case 7:if((r=e.sent).data&&0!==r.data.length){e.next=12;break}return this.$message.warning("æ²¡æœ‰æ•°æ®å¯ä¾›å¯¼å‡º"),t.close(),e.abrupt("return");case 12:n={FNumber:"ç‰©æ–™ç¼–ç ",FName:"ç‰©æ–™åç§°",FSpecification:"è§„æ ¼åž‹å·",FDocumentStatus:"æ•°æ®çŠ¶æ€",FBOMCATEGORY:"BOMåˆ†ç±»",FBOMUSE:"BOMç”¨é€”",FITEMPPROPERTY:"ç‰©æ–™å±žæ€§",FForbidStatus:"ç¦ç”¨çŠ¶æ€"},c=r.data.map((function(e){var t={};return Object.keys(n).forEach((function(a){a.includes("Date")?t[n[a]]=d.formatDate(e[a]):t[n[a]]=e[a]})),t})),o=XLSX.utils.book_new(),l=XLSX.utils.json_to_sheet(c),u=Object.values(n).map((function(e){return{wch:Math.max(2*e.length,15)}})),l["!cols"]=u,XLSX.utils.book_append_sheet(o,l,"ç‰©æ–™ç®¡ç†æ•°æ®"),XLSX.writeFile(o,"ç‰©æ–™ç®¡ç†æ•°æ®.xlsx"),t.close(),this.$message.success("å¯¼å‡ºæˆåŠŸ"),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),console.error("å¯¼å‡ºå¤±è´¥:",e.t0),this.$message.error("å¯¼å‡ºå¤±è´¥");case 28:case"end":return e.stop()}}),e,this,[[0,24]])})));return function(){return e.apply(this,arguments)}}(),baseTableHandleCurrentChange:function(e){this.currentPage=e,this.fetchData()},baseTableHandleSizeChange:function(e){this.pageSize=e,this.fetchData()},toggleAdvanced:function(){this.showAdvanced=!this.showAdvanced},formatDate:function(e){if(!e)return"æš‚æ— æ•°æ®";var t=new Date(e);if(isNaN(t.getTime()))return"æ— æ•ˆæ—¥æœŸ";var a=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(r,"-").concat(s)},formatNumber:function(e){return e||0===e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"},search:function(){var e=this;this.$refs.searchForm.validate((function(t){if(!t)return e.$message.warning("è¯·æ£€æŸ¥è¾“å…¥é¡¹æ˜¯å¦æ­£ç¡®"),!1;e.currentPage=1,e.fetchData()}))},handleSelectionChange:function(e){this.selection=e},handleView:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dataForm=JSON.parse(JSON.stringify(t)),e.next=3,this.fetchDiNum(t._id);case 3:this.dialogStatus="view",this.dialogFormVisible=!0;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleEdit:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dataForm=JSON.parse(JSON.stringify(t)),e.next=3,this.fetchDiNum(t._id);case 3:this.dialogStatus="edit",this.dialogFormVisible=!0;case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),handleDelete:function(e){var t=this;this.$confirm("ç¡®è®¤è¦åˆ é™¤è¯¥ç‰©æ–™å—?","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(Object(n.a)(Object(s.a)().mark((function a(){return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(i.c)("k3_PRD_MO",{query:{_id:e._id}});case 3:t.$message.success("åˆ é™¤æˆåŠŸ"),t.fetchData(),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),console.error("åˆ é™¤å¤±è´¥:",a.t0),t.$message.error("åˆ é™¤å¤±è´¥");case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))).catch((function(){t.$message.info("å·²å–æ¶ˆåˆ é™¤")}))},submitForm:function(){var e=Object(n.a)(Object(s.a)().mark((function e(){var t=this;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$refs.dataForm.validate(function(){var e=Object(n.a)(Object(s.a)().mark((function e(a){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=20;break}if(e.prev=1,n={productId:t.dataForm._id,diNum:t.DINum,updateBy:t.$store.state.user.id},!t.productDiNumId){e.next=8;break}return e.next=6,Object(i.d)("productDiNum",{query:{_id:t.productDiNumId},update:n});case 6:e.next=11;break;case 8:if(!t.DINum){e.next=11;break}return e.next=11,Object(i.a)("productDiNum",Object(r.a)(Object(r.a)({},n),{},{createBy:t.$store.state.user.id}));case 11:t.$message.success("edit"===t.dialogStatus?"æ›´æ–°æˆåŠŸ":"æ·»åŠ æˆåŠŸ"),t.dialogFormVisible=!1,t.fetchData(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.error("ä¿å­˜å¤±è´¥:",e.t0),t.$message.error("ä¿å­˜å¤±è´¥");case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleToggleStatus:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$confirm("ç¡®è®¤è¦".concat("DISABLE"===t.FForbidStatus?"å¯ç”¨":"ç¦ç”¨","è¯¥ç‰©æ–™å—ï¼Ÿ"),"æç¤º",{type:"warning"});case 3:return a="DISABLE"===t.FForbidStatus?"ENABLE":"DISABLE",e.next=6,Object(i.d)("BD_MATERIAL",t._id,Object(r.a)(Object(r.a)({},t),{},{FForbidStatus:a,FForbidderId:this.$store.state.user.name,FForbidDate:new Date}));case 6:this.$message.success("".concat("DISABLE"===a?"ç¦ç”¨":"å¯ç”¨","æˆåŠŸ")),this.fetchData(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("æ“ä½œå¤±è´¥:",e.t0),this.$message.error("æ“ä½œå¤±è´¥");case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),handleViewFlowChart:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var a,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.flowChartLoading=!0,e.prev=1,console.log("å½“å‰ç‰©æ–™:",t),e.next=5,this.getCraftByMaterialId(t._id);case 5:if(a=e.sent,console.log("å…³è”å·¥è‰º:",a),a){e.next=10;break}return this.$message.info("è¯¥ç‰©æ–™æœªå…³è”å·¥è‰ºï¼Œæ— æµç¨‹å›¾"),e.abrupt("return");case 10:if(a.processSteps&&0!==a.processSteps.length){e.next=13;break}return this.$message.info("è¯¥ç‰©æ–™å·¥è‰ºä¸‹æ— å·¥åºï¼Œæ— æµç¨‹å›¾"),e.abrupt("return");case 13:return this.flowChartDialogVisible=!0,e.next=16,this.buildFlowChartData(t._id,new Set);case 16:r=e.sent,console.log("æž„å»ºçš„æµç¨‹å›¾æ•°æ®:",r),this.processedFlowChartData=[r],console.log("å¤„ç†åŽçš„æµç¨‹å›¾æ•°æ®:",this.processedFlowChartData),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(1),console.error("èŽ·å–æµç¨‹å›¾æ•°æ®å¤±è´¥:",e.t0),this.$message.error("èŽ·å–æµç¨‹å›¾æ•°æ®å¤±è´¥");case 26:return e.prev=26,this.flowChartLoading=!1,e.finish(26);case 29:case"end":return e.stop()}}),e,this,[[1,22,26,29]])})));return function(t){return e.apply(this,arguments)}}(),buildFlowChartData:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var a,r,c,o,i,l=this,u=arguments;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=u.length>1&&void 0!==u[1]?u[1]:new Set).has(t)){e.next=3;break}return e.abrupt("return",null);case 3:return a.add(t),e.prev=4,e.next=7,this.getMaterialById(t);case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return",null);case 10:return c={_id:t,label:r.FName,materialName:r.FName,materialCode:r.FNumber,children:[]},e.next=13,this.getCraftByMaterialId(t);case 13:if(o=e.sent){e.next=16;break}return e.abrupt("return",c);case 16:if(c.craftName=o.craftName,!(o.processSteps&&o.processSteps.length>0)){e.next=22;break}return e.next=20,Promise.all(o.processSteps.map(function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var r,c,o;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getProcessStepById(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:if(c={_id:t,label:r.processName,sort:r.sort,processName:r.processName,children:[]},!(r.materials&&r.materials.length>0)){e.next=11;break}return e.next=9,Promise.all(r.materials.map(function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var r,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getProcessMaterialById(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,l.buildFlowChartData(r.materialId,a);case 7:return(n=e.sent)&&(n.materialRelationType=r.relationType,n.isComponent=r.isComponent,n.scanOperation=r.scanOperation,n.materialQuantity=r.quantity),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:o=e.sent,c.children=o.filter(Boolean);case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 20:i=e.sent,c.children=i.filter(Boolean);case 22:return e.abrupt("return",c);case 25:return e.prev=25,e.t0=e.catch(4),console.error("æž„å»ºæµç¨‹å›¾æ•°æ®å¤±è´¥:",e.t0),this.$message.error("æž„å»ºæµç¨‹å›¾æ•°æ®å¤±è´¥"),e.abrupt("return",null);case 30:case"end":return e.stop()}}),e,this,[[4,25]])})));return function(t){return e.apply(this,arguments)}}(),getMaterialById:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)("k3_BD_MATERIAL",{query:{_id:t}});case 2:return a=e.sent,e.abrupt("return",a.data[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCraftByMaterialId:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)("craft",{query:{materialId:t}});case 2:return a=e.sent,e.abrupt("return",a.data[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getProcessStepById:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)("processStep",{query:{_id:t},sort:{sort:1}});case 2:return a=e.sent,e.abrupt("return",a.data[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getProcessMaterialById:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)("processMaterials",{query:{_id:t}});case 2:return a=e.sent,e.abrupt("return",a.data[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),processFlowChartData:function(e){var t=[],a=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e&&0!==e.length&&(t[r]||(t[r]=[]),e.forEach((function(e){var s={_id:e._id,label:e.label,craftName:e.craftName||"",processName:e.processName||"",materialName:e.materialName||"",materialRelationType:e.materialRelationType||"",materialQuantity:e.materialQuantity||"",children:e.children||[]};t[r].push(s),s.children&&s.children.length>0&&a(s.children,r+1)})))};return a(e),t},getProcessMaterialByMaterialId:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.b)("processMaterials",{query:{materialId:t}});case 2:return a=e.sent,e.abrupt("return",a.data[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchDiNum:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.b)("productDiNum",{query:{productId:t}});case 3:(a=e.sent).data&&a.data.length>0?(this.DINum=a.data[0].diNum,this.productDiNumId=a.data[0]._id):(this.DINum="",this.productDiNumId=null),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("èŽ·å–DIç ä¿¡æ¯å¤±è´¥:",e.t0),this.$message.error("èŽ·å–DIç ä¿¡æ¯å¤±è´¥");case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),handleSync:function(){var e=Object(n.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.syncDialogVisible=!0,this.syncForm={syncType:"date",materialNumbers:"",dateRange:[],documentStatus:"C"};case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),handleOneSync:function(){var e=Object(n.a)(Object(s.a)().mark((function e(t){var a,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("ðŸš€ ~ handleOneSync ~ row:",t),e.prev=1,a={FilterString:[]},e.next=5,this.$confirm("ç¡®è®¤æ›´æ–°".concat(t.FNumber,"çš„æ•°æ®å—ï¼Ÿ"),"æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});case 5:return a.FilterString=[{FieldName:"FMATERIALID",Compare:"=",Value:t.FMATERIALID,Left:"",Right:"",Logic:0}],e.next=8,Object(l.c)(a);case 8:200===(r=e.sent).code?(this.startSyncProgressCheck(),r.taskStatus?this.$message.success("åŒæ­¥ä¸­ï¼šå½“å‰".concat(r.taskStatus.processedRecords,"æ¡æ•°æ®åŒæ­¥å®Œæˆï¼Œè€—æ—¶").concat(r.taskStatus.elapsedTime,"ç§’")):this.$message.success("åŒæ­¥ä»»åŠ¡å·²å¯åŠ¨")):this.$message.error(r.message||"ç‰©æ–™åŒæ­¥å¤±è´¥"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("ç‰©æ–™åŒæ­¥å¤±è´¥:",e.t0),this.$message.error("ç‰©æ–™åŒæ­¥å¤±è´¥");case 16:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),confirmSync:function(){var e=Object(n.a)(Object(s.a)().mark((function e(){var t,a,r,n,c,i,u;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("number"!==this.syncForm.syncType||this.syncForm.materialNumbers.trim()){e.next=3;break}return this.$message.warning("è¯·è¾“å…¥ç‰©æ–™ç¼–å·"),e.abrupt("return");case 3:if("date"!==this.syncForm.syncType||this.syncForm.dateRange&&2===this.syncForm.dateRange.length){e.next=6;break}return this.$message.warning("è¯·é€‰æ‹©å®¡æ ¸æ—¥æœŸèŒƒå›´"),e.abrupt("return");case 6:return e.prev=6,t={number:"ç¡®è®¤è¦åŒæ­¥é€‰å®šç‰©æ–™ç¼–å·çš„æ•°æ®å—ï¼Ÿ",date:"ç¡®è®¤è¦åŒæ­¥é€‰å®šæ—¥æœŸèŒƒå›´çš„æ•°æ®å—ï¼Ÿ",all:"ç¡®è®¤è¦åŒæ­¥æ‰€æœ‰ç‰©æ–™æ•°æ®å—ï¼Ÿæ­¤æ“ä½œå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´"}[this.syncForm.syncType],e.next=10,this.$confirm(t,"æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});case 10:a=this.$loading({lock:!0,text:"æ­£åœ¨å¯åŠ¨åŒæ­¥ä»»åŠ¡...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.prev=11,r={FilterString:[]},e.t0=this.syncForm.syncType,e.next="number"===e.t0?16:"date"===e.t0?18:"all"===e.t0?21:23;break;case 16:return r.FilterString=[{FieldName:"FNumber",Compare:"IN",Value:this.syncForm.materialNumbers.replace(/[\n\r\s]+/g,",").split(",").filter((function(e){return e})).map((function(e){return e.trim()})).join(","),Left:"",Right:"",Logic:0},{FieldName:"FDocumentStatus",Compare:"StatusEqualto",Value:this.syncForm.documentStatus,Left:"",Right:"",Logic:0}],e.abrupt("break",23);case 18:return n=Object(o.a)(this.syncForm.dateRange,2),c=n[0],i=n[1],r.FilterString=[{FieldName:"FDocumentStatus",Compare:"StatusEqualto",Value:this.syncForm.documentStatus,Left:"",Right:"",Logic:0},{FieldName:"FApproveDate",Compare:">",Value:"".concat(c," 00:00:00"),Left:"",Right:"",Logic:0},{FieldName:"FApproveDate",Compare:"<",Value:"".concat(i," 23:59:59"),Left:"",Right:"",Logic:0}],e.abrupt("break",23);case 21:return r.FilterString=[{FieldName:"FDocumentStatus",Compare:"StatusEqualto",Value:"C",Left:"",Right:"",Logic:0}],e.abrupt("break",23);case 23:return e.next=25,Object(l.c)(r);case 25:200===(u=e.sent).code?(this.syncDialogVisible=!1,a.close(),this.startSyncProgressCheck(),u.taskStatus?this.$message.success("åŒæ­¥ä¸­ï¼šå½“å‰".concat(u.taskStatus.processedRecords,"æ¡æ•°æ®åŒæ­¥å®Œæˆï¼Œè€—æ—¶").concat(u.taskStatus.elapsedTime,"ç§’")):this.$message.success("åŒæ­¥ä»»åŠ¡å·²å¯åŠ¨")):(a.close(),this.$message.error(u.message||"ç‰©æ–™åŒæ­¥å¤±è´¥")),e.next=34;break;case 29:e.prev=29,e.t1=e.catch(11),a.close(),console.error("ç‰©æ–™åŒæ­¥å¤±è´¥:",e.t1),this.$message.error("ç‰©æ–™åŒæ­¥å¤±è´¥: "+e.t1.message);case 34:e.next=39;break;case 36:e.prev=36,e.t2=e.catch(6),"cancel"!==e.t2&&(console.error("æ“ä½œå¤±è´¥:",e.t2),this.$message.error("æ“ä½œå¤±è´¥"));case 39:case"end":return e.stop()}}),e,this,[[6,36],[11,29]])})));return function(){return e.apply(this,arguments)}}(),startSyncProgressCheck:function(){var e=this;this.syncProgressTimer&&clearInterval(this.syncProgressTimer),this.syncProgressTimer=setInterval(Object(n.a)(Object(s.a)().mark((function t(){var a,r;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.a)("k3_BD_MATERIAL");case 3:if(a=t.sent,console.log("ðŸš€ ~ this.syncProgressTimer=setInterval ~ response:",a),200!==a.code){t.next=27;break}if(!(r=a.taskStatus)){t.next=25;break}t.t0=r.status,t.next="running"===t.t0?11:"no_task"===t.t0?13:"completed"===t.t0?17:21;break;case 11:return e.$notify({type:"info",message:"åŒæ­¥ä¸­ï¼šå½“å‰".concat(r.processedRecords,"æ¡æ•°æ®åŒæ­¥å®Œæˆï¼Œè€—æ—¶").concat(r.elapsedTime,"ç§’"),duration:5e3}),t.abrupt("break",23);case 13:case 17:return e.$message.success("åŒæ­¥å®Œæˆï¼"),e.stopSyncProgressCheck(),e.fetchData(),t.abrupt("break",23);case 21:e.$message.warning("æœªçŸ¥çš„åŒæ­¥çŠ¶æ€"),e.stopSyncProgressCheck();case 23:t.next=27;break;case 25:e.$message.warning("æœªæ‰¾åˆ°ç‰©æ–™åŒæ­¥ä»»åŠ¡"),e.stopSyncProgressCheck();case 27:t.next=34;break;case 29:t.prev=29,t.t1=t.catch(0),console.error("æŸ¥è¯¢åŒæ­¥è¿›åº¦å¤±è´¥:",t.t1),e.$message.error("æŸ¥è¯¢åŒæ­¥è¿›åº¦å¤±è´¥"),e.stopSyncProgressCheck();case 34:case"end":return t.stop()}}),t,null,[[0,29]])}))),5e3)},stopSyncProgressCheck:function(){this.syncProgressTimer&&(clearInterval(this.syncProgressTimer),this.syncProgressTimer=null)},beforeDestroy:function(){this.stopSyncProgressCheck()}},created:function(){this.fetchData()}},d=u,m=(a("dfb4"),a("2877")),p=Object(m.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("ç­›é€‰æœç´¢")]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.toggleAdvanced}},[e._v("\n                "+e._s(e.showAdvanced?"æ”¶èµ·":"å±•å¼€")+"é«˜çº§æœç´¢\n            ")])],1),e._v(" "),a("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{model:e.searchForm}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"ç‰©æ–™ç¼–ç "}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç‰©æ–™ç¼–ç ",clearable:""},model:{value:e.searchForm.FNumber,callback:function(t){e.$set(e.searchForm,"FNumber",t)},expression:"searchForm.FNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"ç‰©æ–™åç§°"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç‰©æ–™åç§°",clearable:""},model:{value:e.searchForm.FName,callback:function(t){e.$set(e.searchForm,"FName",t)},expression:"searchForm.FName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"è§„æ ¼åž‹å·"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥è§„æ ¼åž‹å·",clearable:""},model:{value:e.searchForm.FSpecification,callback:function(t){e.$set(e.searchForm,"FSpecification",t)},expression:"searchForm.FSpecification"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"æ•°æ®çŠ¶æ€"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®çŠ¶æ€",clearable:""},model:{value:e.searchForm.FDocumentStatus,callback:function(t){e.$set(e.searchForm,"FDocumentStatus",t)},expression:"searchForm.FDocumentStatus"}},[a("el-option",{attrs:{label:"è‰ç¨¿",value:"DRAFT"}}),e._v(" "),a("el-option",{attrs:{label:"å·²å®¡æ ¸",value:"APPROVED"}}),e._v(" "),a("el-option",{attrs:{label:"å®¡æ ¸ä¸­",value:"PROCESSING"}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"æ—§ç‰©æ–™ç¼–ç "}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥æ—§ç‰©æ–™ç¼–ç ",clearable:""},model:{value:e.searchForm.FOldNumber,callback:function(t){e.$set(e.searchForm,"FOldNumber",t)},expression:"searchForm.FOldNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"åŸºæœ¬å•ä½"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©åŸºæœ¬å•ä½",clearable:""},model:{value:e.searchForm.FBaseUnitId_FNumber,callback:function(t){e.$set(e.searchForm,"FBaseUnitId_FNumber",t)},expression:"searchForm.FBaseUnitId_FNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"ä»“åº“"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©ä»“åº“",clearable:""},model:{value:e.searchForm.FStockId_FNumber,callback:function(t){e.$set(e.searchForm,"FStockId_FNumber",t)},expression:"searchForm.FStockId_FNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"æ˜¯å¦é•¿æ–°ç‰©æ–™"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©",clearable:""},model:{value:e.searchForm.F_TFQJ_CheckBox,callback:function(t){e.$set(e.searchForm,"F_TFQJ_CheckBox",t)},expression:"searchForm.F_TFQJ_CheckBox"}},[a("el-option",{attrs:{label:"æ˜¯",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"å¦",value:"0"}})],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanced,expression:"showAdvanced"}]},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"BOMåˆ†ç±»"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©BOMåˆ†ç±»",clearable:""},model:{value:e.searchForm.FBOMCATEGORY,callback:function(t){e.$set(e.searchForm,"FBOMCATEGORY",t)},expression:"searchForm.FBOMCATEGORY"}},[a("el-option",{attrs:{label:"æ ‡å‡†BOM",value:"STANDARD"}}),e._v(" "),a("el-option",{attrs:{label:"å·¥ç¨‹BOM",value:"ENGINEERING"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"BOMç”¨é€”"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©BOMç”¨é€”",clearable:""},model:{value:e.searchForm.FBOMUSE,callback:function(t){e.$set(e.searchForm,"FBOMUSE",t)},expression:"searchForm.FBOMUSE"}},[a("el-option",{attrs:{label:"ç”Ÿäº§ç”¨",value:"PRODUCTION"}}),e._v(" "),a("el-option",{attrs:{label:"è®¾è®¡ç”¨",value:"DESIGN"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"ç‰©æ–™å±žæ€§"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©ç‰©æ–™å±žæ€§",clearable:""},model:{value:e.searchForm.FITEMPPROPERTY,callback:function(t){e.$set(e.searchForm,"FITEMPPROPERTY",t)},expression:"searchForm.FITEMPPROPERTY"}},[a("el-option",{attrs:{label:"å¤–è´­",value:"PURCHASE"}}),e._v(" "),a("el-option",{attrs:{label:"è‡ªåˆ¶",value:"SELF_MADE"}}),e._v(" "),a("el-option",{attrs:{label:"å§”å¤–",value:"OUTSOURCE"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"ç¦ç”¨çŠ¶æ€"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©ç¦ç”¨çŠ¶æ€",clearable:""},model:{value:e.searchForm.FForbidStatus,callback:function(t){e.$set(e.searchForm,"FForbidStatus",t)},expression:"searchForm.FForbidStatus"}},[a("el-option",{attrs:{label:"å¯ç”¨",value:"ENABLE"}}),e._v(" "),a("el-option",{attrs:{label:"ç¦ç”¨",value:"DISABLE"}})],1)],1)],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("æŸ¥è¯¢æœç´¢")]),e._v(" "),a("el-button",{on:{click:e.resetForm}},[e._v("é‡ç½®")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.exportData}},[e._v("å¯¼å‡ºæ•°æ®")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:e.handleSync}},[e._v("åŒæ­¥ç‰©æ–™")])],1)],1)],1),e._v(" "),e._m(0),e._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:e.currentPage,"highlight-current-row":!0,pageSize:e.pageSize,tableData:e.tableList,tableDataloading:e.listLoading,total:e.total,"cell-style":{textAlign:"center"}},on:{"selection-change":e.handleSelectionChange,handleCurrentChange:e.baseTableHandleCurrentChange,handleSizeChange:e.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"ä½¿ç”¨ç»„ç»‡",prop:"FUseOrgId",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"ç‰©æ–™ID",prop:"FMATERIALID",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"ç‰©æ–™ç¼–ç ",prop:"FNumber",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.handleView(t.row)}}},[e._v(e._s(t.row.FNumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"ç‰©æ–™åç§°",prop:"FName"}}),e._v(" "),a("el-table-column",{attrs:{label:"è§„æ ¼åž‹å·",prop:"FSpecification",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"åŸºæœ¬å•ä½",prop:"FBaseUnitId_FName",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"ä»“åº“",prop:"FStockId_FName",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"è‹±æ–‡åç§°",prop:"FNameEn",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"æ•°æ®çŠ¶æ€",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.getStatusType(t.row.FDocumentStatus)}},[e._v("\n                        "+e._s(e.getStatusText(t.row.FDocumentStatus))+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"ç¦ç”¨çŠ¶æ€",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"DISABLE"===t.row.FForbidStatus?"danger":"success"}},[e._v("\n                        "+e._s("DISABLE"===t.row.FForbidStatus?"ç¦ç”¨":"å¯ç”¨")+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"æ“ä½œ",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleViewFlowChart(t.row)}}},[e._v("æŸ¥çœ‹æµç¨‹å›¾")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("DIç ç®¡ç†")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleOneSync(t.row)}}},[e._v("åŒæ­¥")])]}}])})],1)],2),e._v(" "),a("el-dialog",{attrs:{title:"create"===e.dialogStatus?"æ–°å¢žç‰©æ–™":"ç¼–è¾‘ç‰©æ–™",visible:e.dialogFormVisible,width:"60%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"ç‰©æ–™ç¼–ç ",prop:"FNumber"}},[a("el-input",{attrs:{readonly:"",disabled:"view"===e.dialogStatus,placeholder:"è¯·è¾“å…¥ç‰©æ–™ç¼–ç "},model:{value:e.dataForm.FNumber,callback:function(t){e.$set(e.dataForm,"FNumber",t)},expression:"dataForm.FNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"ç‰©æ–™åç§°",prop:"FName"}},[a("el-input",{attrs:{readonly:"",disabled:"view"===e.dialogStatus,placeholder:"è¯·è¾“å…¥ç‰©æ–™åç§°"},model:{value:e.dataForm.FName,callback:function(t){e.$set(e.dataForm,"FName",t)},expression:"dataForm.FName"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"DIç ",prop:"diNum"}},[a("el-input",{attrs:{placeholder:"è¯·è¾“å…¥DIç ",clearable:""},model:{value:e.DINum,callback:function(t){e.DINum=t},expression:"DINum"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("å– æ¶ˆ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("ç¡® å®š")])],1)],1),e._v(" "),a("material-flow-chart",{attrs:{visible:e.flowChartDialogVisible,loading:e.flowChartLoading,"flow-data":e.processedFlowChartData},on:{"update:visible":function(t){e.flowChartDialogVisible=t}}}),e._v(" "),a("el-dialog",{attrs:{title:"åŒæ­¥ç‰©æ–™æ•°æ®",visible:e.syncDialogVisible,width:"500px"},on:{"update:visible":function(t){e.syncDialogVisible=t}}},[a("el-form",{ref:"syncForm",attrs:{model:e.syncForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"åŒæ­¥æ–¹å¼"}},[a("el-radio-group",{model:{value:e.syncForm.syncType,callback:function(t){e.$set(e.syncForm,"syncType",t)},expression:"syncForm.syncType"}},[a("el-radio",{attrs:{label:"number"}},[e._v("æŒ‰ç‰©æ–™ç¼–å·åŒæ­¥")]),e._v(" "),a("el-radio",{attrs:{label:"date"}},[e._v("æŒ‰æ—¥æœŸåŒæ­¥")]),e._v(" "),a("el-radio",{attrs:{label:"all"}},[e._v("åŒæ­¥å…¨éƒ¨")])],1)],1),e._v(" "),"number"===e.syncForm.syncType?a("el-form-item",{attrs:{label:"ç‰©æ–™ç¼–å·"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"è¯·è¾“å…¥ç‰©æ–™ç¼–å·ï¼Œå¤šä¸ªç¼–å·ç”¨è‹±æ–‡é€—å·åˆ†éš”"},model:{value:e.syncForm.materialNumbers,callback:function(t){e.$set(e.syncForm,"materialNumbers",t)},expression:"syncForm.materialNumbers"}})],1):e._e(),e._v(" "),"date"===e.syncForm.syncType?a("el-form-item",{attrs:{label:"å®¡æ ¸æ—¥æœŸ"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"è‡³","start-placeholder":"å¼€å§‹æ—¥æœŸ","end-placeholder":"ç»“æŸæ—¥æœŸ","value-format":"yyyy-MM-dd"},model:{value:e.syncForm.dateRange,callback:function(t){e.$set(e.syncForm,"dateRange",t)},expression:"syncForm.dateRange"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"å•æ®çŠ¶æ€"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"all"===e.syncForm.syncType,placeholder:"è¯·é€‰æ‹©å•æ®çŠ¶æ€"},model:{value:e.syncForm.documentStatus,callback:function(t){e.$set(e.syncForm,"documentStatus",t)},expression:"syncForm.documentStatus"}},[a("el-option",{attrs:{label:"å·²å®¡æ ¸",value:"C"}}),e._v(" "),a("el-option",{attrs:{label:"å®¡æ ¸ä¸­",value:"B"}}),e._v(" "),a("el-option",{attrs:{label:"è‰ç¨¿",value:"A"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.syncDialogVisible=!1}}},[e._v("å– æ¶ˆ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmSync}},[e._v("ç¡® å®š")])],1)],1)],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[e._v("ç‰©æ–™ç®¡ç†åˆ—è¡¨")])])])])}],!1,null,"1c3a89d1",null);t.default=p.exports}}]);