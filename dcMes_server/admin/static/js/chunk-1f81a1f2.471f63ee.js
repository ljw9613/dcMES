(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1f81a1f2","chunk-7452bb82","chunk-95630b00","chunk-7feedf86","chunk-44e5b0b4","chunk-802040da","chunk-802040da","chunk-70499c14","chunk-723be166","chunk-5277e66a","chunk-440f97c2","chunk-130d7216","chunk-4f5be914","chunk-366a7338","chunk-b67bb38e","chunk-e905aacc","chunk-2e247dad","chunk-0cbcb06b","chunk-b14b1f66","chunk-254c70e5","chunk-25659477","chunk-66117b33","chunk-7e66a064","chunk-2d0b637b","chunk-2d21d0c2","chunk-3f781f70","chunk-476537e9","chunk-d2031888","chunk-960b0942","chunk-1eb711cd","chunk-2eade242","chunk-7452bb82","chunk-3c1ef517","chunk-371cfdce","chunk-2da4d1b6","chunk-4c3a0513","chunk-15b697a8","chunk-3bce4227","chunk-648efcbe","chunk-1dfc4160","chunk-3ae1522c","chunk-1a8c93c0","chunk-288ffec8","chunk-58bd148a","chunk-784216a7","chunk-301005dc","chunk-27b8e71d","chunk-6919d003","chunk-1ff6edda","chunk-2d0db32e","chunk-2d222794","chunk-2d210bd0","chunk-2d0d61a1","chunk-2d0c8d4c","chunk-2d0af639"],{"01aa":function(t,e,a){"use strict";a.r(e);var s=(a("5df3"),a("4f7f"),a("2909")),r=(a("456d"),a("b85c")),i=(a("ac6a"),a("313e")),n=a.n(i),o=a("570d");a("817d");var l={mixins:[o.default],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},autoResize:{type:Boolean,default:!0},chartData:{type:Array,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(t){var e={},a={xAxis:[],price:[],number:[]};for(var i in t.forEach((function(t){var s=new Date(t.orderTime).getDate(),i=new Date(t.orderTime).getMonth()+1,n="".concat(i,"-").concat(s);e[n]||(e[n]={},a.xAxis.push(n));var o,l=Object(r.a)(t.orderItems);try{for(l.s();!(o=l.n()).done;){var c=o.value.productName;e[n][c]||(e[n][c]=[]),e[n][c].push(t)}}catch(t){l.e(t)}finally{l.f()}})),e){var n=e[i],o=0;for(var l in a.xAxis.push(i),a.number.push(Object.keys(n).length),n){var c,u=n[l],d=Object(r.a)(u);try{for(d.s();!(c=d.n()).done;){o+=c.value.totalAmount}}catch(t){d.e(t)}finally{d.f()}}a.price.push(o)}a.xAxis=Object(s.a)(new Set(a.xAxis)).reverse(),this.setOptions(a)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=n.a.init(this.$el,"macarons"),this.setOptions(this.chartData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.xAxis,a=t.price,s=t.number;this.chart.setOption({xAxis:{data:e,type:"category",axisTick:{show:!1}},grid:{left:50,right:50,bottom:50,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:[{type:"value",name:"订单金额",interval:1e3,axisLabel:{formatter:"{value} 元"}},{type:"value",name:"订单数量",interval:5,axisLabel:{formatter:"{value} 种"}}],legend:{data:["订单金额","订单数量"]},series:[{name:"订单金额",type:"bar",data:a,yAxisIndex:0,nameTextStyle:{width:150}},{name:"订单数量",type:"line",data:s,yAxisIndex:1,nameTextStyle:{width:150}}]})}}},c=l,u=a("2877"),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.className,style:{height:t.height,width:t.width}})}),[],!1,null,null,null);e.default=d.exports},"0457":function(t,e,a){},"0db1":function(t,e,a){t.exports=a.p+"static/img/imgbg.34048466.jpg"},"0fde":function(t,e,a){},"134f":function(t,e,a){"use strict";a("f07a")},"150b":function(t,e,a){"use strict";a.r(e);var s=(a("7f7f"),a("ac6a"),a("ffc1"),a("313e")),r=a.n(s),i=a("570d");a("817d");var n={mixins:[i.default],props:{oldcateData:{type:Array},className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null,pieData:[],labelData:[]}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},watch:{oldcateData:{handler:function(t){var e=Object.entries(Object.groupBy(t,(function(t){return t.businessCategory}))),a=[],s=[];e.forEach((function(t){var e={name:t[0],value:t[1].length};a.push(e),s.push(t[0])})),this.pieData=a,this.labelData=s,this.initChart()}}},methods:{initChart:function(){this.chart=r.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},selectedMode:"single",label:{show:!0,position:"inner",formatter:function(t){return t.name+"\n  ("+t.value+"%)"}},legend:{left:"center",bottom:"10",data:this.labelData},series:[{name:"WEEKLY WRITE ARTICLES",type:"pie",radius:[0,80],center:["50%","38%"],data:this.pieData,animationEasing:"cubicInOut",animationDuration:2600}]})}}},o=n,l=a("2877"),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.className,style:{height:t.height,width:t.width}})}),[],!1,null,null,null);e.default=c.exports},"17c4":function(t,e,a){"use strict";a.r(e);var s=a("5530"),r=a("c7eb"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o={filters:{},components:{UploadList:a("32db").a},data:function(){return{tableList:[],total:0,currentPage:1,pageSize:10,cultureType:"",cultureTitle:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{cultureType:"",cultureTitle:"",cultureDescription:"",image:"",active:!1,cultureType_en:"",cultureTitle_en:"",cultureDescription_en:""}}},created:function(){this.fetchData()},beforeCreate:function(){},methods:{baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeDialog:function(){this.dialogFormVisible=!1,this.clearForm()},clearForm:function(){this.dataForm={cultureType:"",cultureTitle:"",cultureDescription:"",image:"",active:!1,cultureType_en:"",cultureTitle_en:"",cultureDescription_en:""}},fetchData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:{cultureType:{$regex:this.cultureType}},limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(n.b)("companyCulture",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dialogStatus="edit",this.dataForm=Object(s.a)({},t)},handleDelete:function(t){var e=this;this.$confirm("删除商品",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(i.a)(Object(r.a)().mark((function a(){var s;return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s={query:{_id:t._id}},Object(n.c)("companyCulture",s).then(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"delete Successfully",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},AddCulture:function(){this.dataForm={cultureType:"",cultureTitle:"",cultureDescription:"",image:"",active:!1,cultureType_en:"",cultureTitle_en:"",cultureDescription_en:""},this.dialogFormVisible=!0,this.dialogStatus="create"},createCulture:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===this.dataForm.cultureType||""===this.dataForm.cultureTitle||""===this.dataForm.cultureDescription||""===this.dataForm.image){t.next=8;break}return e=Object(s.a)({},this.dataForm),t.next=4,Object(n.a)("companyCulture",e);case 4:200===t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({title:"添加成功",message:"添加成功",type:"success",duration:2e3})):this.$notify({title:"添加失败",message:"添加失败，请重试",type:"error",duration:2e3}),t.next=9;break;case 8:this.$notify({title:"请填写必要信息",message:"文化类目、标题、描述和封面图不能为空",type:"warning",duration:2e3});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editCulture:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===this.dataForm.cultureType||""===this.dataForm.cultureTitle||""===this.dataForm.cultureDescription||""===this.dataForm.image){t.next=8;break}return e={query:{_id:this.dataForm._id},update:Object(s.a)({},this.dataForm)},t.next=4,Object(n.d)("companyCulture",e);case 4:200===t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({title:"修改成功",message:"修改成功",type:"success",duration:2e3})):this.$notify({title:"修改失败",message:"修改失败，请重试",type:"error",duration:2e3}),t.next=9;break;case 8:this.$notify({title:"请填写必要信息",message:"文化类目、标题、描述和封面图不能为空",type:"warning",duration:2e3});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),search:function(){this.fetchData()}}},l=o,c=(a("4fce"),a("2877")),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[t._v("文化标题:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入文化标题"},model:{value:t.cultureType,callback:function(e){t.cultureType=e},expression:"cultureType"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("查询搜索\n          ")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("企业文化列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddCulture}},[t._v("添加企业文化\n        ")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"企业文化类目",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.cultureType))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"企业文化标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.cultureTitle)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"企业文化内容",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.cultureDescription))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"企业文化封面图",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.image,alt:"封面图"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑查看\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n          ")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"企业文化信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"100%"},attrs:{inline:!0,"label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{required:"",label:"企业文化类目"}},[a("el-input",{attrs:{placeholder:"文化类目"},model:{value:t.dataForm.cultureType,callback:function(e){t.$set(t.dataForm,"cultureType",e)},expression:"dataForm.cultureType"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"企业文化标题"}},[a("el-input",{attrs:{placeholder:"文化标题"},model:{value:t.dataForm.cultureTitle,callback:function(e){t.$set(t.dataForm,"cultureTitle",e)},expression:"dataForm.cultureTitle"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业文化内容"}},[a("el-input",{attrs:{type:"textarea",placeholder:"文化描述"},model:{value:t.dataForm.cultureDescription,callback:function(e){t.$set(t.dataForm,"cultureDescription",e)},expression:"dataForm.cultureDescription"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"企业文化封面图"}},[a("ZrFile",{attrs:{max:1,value:t.dataForm.image},on:{"update:value":function(e){return t.$set(t.dataForm,"image",e)}}})],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("英文")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业文化类目（Category）"}},[a("el-input",{attrs:{placeholder:"Culture Category"},model:{value:t.dataForm.cultureType_en,callback:function(e){t.$set(t.dataForm,"cultureType_en",e)},expression:"dataForm.cultureType_en"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"企业文化标题（Title）"}},[a("el-input",{attrs:{placeholder:"Culture Title"},model:{value:t.dataForm.cultureTitle_en,callback:function(e){t.$set(t.dataForm,"cultureTitle_en",e)},expression:"dataForm.cultureTitle_en"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"企业文化内容（Content）"}},[a("el-input",{attrs:{type:"textarea",placeholder:"Culture Content"},model:{value:t.dataForm.cultureDescription_en,callback:function(e){t.$set(t.dataForm,"cultureDescription_en",e)},expression:"dataForm.cultureDescription_en"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createCulture():t.editCulture()}}},[t._v("确定")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"4d91ba99",null);e.default=u.exports},"19c2":function(t,e,a){"use strict";a.r(e);var s=a("5530"),r=(a("7f7f"),a("c7eb")),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("5aee"),l=a("46ac"),c={components:{IconSelect:o.a},porps:["dialogFormVisible"],data:function(){return{menu:!1,dialogFormVisible:!1,add:!0,_id:null,postList:{},optionsList:null,isShow:!1}},created:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),methods:{getTree:function(t,e){this.postList.menuList=e.checkedKeys},getSelectData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.b)("menu",{query:{},sort:{sortNum:1}});case 2:e=t.sent,a=e.data,this.optionsList=Object(l.a)(a,null,[]);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),AddClick:function(){var t=this;this.menu=!1,this.isShow=!1,this.postList={},this.add=!0,this.dialogFormVisible=!0,this.getSelectData(),this.$nextTick((function(){t.menu=!0,t.isShow=!0}))},EditClick:function(t){var e=this;this.menu=!1,this.add=!1,this.isShow=!0,this._id=t._id,this.postList=t,this.dialogFormVisible=!0,this.getSelectData(),this.$nextTick((function(){e.menu=!0,e.$forceUpdate()}))},createData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.postList.name){t.next=5;break}return this.$message.warning("角色名称不能为空"),t.abrupt("return");case 5:if(this.postList.label){t.next=8;break}return this.$message.warning("角色标识不能为空"),t.abrupt("return");case 8:return e=Object(s.a)({},this.postList),t.next=12,Object(n.a)("role",e);case 12:t.sent?(this.$emit("custom-event"),this.dialogFormVisible=!1,this.postList={type:"目录",sortNum:1,status:!0},this.$notify({title:"添加角色成功",message:"Add Successfully",type:"success",duration:2e3})):this.$notify({title:"添加失败，请重试或刷新",message:"Add unsuccessful",type:"warning",duration:2e3});case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),getMenuList:function(t){return t.filter((function(e,a){return t.indexOf(e)===a}))},editData:function(){if(this.postList.name)if(this.postList.label){delete this.postList._id;var t={query:{_id:this._id},update:Object(s.a)({},this.postList)};Object(n.d)("role",t);this.dialogFormVisible=!1,this.$emit("custom-event"),this.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})}else this.$message.warning("角色标识不能为空");else this.$message.warning("角色名称不能为空")},getParentId:function(t){Array.isArray(t)&&(this.postList.parentId=t[t.length-1])}}},u=c,d=a("2877"),m=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-dialog",{attrs:{title:t.add?"添加角色":"编辑角色",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[t.isShow?a("el-form",{ref:"dataForm",attrs:{"label-position":"right"},model:{value:t.postList,callback:function(e){t.postList=e},expression:"postList"}},[a("el-form-item",{attrs:{label:"角色名称","label-width":"100px",required:""}},[a("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:t.postList.name,callback:function(e){t.$set(t.postList,"name",e)},expression:"postList.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"角色标识","label-width":"100px",required:""}},[a("el-input",{attrs:{placeholder:"请输入角色标识"},model:{value:t.postList.label,callback:function(e){t.$set(t.postList,"label",e)},expression:"postList.label"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单权限","label-width":"100px",required:""}},[t.menu?a("el-card",{attrs:{shadow:"never"}},[a("el-tree",{attrs:{data:t.optionsList,"default-checked-keys":t.postList.menuList,props:{value:"_id",label:"menuName"},"node-key":"_id","show-checkbox":""},on:{check:t.getTree},model:{value:t.postList.menuList,callback:function(e){t.$set(t.postList,"menuList",e)},expression:"postList.menuList"}})],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入备注",type:"textarea"},model:{value:t.postList.remark,callback:function(e){t.$set(t.postList,"remark",e)},expression:"postList.remark"}})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.add?t.createData():t.editData()}}},[t._v("确定\n      ")])],1)],1)],1)}),[],!1,null,"23558dce",null);e.default=m.exports},"1a2d":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n}));var s=a("b775");function r(t){return Object(s.a)({url:"/user_login",method:"get",params:t})}function i(t){return Object(s.a)({url:"/user_login",method:"post",data:t})}function n(t){return Object(s.a)({url:"/user_login",method:"put",data:t})}},"1be9":function(t,e,a){"use strict";a.r(e);var s=a("5530"),r=a("2bc6"),i={name:"Dict",dicts:["sys_normal_disable"],data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,typeList:[],title:"",open:!1,dateRange:[],queryParams:{pageNum:1,pageSize:10,dictName:void 0,dictType:void 0,status:void 0},form:{},rules:{dictName:[{required:!0,message:"字典名称不能为空",trigger:"blur"}],dictType:[{required:!0,message:"字典类型不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{parseTime:a("ed08").d,getList:function(){var t=this;this.loading=!0,Object(r.b)("dictType",{query:this.queryParams,pageNum:this.queryParams.pageNum,pageSize:this.queryParams.pageSize}).then((function(e){t.typeList=e.data,t.total=e.total,t.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={dictId:void 0,dictName:void 0,dictType:void 0,status:"0",remark:void 0},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleAdd:function(){this.reset(),this.open=!0,this.title="添加字典类型"},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.dictId})),this.single=1!=t.length,this.multiple=!t.length},handleUpdate:function(t){var e=this;this.reset();var a=t._id||this.ids[0];Object(r.c)("dictType",{query:{_id:a}}).then((function(t){e.form=t.data,e.open=!0,e.title="修改字典类型"}))},submitForm:function(){var t=this;this.$refs.form.validate((function(e){e&&(null!=t.form._id?Object(r.e)("dictType",{query:{_id:t.form._id},update:Object(s.a)({},t.form)}).then((function(e){t.$modal.msgSuccess("修改成功"),t.open=!1,t.getList()})):Object(r.a)("dictType",t.form).then((function(e){t.$modal.msgSuccess("新增成功"),t.open=!1,t.getList()})))}))},handleDelete:function(t){var e=this;this.$modal.confirm('是否确认删除字典类型为"'+t.dictType+'"的数据项？').then((function(){return Object(r.d)("dictType",{query:{_id:t._id}})})).then((function(){e.getList(),e.$modal.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){this.download("system/dict/type/export",Object(s.a)({},this.queryParams),"type_".concat((new Date).getTime(),".xlsx"))}}},n=i,o=a("2877"),l=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{inline:!0,model:t.queryParams,"label-width":"68px",size:"small"}},[a("el-form-item",{attrs:{label:"字典名称",prop:"dictName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{clearable:"",placeholder:"请输入字典名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.dictName,callback:function(e){t.$set(t.queryParams,"dictName",e)},expression:"queryParams.dictName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"字典类型",prop:"dictType"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{clearable:"",placeholder:"请输入字典类型"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.dictType,callback:function(e){t.$set(t.queryParams,"dictType",e)},expression:"queryParams.dictType"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{clearable:"",placeholder:"字典状态"},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,"status",e)},expression:"queryParams.status"}},t._l(t.dict.type.sys_normal_disable,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{"end-placeholder":"结束日期","range-separator":"-","start-placeholder":"开始日期",type:"daterange","value-format":"yyyy-MM-dd"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},on:{click:t.handleQuery}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.resetQuery}},[t._v("重置")])],1)],1),t._v(" "),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",size:"mini",type:"primary"},on:{click:t.handleAdd}},[t._v("新增\n      ")])],1),t._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{disabled:t.single,icon:"el-icon-edit",plain:"",size:"mini",type:"success"},on:{click:t.handleUpdate}},[t._v("修改\n      ")])],1),t._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{disabled:t.multiple,icon:"el-icon-delete",plain:"",size:"mini",type:"danger"},on:{click:t.handleDelete}},[t._v("删除\n      ")])],1),t._v(" "),a("right-toolbar",{attrs:{showSearch:t.showSearch},on:{"update:showSearch":function(e){t.showSearch=e},"update:show-search":function(e){t.showSearch=e},queryTable:t.getList}})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.typeList},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"字典名称",prop:"dictName"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"字典类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticClass:"link-type",attrs:{to:{path:"/dict/data",query:{dictType:e.row.dictType}}}},[a("span",[t._v(t._s(e.row.dictType))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("dict-tag",{attrs:{options:t.dict.type.sys_normal_disable,value:e.row.status}})]}}])}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"备注",prop:"remark"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createTime",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parseTime(e.row.createTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center","class-name":"small-padding fixed-width",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"text"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v("修改\n        ")]),t._v(" "),a("el-button",{staticStyle:{color:"red"},attrs:{icon:"el-icon-delete",size:"mini",type:"text"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除\n        ")])]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{limit:t.queryParams.pageSize,page:t.queryParams.pageNum,total:t.total},on:{"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.open,"append-to-body":"",width:"500px"},on:{"update:visible":function(e){t.open=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"字典名称",prop:"dictName"}},[a("el-input",{attrs:{placeholder:"请输入字典名称"},model:{value:t.form.dictName,callback:function(e){t.$set(t.form,"dictName",e)},expression:"form.dictName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"字典类型",prop:"dictType"}},[a("el-input",{attrs:{placeholder:"请输入字典类型"},model:{value:t.form.dictType,callback:function(e){t.$set(t.form,"dictType",e)},expression:"form.dictType"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.dict.type.sys_normal_disable,(function(e){return a("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label)+"\n          ")])})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)}),[],!1,null,null,null);e.default=l.exports},"1c1b":function(t,e,a){},"1d11":function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=a("5530"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o={filters:{},components:{UploadList:a("32db").a},data:function(){return{tableList:[],total:0,currentPage:1,pageSize:10,options:{},searchReq:{},senderName:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{senderName:"",senderPhone:"",messageContent:"",messageTime:new Date,status:""},textMap:{update:"Edit",create:"Create"}}},created:function(){this.fetchData()},beforeCreate:function(){},methods:{baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeProcessRecordDialog:function(){this.tableList=[],this.total=0,this.currentPage=1,this.pageSize=10,this.processRecordShow=!1},getslect:function(t){},fetchData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:Object(r.a)({},this.searchReq),limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(n.b)("messageCenter",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,t.QRDialog=!1,t.approveDialog=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dataForm=JSON.parse(JSON.stringify(t)),this.dialogStatus="edit"},handleDelete:function(t){var e=this;this.$confirm("删除信息",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(i.a)(Object(s.a)().mark((function a(){var r;return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r={query:{_id:t._id}},Object(n.c)("messageCenter",r).then(function(){var t=Object(i.a)(Object(s.a)().mark((function t(a){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"delete Successfully",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},editData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.senderName||""==this.dataForm.senderPhone||""==this.dataForm.messageContent||""==this.dataForm.messageTime||""==this.dataForm.status){t.next=10;break}return e={query:{_id:this.dataForm._id},update:Object(r.a)({},this.dataForm)},t.next=6,Object(n.d)("messageCenter",e);case 6:200==t.sent.code?(this.dialogFormVisible=!1,this.approveDialog=!1,this.fetchData(),this.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({title:"修改失败",message:"edit failly",type:"warning",duration:2e3}),t.next=11;break;case 10:this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),clearclick:function(){this.tableList=this.tableList1},Search:function(){this.searchReq={},this.senderName?this.searchReq.senderName={$regex:this.senderName}:delete this.searchReq.senderName,this.fetchData()}}},l=o,c=(a("9878"),a("2877")),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[t._v("留言姓名:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入留言姓名"},model:{value:t.senderName,callback:function(e){t.senderName=e},expression:"senderName"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.Search()}}},[t._v("查询搜索\n          ")])],1)])])]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"联系姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.senderName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"联系电话",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.senderPhone)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"咨询内容",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.messageContent))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"咨询时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.parseTime(e.row.messageTime,"{y}-{m}-{d} {h}:{i}"))+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n          ")])]}}])})],1)],2)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("留言列表")])])])])}],!1,null,"20cb8711",null);e.default=u.exports},"1f24":function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=(a("96cf"),a("1da1")),i=(a("bb50"),{dicts:["expert_platform","task_type","content_type","category"],name:"EditDialog",props:{dialogFormVisible:{type:Boolean,default:!1},dialogStatus:{type:String,default:"create"},dataForm:{type:Object,required:!0}},data:function(){var t=this;return{taskTypeOptions:[{value:"品牌宣传",label:"品牌宣传"},{value:"达人推广",label:"达人推广"},{value:"达人直播",label:"达人直播"},{value:"达人视频",label:"达人视频"},{value:"直播带货",label:"直播带货"}],platformOptions:[{value:"抖音",label:"抖音"},{value:"小红书",label:"小红书"},{value:"B站",label:"B站"},{value:"微博",label:"微博"}],contentTypeOptions:[{value:"短视频",label:"短视频"},{value:"直播",label:"直播"},{value:"图文",label:"图文"}],expertCategoryOptions:[{value:"美妆",label:"美妆"},{value:"服装",label:"服装"},{value:"美食",label:"美食"},{value:"母婴",label:"母婴"}],remarkTypeOptions:[{value:"图片",label:"图片"},{value:"视频",label:"视频"},{value:"文档",label:"文档"}],rules:{title:[{required:!0,message:"请输入任务标题",trigger:"blur"}],type:[{required:!0,message:"请选择任务类型",trigger:"change"}],description:[{required:!0,message:"请输入任务描述",trigger:"blur"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"change"}],endTime:[{required:!0,message:"请选择结束时间",trigger:"change"},{validator:function(e,a,s){a&&t.dataForm.startTime&&a<t.dataForm.startTime?s(new Error("结束时间不能早于开始时间")):s()},trigger:"change"}],"cooperationDetails.brandName":[{required:!0,message:"请输入品牌名称",trigger:"blur"}],"cooperationDetails.requirements.platformType":[{required:!0,message:"请选择合作平台",trigger:"change"}],"cooperationDetails.requirements.contentType":[{required:!0,message:"请选择内容形式",trigger:"change"}],"cooperationDetails.commercialTerms.budget":[{required:!0,message:"请输入项目预算",trigger:"blur"}]}}},methods:{addMaterial:function(){this.dataForm.cooperationDetails.remarks.push({name:"",type:"",url:"",description:"",uploadTime:new Date})},removeMaterial:function(t){this.dataForm.cooperationDetails.remarks.splice(t,1)},submitForm:function(){var t=this;this.$refs.dataForm.validate(function(){var e=Object(r.a)(Object(s.a)().mark((function e(a){var r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=7;break}r=JSON.parse(JSON.stringify(t.dataForm)),"create"===t.dialogStatus&&(r.createTime=new Date),r.updateTime=new Date,t.$emit("submit",r),e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}),n=i,o=(a("b7d7"),a("2877")),l=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"task-dialog",attrs:{title:"create"===t.dialogStatus?"新建任务":"编辑任务",visible:t.dialogFormVisible,width:"70%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.rules,"label-width":"120px"}},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("基本信息")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入任务标题"},model:{value:t.dataForm.title,callback:function(e){t.$set(t.dataForm,"title",e)},expression:"dataForm.title"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择任务类型"},model:{value:t.dataForm.type,callback:function(e){t.$set(t.dataForm,"type",e)},expression:"dataForm.type"}},t._l(t.dict.type.task_type,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"任务描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入任务描述"},model:{value:t.dataForm.description,callback:function(e){t.$set(t.dataForm,"description",e)},expression:"dataForm.description"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:t.dataForm.startTime,callback:function(e){t.$set(t.dataForm,"startTime",e)},expression:"dataForm.startTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"结束时间",prop:"endTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:t.dataForm.endTime,callback:function(e){t.$set(t.dataForm,"endTime",e)},expression:"dataForm.endTime"}})],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("品牌合作信息")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"品牌名称",prop:"cooperationDetails.brandName"}},[a("el-input",{attrs:{placeholder:"请输入品牌名称"},model:{value:t.dataForm.cooperationDetails.brandName,callback:function(e){t.$set(t.dataForm.cooperationDetails,"brandName",e)},expression:"dataForm.cooperationDetails.brandName"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称",prop:"cooperationDetails.productName"}},[a("el-input",{attrs:{placeholder:"请输入产品名称"},model:{value:t.dataForm.cooperationDetails.productName,callback:function(e){t.$set(t.dataForm.cooperationDetails,"productName",e)},expression:"dataForm.cooperationDetails.productName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品品类",prop:"cooperationDetails.productCategory"}},[a("el-input",{attrs:{placeholder:"请输入产品品类"},model:{value:t.dataForm.cooperationDetails.productCategory,callback:function(e){t.$set(t.dataForm.cooperationDetails,"productCategory",e)},expression:"dataForm.cooperationDetails.productCategory"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"产品详情",prop:"cooperationDetails.productDetails"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入产品详情描述"},model:{value:t.dataForm.cooperationDetails.productDetails,callback:function(e){t.$set(t.dataForm.cooperationDetails,"productDetails",e)},expression:"dataForm.cooperationDetails.productDetails"}})],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("合作要求")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合作平台",prop:"cooperationDetails.requirements.platformType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择合作平台"},model:{value:t.dataForm.cooperationDetails.requirements.platformType,callback:function(e){t.$set(t.dataForm.cooperationDetails.requirements,"platformType",e)},expression:"dataForm.cooperationDetails.requirements.platformType"}},t._l(t.dict.type.expert_platform,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内容形式",prop:"cooperationDetails.requirements.contentType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择内容形式"},model:{value:t.dataForm.cooperationDetails.requirements.contentType,callback:function(e){t.$set(t.dataForm.cooperationDetails.requirements,"contentType",e)},expression:"dataForm.cooperationDetails.requirements.contentType"}},t._l(t.dict.type.content_type,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"粉丝数要求",prop:"cooperationDetails.requirements.expertRequirements.fansCountMin"}},[a("el-input-number",{staticStyle:{width:"40%"},attrs:{min:0},model:{value:t.dataForm.cooperationDetails.requirements.expertRequirements.fansCountMin,callback:function(e){t.$set(t.dataForm.cooperationDetails.requirements.expertRequirements,"fansCountMin",e)},expression:"dataForm.cooperationDetails.requirements.expertRequirements.fansCountMin"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[t._v("-")]),t._v(" "),a("el-input-number",{staticStyle:{width:"40%"},attrs:{min:0},model:{value:t.dataForm.cooperationDetails.requirements.expertRequirements.fansCountMax,callback:function(e){t.$set(t.dataForm.cooperationDetails.requirements.expertRequirements,"fansCountMax",e)},expression:"dataForm.cooperationDetails.requirements.expertRequirements.fansCountMax"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"达人类目",prop:"cooperationDetails.requirements.expertRequirements.expertCategory"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择达人分类",clearable:""},model:{value:t.dataForm.cooperationDetails.requirements.expertRequirements.expertCategory,callback:function(e){t.$set(t.dataForm.cooperationDetails.requirements.expertRequirements,"expertCategory",e)},expression:"dataForm.cooperationDetails.requirements.expertRequirements.expertCategory"}},t._l(t.dict.type.category,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("商务条款")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"达人预算",prop:"cooperationDetails.commercialTerms.budget"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:t.dataForm.cooperationDetails.commercialTerms.budget,callback:function(e){t.$set(t.dataForm.cooperationDetails.commercialTerms,"budget",e)},expression:"dataForm.cooperationDetails.commercialTerms.budget"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"佣金比例",prop:"cooperationDetails.commercialTerms.commissionRate"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,max:100},model:{value:t.dataForm.cooperationDetails.commercialTerms.commissionRate,callback:function(e){t.$set(t.dataForm.cooperationDetails.commercialTerms,"commissionRate",e)},expression:"dataForm.cooperationDetails.commercialTerms.commissionRate"}})],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("KPI目标")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"播放量目标",prop:"cooperationDetails.kpiTargets.viewsTarget"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:t.dataForm.cooperationDetails.kpiTargets.viewsTarget,callback:function(e){t.$set(t.dataForm.cooperationDetails.kpiTargets,"viewsTarget",e)},expression:"dataForm.cooperationDetails.kpiTargets.viewsTarget"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"互动量目标",prop:"cooperationDetails.kpiTargets.interactionTarget"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:t.dataForm.cooperationDetails.kpiTargets.interactionTarget,callback:function(e){t.$set(t.dataForm.cooperationDetails.kpiTargets,"interactionTarget",e)},expression:"dataForm.cooperationDetails.kpiTargets.interactionTarget"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"销售目标",prop:"cooperationDetails.kpiTargets.salesTarget"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:t.dataForm.cooperationDetails.kpiTargets.salesTarget,callback:function(e){t.$set(t.dataForm.cooperationDetails.kpiTargets,"salesTarget",e)},expression:"dataForm.cooperationDetails.kpiTargets.salesTarget"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"达人数量目标",prop:"cooperationDetails.kpiTargets.expertCount"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:t.dataForm.cooperationDetails.kpiTargets.expertCount,callback:function(e){t.$set(t.dataForm.cooperationDetails.kpiTargets,"expertCount",e)},expression:"dataForm.cooperationDetails.kpiTargets.expertCount"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"视频数量目标",prop:"cooperationDetails.kpiTargets.videoCount"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:t.dataForm.cooperationDetails.kpiTargets.videoCount,callback:function(e){t.$set(t.dataForm.cooperationDetails.kpiTargets,"videoCount",e)},expression:"dataForm.cooperationDetails.kpiTargets.videoCount"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"直播场次目标",prop:"cooperationDetails.kpiTargets.liveStreamCount"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:t.dataForm.cooperationDetails.kpiTargets.liveStreamCount,callback:function(e){t.$set(t.dataForm.cooperationDetails.kpiTargets,"liveStreamCount",e)},expression:"dataForm.cooperationDetails.kpiTargets.liveStreamCount"}})],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("备注信息")]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addMaterial}},[t._v("添加备注")])],1),t._v(" "),t._l(t.dataForm.cooperationDetails.remarks,(function(e,s){return a("div",{key:s,staticClass:"remark-item"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注名称"+(s+1),prop:"cooperationDetails.remarks."+s+".name"}},[a("el-input",{attrs:{placeholder:"请输入备注名称"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"remark.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注类型",prop:"cooperationDetails.remarks."+s+".type"}},[a("el-input",{attrs:{placeholder:"请输入备注类型"},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"remark.type"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"备注链接",prop:"cooperationDetails.remarks."+s+".url"}},[a("el-input",{attrs:{placeholder:"请输入备注链接"},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"remark.url"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.removeMaterial(s)}}})],1)],1)],1)}))],2),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)}),[],!1,null,"88ae6a6e",null);e.default=l.exports},2:function(t,e){},2268:function(t,e,a){"use strict";a("7059")},"23e2":function(t,e,a){"use strict";a("fae1")},"23ee":function(t,e,a){"use strict";a("65ef")},"26fc":function(t,e,a){t.exports=a.p+"static/img/404_cloud.0f4bc32b.png"},2710:function(t,e,a){},"29a2":function(t,e,a){},"2b38":function(t,e,a){},3:function(t,e){},"316f":function(t,e,a){"use strict";a("0457")},3620:function(t,e,a){"use strict";a.r(e);var s=(a("7514"),a("c7eb")),r=(a("5df3"),a("f400"),a("ac6a"),a("2909")),i=(a("6762"),a("2fdb"),a("96cf"),a("1da1")),n=a("7e1e"),o={name:"AgentSelect",props:{value:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,agents:[],selectedAgents:this.value}},watch:{value:{handler:function(t){this.selectedAgents=t,t&&t.length&&!this.agents.length&&this.fetchAgentsByIds(t)},immediate:!0}},methods:{getAgentLabel:function(t){return"".concat(t.nickName).concat(t.company?" - ".concat(t.company):"")},remoteSearch:function(){var t=Object(i.a)(Object(s.a)().mark((function t(e){var a,i,o=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=15;break}return this.loading=!0,t.prev=2,t.next=5,Object(n.b)("user_login",{query:JSON.stringify({$or:[{nickName:{$regex:e,$options:"i"}},{phone:{$regex:e,$options:"i"}}],roles:{$elemMatch:{label:"Agent"}}}),limit:20});case 5:a=t.sent,i=this.agents.filter((function(t){return o.selectedAgents.includes(t._id)})),this.agents=Object(r.a)(new Map([].concat(Object(r.a)(i),Object(r.a)(a.data)).map((function(t){return[t._id,t]}))).values()),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),this.$message.error("搜索经纪人失败");case 14:this.loading=!1;case 15:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),handleChange:function(t){this.$emit("input",t);var e=this.agents.filter((function(e){return t.includes(e._id)}));this.$emit("select",e)},fetchAgentsByIds:function(){var t=Object(i.a)(Object(s.a)().mark((function t(e){var a,i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,Object(n.b)("user_login",{query:JSON.stringify({_id:{$in:e}})});case 5:(a=t.sent).data&&a.data.length>0&&(i=this.agents.filter((function(t){return!a.data.find((function(e){return e._id===t._id}))})),this.agents=[].concat(Object(r.a)(i),Object(r.a)(a.data))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}},l=o,c=(a("cd7c"),a("2877")),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入经纪人名称搜索","remote-method":t.remoteSearch,loading:t.loading,clearable:"","collapse-tags":""},on:{change:t.handleChange},model:{value:t.selectedAgents,callback:function(e){t.selectedAgents=e},expression:"selectedAgents"}},t._l(t.agents,(function(e){return a("el-option",{key:e._id,attrs:{label:t.getAgentLabel(e),value:e._id}},[a("div",{staticClass:"agent-option"},[a("div",{staticClass:"agent-info"},[a("span",{staticClass:"name"},[t._v(t._s(e.nickName))]),t._v(" "),a("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(t._s(e.phone))])],1),t._v(" "),e.company?a("div",{staticClass:"company-info"},[a("small",[t._v(t._s(e.company))])]):t._e()])])})),1)}),[],!1,null,"5be86ef0",null);e.default=u.exports},3711:function(t,e,a){"use strict";a.r(e);var s=(a("7514"),a("7f7f"),a("c5f6"),a("ac6a"),a("ffc1"),a("313e")),r=a.n(s),i=a("570d");a("817d");var n={mixins:[i.default],props:{orderData:{type:Array},className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},watch:{orderData:{handler:function(t){for(var e=[],a=[],s=[],r=[],i=0;i<t.length;i++)for(var n=0;n<t[i].orderItems.length;n++){var o=t[i].orderItems[n];r.push({category:o.category,name:o.productName,price:o.price})}for(var l=Object.entries(Object.groupBy(r,(function(t){return t.category}))),c=0;c<l.length;c++){s.push(l[c][0]);for(var u=0,d=0;d<l[c][1].length;d++)u+=Number(l[c][1][d].price);e.push({name:l[c][0],value:u.toFixed(2)});for(var m=l[c][1],p=Object.entries(Object.groupBy(m,(function(t){return t.name}))),f=[],h=0;h<p.length;h++){for(var v=0,b=0;b<p[h][1].length;b++)v+=Number(p[h][1][b].price);f.push([p[h][0],v.toFixed(2)])}a.push({name:l[c][0],data:f}),this.option.series.data=e,this.drilldownData=a,this.option.xAxis.data=s,this.initChart()}}}},data:function(){return{isKid:!0,chart:null,option:{xAxis:{data:[],axisLabel:{interval:0,rotate:0},axisTick:{alignWithLabel:!0}},yAxis:{},dataGroupId:"",animationDurationUpdate:400,tooltip:{trigger:"item",formatter:"{b} : ({c} %)"},series:{type:"bar",id:"sales",itemStyle:{color:"#63a7e8"},data:[],universalTransition:{enabled:!0,divideShape:"clone"}},graphic:[]},drilldownData:[]}},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){var t=this;this.chart=r.a.init(this.$el,"macarons"),this.chart.setOption(t.option),this.chart.on("click",(function(e){if(e.data){var a=t.drilldownData.find((function(t){return t.name===e.data.name}));if(!a)return;t.isKid=!0,t.chart.setOption({xAxis:{data:a.data.map((function(t){return t[0]}))},series:{type:"bar",id:"sales",dataGroupId:a.dataGroupId,data:a.data.map((function(t){return t[1]})),universalTransition:{enabled:!0,divideShape:"clone"}},graphic:[{type:"text",left:50,top:20,style:{text:"返回",fontSize:14},onclick:function(){t.isKid=!1,t.initChart()}}]})}}))}}},o=n,l=a("2877"),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.className,style:{height:t.height,width:t.width}})}),[],!1,null,null,null);e.default=c.exports},3764:function(t,e,a){"use strict";a.r(e);var s=a("ec1b"),r={components:{CountTo:a.n(s).a},props:["title","endValue","icon","color","dangwei"],data:function(){return{}}},i=(a("8740"),a("2877")),n=Object(i.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticStyle:{margin:"0"},attrs:{shadow:"never"}},[a("div",{staticClass:"box-card"},[a("div",{staticClass:"iconAll",style:"background-color:"+t.color},[a("div",{class:t.icon,staticStyle:{color:"white"},attrs:{id:"icon"}})]),t._v(" "),a("div",{staticClass:"main"},[a("div",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n      ")]),t._v(" "),a("div",{staticClass:"value"},[a("count-to",{attrs:{duration:1,"end-val":t.endValue,"start-val":0}}),t._v("\n        "+t._s(t.dangwei)+"\n      ")],1)])])])}),[],!1,null,"7896ff14",null);e.default=n.exports},"38db":function(t,e,a){"use strict";a("a395d")},3946:function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=(a("96cf"),a("1da1")),i=a("1a2d"),n={data:function(){var t=this;return{dialogVisible:!1,form:{password:"",newPassword:"",newPassword2:""},rules:{password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请设置新密码",trigger:"blur"},{validator:function(e,a,s){a===t.form.password?s(new Error("新密码不能与原密码相同!")):s()},trigger:"blur"}],newPassword2:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:function(e,a,s){a!==t.form.newPassword?s(new Error("与新密码不一致!")):s()},trigger:"blur"}]}}},methods:{show:function(){this.dialogVisible=!0},handleCancel:function(){this.dialogVisible=!1,this.$refs.passwordForm.resetFields()},onSubmit:function(){var t=Object(r.a)(Object(s.a)().mark((function t(e){var a=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$refs[e].validate(function(){var t=Object(r.a)(Object(s.a)().mark((function t(e){var r,n,o;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=20;break}if(!(a.form.newPassword.length<6)){t.next=4;break}return a.$message.error("密码需6位数，请重新输入"),t.abrupt("return");case 4:return r=a.$store.state.user.id,n={query:{_id:r}},t.next=8,Object(i.a)(n);case 8:if(t.sent.data[0].password!==a.form.password){t.next=17;break}return o={query:{_id:r},update:{$set:{password:a.form.newPassword}}},t.next=13,Object(i.c)(o);case 13:200===t.sent.code?(a.$message.success("密码修改成功！"),a.dialogVisible=!1,a.logout()):a.$message.error("修改失败，请重试!"),t.next=18;break;case 17:a.$message.error("原密码错误，请重新输入！");case 18:t.next=22;break;case 20:return a.$message.error("请正确填写格式"),t.abrupt("return",!1);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),logout:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("user/logout");case 2:this.$router.push("/login");case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}},o=n,l=a("2877"),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"修改密码",visible:t.dialogVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"passwordForm",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"原密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入原密码",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{attrs:{placeholder:"请设置新密码",type:"password"},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"newPassword2"}},[a("el-input",{attrs:{placeholder:"请确认新密码",type:"password"},model:{value:t.form.newPassword2,callback:function(e){t.$set(t.form,"newPassword2",e)},expression:"form.newPassword2"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("passwordForm")}}},[t._v("确定修改")]),t._v(" "),a("el-button",{on:{click:t.handleCancel}},[t._v("取消")])],1)],1)],1)}),[],!1,null,null,null);e.default=c.exports},"3a5d":function(t,e,a){},"3b6d":function(t,e,a){},"3c9d":function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=a("5530"),i=(a("96cf"),a("1da1")),n=a("ade3"),o=a("7e1e"),l=a("32db"),c=a("dacb"),u={filters:{},components:{UploadList:l.a,WangEditor:c.a},data:function(){return{tableList:[],total:0,currentPage:1,pageSize:10,options:{},searchReq:{},eventTitle:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:Object(n.a)({eventTitle:{type:String,required:!0},timestamp:String,eventDescription:Date,eventTitle_en:String,eventDescription_en:String,image:String},"eventTitle_en",String),textMap:{update:"Edit",create:"Create"}}},created:function(){this.fetchData()},beforeCreate:function(){},methods:{baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeProcessRecordDialog:function(){this.tableList=[],this.total=0,this.currentPage=1,this.pageSize=10,this.processRecordShow=!1},getslect:function(t){},fetchData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:Object(r.a)({},this.searchReq),limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(o.b)("developmentHistory",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,t.QRDialog=!1,t.approveDialog=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dataForm=JSON.parse(JSON.stringify(t)),this.dialogStatus="edit"},handleDelete:function(t){var e=this;this.$confirm("删除信息",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(i.a)(Object(s.a)().mark((function a(){var r;return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r={query:{_id:t._id}},Object(o.c)("developmentHistory",r).then(function(){var t=Object(i.a)(Object(s.a)().mark((function t(a){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"delete Successfully",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},AddFilter:function(){this.dataForm={eventTitle:"",timestamp:"",eventDescription:"",image:"",eventTitle_en:"",eventDescription_en:""},this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.eventTitle||""==this.dataForm.timestamp||""==this.dataForm.eventDescription){t.next=9;break}return e=Object(r.a)({},this.dataForm),t.next=5,Object(o.a)("developmentHistory",e);case 5:200==t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({eventTitle:"添加成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({eventTitle:"添加失败",message:"edit failly",type:"warning",duration:2e3}),t.next=10;break;case 9:this.$notify({eventTitle:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.eventTitle||""==this.dataForm.timestamp||""==this.dataForm.eventDescription){t.next=10;break}return e={query:{_id:this.dataForm._id},update:Object(r.a)({},this.dataForm)},t.next=6,Object(o.d)("developmentHistory",e);case 6:200==t.sent.code?(this.dialogFormVisible=!1,this.approveDialog=!1,this.fetchData(),this.$notify({eventTitle:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({eventTitle:"修改失败",message:"edit failly",type:"warning",duration:2e3}),t.next=11;break;case 10:this.$notify({eventTitle:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),clearclick:function(){this.tableList=this.tableList1},Search:function(){this.searchReq={},this.eventTitle?this.searchReq.eventTitle={$regex:this.eventTitle}:delete this.searchReq.eventTitle,this.fetchData()}}},d=u,m=(a("8d38"),a("2877")),p=Object(m.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[t._v("历程名称:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入历程名称"},model:{value:t.eventTitle,callback:function(e){t.eventTitle=e},expression:"eventTitle"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.Search()}}},[t._v("查询搜索\n          ")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("历程列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddFilter}},[t._v("添加历程\n        ")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"历程标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.eventTitle))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.parseTime(e.row.timestamp,"{y}-{m}-{d} {h}:{i}")))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"描述",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.eventDescription)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑查看\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n          ")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"专利信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{inline:!0,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{required:"",label:"历程标题","label-width":"120"}},[a("el-input",{attrs:{placeholder:"历程标题"},model:{value:t.dataForm.eventTitle,callback:function(e){t.$set(t.dataForm,"eventTitle",e)},expression:"dataForm.eventTitle"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"时间","label-width":"120"}},[a("el-input",{attrs:{placeholder:"时间"},model:{value:t.dataForm.timestamp,callback:function(e){t.$set(t.dataForm,"timestamp",e)},expression:"dataForm.timestamp"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"描述","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"描述"},model:{value:t.dataForm.eventDescription,callback:function(e){t.$set(t.dataForm,"eventDescription",e)},expression:"dataForm.eventDescription"}})],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("英文")]),t._v(" "),a("el-form-item",{attrs:{label:"历程标题(title)","label-width":"120"}},[a("el-input",{attrs:{placeholder:"历程标题(title)"},model:{value:t.dataForm.eventTitle_en,callback:function(e){t.$set(t.dataForm,"eventTitle_en",e)},expression:"dataForm.eventTitle_en"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"历程描述(description)","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"历程描述(description)"},model:{value:t.dataForm.eventDescription_en,callback:function(e){t.$set(t.dataForm,"eventDescription_en",e)},expression:"dataForm.eventDescription_en"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.editData()}}},[t._v("确定\n      ")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"57433460",null);e.default=p.exports},"3ca7":function(t,e,a){},"3d2a":function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=a("5530"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("32db"),l=(a("d044"),{filters:{},components:{UploadList:o.a},data:function(){return{tableList:[],total:0,currentPage:1,pageSize:10,options:{},searchReq:{},title:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{icon:"",title:"",title_en:"",introduction:"",introduction_en:"",createDate:new Date,updateDate:new Date},textMap:{update:"Edit",create:"Create"}}},created:function(){this.fetchData()},beforeCreate:function(){},methods:{baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeProcessRecordDialog:function(){this.tableList=[],this.total=0,this.currentPage=1,this.pageSize=10,this.processRecordShow=!1},getslect:function(t){},fetchData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:Object(r.a)({},this.searchReq),limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(n.b)("productCate",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,t.QRDialog=!1,t.approveDialog=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dataForm=JSON.parse(JSON.stringify(t)),this.dialogStatus="edit"},handleDelete:function(t){var e=this;this.$confirm("删除产品分类",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(i.a)(Object(s.a)().mark((function a(){var r;return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r={query:{_id:t._id}},Object(n.c)("productCate",r).then(function(){var t=Object(i.a)(Object(s.a)().mark((function t(a){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"delete Successfully",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},AddFilter:function(){this.dataForm={icon:"",title:"",title_en:"",introduction:"",introduction_en:"",createDate:new Date,updateDate:new Date},this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.icon||""==this.dataForm.title||""==this.dataForm.introduction){t.next=9;break}return e=Object(r.a)({},this.dataForm),t.next=5,Object(n.a)("productCate",e);case 5:200==t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({solutionName:"添加成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({solutionName:"添加失败",message:"edit failly",type:"warning",duration:2e3}),t.next=10;break;case 9:this.$notify({solutionName:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.icon||""==this.dataForm.title||""==this.dataForm.introduction){t.next=10;break}return e={query:{_id:this.dataForm._id},update:Object(r.a)({},this.dataForm)},t.next=6,Object(n.d)("productCate",e);case 6:200==t.sent.code?(this.dialogFormVisible=!1,this.approveDialog=!1,this.fetchData(),this.$notify({solutionName:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({solutionName:"修改失败",message:"edit failly",type:"warning",duration:2e3}),t.next=11;break;case 10:this.$notify({solutionName:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),clearclick:function(){this.tableList=this.tableList1},Search:function(){this.searchReq={},this.title?this.searchReq.title={$regex:this.title}:delete this.searchReq.title,this.fetchData()}}}),c=l,u=(a("f4a2"),a("2877")),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[t._v("产品分类标题:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入产品分类标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.Search()}}},[t._v("查询搜索\n                    ")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("产品分类列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddFilter}},[t._v("添加产品分类\n                ")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"产品分类标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品分类介绍",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.introduction)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品分类图标",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.icon,alt:"产品分类图标"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑查看\n                    ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n                    ")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"产品分类信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"dataForm",staticStyle:{width:"100%"},attrs:{inline:!0,"label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{required:"",label:"产品分类标题"}},[a("el-input",{attrs:{placeholder:"产品分类标题"},model:{value:t.dataForm.title,callback:function(e){t.$set(t.dataForm,"title",e)},expression:"dataForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"产品分类图标"}},[a("ZrFile",{attrs:{max:1,value:t.dataForm.icon},on:{"update:value":function(e){return t.$set(t.dataForm,"icon",e)}}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{required:"",label:"产品分类介绍"}},[a("el-input",{attrs:{type:"textarea",placeholder:"产品分类介绍"},model:{value:t.dataForm.introduction,callback:function(e){t.$set(t.dataForm,"introduction",e)},expression:"dataForm.introduction"}})],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("英文")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:"12"}},[a("el-form-item",{attrs:{label:"产品分类标题(title)"}},[a("el-input",{attrs:{placeholder:"产品分类标题(title)"},model:{value:t.dataForm.title_en,callback:function(e){t.$set(t.dataForm,"title_en",e)},expression:"dataForm.title_en"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:"12"}},[a("el-form-item",{attrs:{label:"产品分类介绍(introduction)"}},[a("el-input",{attrs:{type:"textarea",placeholder:"产品分类介绍(introduction)"},model:{value:t.dataForm.introduction_en,callback:function(e){t.$set(t.dataForm,"introduction_en",e)},expression:"dataForm.introduction_en"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.editData()}}},[t._v("确定\n            ")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"817358e4",null);e.default=d.exports},"3e48":function(t,e,a){"use strict";a.r(e);var s=a("c466"),r={name:"TaskClaimDetails",props:{visible:{type:Boolean,default:!1},details:{type:Object,default:function(){return{}}}},data:function(){return{isTimelineExpanded:!1}},methods:{handleClose:function(){this.$emit("update:visible",!1)},formatDate:function(t){return Object(s.a)(t,"yyyy-MM-dd HH:mm")},formatNumber:function(t){return Object(s.b)(t)},getClaimStatusType:function(t){return{"待审核":"warning","已通过":"success","已拒绝":"danger"}[t]||"info"},getProgressStatusType:function(t){return{"未开始":"info","沟通中":"warning","合作成功":"success","寄送样品":"primary","样品跟踪":"primary","已收货":"success","内容制作中":"primary","作品已发布":"success","数据统计中":"warning","已完成":"success","已取消":"danger","合作失败":"danger"}[t]||"info"},getTimelineItemType:function(t){return{"未开始":"info","沟通中":"warning","执行中":"primary","已完成":"success","已取消":"danger"}[t]||"info"}}},i=r,n=(a("2268"),a("2877")),o=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"任务详情",visible:t.visible,width:"70%","close-on-click-modal":!1,"custom-class":"claim-details-dialog","append-to-body":""},on:{"update:visible":function(e){t.visible=e},close:t.handleClose}},[a("div",{staticClass:"claim-details"},[a("div",{staticClass:"detail-section"},[a("div",{staticClass:"section-title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("经纪人")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.details.agentName))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("关联达人")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.details.expertName))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("认领状态")]),t._v(" "),a("div",{staticClass:"info-content"},[a("el-tag",{attrs:{type:t.getClaimStatusType(t.details.claimStatus)}},[t._v("\n              "+t._s(t.details.claimStatus)+"\n            ")])],1)]),t._v(" "),a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("认领时间")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.formatDate(t.details.claimTime)))])]),t._v(" "),a("div",{staticClass:"info-item full-width"},[a("div",{staticClass:"info-label"},[t._v("认领说明")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.details.remark||"无"))])])])]),t._v(" "),a("div",{staticClass:"detail-section"},[a("div",{staticClass:"section-title",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[a("span",[t._v("进度记录")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.isTimelineExpanded=!t.isTimelineExpanded}}},[t._v("\n          "+t._s(t.isTimelineExpanded?"收起":"展开")+"\n          "),a("i",{class:t.isTimelineExpanded?"el-icon-arrow-up":"el-icon-arrow-down"})])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isTimelineExpanded,expression:"isTimelineExpanded"}],staticClass:"progress-timeline"},[a("el-timeline",t._l(t.details.progressSteps,(function(e,s){return a("el-timeline-item",{key:s,attrs:{timestamp:t.formatDate(e.updateTime),type:t.getTimelineItemType(e.status)}},[a("div",{staticClass:"progress-item"},[a("div",{staticClass:"progress-header"},[a("el-tag",{attrs:{type:t.getProgressStatusType(e.status),size:"small"}},[t._v("\n                  "+t._s(e.status)+"\n                ")]),t._v(" "),a("span",{staticClass:"progress-step"},[t._v(t._s(e.step))])],1),t._v(" "),e.remark?a("div",{staticClass:"progress-remark"},[t._v("\n                "+t._s(e.remark)+"\n              ")]):t._e()])])})),1)],1)]),t._v(" "),t.details.result&&t.details.result.contentList?a("div",{staticClass:"detail-section"},[a("div",{staticClass:"section-title"},[t._v("执行结果")]),t._v(" "),a("div",{staticClass:"result-section"},[a("div",{staticClass:"sub-title"},[t._v("内容列表")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.details.result.contentList,border:"",size:"small"}},[a("el-table-column",{attrs:{label:"平台",prop:"platform",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"类型",prop:"type",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.formatDate(e.row.publishTime))+"\n            ")]}}],null,!1,2436397959)}),t._v(" "),a("el-table-column",{attrs:{label:"链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",href:e.row.link,target:"_blank"}},[t._v("\n                "+t._s(e.row.link)+"\n              ")])]}}],null,!1,422598859)}),t._v(" "),a("el-table-column",{attrs:{label:"视频代码",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.videoCode?a("span",[t._v(t._s(e.row.videoCode))]):a("span",[t._v("-")])]}}],null,!1,2314334044)}),t._v(" "),a("el-table-column",{attrs:{label:"内容效果数据"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"performance-data"},[a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-video-play"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("播放量")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.views))+"\n                  ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("点赞数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.likes))+"\n                  ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("评论数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.comments||0))+"\n                  ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-share"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总分享数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.shares||0))+"\n                  ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-money"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("视频GMV")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.videoGmv||0))+"\n                  ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-money"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("直播GMV")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.liveGmv||0))+"\n                  ")])])])]}}],null,!1,3232213187)})],1)],1),t._v(" "),a("div",{staticClass:"result-section"},[a("div",{staticClass:"sub-title"},[t._v("效果数据")]),t._v(" "),a("div",{staticClass:"data-grid"},[a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-video-play"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总播放量:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              "+t._s(t.formatNumber(t.details.result.totalPerformance.totalViews||0))+"\n            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总点赞数:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              "+t._s(t.formatNumber(t.details.result.totalPerformance.totalLikes||0))+"\n            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总评论数:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              "+t._s(t.formatNumber(t.details.result.totalPerformance.totalComments||0))+"\n            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-share"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总分享数:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              "+t._s(t.formatNumber(t.details.result.totalPerformance.totalShares||0))+"\n            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-money"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总视频GMV:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              ¥"+t._s(t.formatNumber(t.details.result.totalPerformance.totalVideoGmv||0))+"\n            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-money"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总直播GMV:")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n              ¥"+t._s(t.formatNumber(t.details.result.totalPerformance.totalLiveGmv||0))+"\n            ")])])])])]):t._e()])])}),[],!1,null,"662b5f48",null);e.default=o.exports},4:function(t,e){},4124:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var s=a("b775");function r(t){return Object(s.a)({url:"/market",method:"get",params:t})}},"42ea":function(t,e,a){},"49e2":function(t,e,a){},"4e0e":function(t,e,a){"use strict";a.r(e);var s=(a("55dd"),a("c5f6"),a("7f7f"),a("ac6a"),a("ffc1"),a("ec1b")),r={components:{CountTo:a.n(s).a},props:{rankData:{type:Array}},watch:{rankData:{handler:function(t){var e=Object.entries(Object.groupBy(t,(function(t){return t.name}))),a=[];e.forEach((function(t){var e={name:"",value:0};e.name=t[0],t[1].forEach((function(t){e.value+=Number(t.price)})),a.push(e)})),this.tableData=a.sort((function(t,e){return e.value-t.value}))}}},data:function(){return{tableData:[{name:"三大洋海鲜商户",value:120898},{name:"刘大妈鱼铺",value:80567},{name:"张大爷虾摊",value:7844},{name:"刘姥姥海鱼摊",value:6622},{name:"李大爷海鲜",value:5522}]}}},i=r,n=(a("df835"),a("2877")),o=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%",height:"300px"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"排名",type:"index",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"商户名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"月销售金额",prop:"value",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        ¥\n        "),a("count-to",{attrs:{duration:1,"end-val":e.row.value,"start-val":0}})]}}])})],1)],1)}),[],!1,null,"03de75cb",null);e.default=o.exports},"4e16":function(t,e,a){"use strict";a("8862")},"4f49":function(t,e,a){"use strict";a.r(e);var s=(a("7514"),a("c7eb")),r=(a("5df3"),a("f400"),a("ac6a"),a("2909")),i=(a("6762"),a("2fdb"),a("96cf"),a("1da1")),n=a("7e1e"),o={name:"AgentSelect",props:{value:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,agents:[],selectedAgents:this.value}},watch:{value:{handler:function(t){this.selectedAgents=t,t&&t.length&&!this.agents.length&&this.fetchAgentsByIds(t)},immediate:!0}},methods:{getAgentLabel:function(t){return"".concat(t.nickName).concat(t.company?" - ".concat(t.company):"")},remoteSearch:function(){var t=Object(i.a)(Object(s.a)().mark((function t(e){var a,i,o=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=15;break}return this.loading=!0,t.prev=2,t.next=5,Object(n.b)("user_login",{query:JSON.stringify({$or:[{nickName:{$regex:e,$options:"i"}},{phone:{$regex:e,$options:"i"}}],roles:{$elemMatch:{label:"Agent"}}}),limit:20});case 5:a=t.sent,i=this.agents.filter((function(t){return o.selectedAgents.includes(t._id)})),this.agents=Object(r.a)(new Map([].concat(Object(r.a)(i),Object(r.a)(a.data)).map((function(t){return[t._id,t]}))).values()),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),this.$message.error("搜索经纪人失败");case 14:this.loading=!1;case 15:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),handleChange:function(t){this.$emit("input",t);var e=this.agents.filter((function(e){return t.includes(e._id)}));this.$emit("select",e)},fetchAgentsByIds:function(){var t=Object(i.a)(Object(s.a)().mark((function t(e){var a,i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,Object(n.b)("user_login",{query:JSON.stringify({_id:{$in:e}})});case 5:(a=t.sent).data&&a.data.length>0&&(i=this.agents.filter((function(t){return!a.data.find((function(e){return e._id===t._id}))})),this.agents=[].concat(Object(r.a)(i),Object(r.a)(a.data))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}},l=o,c=(a("38db"),a("2877")),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入经纪人名称搜索","remote-method":t.remoteSearch,loading:t.loading,clearable:"","collapse-tags":""},on:{change:t.handleChange},model:{value:t.selectedAgents,callback:function(e){t.selectedAgents=e},expression:"selectedAgents"}},t._l(t.agents,(function(e){return a("el-option",{key:e._id,attrs:{label:t.getAgentLabel(e),value:e._id}},[a("div",{staticClass:"agent-option"},[a("div",{staticClass:"agent-info"},[a("span",{staticClass:"name"},[t._v(t._s(e.nickName))]),t._v(" "),a("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(t._s(e.phone))])],1),t._v(" "),e.company?a("div",{staticClass:"company-info"},[a("small",[t._v(t._s(e.company))])]):t._e()])])})),1)}),[],!1,null,"3aa9eef4",null);e.default=u.exports},"4fce":function(t,e,a){"use strict";a("b6ad")},5260:function(t,e,a){"use strict";a.r(e);var s=(a("7514"),a("c7eb")),r=(a("5df3"),a("f400"),a("ac6a"),a("2909")),i=(a("6762"),a("2fdb"),a("96cf"),a("1da1")),n=a("7e1e"),o={name:"ExpertSelect",props:{value:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,experts:[],selectedExperts:this.value}},watch:{value:{handler:function(t){this.selectedExperts=t,t&&t.length&&!this.experts.length&&this.fetchExpertsByIds(t)},immediate:!0}},methods:{remoteSearch:function(){var t=Object(i.a)(Object(s.a)().mark((function t(e){var a,i,o=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=15;break}return this.loading=!0,t.prev=2,t.next=5,Object(n.b)("expert",{query:JSON.stringify({nickname:{$regex:e,$options:"i"}}),limit:20});case 5:a=t.sent,i=this.experts.filter((function(t){return o.selectedExperts.includes(t._id)})),this.experts=Object(r.a)(new Map([].concat(Object(r.a)(i),Object(r.a)(a.data)).map((function(t){return[t._id,t]}))).values()),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),this.$message.error("搜索达人失败");case 14:this.loading=!1;case 15:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),handleChange:function(t){this.$emit("input",t);var e=this.experts.filter((function(e){return t.includes(e._id)}));this.$emit("select",e)},fetchExpertsByIds:function(){var t=Object(i.a)(Object(s.a)().mark((function t(e){var a,i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,Object(n.b)("expert",{query:JSON.stringify({_id:{$in:e}})});case 5:(a=t.sent).data&&a.data.length>0&&(i=this.experts.filter((function(t){return!a.data.find((function(e){return e._id===t._id}))})),this.experts=[].concat(Object(r.a)(i),Object(r.a)(a.data))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}},l=o,c=(a("316f"),a("2877")),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入达人昵称搜索","remote-method":t.remoteSearch,loading:t.loading,clearable:"","collapse-tags":""},on:{change:t.handleChange},model:{value:t.selectedExperts,callback:function(e){t.selectedExperts=e},expression:"selectedExperts"}},t._l(t.experts,(function(e){return a("el-option",{key:e._id,attrs:{label:e.nickname,value:e._id}},[a("div",{staticClass:"expert-option"},[a("span",[t._v(t._s(e.nickname))]),t._v(" "),a("small",{staticClass:"platform-info"},[t._v("\n        "+t._s(e.platform)+" | "+t._s(e.mainCategory)+"\n      ")])])])})),1)}),[],!1,null,"3e1c6cf4",null);e.default=u.exports},"570d":function(t,e,a){"use strict";a.r(e);var s=a("ed08");e.default={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(s.a)((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}}},"60a1":function(t,e,a){},"60b0":function(t,e,a){},6175:function(t,e,a){"use strict";a("6800")},6179:function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=a("5530"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("32db"),l=a("dacb"),c={filters:{},components:{UploadList:o.a,WangEditor:l.a},data:function(){return{tableList:[],total:0,currentPage:1,pageSize:10,options:{},searchReq:{},patentName:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{patentName:{type:String,required:!0},patentNumber:String,applicationDate:Date,publicationDate:Date,patentDescription:String,patentDescription_en:String,image:String,patentName_en:String},textMap:{update:"Edit",create:"Create"}}},created:function(){this.fetchData()},beforeCreate:function(){},methods:{baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeProcessRecordDialog:function(){this.tableList=[],this.total=0,this.currentPage=1,this.pageSize=10,this.processRecordShow=!1},getslect:function(t){},fetchData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:Object(r.a)({},this.searchReq),limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(n.b)("companyPatents",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,t.QRDialog=!1,t.approveDialog=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dataForm=JSON.parse(JSON.stringify(t)),this.dialogStatus="edit"},handleDelete:function(t){var e=this;this.$confirm("删除专利",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(i.a)(Object(s.a)().mark((function a(){var r;return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r={query:{_id:t._id}},Object(n.c)("companyPatents",r).then(function(){var t=Object(i.a)(Object(s.a)().mark((function t(a){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"delete Successfully",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},AddFilter:function(){this.dataForm={patentName:"",patentNumber:"",applicationDate:"",publicationDate:"",patentDescription:"",image:"",patentName_en:"",patentDescription_en:""},this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.patentName||""==this.dataForm.patentNumber||""==this.dataForm.applicationDate||""==this.dataForm.publicationDate||""==this.dataForm.patentDescription||""==this.dataForm.image){t.next=9;break}return e=Object(r.a)({},this.dataForm),t.next=5,Object(n.a)("companyPatents",e);case 5:200==t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({patentName:"添加成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({patentName:"添加失败",message:"edit failly",type:"warning",duration:2e3}),t.next=10;break;case 9:this.$notify({patentName:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.patentName||""==this.dataForm.patentNumber||""==this.dataForm.applicationDate||""==this.dataForm.publicationDate||""==this.dataForm.patentDescription||""==this.dataForm.image){t.next=10;break}return e={query:{_id:this.dataForm._id},update:Object(r.a)({},this.dataForm)},t.next=6,Object(n.d)("companyPatents",e);case 6:200==t.sent.code?(this.dialogFormVisible=!1,this.approveDialog=!1,this.fetchData(),this.$notify({patentName:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({patentName:"修改失败",message:"edit failly",type:"warning",duration:2e3}),t.next=11;break;case 10:this.$notify({patentName:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),clearclick:function(){this.tableList=this.tableList1},Search:function(){this.searchReq={},this.patentName?this.searchReq.patentName={$regex:this.patentName}:delete this.searchReq.patentName,this.fetchData()}}},u=c,d=(a("23ee"),a("2877")),m=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[t._v("专利名称:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入专利名称"},model:{value:t.patentName,callback:function(e){t.patentName=e},expression:"patentName"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.Search()}}},[t._v("查询搜索\n          ")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("专利列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddFilter}},[t._v("添加专利\n        ")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"专利名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.patentName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"专利编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.patentNumber))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"申请时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.parseTime(e.row.applicationDate,"{y}-{m}-{d} {h}:{i}"))+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.parseTime(e.row.publicationDate,"{y}-{m}-{d} {h}:{i}"))+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"专利描述",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.patentDescription)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"专利图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.image,alt:"专利图片"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑查看\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n          ")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"专利信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{inline:!0,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{required:"",label:"专利名称","label-width":"120"}},[a("el-input",{attrs:{placeholder:"专利名称"},model:{value:t.dataForm.patentName,callback:function(e){t.$set(t.dataForm,"patentName",e)},expression:"dataForm.patentName"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"专利编号","label-width":"120"}},[a("el-input",{attrs:{placeholder:"专利编号"},model:{value:t.dataForm.patentNumber,callback:function(e){t.$set(t.dataForm,"patentNumber",e)},expression:"dataForm.patentNumber"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"申请时间","label-width":"120"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.dataForm.applicationDate,callback:function(e){t.$set(t.dataForm,"applicationDate",e)},expression:"dataForm.applicationDate"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"发布时间","label-width":"120"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.dataForm.publicationDate,callback:function(e){t.$set(t.dataForm,"publicationDate",e)},expression:"dataForm.publicationDate"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"专利描述","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"专利描述"},model:{value:t.dataForm.patentDescription,callback:function(e){t.$set(t.dataForm,"patentDescription",e)},expression:"dataForm.patentDescription"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"添加专利图片链接","label-width":"120"}},[a("ZrFile",{attrs:{max:1,value:t.dataForm.image},on:{"update:value":function(e){return t.$set(t.dataForm,"image",e)}}})],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("英文")]),t._v(" "),a("el-form-item",{attrs:{label:"专利名称(title)","label-width":"120"}},[a("el-input",{attrs:{placeholder:"专利名称(title)"},model:{value:t.dataForm.patentName_en,callback:function(e){t.$set(t.dataForm,"patentName_en",e)},expression:"dataForm.patentName_en"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"专利描述(description)","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"专利描述(description)"},model:{value:t.dataForm.patentDescription_en,callback:function(e){t.$set(t.dataForm,"patentDescription_en",e)},expression:"dataForm.patentDescription_en"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.editData()}}},[t._v("确定\n      ")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"19368aa3",null);e.default=m.exports},"639e":function(t,e,a){"use strict";a("60b0")},6485:function(t,e,a){"use strict";a.r(e);var s={data:function(){return{config:{data:[{name:"冷冻海鲜",value:20},{name:"深海海鲜",value:30},{name:"鲜活水产",value:50}],radius:"70",activeRadius:"80",lineWidth:"60",digitalFlopStyle:{fontSize:20}}}},mounted:function(){},methods:{}},r=(a("c7d4"),a("2877")),i=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("header",[t._v("\n    商品分类数量占比\n  ")]),t._v(" "),a("el-main",[a("dv-active-ring-chart",{staticStyle:{width:"100%",height:"400px"},attrs:{config:t.config}})],1)],1)}),[],!1,null,"2f1f1b6a",null);e.default=i.exports},"65ef":function(t,e,a){},6800:function(t,e,a){},"6c09":function(t,e,a){},"6c29b":function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=(a("96cf"),a("1da1")),i=a("5530"),n=a("c466"),o=a("7e1e"),l={dicts:["expert_platform","task_type","content_type"],components:{TagInput:a("b5c9").a},name:"TaskResultDialog",props:{visible:{type:Boolean,default:!1},currentClaim:{type:Object,default:function(){return{}}},taskInfo:{type:Object,default:function(){return{}}}},data:function(){return{resultForm:{contentList:[],totalPerformance:{totalViews:0,totalLikes:0,totalComments:0,totalShares:0,totalGmv:0}},resultRules:{contentList:{type:"array",required:!0,message:"请至少添加一个内容",trigger:"change"}},productOptions:[{value:"产品1",label:"产品1"},{value:"产品2",label:"产品2"}]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}},getTotalViews:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.views||0)}),0)},getTotalLikes:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.likes||0)}),0)},getTotalComments:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.comments||0)}),0)},getTotalShares:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.shares||0)}),0)},getTotalVideoGmv:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.videoGmv||0)}),0)},getTotalLiveGmv:function(){return this.resultForm.contentList.reduce((function(t,e){return t+(e.performanceData&&e.performanceData.liveGmv||0)}),0)}},watch:{visible:function(t){t&&this.initForm()}},methods:{formatNumber:n.b,initForm:function(){this.resultForm={contentList:[],totalPerformance:{totalViews:0,totalLikes:0,totalComments:0,totalShares:0,totalGmv:0}},this.currentClaim.result&&this.currentClaim.result.contentList&&(this.resultForm.contentList=this.currentClaim.result.contentList.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{performanceData:Object(i.a)({views:0,likes:0,comments:0,shares:0,liveGmv:0,videoGmv:0,gmv:0},t.performanceData)})})))},addContent:function(){this.resultForm.contentList.push({platform:"",type:"",link:"",videoCode:"",adCode:"",products:[],publishTime:null,performanceData:{views:0,likes:0,comments:0,shares:0,liveGmv:0,videoGmv:0,gmv:0}})},removeContent:function(t){var e=this;this.$confirm("确定要删除该内容吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.resultForm.contentList.splice(t,1)})).catch((function(){}))},handleCancel:function(){this.dialogVisible=!1},handleSubmit:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs.resultForm.validate();case 3:return e={totalViews:this.getTotalViews,totalLikes:this.getTotalLikes,totalComments:this.getTotalComments,totalShares:this.getTotalShares,totalGmv:this.getTotalGmv},t.next=6,Object(o.d)("taskClaim",{query:{_id:this.currentClaim._id},update:{result:{contentList:this.resultForm.contentList,totalPerformance:e},status:"数据统计中"}});case 6:return t.next=8,Object(o.d)("taskClaim",{query:{_id:this.currentClaim._id},update:{$push:{progressSteps:{step:"提交执行结果",status:"数据统计中",updateTime:new Date,updatedBy:this.$store.getters.id,remark:"提交了".concat(this.resultForm.contentList.length,"个内容的执行结果")}}}});case 8:return t.next=10,Object(o.a)("messageLog",{title:"任务结果提交通知",content:"任务【".concat(this.taskInfo.title,"】的执行结果已提交，请查看"),type:"TASK_RESULT_SUBMITTED",taskId:this.currentClaim.taskId,taskClaimId:this.currentClaim._id,sender:{userId:this.$store.state.user.id,role:"TRACKER"},receivers:[{userId:this.currentClaim.agentId._id,role:"AGENT",isRead:!1},{userId:this.taskInfo.createBy,role:"ADMIN",isRead:!1}],isSystem:!1});case 10:this.$message.success("执行结果提交成功"),this.dialogVisible=!1,this.$emit("submit-success"),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),this.$message.error("提交执行结果失败");case 19:case"end":return t.stop()}}),t,this,[[0,15]])})));return function(){return t.apply(this,arguments)}}()}},c=l,u=(a("b695"),a("2877")),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"提交执行结果",visible:t.dialogVisible,width:"70%","custom-class":"result-dialog","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"resultForm",attrs:{model:t.resultForm,rules:t.resultRules,"label-width":"100px"}},[a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-video-camera"}),t._v("\n                内容列表\n            ")]),t._v(" "),a("div",{staticClass:"content-list"},[t._l(t.resultForm.contentList,(function(e,s){return a("div",{key:s,staticClass:"content-item"},[a("div",{staticClass:"content-header"},[a("span",{staticClass:"content-index"},[t._v("内容 #"+t._s(s+1))]),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.removeContent(s)}}})],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"平台",prop:"contentList."+s+".platform",rules:{required:!0,message:"请选择平台",trigger:"change"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择平台",clearable:""},model:{value:e.platform,callback:function(a){t.$set(e,"platform",a)},expression:"content.platform"}},t._l(t.dict.type.expert_platform,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"类型",prop:"contentList."+s+".type",rules:{required:!0,message:"请选类型",trigger:"change"}}},[a("el-select",{attrs:{placeholder:"请选择内容形式",clearable:""},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"content.type"}},t._l(t.dict.type.content_type,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发布时间",prop:"contentList."+s+".publishTime",rules:{required:!0,message:"请选择发布时间",trigger:"change"}}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择发布时间"},model:{value:e.publishTime,callback:function(a){t.$set(e,"publishTime",a)},expression:"content.publishTime"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"内容链接",prop:"contentList."+s+".link",rules:{required:!0,message:"请输入内容链接",trigger:"blur"}}},[a("el-input",{attrs:{placeholder:"请输入内容链接"},model:{value:e.link,callback:function(a){t.$set(e,"link",a)},expression:"content.link"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"视频代码",prop:"contentList."+s+".videoCode"}},[a("el-input",{attrs:{placeholder:"请输入视频/直播代码"},model:{value:e.videoCode,callback:function(a){t.$set(e,"videoCode",a)},expression:"content.videoCode"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"广告码",prop:"contentList."+s+".adCode"}},[a("el-input",{attrs:{placeholder:"请输入广告码"},model:{value:e.adCode,callback:function(a){t.$set(e,"adCode",a)},expression:"content.adCode"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"带货产品",prop:"contentList."+s+".products"}},[a("TagInput",{model:{value:e.products,callback:function(a){t.$set(e,"products",a)},expression:"content.products"}})],1),t._v(" "),a("div",{staticClass:"performance-data"},[a("div",{staticClass:"sub-title"},[t._v("效果数据")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"播放量",prop:"contentList."+s+".performanceData.views"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.views,callback:function(a){t.$set(e.performanceData,"views",a)},expression:"content.performanceData.views"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"点赞数",prop:"contentList."+s+".performanceData.likes"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.likes,callback:function(a){t.$set(e.performanceData,"likes",a)},expression:"content.performanceData.likes"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"评论数",prop:"contentList."+s+".performanceData.comments"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.comments,callback:function(a){t.$set(e.performanceData,"comments",a)},expression:"content.performanceData.comments"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"点赞数",prop:"contentList."+s+".performanceData.likes"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.likes,callback:function(a){t.$set(e.performanceData,"likes",a)},expression:"content.performanceData.likes"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"评论数",prop:"contentList."+s+".performanceData.comments"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.comments,callback:function(a){t.$set(e.performanceData,"comments",a)},expression:"content.performanceData.comments"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"分享数",prop:"contentList."+s+".performanceData.shares"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.shares,callback:function(a){t.$set(e.performanceData,"shares",a)},expression:"content.performanceData.shares"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"直播GMV",prop:"contentList."+s+".performanceData.liveGmv"}},[a("el-input-number",{attrs:{min:0,precision:2,"controls-position":"right"},model:{value:e.performanceData.liveGmv,callback:function(a){t.$set(e.performanceData,"liveGmv",a)},expression:"content.performanceData.liveGmv"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"视频GMV",prop:"contentList."+s+".performanceData.videoGmv"}},[a("el-input-number",{attrs:{min:0,precision:2,"controls-position":"right"},model:{value:e.performanceData.videoGmv,callback:function(a){t.$set(e.performanceData,"videoGmv",a)},expression:"content.performanceData.videoGmv"}})],1)],1)],1)],1)],1)})),t._v(" "),a("div",{staticClass:"add-content-btn"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:t.addContent}},[t._v("\n                        添加内容\n                    ")])],1)],2)]),t._v(" "),a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-data-analysis"}),t._v("\n                合计效果数据\n            ")]),t._v(" "),a("div",{staticClass:"total-performance"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-video-play"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("总播放量")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalViews)))])])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-star-on"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("总点赞数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalLikes)))])])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-chat-dot-round"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("总评论数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalComments)))])])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-share"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("总分享数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalShares)))])])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-money"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("视频GMV")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("¥"+t._s(t.formatNumber(t.getTotalVideoGmv)))])])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-money"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("直播GMV")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("¥"+t._s(t.formatNumber(t.getTotalLiveGmv)))])])])])],1)],1)])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)}),[],!1,null,"7228cc5a",null);e.default=d.exports},"6c35":function(t,e,a){"use strict";a.r(e);var s=(a("7f7f"),a("5530")),r=a("c7eb"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("19c2"),l=a("cf1e"),c=a.n(l),u={components:{roleDialog:o.default},data:function(){return{list:[],backupslist:null,listLoading:!0,downloadLoading:!1,inputVisible:!1,rows:"",dialogFormVisible:!1,dialogFormVisible1:!1,seachdataname:"",add:!0,temp:[],postlist:{}}},created:function(){this.fetchData()},methods:{variables:function(){return{background:c.a.tableBg,color:c.a.tableText,"font-weight":c.a.tableTextWeight}},fetchData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,t.next=3,Object(n.b)("role",{query:{}});case 3:e=t.sent,a=e.data,this.list=a,this.listLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleFilter:function(){this.$refs.roleDialogRef.AddClick()},createData:function(){var t=this,e=Object(s.a)({},this.postlist);postrole(e).then((function(e){e?(t.fetchData(),t.dialogFormVisible=!1,t.postlist={label:"",value:"",sort:0,type:"角色"},t.$notify({title:"添加Success",message:"Add Successfully",type:"success",duration:2e3})):t.$notify({title:"Add失败，请重试或刷新",message:"Add unsuccessful",type:"warning",duration:2e3})}))},handleClose:function(t){this.temp.splice(t,1)},handleEdit:function(t){this.$refs.roleDialogRef.EditClick(t)},editData:function(){var t=this,e=this.postlist._id;delete this.postlist._id;var a={query:{_id:e},update:Object(s.a)({},this.postlist)};putrole(a).then((function(e){200==e.code?(t.dialogFormVisible=!1,t.fetchData(),t.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):t.$notify({title:"修改失败，请重新刷新",message:"edit failly",type:"warning",duration:2e3})}))},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleDelete:function(t,e){var a=this;this.$confirm("确定删除"+t.name+"吗？").then(function(){var e=Object(i.a)(Object(r.a)().mark((function e(s){var i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={query:{_id:t._id}},e.next=3,Object(n.c)("role",i);case 3:e.sent,a.fetchData(),a.$notify({title:"删除成功",message:"已将"+t.name+"删除",type:"danger",duration:2e3});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){a.dialogVisible=!1}))},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-6e87ca78"),a.e("chunk-54c12e41")]).then(a.bind(null,"4bf8d")).then((function(e){var a=Object.getOwnPropertyNames(t.list[0]),s=a,r=a,i=t.formatJson(r);e.export_json_to_excel({header:s,data:i,filename:"职位信息表"}),t.downloadLoading=!1}))},formatJson:function(t){return this.list.map((function(e){return t.map((function(t){return"Add_time"===t?parseTime(e[t]):e[t]}))}))},imgSaveToUrl:function(t,e,a){var s=this;this.localFile=t.raw;var r=new FormData;r.append("file",this.localFile),postroleimg(r).then((function(t){if(2e4==t.code){var e=t.filename;s.temp1[a].subImg=e}else that.$message.error(t.message)}))},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=t}}},d=u,m=(a("4e16"),a("2877")),p=Object(m.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.handleFilter}},[t._v("添加角色\n    ")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,"header-cell-style":t.variables(),"tree-props":{children:"children"},border:"","element-loading-text":"Loading",fit:"","highlight-current-row":"","row-key":"_id"}},[a("el-table-column",{attrs:{align:"left",fixed:"left",label:"角色标题",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"角色标识"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.label))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"菜单权限"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type",on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("查看")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"更新时间",prop:"created_at",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),t._v(" "),a("span",[t._v(t._s(t._f("parseTime")(e.row.updateAt,"{y}-{m}-{d} {h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.remark))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{staticStyle:{color:"blue"},attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑\n        ")]),t._v(" "),a("el-button",{staticStyle:{color:"red"},attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n        ")])]}}])})],1),t._v(" "),a("roleDialog",{ref:"roleDialogRef",attrs:{dialogFormVisible:t.dialogFormVisible},on:{"custom-event":t.fetchData}})],1)}),[],!1,null,"1f13dc05",null);e.default=p.exports},"6f8c":function(t,e,a){},"6f9a":function(t,e,a){"use strict";a.r(e);var s=a("5530"),r=a("2bc6"),i={name:"Data",dicts:["sys_normal_disable"],data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,dataList:[],defaultDictType:"",title:"",open:!1,listClassOptions:[{value:"default",label:"默认"},{value:"primary",label:"主要"},{value:"success",label:"成功"},{value:"info",label:"信息"},{value:"warning",label:"警告"},{value:"danger",label:"危险"}],typeOptions:[],queryParams:{dictName:void 0,dictType:void 0,status:void 0},form:{},rules:{dictLabel:[{required:!0,message:"数据标签不能为空",trigger:"blur"}],dictValue:[{required:!0,message:"数据键值不能为空",trigger:"blur"}],dictSort:[{required:!0,message:"数据顺序不能为空",trigger:"blur"}]}}},created:function(){var t=this.$route.query.dictType;this.getType(t),this.getTypeList()},methods:{parseTime:a("ed08").d,getType:function(t){var e=this;Object(r.b)("dictType",{query:{dictType:t}}).then((function(a){e.queryParams.dictType=t,e.defaultDictType=t,e.getList()}))},getTypeList:function(){var t=this;Object(r.b)("dictType",{query:this.queryParams}).then((function(e){t.typeOptions=e.data}))},getList:function(){var t=this;this.loading=!0,Object(r.b)("dictData",{query:this.queryParams,skip:this.skip,limit:this.limit}).then((function(e){t.dataList=e.data,t.total=e.total,t.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={dictCode:void 0,dictLabel:void 0,dictValue:void 0,cssClass:void 0,listClass:"default",dictSort:0,status:"0",remark:void 0},this.resetForm("form")},handleQuery:function(){this.skip=0,this.getList()},handleClose:function(){this.$tab.closeOpenPage({path:"/dict/index"})},resetQuery:function(){this.resetForm("queryForm"),this.queryParams.dictType=this.defaultDictType,this.handleQuery()},handleAdd:function(){this.reset(),this.open=!0,this.title="添加字典数据",this.form.dictType=this.queryParams.dictType},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.dictCode})),this.single=1!=t.length,this.multiple=!t.length},handleUpdate:function(t){var e=this;this.reset();var a=t.dictType;Object(r.c)("dictData",{query:{dictType:a,dictValue:t.dictValue}}).then((function(t){e.form=t.data,e.open=!0,e.title="修改字典数据"}))},submitForm:function(){var t=this;this.$refs.form.validate((function(e){e&&(null!=t.form._id?Object(r.e)("dictData",{query:{_id:t.form._id},update:Object(s.a)({},t.form)}).then((function(e){t.$store.dispatch("dict/removeDict",t.queryParams.dictType),t.$modal.msgSuccess("修改成功"),t.open=!1,t.getList()})):Object(r.a)("dictData",t.form).then((function(e){t.$store.dispatch("dict/removeDict",t.queryParams.dictType),t.$modal.msgSuccess("新增成功"),t.open=!1,t.getList()})))}))},handleDelete:function(t){var e=this;this.$modal.confirm('是否确认删除字典标签为"'+t.dictLabel+'"的数据项？').then((function(){return Object(r.d)("dictData",{query:{_id:t._id}})})).then((function(){e.getList(),e.$modal.msgSuccess("删除成功"),e.$store.dispatch("dict/removeDict",e.queryParams.dictType)})).catch((function(){}))}}},n=i,o=a("2877"),l=Object(o.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:t.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{inline:!0,model:t.queryParams,"label-width":"68px",size:"small"}},[a("el-form-item",{attrs:{label:"字典名称",prop:"dictType"}},[a("el-select",{model:{value:t.queryParams.dictType,callback:function(e){t.$set(t.queryParams,"dictType",e)},expression:"queryParams.dictType"}},t._l(t.typeOptions,(function(t){return a("el-option",{key:t.dictId,attrs:{label:t.dictName,value:t.dictType}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"字典标签",prop:"dictLabel"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入字典标签"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.dictLabel,callback:function(e){t.$set(t.queryParams,"dictLabel",e)},expression:"queryParams.dictLabel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{clearable:"",placeholder:"数据状态"},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,"status",e)},expression:"queryParams.status"}},t._l(t.dict.type.sys_normal_disable,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},on:{click:t.handleQuery}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.resetQuery}},[t._v("重置")])],1)],1),t._v(" "),a("el-row",{staticClass:"mb8",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{icon:"el-icon-plus",plain:"",size:"mini",type:"primary"},on:{click:t.handleAdd}},[t._v("新增\n      ")])],1),t._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{icon:"el-icon-close",plain:"",size:"mini",type:"warning"},on:{click:t.handleClose}},[t._v("关闭\n      ")])],1),t._v(" "),a("right-toolbar",{attrs:{showSearch:t.showSearch},on:{"update:showSearch":function(e){t.showSearch=e},"update:show-search":function(e){t.showSearch=e},queryTable:t.getList}})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.dataList},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"字典标签",prop:"dictLabel"},scopedSlots:t._u([{key:"default",fn:function(e){return[""==e.row.listClass||"default"==e.row.listClass?a("span",[t._v(t._s(e.row.dictLabel))]):a("el-tag",{attrs:{type:"primary"==e.row.listClass?"":e.row.listClass}},[t._v(t._s(e.row.dictLabel)+"\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"字典键值",prop:"dictValue"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"字典排序",prop:"dictSort"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("dict-tag",{attrs:{options:t.dict.type.sys_normal_disable,value:e.row.status}})]}}])}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"备注",prop:"remark"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createTime",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parseTime(e.row.createTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center","class-name":"small-padding fixed-width",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"text"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v("修改\n        ")]),t._v(" "),a("el-button",{staticStyle:{color:"red"},attrs:{icon:"el-icon-delete",size:"mini",type:"text"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除\n        ")])]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{limit:t.queryParams.pageSize,page:t.queryParams.pageNum,total:t.total},on:{"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},pagination:t.getList}}),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.open,"append-to-body":"",width:"500px"},on:{"update:visible":function(e){t.open=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"字典类型"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.form.dictType,callback:function(e){t.$set(t.form,"dictType",e)},expression:"form.dictType"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数据标签",prop:"dictLabel"}},[a("el-input",{attrs:{placeholder:"请输入数据标签"},model:{value:t.form.dictLabel,callback:function(e){t.$set(t.form,"dictLabel",e)},expression:"form.dictLabel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数据键值",prop:"dictValue"}},[a("el-input",{attrs:{placeholder:"请输入数据键值"},model:{value:t.form.dictValue,callback:function(e){t.$set(t.form,"dictValue",e)},expression:"form.dictValue"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"样式属性",prop:"cssClass"}},[a("el-input",{attrs:{placeholder:"请输入样式属性"},model:{value:t.form.cssClass,callback:function(e){t.$set(t.form,"cssClass",e)},expression:"form.cssClass"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"显示排序",prop:"dictSort"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.form.dictSort,callback:function(e){t.$set(t.form,"dictSort",e)},expression:"form.dictSort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"回显样式",prop:"listClass"}},[a("el-select",{model:{value:t.form.listClass,callback:function(e){t.$set(t.form,"listClass",e)},expression:"form.listClass"}},t._l(t.listClassOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label+"("+t.value+")",value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.dict.type.sys_normal_disable,(function(e){return a("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label)+"\n          ")])})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)}),[],!1,null,null,null);e.default=l.exports},7059:function(t,e,a){},"70b4":function(t,e,a){"use strict";a.r(e);var s=a("7e1e"),r={name:"TaskForm",props:{visible:{type:Boolean,default:!1},taskId:{type:String,default:""}},data:function(){return{title:"",loading:!1,isAdmin:!1,fansTypeOptions:[{value:"粉丝",label:"粉丝"},{value:"达人",label:"达人"}],taskTypeOptions:[{value:"品牌宣传",label:"品牌宣传"},{value:"达人推广",label:"达人推广"},{value:"达人直播",label:"达人直播"},{value:"达人视频",label:"达人视频"},{value:"直播带货",label:"直播带货"}],platformOptions:[{value:"抖音",label:"抖音"},{value:"小红书",label:"小红书"},{value:"B站",label:"B站"},{value:"微博",label:"微博"}],contentTypeOptions:[{value:"短视频",label:"短视频"},{value:"直播",label:"直播"},{value:"图文",label:"图文"}],paymentMethodOptions:[{value:"预付款",label:"预付款"},{value:"尾款",label:"尾款"}],form:{title:"",type:"",description:"",startTime:null,endTime:null,cooperationDetails:{brandName:"",brandIndustry:"",productName:"",productCategory:"",productDetails:"",requirements:{platformType:[],contentType:[],contentRequirements:"",expertRequirements:{fansCountMin:0,fansCountMax:0,fansType:[],expertStyle:[],expertCategory:[],location:[],otherRequirements:""}},commercialTerms:{budget:0,paymentMethod:"",paymentTerms:"",commissionRate:0,exclusivityPeriod:0},kpiTargets:{viewsTarget:0,interactionTarget:0,salesTarget:0,otherTargets:[]}}},rules:{title:[{required:!0,message:"请输入任务标题",trigger:"blur"}],type:[{required:!0,message:"请选择任务类型",trigger:"change"}],description:[{required:!0,message:"请输入任务描述",trigger:"blur"}],"cooperationDetails.brandName":[{required:!0,message:"请输入品牌名称",trigger:"blur"}],"cooperationDetails.brandIndustry":[{required:!0,message:"请输入品牌所属行业",trigger:"blur"}],"cooperationDetails.productName":[{required:!0,message:"请输入产品名称",trigger:"blur"}],"cooperationDetails.productCategory":[{required:!0,message:"请输入产品品类",trigger:"blur"}],"cooperationDetails.productDetails":[{required:!0,message:"请输入产品详情描述",trigger:"blur"}],"cooperationDetails.requirements.platformType":[{required:!0,message:"请选择合作平台",trigger:"change"}],"cooperationDetails.requirements.contentType":[{required:!0,message:"请选择内容形式",trigger:"change"}],"cooperationDetails.requirements.contentRequirements":[{required:!0,message:"请输入内容要求",trigger:"blur"}],"cooperationDetails.requirements.expertRequirements.fansCountMin":[{required:!0,message:"请输入最低粉丝数",trigger:"blur"}],"cooperationDetails.requirements.expertRequirements.fansCountMax":[{required:!0,message:"请输入最高粉丝数",trigger:"blur"}],"cooperationDetails.requirements.expertRequirements.fansType":[{required:!0,message:"请选择粉丝类型",trigger:"change"}],"cooperationDetails.commercialTerms.budget":[{required:!0,message:"请输入项目预算",trigger:"blur"}],"cooperationDetails.commercialTerms.paymentMethod":[{required:!0,message:"请选择支付方式",trigger:"change"}],"cooperationDetails.kpiTargets.viewsTarget":[{required:!0,message:"请输入播放量目标",trigger:"blur"}],"cooperationDetails.kpiTargets.interactionTarget":[{required:!0,message:"请输入互动量目标",trigger:"blur"}],"cooperationDetails.kpiTargets.salesTarget":[{required:!0,message:"请输入销售目标",trigger:"blur"}]}}},methods:{handleClose:function(){this.$emit("update:visible",!1)},handleSubmit:function(){var t=this;this.$refs.taskForm.validate((function(e){e?(t.loading=!0,t.taskId?Object(s.d)(t.taskId,t.form).then((function(e){t.$message.success("任务更新成功"),t.handleClose()})).catch((function(e){t.$message.error("任务更新失败"),t.loading=!1})):Object(s.a)("task",t.form).then((function(e){t.$message.success("任务添加成功"),t.handleClose()})).catch((function(e){t.$message.error("任务添加失败"),t.loading=!1}))):(t.$message.error("请填写完整任务信息"),t.loading=!1)}))}}},i=r,n=a("2877"),o=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.visible,width:"70%"},on:{"update:visible":function(e){t.visible=e},close:t.handleClose}},[a("el-form",{ref:"taskForm",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[a("el-divider",[t._v("基本信息")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入任务标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择任务类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.taskTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"任务描述",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入任务描述"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"结束时间",prop:"endTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1)],1)],1),t._v(" "),a("el-divider",[t._v("品牌信息")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"品牌名称",prop:"cooperationDetails.brandName"}},[a("el-input",{attrs:{placeholder:"请输入品牌名称"},model:{value:t.form.cooperationDetails.brandName,callback:function(e){t.$set(t.form.cooperationDetails,"brandName",e)},expression:"form.cooperationDetails.brandName"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称",prop:"cooperationDetails.productName"}},[a("el-input",{attrs:{placeholder:"请输入产品名称"},model:{value:t.form.cooperationDetails.productName,callback:function(e){t.$set(t.form.cooperationDetails,"productName",e)},expression:"form.cooperationDetails.productName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品品类",prop:"cooperationDetails.productCategory"}},[a("el-input",{attrs:{placeholder:"请输入产品品类"},model:{value:t.form.cooperationDetails.productCategory,callback:function(e){t.$set(t.form.cooperationDetails,"productCategory",e)},expression:"form.cooperationDetails.productCategory"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"产品详情",prop:"cooperationDetails.productDetails"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入产品详情描述"},model:{value:t.form.cooperationDetails.productDetails,callback:function(e){t.$set(t.form.cooperationDetails,"productDetails",e)},expression:"form.cooperationDetails.productDetails"}})],1),t._v(" "),a("el-divider",[t._v("合作要求")]),t._v(" "),a("el-form-item",{attrs:{label:"合作平台",prop:"cooperationDetails.requirements.platformType"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择合作平台"},model:{value:t.form.cooperationDetails.requirements.platformType,callback:function(e){t.$set(t.form.cooperationDetails.requirements,"platformType",e)},expression:"form.cooperationDetails.requirements.platformType"}},t._l(t.platformOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"内容形式",prop:"cooperationDetails.requirements.contentType"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择内容形式"},model:{value:t.form.cooperationDetails.requirements.contentType,callback:function(e){t.$set(t.form.cooperationDetails.requirements,"contentType",e)},expression:"form.cooperationDetails.requirements.contentType"}},t._l(t.contentTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"内容要求",prop:"cooperationDetails.requirements.contentRequirements"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容要求"},model:{value:t.form.cooperationDetails.requirements.contentRequirements,callback:function(e){t.$set(t.form.cooperationDetails.requirements,"contentRequirements",e)},expression:"form.cooperationDetails.requirements.contentRequirements"}})],1),t._v(" "),a("el-divider",[t._v("达人要求")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"粉丝数要求",prop:"cooperationDetails.requirements.expertRequirements.fansCountMin"}},[a("el-input-number",{attrs:{min:0,step:1e4,placeholder:"请输入最低粉丝数"},model:{value:t.form.cooperationDetails.requirements.expertRequirements.fansCountMin,callback:function(e){t.$set(t.form.cooperationDetails.requirements.expertRequirements,"fansCountMin",e)},expression:"form.cooperationDetails.requirements.expertRequirements.fansCountMin"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[t._v("-")]),t._v(" "),a("el-input-number",{attrs:{min:0,step:1e4,placeholder:"请输入最高粉丝数"},model:{value:t.form.cooperationDetails.requirements.expertRequirements.fansCountMax,callback:function(e){t.$set(t.form.cooperationDetails.requirements.expertRequirements,"fansCountMax",e)},expression:"form.cooperationDetails.requirements.expertRequirements.fansCountMax"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"粉丝类型",prop:"cooperationDetails.requirements.expertRequirements.fansType"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择粉丝类型"},model:{value:t.form.cooperationDetails.requirements.expertRequirements.fansType,callback:function(e){t.$set(t.form.cooperationDetails.requirements.expertRequirements,"fansType",e)},expression:"form.cooperationDetails.requirements.expertRequirements.fansType"}},t._l(t.fansTypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-divider",[t._v("商务条款")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目预算",prop:"cooperationDetails.commercialTerms.budget"}},[a("el-input-number",{attrs:{min:0,step:1e3,placeholder:"请输入项目预算"},model:{value:t.form.cooperationDetails.commercialTerms.budget,callback:function(e){t.$set(t.form.cooperationDetails.commercialTerms,"budget",e)},expression:"form.cooperationDetails.commercialTerms.budget"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"支付方式",prop:"cooperationDetails.commercialTerms.paymentMethod"}},[a("el-select",{attrs:{placeholder:"请选择支付方式"},model:{value:t.form.cooperationDetails.commercialTerms.paymentMethod,callback:function(e){t.$set(t.form.cooperationDetails.commercialTerms,"paymentMethod",e)},expression:"form.cooperationDetails.commercialTerms.paymentMethod"}},t._l(t.paymentMethodOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-divider",[t._v("KPI目标")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"播放量目标",prop:"cooperationDetails.kpiTargets.viewsTarget"}},[a("el-input-number",{attrs:{min:0,step:1e3},model:{value:t.form.cooperationDetails.kpiTargets.viewsTarget,callback:function(e){t.$set(t.form.cooperationDetails.kpiTargets,"viewsTarget",e)},expression:"form.cooperationDetails.kpiTargets.viewsTarget"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"互动量目标",prop:"cooperationDetails.kpiTargets.interactionTarget"}},[a("el-input-number",{attrs:{min:0,step:100},model:{value:t.form.cooperationDetails.kpiTargets.interactionTarget,callback:function(e){t.$set(t.form.cooperationDetails.kpiTargets,"interactionTarget",e)},expression:"form.cooperationDetails.kpiTargets.interactionTarget"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"销售目标",prop:"cooperationDetails.kpiTargets.salesTarget"}},[a("el-input-number",{attrs:{min:0,step:100},model:{value:t.form.cooperationDetails.kpiTargets.salesTarget,callback:function(e){t.$set(t.form.cooperationDetails.kpiTargets,"salesTarget",e)},expression:"form.cooperationDetails.kpiTargets.salesTarget"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)}),[],!1,null,null,null);e.default=o.exports},7624:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var s=["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"].map((function(t){return"el-icon-"+t}))},"78ce2":function(t,e,a){"use strict";a("6f8c")},"79d3":function(t,e,a){"use strict";a("3a5d")},"7abe":function(t,e,a){"use strict";a.r(e);var s=(a("f576"),a("c7eb")),r=(a("96cf"),a("1da1")),i=(a("7e1e"),a("313e")),n=a("b775");function o(t){return Object(n.a)({url:"/messageLogList",method:"post",data:t})}function l(t){return Object(n.a)({url:"/messageId/read",method:"post",data:t})}function c(t){return Object(n.a)({url:"/read-all",method:"post",data:t})}var u={components:{UserInfoDialog:a("a2a3").default},data:function(){return{userdata:{},infocards:[{title:"寄样品",progress:76.4,total:100,completed:76.4},{title:"样品跟踪",progress:21.4,total:100,completed:21.4},{title:"作品已发布",progress:21.4,total:100,completed:21.4}],cards:[{title:"总人数",type:"text",data:"1000"},{title:"男生",type:"text",data:"1000"},{title:"女生",type:"text",data:"1000"},{title:"男女比例",type:"chart",id:"genderChart"},{title:"达人地区分布",type:"chart",id:"regionChart"},{title:"达人类型分布",type:"chart",id:"categoryChart"}],activeTab:"unread",loading:!1,unreadMessages:[],allMessages:[],dialogVisible:!1,currentMessage:null,messageTypeMap:{TASK_PUBLISHED:"任务发布",TASK_CLAIMED:"任务认领",TRACKER_ASSIGNED:"跟踪员指派",TASK_UPDATED:"任务更新"}}},mounted:function(){this.userdata=this.$store.state.user,this.fetchMessages(),this.initCharts()},methods:{initCharts:function(){this.initGenderChart(),this.initRegionChart(),this.initCategoryChart()},showDialog:function(){this.$refs.userInfoDialog.show()},initGenderChart:function(){i.init(document.getElementById("genderChart")).setOption({series:[{type:"pie",data:[{value:600,name:"男性"},{value:400,name:"女性"}]}]})},initRegionChart:function(){i.init(document.getElementById("regionChart")).setOption({xAxis:{type:"category",data:["北京","上海","广州","深圳"]},yAxis:{type:"value"},series:[{type:"bar",data:[300,200,150,350]}]})},initCategoryChart:function(){i.init(document.getElementById("categoryChart")).setOption({series:[{type:"pie",data:[{value:300,name:"美食"},{value:200,name:"旅游"},{value:500,name:"科技"}]}]})},logout:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("user/logout");case 2:this.$router.push("/login?redirect=".concat(this.$route.fullPath));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),mima:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("view/mima");case 2:this.$router.push("/mima?redirect=".concat(this.$route.fullPath));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),fetchMessages:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){var e,a,r,i=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,e={user:this.$store.state.user},t.next=5,o(e);case 5:a=t.sent,r=a.data,this.unreadMessages=r.filter((function(t){return t.receivers.some((function(t){return t.userId===i.$store.state.user.id&&!t.isRead}))})),this.allMessages=r,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),this.$message.error("获取消息失败");case 16:return t.prev=16,this.loading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,this,[[1,12,16,19]])})));return function(){return t.apply(this,arguments)}}(),markAsRead:function(){var t=Object(r.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l({messageId:e,user:this.$store.state.user});case 3:this.$message.success("已标记为已读"),this.fetchMessages(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),this.$message.error("标记已读失败");case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),markAllAsRead:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c({user:this.$store.state.user});case 3:this.$message.success("已全部标记为已读"),this.fetchMessages(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),this.$message.error("标记全部已读失败");case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),handleTabClick:function(){this.fetchMessages()},viewDetail:function(t){this.currentMessage=t,this.dialogVisible=!0,t.isRead||this.markAsRead(t._id)},formatDate:function(t){if(!t)return"";var e=new Date(t);return"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0")," ").concat(String(e.getHours()).padStart(2,"0"),":").concat(String(e.getMinutes()).padStart(2,"0"))}}},d=u,m=(a("79d3"),a("2877")),p=Object(m.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"userstatus"},[a("div",{staticClass:"flexs"},[a("img",{staticClass:"user-avatar",attrs:{src:t.userdata.avatar}}),t._v(" "),a("div",{staticClass:"imgtext"},[t._v("您好，"+t._s(t.userdata.name))])]),t._v(" "),a("div",{staticClass:"flexs"},[a("el-button",{staticClass:"buttons",attrs:{type:"primary"},on:{click:t.showDialog}},[t._v("修改信息")]),t._v(" "),a("el-button",{staticClass:"buttons",on:{click:t.logout}},[t._v("退出登录")])],1)]),t._v(" "),a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-message"},[t._v("消息中心")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small"},on:{click:t.markAllAsRead}},[t._v("\n          全部标记为已读\n        ")])],1)])]),t._v(" "),a("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"未读消息",name:"unread"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.unreadMessages}},[a("el-table-column",{attrs:{prop:"title",label:"消息标题",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"消息内容"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发送时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.row.createTime))+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.markAsRead(e.row._id)}}},[t._v("\n              标记已读\n            ")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.viewDetail(e.row)}}},[t._v("\n              查看详情\n            ")])]}}])})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"全部消息",name:"all"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.allMessages}},[a("el-table-column",{attrs:{prop:"title",label:"消息标题",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"消息内容"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"发送时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.formatDate(e.row.createTime))+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.viewDetail(e.row)}}},[t._v("\n              查看详情\n            ")])]}}])})],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"消息详情",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.currentMessage?a("div",[a("h3",[t._v(t._s(t.currentMessage.title))]),t._v(" "),a("p",[t._v(t._s(t.currentMessage.content))]),t._v(" "),a("div",{staticClass:"message-meta"},[a("p",[t._v("发送时间："+t._s(t.formatDate(t.currentMessage.createTime)))])])]):t._e()]),t._v(" "),a("user-info-dialog",{ref:"userInfoDialog"})],1)}),[],!1,null,"6ee343e8",null);e.default=p.exports},"7ae7":function(t,e,a){"use strict";a.r(e);var s=(a("ac6a"),a("5df3"),a("b85c")),r=a("2909"),i=(a("6b54"),a("a481"),a("7f7f"),a("5530")),n=(a("6762"),a("2fdb"),a("c7eb")),o=(a("96cf"),a("1da1")),l=a("7e1e"),c=a("c466"),u=a("3e48"),d=a("6c29b"),m=a("cf83"),p=a("90b6"),f={dicts:["broker_task_progress","tracker_task_progress","task_progress"],name:"TaskClaim",components:{TaskClaimDetails:u.default,TaskResultDialog:d.default,TaskProgressDialog:m.default,ExpertDatabase:p.default},props:{taskId:{type:String,required:!0}},data:function(){return{currentUserId:"",isAdmin:!1,isAgent:!1,isTracker:!1,taskInfo:{},claimList:[],expertOptions:[],claimDialogVisible:!1,claimForm:{expertId:"",trackerId:"",remark:""},claimRules:{expertId:[{required:!0,message:"请选择达人",trigger:"change"}],trackerId:[{required:!0,message:"请选择任务跟踪员",trigger:"change"}]},showProgressHistory:!1,showResultDialog:!1,progressDialogVisible:!1,progressForm:{status:"",trackerId:"",step:"",remark:"",trackingInfo:{buildConnectionSource:"",cooperationDate:null,receiveTime:null,estimatedPublishTime:null,actualPublishTime:null,adCode:""}},progressRules:{status:[{required:!0,message:"请选择进度状态",trigger:"change"}]},resultDialogVisible:!1,currentClaim:null,detailsDialogVisible:!1,currentClaimDetails:{},trackerOptions:[],statusList:[],taskConfig:{requireClaimAudit:!1},batchClaimDialogVisible:!1,batchClaimForm:{experts:[],remark:""},batchClaimRules:{experts:[{required:!0,message:"请选择至少一个达人",trigger:"change"}]}}},created:function(){this.getCurrentUser(),this.fetchData(),this.loadTrackerOptions()},methods:{checkAgentPermission:function(t){return!t.progressSteps.some((function(t){return"合作成功"===t.status}))},checkTrackerPermission:function(t){return t.progressSteps.some((function(t){return"合作成功"===t.status}))},deleteClaim:function(){var t=Object(o.a)(Object(n.a)().mark((function t(e){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.d)("taskClaim",{query:{_id:e._id},update:{isDeleted:!0}});case 2:this.fetchData();case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),getCurrentUser:function(){var t=Object(o.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.isAdmin=this.$store.getters.roles.label.includes("Admin"),this.isAgent=this.$store.getters.roles.label.includes("Agent")||this.$store.getters.roles.label.includes("Admin"),this.isTracker=this.$store.getters.roles.label.includes("Tracker")||this.$store.getters.roles.label.includes("Admin"),this.currentUserId=this.$store.getters.id}catch(t){}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),fetchData:function(){var t=Object(o.a)(Object(n.a)().mark((function t(){var e,a,s;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.b)("task",{query:{_id:this.taskId}});case 3:return e=t.sent,this.taskInfo=e.data[0],a={taskId:this.taskId,isDeleted:!1},this.isAdmin||(this.isAgent&&(a.agentId=this.$store.state.user.id),this.isTracker&&(a.trackerId=this.$store.state.user.id)),t.next=10,Object(l.b)("taskClaim",{query:a,populate:JSON.stringify([{path:"agentId"},{path:"expertId"},{path:"trackerId"}])});case 10:s=t.sent,this.claimList=s.data.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{agentName:t.agentId.nickName,expertName:t.expertId.nickname,platformId:t.expertId.platformId,trackerName:t.trackerId&&t.trackerId.nickName?t.trackerId.nickName:"未指定"})})),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),this.$message.error("获取数据失败");case 18:case"end":return t.stop()}}),t,this,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),loadExpertOptions:function(){var t=Object(o.a)(Object(n.a)().mark((function t(){var e;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.b)("expert",{query:{}});case 3:e=t.sent,this.expertOptions=e.data.map((function(t){return{value:t._id,label:"".concat(t.name,"(").concat(t.platformName,")")}})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),this.$message.error("获取达人列表失败");case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),loadTrackerOptions:function(){var t=Object(o.a)(Object(n.a)().mark((function t(){var e;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.b)("user_login",{query:{role:"6734de3a55647e147063f158"}});case 3:e=t.sent,this.trackerOptions=e.data.map((function(t){return{value:t._id,label:t.nickName||t.username}})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),this.$message.error("获取任务跟踪员列表失败");case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),handleClaim:function(){this.loadExpertOptions(),this.claimForm={expertId:"",remark:""},this.claimDialogVisible=!0},submitClaim:function(){var t=Object(o.a)(Object(n.a)().mark((function t(){var e=this;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.$refs.claimForm.validate(function(){var t=Object(o.a)(Object(n.a)().mark((function t(a){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}return t.next=3,Object(l.a)("taskClaim",{taskId:e.taskId,agentId:e.currentUserId,expertId:e.claimForm.expertId,claimStatus:e.taskConfig.requireClaimAudit?"待审核":"已通过",remark:e.claimForm.remark});case 3:e.$message.success(e.taskConfig.requireClaimAudit?"认领成功，请等待审核":"认领成功"),e.claimDialogVisible=!1,e.fetchData();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(t){this.$message.error("认领失败")}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleAudit:function(){var t=Object(o.a)(Object(n.a)().mark((function t(e,a){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.d)("taskClaim",{query:{_id:e._id},update:{claimStatus:a,auditTime:new Date,auditRemark:"已拒绝"===a?"不符合要求":"符合要求"}});case 3:this.$message.success("审核完成"),this.fetchData(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.$message.error("审核失");case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}(),handleUpdateProgress:function(t){if(this.currentClaim=t,this.progressForm={status:t.status||"",trackerId:t.trackerId||"",step:"",remark:"",trackingInfo:{buildConnectionSource:"",cooperationDate:null,receiveTime:null,estimatedPublishTime:null,actualPublishTime:null,adCode:""}},t.progressSteps&&t.progressSteps.length>0){var e=t.progressSteps[t.progressSteps.length-1];e.trackingInfo&&(this.progressForm.trackingInfo={buildConnectionSource:e.trackingInfo.buildConnectionSource||"",cooperationDate:e.trackingInfo.cooperationDate||null,receiveTime:e.trackingInfo.receiveTime||null,estimatedPublishTime:e.trackingInfo.estimatedPublishTime||null,actualPublishTime:e.trackingInfo.actualPublishTime||null,adCode:e.trackingInfo.adCode||""})}this.progressDialogVisible=!0},handleProgressSubmit:function(){var t=Object(o.a)(Object(n.a)().mark((function t(e){var a;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a={status:e.status,$push:{progressSteps:{step:e.step,status:e.status,updateTime:new Date,updatedBy:this.$store.state.user.userId,remark:e.remark,trackingInfo:e.trackingInfo}}},"合作成功"!==e.status){t.next=9;break}return a.trackerId=e.trackerId,t.next=9,Object(l.a)("messageLog",{title:"跟踪员指派通知",content:"任务【".concat(this.taskInfo.title,"】已指派跟踪员"),type:"TRACKER_ASSIGNED",taskId:this.currentClaim.taskId,taskClaimId:this.currentClaim._id,sender:{userId:this.$store.state.user.id,role:"AGENT"},receivers:[{userId:e.trackerId,role:"TRACKER",isRead:!1},{userId:this.taskInfo.createBy,role:"ADMIN",isRead:!1}],isSystem:!1});case 9:return t.next=11,Object(l.d)("taskClaim",{query:{_id:this.currentClaim._id},update:a});case 11:return t.next=13,Object(l.a)("messageLog",{title:"任务进度更新",content:"任务【".concat(this.taskInfo.title,"】的进度已更新为：").concat(e.status),type:"TASK_PROGRESS",taskId:this.currentClaim.taskId,taskClaimId:this.currentClaim._id,sender:{userId:this.$store.state.user.id,role:this.isTracker?"TRACKER":"AGENT"},receivers:[{userId:this.currentClaim.agentId&&this.currentClaim.agentId._id,role:"AGENT",isRead:!1},{userId:this.currentClaim.trackerId&&this.currentClaim.trackerId._id,role:"TRACKER",isRead:!1},{userId:this.taskInfo.createBy,role:"ADMIN",isRead:!1}],isSystem:!1});case 13:this.$message.success("进度更新成功"),this.fetchData(),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),this.$message.error("进度更新失败");case 21:case"end":return t.stop()}}),t,this,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),handleSubmitResult:function(t){this.currentClaim=t,this.resultDialogVisible=!0},handleViewDetails:function(t){this.currentClaimDetails=Object(i.a)(Object(i.a)({},t),{},{result:t.result?Object(i.a)(Object(i.a)({},t.result),{},{performanceData:Object(i.a)({views:0,likes:0,comments:0,shares:0,gmv:0},t.result.performanceData||{})}):null}),this.detailsDialogVisible=!0},formatDate:function(t){return t?Object(c.a)(new Date(t),"yyyy-MM-dd HH:mm"):""},getClaimStatusType:function(t){return{"待审核":"warning","已通过":"success","已拒绝":"danger"}[t]||"info"},getProgressStatusType:function(t){return{"未开始":"info","沟通中":"warning","合作成功":"success","寄送样品":"primary","样品跟踪":"primary","已收货":"success","内容制作中":"primary","作品已发布":"success","数据统计中":"warning","已完成":"success","已取消":"danger","合作失败":"danger"}[t]||"info"},getTaskTypeTag:function(t){return{"品牌宣传":"primary","达人推广":"success","达人直播":"warning","达人视":"danger","直播带货":"info"}[t]||"info"},getTaskStatusTag:function(t){return{"进行中":"success","已结束":"info","已取消":"danger","待开始":"warning"}[t]||"info"},formatNumber:function(t){return t||0===t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"},calculateTotalViews:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.views||0)}),0):0},calculateTotalLikes:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.likes||0)}),0):0},calculateTotalComments:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.comments||0)}),0):0},calculateTotalShares:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.shares||0)}),0):0},calculateTotalGmv:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.gmv||0)}),0):0},getTimelineItemType:function(t){return{"未开始":"info","沟通中":"warning","执行中":"primary","已完成":"success","已取消":"danger"}[t]||"info"},getAvailableStatuses:function(){if(this.isAgent)return this.statusList=[].concat(Object(r.a)(this.dict.type.broker_task_progress),[{label:"合作成功",value:"合作成功",type:"success"}]);if(this.isTracker){var t=[{label:"合作成功",value:"合作成功",type:"success"}];return t=[].concat(Object(r.a)(t),Object(r.a)(this.dict.type.tracker_task_progress)),this.statusList=t}return this.statusList},openProgressDialog:function(t){this.currentClaim=t,this.progressDialogVisible=!0},calculateTotalMetric:function(t,e){return t&&Array.isArray(t)?t.reduce((function(t,a){return t+(a.performanceData&&a.performanceData[e]||0)}),0):0},calculateTotalInteractions:function(t){return t&&Array.isArray(t)?t.reduce((function(t,e){var a=e.performanceData||{};return t+(a.likes||0)+(a.comments||0)+(a.shares||0)}),0):0},getContentTimelineType:function(t){return{"短视频":"primary","直播":"success","图文":"warning"}[t.contentType]||"info"},handleBatchClaim:function(){this.batchClaimForm={experts:[],remark:""},this.batchClaimDialogVisible=!0},handleExpertSelectionChange:function(t){this.batchClaimForm.experts=t},checkExpertClaimed:function(){var t=Object(o.a)(Object(n.a)().mark((function t(e){var a;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.b)("taskClaim",{query:{taskId:this.taskId,expertId:e,isDeleted:!1}});case 3:return a=t.sent,t.abrupt("return",a.data.length>0);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),submitBatchClaim:function(){var t=Object(o.a)(Object(n.a)().mark((function t(){var e,a,r,i,o,c;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.batchClaimForm.experts.length){t.next=4;break}return this.$message.warning("请选择至少一个达人"),t.abrupt("return");case 4:e=[],a=[],r=Object(s.a)(this.batchClaimForm.experts),t.prev=7,r.s();case 9:if((i=r.n()).done){t.next=17;break}return o=i.value,t.next=13,this.checkExpertClaimed(o._id);case 13:t.sent?e.push(o.name||o.nickname):(c={taskId:this.taskId,agentId:this.currentUserId,expertId:o._id,claimStatus:this.taskConfig.requireClaimAudit?"待审核":"已通过",remark:this.batchClaimForm.remark},a.push(Object(l.a)("taskClaim",c)));case 15:t.next=9;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(7),r.e(t.t0);case 22:return t.prev=22,r.f(),t.finish(22);case 25:if(!(e.length>0)){t.next=29;break}if(this.$message.warning("以下达人已认领过该任务: ".concat(e.join(", "))),0!==a.length){t.next=29;break}return t.abrupt("return");case 29:return t.next=31,Promise.all(a);case 31:this.$message.success(this.taskConfig.requireClaimAudit?"批量认领成功，请等待审核":"批量认领成功"),this.batchClaimDialogVisible=!1,this.fetchData(),t.next=40;break;case 36:t.prev=36,t.t1=t.catch(0),this.$message.error("批量认领失败");case 40:case"end":return t.stop()}}),t,this,[[0,36],[7,19,22,25]])})));return function(){return t.apply(this,arguments)}}(),checkExpertSelectable:function(t){return!this.claimList.some((function(e){return e.expertId._id===t._id}))},getKpiTarget:function(t){return this.taskInfo.cooperationDetails&&this.taskInfo.cooperationDetails.kpiTargets?this.taskInfo.cooperationDetails.kpiTargets[t]:null},getCommercialTerm:function(t){return this.taskInfo.cooperationDetails&&this.taskInfo.cooperationDetails.commercialTerms?this.taskInfo.cooperationDetails.commercialTerms[t]:null}},computed:{showTrackingInfo:function(){return["合作成功","寄送样品","样品跟踪","已收货","内容制作中","作品已发布"].includes(this.progressForm.status)},computedTaskStatus:function(){if(!this.taskInfo.startTime||!this.taskInfo.endTime)return"未知";var t=(new Date).getTime(),e=new Date(this.taskInfo.startTime).getTime(),a=new Date(this.taskInfo.endTime).getTime();return t<e?"待开始":t>=e&&t<=a?"进行中":t>a?"已结束":"已取消"===this.taskInfo.status?"已取消":"未知"},hasKpiTargets:function(){return this.taskInfo.cooperationDetails&&this.taskInfo.cooperationDetails.kpiTargets&&(this.taskInfo.cooperationDetails.kpiTargets.viewsTarget||this.taskInfo.cooperationDetails.kpiTargets.interactionTarget||this.taskInfo.cooperationDetails.kpiTargets.salesTarget)},hasCommercialTerms:function(){return this.taskInfo.cooperationDetails&&this.taskInfo.cooperationDetails.commercialTerms&&this.taskInfo.cooperationDetails.commercialTerms.budget}}},h=f,v=(a("f693"),a("2877")),b=Object(v.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-claim"},[a("el-card",{staticClass:"task-info"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("任务信息")])]),t._v(" "),a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[t.taskInfo.title?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("任务标题：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.taskInfo.title))])]):t._e(),t._v(" "),t.taskInfo.type?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("任务类型：")]),t._v(" "),a("el-tag",{attrs:{type:t.getTaskTypeTag(t.taskInfo.type)}},[t._v(t._s(t.taskInfo.type))])],1):t._e(),t._v(" "),t.computedTaskStatus?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("任务状态：")]),t._v(" "),a("el-tag",{attrs:{type:t.getTaskStatusTag(t.computedTaskStatus)}},[t._v(t._s(t.computedTaskStatus))])],1):t._e()]),t._v(" "),a("div",{staticClass:"info-row"},[t.taskInfo.startTime?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("开始时间：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatDate(t.taskInfo.startTime)))])]):t._e(),t._v(" "),t.taskInfo.endTime?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("结束时间：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatDate(t.taskInfo.endTime)))])]):t._e(),t._v(" "),t.taskInfo.createTime?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("发布时间：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatDate(t.taskInfo.createTime)))])]):t._e()])]),t._v(" "),t.taskInfo.cooperationDetails&&(t.taskInfo.cooperationDetails.brandName||t.taskInfo.cooperationDetails.productName)?a("div",{staticClass:"section-title"},[t._v("\n            品牌合作信息")]):t._e(),t._v(" "),t.taskInfo.cooperationDetails&&(t.taskInfo.cooperationDetails.brandName||t.taskInfo.cooperationDetails.productName)?a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.brandName?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("品牌名称：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.taskInfo.cooperationDetails.brandName))])]):t._e(),t._v(" "),t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.productName?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("产品名称：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.taskInfo.cooperationDetails.productName))])]):t._e()])]):t._e(),t._v(" "),a("div",{staticClass:"section-title"},[t._v("合作要求")]),t._v(" "),a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("合作平台：")]),t._v(" "),t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.requirements&&t.taskInfo.cooperationDetails.requirements.platformType?t._l(t.taskInfo.cooperationDetails.requirements.platformType,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"}},[t._v("\n                            "+t._s(e)+"\n                        ")])})):t._e()],2),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("内容形式：")]),t._v(" "),t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.requirements&&t.taskInfo.cooperationDetails.requirements.contentType?t._l(t.taskInfo.cooperationDetails.requirements.contentType,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{type:"success"}},[t._v("\n                            "+t._s(e)+"\n                        ")])})):t._e()],2)]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item full-width"},[a("span",{staticClass:"label"},[t._v("达人要求：")]),t._v(" "),t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.requirements&&t.taskInfo.cooperationDetails.requirements.expertRequirements?a("div",{staticClass:"requirement-list"},[t.taskInfo.cooperationDetails.requirements.expertRequirements.fansCountMin?a("div",{staticClass:"requirement-item"},[a("i",{staticClass:"el-icon-user"}),t._v(" 粉丝数："+t._s(t.formatNumber(t.taskInfo.cooperationDetails.requirements.expertRequirements.fansCountMin))+" - "+t._s(t.formatNumber(t.taskInfo.cooperationDetails.requirements.expertRequirements.fansCountMax))+"\n                        ")]):t._e(),t._v(" "),t.taskInfo.cooperationDetails.requirements.expertRequirements.expertCategory&&t.taskInfo.cooperationDetails.requirements.expertRequirements.expertCategory.length?a("div",{staticClass:"requirement-item"},[a("i",{staticClass:"el-icon-collection-tag"}),t._v(" 达人类目：\n                            "),t._l(t.taskInfo.cooperationDetails.requirements.expertRequirements.expertCategory,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"small",type:"warning"}},[t._v("\n                                "+t._s(e)+"\n                            ")])}))],2):t._e(),t._v(" "),t.taskInfo.cooperationDetails.requirements.expertRequirements.otherRequirements?a("div",{staticClass:"requirement-item"},[a("i",{staticClass:"el-icon-info"}),t._v(" 其他要求："+t._s(t.taskInfo.cooperationDetails.requirements.expertRequirements.otherRequirements)+"\n                        ")]):t._e()]):t._e()])])]),t._v(" "),a("div",{staticClass:"section-title"},[t._v("任务描述")]),t._v(" "),a("div",{staticClass:"task-description"},[t._v("\n            "+t._s(t.taskInfo.description||"暂无描述")+"\n        ")]),t._v(" "),t.hasKpiTargets?a("div",{staticClass:"section-title"},[t._v("KPI目标")]):t._e(),t._v(" "),t.hasKpiTargets?a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[t.getKpiTarget("viewsTarget")?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("播放量目标：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatNumber(t.getKpiTarget("viewsTarget"))))])]):t._e(),t._v(" "),t.getKpiTarget("interactionTarget")?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("互动量目标：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatNumber(t.getKpiTarget("interactionTarget"))))])]):t._e(),t._v(" "),t.getKpiTarget("salesTarget")?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("销售目标：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatNumber(t.getKpiTarget("salesTarget"))))])]):t._e()])]):t._e(),t._v(" "),t.hasCommercialTerms?a("div",{staticClass:"section-title"},[t._v("商务条款")]):t._e(),t._v(" "),t.hasCommercialTerms?a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[t.getCommercialTerm("budget")?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("达人预算：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.getCommercialTerm("budget"))+"元")])]):t._e()])]):t._e(),t._v(" "),a("div",{staticClass:"section-title"},[t._v("备注信息")]),t._v(" "),a("div",{staticClass:"info-section"},[t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.remarks&&t.taskInfo.cooperationDetails.remarks.length?a("div",{staticClass:"remarks-list"},[a("el-table",{attrs:{data:t.taskInfo.cooperationDetails.remarks,border:"",size:"small"}},[a("el-table-column",{attrs:{label:"备注名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"备注类型",prop:"type"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small"}},[t._v(t._s(e.row.type))])]}}],null,!1,3884746098)}),t._v(" "),a("el-table-column",{attrs:{label:"备注链接","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",href:e.row.url,target:"_blank"}},[t._v(t._s(e.row.url))])]}}],null,!1,3178991531)}),t._v(" "),a("el-table-column",{attrs:{label:"上传时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(t.formatDate(e.row.uploadTime))+"\n                        ")]}}],null,!1,1630876477)})],1)],1):a("div",{staticClass:"empty-remarks"},[t._v("\n                暂无备注信息\n            ")])])]),t._v(" "),a("el-card",{staticClass:"claim-list"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("任务认领列表")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"warning",size:"small"},on:{click:function(e){t.showProgressHistory=!t.showProgressHistory}}},[t._v("\n                "+t._s(t.showProgressHistory?"隐藏任务进度历史":"展开任务进度历史")+"\n            ")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"warning",size:"small"},on:{click:function(e){t.showResultDialog=!t.showResultDialog}}},[t._v("\n                "+t._s(t.showResultDialog?"隐藏执行结果列表":"展开执行结果列表")+"\n            ")]),t._v(" "),t.isAgent?a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"success",size:"small"},on:{click:t.handleBatchClaim}},[t._v("\n                认领任务\n            ")]):t._e()],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.claimList,border:""}},[a("el-table-column",{attrs:{label:"经纪人",prop:"agentName",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"关联达人",prop:"expertName",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"达人账号ID",prop:"platformId",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"任务跟踪员",prop:"trackerName",width:"120"}}),t._v(" "),t.isAdmin&&t.taskConfig.requireClaimAudit?a("el-table-column",{attrs:{label:"认领状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.getClaimStatusType(e.row.claimStatus)}},[t._v(t._s(e.row.claimStatus))])]}}],null,!1,609898553)}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"认领时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.formatDate(e.row.claimTime))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"当前任务进度",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.getProgressStatusType(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),t.showProgressHistory?a("el-table-column",{attrs:{label:"进度历史",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.progressSteps&&e.row.progressSteps.length?a("el-timeline",t._l(e.row.progressSteps,(function(e,s){return a("el-timeline-item",{key:s,attrs:{type:t.getProgressStatusType(e.status),size:"small",timestamp:t.formatDate(e.updateTime)}},[a("div",{staticClass:"progress-item"},[a("div",{staticClass:"progress-header"},[a("el-tag",{attrs:{size:"mini",type:t.getProgressStatusType(e.status)}},[t._v("\n                                        "+t._s(e.status)+"\n                                    ")]),t._v(" "),a("span",{staticClass:"progress-step"},[t._v(t._s(e.step))])],1),t._v(" "),e.remark?a("div",{staticClass:"progress-remark"},[t._v("\n                                    "+t._s(e.remark)+"\n                                ")]):t._e()])])})),1):a("span",[t._v("暂无进度")])]}}],null,!1,4116868277)}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"执行结果",width:"600"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.result&&e.row.result.contentList&&e.row.result.contentList.length?[a("div",{staticClass:"result-summary",staticStyle:{width:"150px"}},[a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("总播放量：")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.formatNumber(t.calculateTotalMetric(e.row.result.contentList,"views"))))])]),t._v(" "),a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("总互动量：")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.formatNumber(t.calculateTotalInteractions(e.row.result.contentList))))])]),t._v(" "),a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("总视频销售额：")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v("¥"+t._s(t.formatNumber(t.calculateTotalMetric(e.row.result.contentList,"videoGmv"))))])]),t._v(" "),a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("总直播销售额：")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v("¥"+t._s(t.formatNumber(t.calculateTotalMetric(e.row.result.contentList,"liveGmv"))))])])]),t._v(" "),t.showResultDialog?a("el-table",{staticClass:"content-table",attrs:{data:e.row.result.contentList,size:"mini",border:""}},[a("el-table-column",{attrs:{label:"发布平台",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"mini",type:"primary"}},[t._v(t._s(e.row.platform))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"内容类型",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{staticStyle:{"margin-top":"4px"},attrs:{size:"mini",type:"success"}},[t._v(t._s(e.row.type))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"视频链接",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",href:e.row.link,target:"_blank"}},[t._v(t._s(e.row.link))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"广告码",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                    "+t._s(e.row.adCode)+"\n                                ")]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"publish-time"},[t._v(t._s(t.formatDate(e.row.publishTime)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"数据表现"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"metrics-container"},[a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-video-play"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.views)))])]),t._v(" "),a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.likes)))])]),t._v(" "),a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.comments)))])]),t._v(" "),a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-share"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.shares)))])]),t._v(" "),a("div",{staticClass:"metric-item highlight"},[t._v("\n                                            视频GMV：¥"+t._s(t.formatNumber(e.row.performanceData.videoGmv))+"\n                                        ")]),t._v(" "),a("div",{staticClass:"metric-item highlight"},[t._v("\n                                            直播GMV：¥"+t._s(t.formatNumber(e.row.performanceData.liveGmv))+"\n                                        ")])])]}}],null,!0)})],1):t._e()]:a("span",{staticClass:"no-result"},[t._v("暂无执行结果")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:t.isAdmin&&t.taskConfig.requireClaimAudit||t.isTracker?300:200,fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.handleViewDetails(e.row)}}},[t._v("\n                        查看详情\n                    ")]),t._v(" "),t.isAdmin&&t.taskConfig.requireClaimAudit?["待审核"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleAudit(e.row,"已通过")}}},[t._v("\n                            通过\n                        ")]):t._e(),t._v(" "),"待审核"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleAudit(e.row,"已拒绝")}}},[t._v("\n                            拒绝\n                        ")]):t._e()]:t._e(),t._v(" "),t.isAdmin?[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.deleteClaim(e.row)}}},[t._v("\n                            删除\n                        ")])]:t._e(),t._v(" "),t.isAgent&&e.row.agentId._id===t.currentUserId&&t.checkAgentPermission(e.row)?["已通过"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleUpdateProgress(e.row)}}},[t._v("\n                            更新进度\n                        ")]):t._e()]:t._e(),t._v(" "),e.row.trackerId&&e.row.trackerId._id===t.currentUserId&&t.checkTrackerPermission(e.row)?["已通过"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleUpdateProgress(e.row)}}},[t._v("\n                            更新进度\n                        ")]):t._e(),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleSubmitResult(e.row)}}},[t._v("\n                            提交结果\n                        ")])]:t._e()]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"认领任务",visible:t.claimDialogVisible,"append-to-body":"",width:"50%"},on:{"update:visible":function(e){t.claimDialogVisible=e}}},[a("el-form",{ref:"claimForm",attrs:{model:t.claimForm,rules:t.claimRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择达人",prop:"expertId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择达人"},model:{value:t.claimForm.expertId,callback:function(e){t.$set(t.claimForm,"expertId",e)},expression:"claimForm.expertId"}},t._l(t.expertOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"认领说明"}},[a("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.claimForm.remark,callback:function(e){t.$set(t.claimForm,"remark",e)},expression:"claimForm.remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.claimDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitClaim}},[t._v("确 定")])],1)],1),t._v(" "),a("task-progress-dialog",{attrs:{visible:t.progressDialogVisible,"current-claim":t.currentClaim,"status-list":t.getAvailableStatuses()},on:{"update:visible":function(e){t.progressDialogVisible=e},submit:t.handleProgressSubmit}}),t._v(" "),a("task-result-dialog",{attrs:{visible:t.resultDialogVisible,"current-claim":t.currentClaim,"task-info":t.taskInfo},on:{"update:visible":function(e){t.resultDialogVisible=e},"submit-success":t.fetchData}}),t._v(" "),a("task-claim-details",{attrs:{visible:t.detailsDialogVisible,details:t.currentClaimDetails},on:{"update:visible":function(e){t.detailsDialogVisible=e}}}),t._v(" "),a("el-dialog",{attrs:{title:"批量认领任务",visible:t.batchClaimDialogVisible,"append-to-body":"",width:"90%"},on:{"update:visible":function(e){t.batchClaimDialogVisible=e}}},[a("el-form",{ref:"batchClaimForm",attrs:{model:t.batchClaimForm,rules:t.batchClaimRules,"label-width":"100px"}},[a("expert-database",{ref:"expertSelector",attrs:{"is-select-mode":!0,multiple:!0,maxSelect:10,"check-selectable":t.checkExpertSelectable},on:{"selection-change":t.handleExpertSelectionChange}}),t._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"认领说明"}},[a("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.batchClaimForm.remark,callback:function(e){t.$set(t.batchClaimForm,"remark",e)},expression:"batchClaimForm.remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.batchClaimDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitBatchClaim}},[t._v("确 定")])],1)],1)],1)}),[],!1,null,null,null);e.default=b.exports},"7c64":function(t,e,a){"use strict";a.r(e);var s=a("5530"),r=a("c7eb"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("32db"),l=a("dacb"),c={filters:{},components:{UploadList:o.a,WangEditor:l.a},data:function(){return{inputVisible:!1,inputValue:"",tableList:[],total:0,currentPage:1,pageSize:10,newsType:"",newsTitle:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{newsTitle:"",newsType:"",newsContent:"",publishDate:null,tags:[],image:"",newsTitle_en:"",newsType_en:"",newsContent_en:""}}},created:function(){this.fetchData()},beforeCreate:function(){},methods:{handleInputConfirm:function(){var t=this.inputValue.trim();t&&this.dataForm.tags.push(t),this.inputVisible=!1,this.inputValue=""},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleClose:function(t){var e=this.dataForm.tags.indexOf(t);-1!==e&&this.dataForm.tags.splice(e,1)},baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeDialog:function(){this.dialogFormVisible=!1,this.clearForm()},clearForm:function(){this.dataForm={newsTitle:"",newsType:"",newsContent:"",publishDate:null,tags:[],image:""}},fetchData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:{newsTitle:{$regex:this.newsTitle}},limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(n.b)("companyNews",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dataForm=Object(s.a)({},t),this.dialogStatus="edit"},handleDelete:function(t){var e=this;this.$confirm("删除商品",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(i.a)(Object(r.a)().mark((function a(){var s;return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s={query:{_id:t._id}},Object(n.c)("companyNews",s).then(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"delete Successfully",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},AddNews:function(){this.dataForm={newsTitle:"",newsType:"",newsContent:"",publishDate:null,tags:[],image:"",newsTitle_en:"",newsType_en:"",newsContent_en:""},this.dialogFormVisible=!0,this.dialogStatus="create"},createNews:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.newsTitle||""==this.dataForm.newsType||""==this.dataForm.newsContent||""==this.dataForm.publishDate||""==this.dataForm.image){t.next=10;break}if(e=Object(s.a)({},this.dataForm),!this.validateForm()){t.next=8;break}return t.next=6,Object(n.a)("companyNews",e);case 6:200===t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({title:"添加成功",message:"添加成功",type:"success",duration:2e3})):this.$notify({title:"添加失败",message:"添加失败，请重试",type:"error",duration:2e3});case 8:t.next=11;break;case 10:this.$notify({title:"请填写必要信息",message:"新闻标题为必填项",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editNews:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.newsTitle||""==this.dataForm.newsType||""==this.dataForm.newsContent||""==this.dataForm.publishDate){t.next=10;break}return e={query:{_id:this.dataForm._id},update:Object(s.a)({},this.dataForm)},t.next=6,Object(n.d)("companyNews",e);case 6:200===t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({title:"修改成功",message:"修改成功",type:"success",duration:2e3})):this.$notify({title:"修改失败",message:"修改失败，请重试",type:"error",duration:2e3}),t.next=11;break;case 10:this.$notify({title:"请填写必要信息",message:"新闻标题为必填项",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),validateForm:function(){return""!==this.dataForm.newsTitle},search:function(){this.fetchData()}}},u=c,d=(a("b505"),a("2877")),m=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[t._v("新闻标题:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入新闻标题"},model:{value:t.newsTitle,callback:function(e){t.newsTitle=e},expression:"newsTitle"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("查询搜索\n          ")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("公司新闻列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddNews}},[t._v("添加公司新闻\n        ")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"新闻标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.newsTitle))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"新闻封面",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.image,alt:"新闻封面"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"新闻类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.newsType)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"上传时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.parseTime(e.row.publishDate,"{y}-{m}-{d} {h}:{i}"))+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"新闻标签",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.tags,(function(e,s){return a("el-tag",{key:s},[t._v("\n            "+t._s(e)+"\n          ")])}))}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑查看\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n          ")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"公司新闻信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"dataForm",staticStyle:{width:"100%"},attrs:{inline:!0,"label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{required:"",label:"新闻标题"}},[a("el-input",{attrs:{placeholder:"新闻标题"},model:{value:t.dataForm.newsTitle,callback:function(e){t.$set(t.dataForm,"newsTitle",e)},expression:"dataForm.newsTitle"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"新闻封面"}},[a("ZrFile",{attrs:{max:1,value:t.dataForm.image},on:{"update:value":function(e){return t.$set(t.dataForm,"image",e)}}})],1),t._v(" "),a("el-form-item",{attrs:{label:"发布时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.dataForm.publishDate,callback:function(e){t.$set(t.dataForm,"publishDate",e)},expression:"dataForm.publishDate"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"新闻类型"}},[a("el-select",{attrs:{placeholder:"请选择新闻类型"},model:{value:t.dataForm.newsType,callback:function(e){t.$set(t.dataForm,"newsType",e)},expression:"dataForm.newsType"}},[a("el-option",{attrs:{label:"公司新闻",value:"公司新闻"}}),t._v(" "),a("el-option",{attrs:{label:"行业资讯",value:"行业资讯"}}),t._v(" "),a("el-option",{attrs:{label:"企业文化",value:"企业文化"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"新闻标签","label-width":"120"}},[t._l(t.dataForm.tags,(function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(e)}}},[t._v("\n                  "+t._s(e)+"\n                ")])})),t._v(" "),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("英文")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:"12"}},[a("el-form-item",{attrs:{label:"新闻标题(Title)"}},[a("el-input",{attrs:{placeholder:"title"},model:{value:t.dataForm.newsTitle_en,callback:function(e){t.$set(t.dataForm,"newsTitle_en",e)},expression:"dataForm.newsTitle_en"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:"12"}},[a("el-form-item",{attrs:{label:"新闻类型（Type）"}},[a("el-select",{attrs:{placeholder:"select a news type"},model:{value:t.dataForm.newsType_en,callback:function(e){t.$set(t.dataForm,"newsType_en",e)},expression:"dataForm.newsType_en"}},[a("el-option",{attrs:{label:"公司新闻(Company News)",value:"Company News"}}),t._v(" "),a("el-option",{attrs:{label:"行业资讯(Industry information)",value:"Industry information"}}),t._v(" "),a("el-option",{attrs:{label:"企业文化(corporate culture)",value:"corporate culture"}})],1)],1)],1)],1)],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("新闻内容")]),t._v(" "),a("WangEditor",{attrs:{value:t.dataForm.newsContent},on:{"update:value":function(e){return t.$set(t.dataForm,"newsContent",e)}}}),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("新闻内容（Content）")]),t._v(" "),a("WangEditor",{attrs:{value:t.dataForm.newsContent_en},on:{"update:value":function(e){return t.$set(t.dataForm,"newsContent_en",e)}}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createNews():t.editNews()}}},[t._v("确定\n      ")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"7116b870",null);e.default=m.exports},"817d":function(t,e,a){var s,r,i;r=[e,a("313e")],s=function(t,e){var a=function(t){"undefined"!=typeof console&&console&&console.error};if(e){var s=["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],r={color:s,title:{textStyle:{fontWeight:"normal",color:"#008acd"}},visualMap:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},toolbox:{iconStyle:{normal:{borderColor:s[0]}}},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#008acd"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},dataZoom:{dataBackgroundColor:"#efefff",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd"},grid:{borderColor:"#eee"},categoryAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"]}}},timeline:{lineStyle:{color:"#008acd"},controlStyle:{color:"#008acd",borderColor:"#008acd"},symbol:"emptyCircle",symbolSize:3},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},candlestick:{itemStyle:{color:"#d87a80",color0:"#2ec7c9"},lineStyle:{width:1,color:"#d87a80",color0:"#2ec7c9"},areaStyle:{color:"#2ec7c9",color0:"#b6a2de"}},scatter:{symbol:"circle",symbolSize:4},map:{itemStyle:{color:"#ddd"},areaStyle:{color:"#fe994e"},label:{color:"#d87a80"}},graph:{itemStyle:{color:"#d87a80"},linkStyle:{color:"#2ec7c9"}},gauge:{axisLine:{lineStyle:{color:[[.2,"#2ec7c9"],[.8,"#5ab1ef"],[1,"#d87a80"]],width:10}},axisTick:{splitNumber:10,length:15,lineStyle:{color:"auto"}},splitLine:{length:22,lineStyle:{color:"auto"}},pointer:{width:5}}};e.registerTheme("macarons",r)}else a("ECharts is not Loaded")},void 0===(i="function"==typeof s?s.apply(e,r):s)||(t.exports=i)},"82cb":function(t,e,a){"use strict";a("6c09")},"83a4":function(t,e,a){"use strict";a.r(e);var s=(a("c5f6"),a("456d"),a("b85c")),r=(a("ac6a"),a("7f7f"),a("5530")),i=a("7e1e"),n=a("8492"),o=a("4124"),l=a("150b"),c=a("4e0e"),u=a("3764"),d=a("3711"),m=a("01aa"),p={filters:{},components:{Piechart:l.default,Tablechart:c.default,Sumchart:u.default,BarChart:d.default,LineChart:m.default},data:function(){return{isFullscreen:!1,radioData:"今日",dayTimeData:[],statusoptions:[{value:"冷冻海鲜",label:"冷冻海鲜"},{value:"鲜活水产",label:"鲜活水产"},{value:"深海海鲜",label:"深海海鲜"}],rowId:"",total:0,currentPage:1,pageSize:10,options:{},charge:{},record_id:"",marketlist:[],merchantlist:[],searchReq:{},categorylist:[],categorylist1:[],labellist:[],listLoading:!0,downloadLoading:!1,_id:"",categorytitle:"",labeltitle:"",address:"",addresstime:"",name:"",phone:"",checkList:"",labelindex:"",labelcategoryindex:"",dialogStatus:"",dialogFormVisible:!1,dialogFormVisible1:!1,dataForm:{marketId:null,merchantId:null,name:"",description:"",price:"",quantity:"",address:"",stock:"",category:"",image:"",createAt:new Date,updateAt:new Date},textMap:{update:"Edit",create:"Create"},lineChartData:{expectedData:[100,120,161,134,105,160,165,100,120,161,134],actualData:[120,82,91,154,162,140,145,120,82,91,154]},merchantData:[],orderData:[],orderDataByTime:[],orderDataByTimeForList:[],productData:[],rankData:[],merchantNum:0,productNum:0,orderNum:0,totalPrice:0,pickTime:[(new Date).setHours(0,0,0,0)-6048e5,(new Date).setHours(0,0,0,0)+864e5],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},created:function(){this.fetchData(),this.getOrderData(),this.getOrderDataByTime(),this.getMerchantData(),this.getProductData(),this.init()},beforeCreate:function(){},watch:{pickTime:{handler:function(t){this.getOrderDataByTime()}}},methods:{toFullOrExit:function(){this.$router.push({path:"/marketPublicity",query:{}})},toFullOrExit2:function(){this.$router.push({path:"/marketOverview",query:{}})},init:function(){var t=this;Object(n.a)({}).then((function(e){t.merchantlist=e.data})),Object(o.a)({}).then((function(e){t.marketlist=e.data}))},baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeProcessRecordDialog:function(){this.categorylist=[],this.total=0,this.currentPage=1,this.pageSize=10,this.processRecordShow=!1},getslect:function(t){},fetchData:function(){var t=this;this.listLoading=!0;var e={query:Object(r.a)({},this.searchReq),populate:JSON.stringify([{path:"marketId"},{path:"merchantId"}]),limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0};Object(i.b)("product",e).then((function(e){t.categorylist=e.data,t.total=e.countnum,t.categorylist1=JSON.parse(JSON.stringify(e.data)),t.listLoading=!1}))},beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,done()})).catch((function(t){}))},clearclick:function(){this.categorylist=this.categorylist1},Search:function(){this.searchReq={},this.name?this.searchReq.name={$regex:this.name}:delete this.searchReq.name,this.fetchData()},getOrderDataByTime:function(){var t=this,e={query:{$and:[{orderTime:{$gte:this.pickTime[0]}},{orderTime:{$lte:this.pickTime[1]}}]},sort:{orderTime:-1}};Object(i.b)("MerchantOrder",e).then((function(e){200==e.code&&(t.orderDataByTime=e.data,t.handleOrderDataByTime(e.data),t.orderNum=e.data.length,t.getTodayTotal())}))},handleOrderDataByTime:function(t){var e={},a=[];for(var i in t.forEach((function(t){var a,i=Object(s.a)(t.orderItems);try{for(i.s();!(a=i.n()).done;){var n=a.value,o=n.productName;e[o]||(e[o]=[]);var l=Object(r.a)(Object(r.a)({},n),{},{merchantId:t.merchantId});e[o].push(l)}}catch(t){i.e(t)}finally{i.f()}})),e){var n=e[i],o={merchantId:"",name:"",price:0,number:0};for(var l in o.merchantId=n.merchantId,o.number=Object.keys(n).length,n){var c=n[l];o.price+=Number(Number(c.price).toFixed(0)),o.name=c.productName}a.push(o)}this.orderDataByTimeForList=a},getTodayTotal:function(){var t=0;this.orderDataByTime.forEach((function(e){t+=e.totalAmount})),this.totalPrice=Number(t.toFixed(2))},getOrderData:function(){var t=this,e={populate:JSON.stringify([{path:"merchantId"}]),sort:{orderTime:-1}};Object(i.b)("MerchantOrder",e).then((function(e){if(200==e.code){t.orderData=e.data;for(var a=[],s=0;s<e.data.length;s++)for(var r=e.data[s],i=0;i<r.orderItems.length;i++){var n=r.orderItems[i];a.push({name:null!=r.merchantId?r.merchantId.name:"丢失商户",price:n.price})}t.rankData=a}}))},getMerchantData:function(){var t=this;Object(i.b)("merchant",{sort:{orderTime:-1}}).then((function(e){200==e.code&&(t.merchantData=e.data,t.merchantNum=e.data.length)}))},getProductData:function(){var t=this;Object(i.b)("product",{sort:{orderTime:-1}}).then((function(e){200==e.code&&(t.productData=e.data,t.productNum=e.data.length)}))}}},f=p,h=(a("b001"),a("2877")),v=Object(h.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"charts"},[a("el-row",{staticStyle:{width:"100%",margin:"0"},attrs:{gutter:20}},[a("el-tooltip",{staticClass:"item",attrs:{content:t.isFullscreen?"退出全屏":"全屏",effect:"dark",placement:"left"}},[a("a",{staticClass:"toolbar_item back2top",attrs:{href:"javascript:void(0)",title:"数据分析大屏"},on:{click:t.toFullOrExit2}},[a("el-button",{attrs:{type:"text"}},[t._v("数据分析大屏")])],1)]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{content:t.isFullscreen?"退出全屏":"全屏",effect:"dark",placement:"left"}},[a("a",{staticClass:"toolbar_item back2top",attrs:{href:"javascript:void(0)",title:"一张图大屏"},on:{click:t.toFullOrExit}},[a("el-button",{attrs:{type:"text"}},[t._v("一张图大屏")])],1)])],1),t._v(" "),a("el-date-picker",{attrs:{"picker-options":t.pickerOptions,align:"right","end-placeholder":"结束日期","range-separator":"至","start-placeholder":"开始日期",type:"datetimerange"},model:{value:t.pickTime,callback:function(e){t.pickTime=e},expression:"pickTime"}}),t._v(" "),a("el-row",{staticStyle:{width:"100%",margin:"0"},attrs:{gutter:20}},[a("el-col",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-between",height:"100px","max-height":"200px","margin-bottom":"20px"},attrs:{lg:6,sm:12,xl:6,xs:24}},[a("Sumchart",{attrs:{endValue:t.merchantNum,color:"#5f9dd9",dangwei:"户",icon:"el-icon-coin",title:"商户数量"}})],1),t._v(" "),a("el-col",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-between",height:"100px","max-height":"200px","margin-bottom":"20px"},attrs:{lg:6,sm:12,xl:6,xs:24}},[a("Sumchart",{attrs:{endValue:t.productNum,color:"#5f9dd9",dangwei:"件",icon:"el-icon-coin",title:"商品数量"}})],1),t._v(" "),a("el-col",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-between",height:"100px","max-height":"200px","margin-bottom":"20px"},attrs:{lg:6,sm:12,xl:6,xs:24}},[a("Sumchart",{attrs:{endValue:t.orderNum,color:"#f9d97e",dangwei:"单",icon:"el-icon-tickets",title:"订单数量"}})],1),t._v(" "),a("el-col",{staticStyle:{display:"flex","flex-direction":"column","justify-content":"space-between",height:"100px","max-height":"200px","margin-bottom":"20px"},attrs:{lg:6,sm:12,xl:6,xs:24}},[a("Sumchart",{attrs:{endValue:t.totalPrice,color:"#f9d97e",dangwei:"元",icon:"el-icon-tickets",title:"销售金额"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{width:"100%",margin:"0"},attrs:{gutter:20}},[a("el-col",{staticStyle:{height:"400px","max-height":"400px","margin-bottom":"20px"},attrs:{lg:8,sm:8,xs:24}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("商户分类占比")])]),t._v(" "),a("Piechart",{attrs:{oldcateData:t.merchantData}})],1)],1),t._v(" "),a("el-col",{staticStyle:{height:"400px","max-height":"400px","margin-bottom":"20px"},attrs:{lg:8,sm:8,xs:24}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("经营户销售排行榜")])]),t._v(" "),a("Tablechart",{attrs:{rankData:t.rankData}})],1)],1),t._v(" "),a("el-col",{staticStyle:{height:"400px","max-height":"400px","margin-bottom":"20px"},attrs:{lg:8,sm:8,xs:24}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("热门商品销售量")])]),t._v(" "),a("BarChart",{attrs:{orderData:t.orderData}})],1)],1)],1),t._v(" "),a("el-row",{staticStyle:{width:"100%",margin:"0"},attrs:{gutter:20}},[a("el-col",{staticStyle:{height:"450px","max-height":"500px","margin-bottom":"20px"},attrs:{lg:24,sm:24,xs:24}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("市场数据趋势")])]),t._v(" "),a("LineChart",{attrs:{"chart-data":t.orderDataByTime}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"140px"}},[t._v("商品名称:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入商品名称"},on:{clear:function(e){return t.clearclick()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.Search()}}},[t._v("查询搜索")])],1)])])]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{"highlight-current-row":!0,tableData:t.orderDataByTimeForList,tableDataloading:t.listLoading}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{align:"center",label:"经营户名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.merchantId&&e.row.merchantId.name||"经营户数据丢失"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"销售订单数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.number))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"销售金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.price)+"\n        ")]}}])})],1)],2)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("商品列表")])])])])}],!1,null,"464d09f8",null);e.default=v.exports},8492:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var s=a("b775");function r(t){return Object(s.a)({url:"/merchant",method:"get",params:t})}},8740:function(t,e,a){"use strict";a("991f")},"885f":function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=a("5530"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("32db"),l=a("dacb"),c={filters:{},components:{UploadList:o.a,WangEditor:l.a},data:function(){return{inputVisible:!1,inputVisible_en:!1,inputValue:"",inputValue_en:"",statusList:[{label:"开启",value:"Open"},{label:"关闭",value:"Closed"}],tableList:[],total:0,currentPage:1,pageSize:10,options:{},positionName:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{positionName:"",positionName_en:"",positionDescription:"",positionDescription_en:"",requirements:"",requirements_en:"",salary:"",salary_en:"",status:"",createAt:new Date,updateAt:new Date,welfare:[],welfare_en:[]},textMap:{update:"Edit",create:"Create"}}},created:function(){this.fetchData()},beforeCreate:function(){},methods:{handleInputConfirm:function(){var t=this.inputValue;if(t){var e={label:t};this.dataForm.welfare.push(e)}this.inputVisible=!1,this.inputValue=""},handleInputConfirmOth:function(){var t=this.inputValue_en;if(t){var e={label:t};this.dataForm.welfare_en.push(e)}this.inputVisible_en=!1,this.inputValue_en=""},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},showInputOth:function(){var t=this;this.inputVisible_en=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleClose:function(t){this.dataForm.welfare.splice(this.dataForm.welfare.indexOf(t),1)},handleCloseOth:function(t){this.dataForm.welfare_en.splice(this.dataForm.welfare_en.indexOf(t),1)},baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeProcessRecordDialog:function(){this.tableList=[],this.total=0,this.currentPage=1,this.pageSize=10,this.processRecordShow=!1},getslect:function(t){},fetchData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:Object(r.a)({},this.searchReq),limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(n.b)("companyRecruitment",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,t.QRDialog=!1,t.approveDialog=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dataForm=JSON.parse(JSON.stringify(t)),this.dialogStatus="edit"},handleDelete:function(t){var e=this;this.$confirm("删除职位",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(i.a)(Object(s.a)().mark((function a(){var r;return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r={query:{_id:t._id}},Object(n.c)("companyRecruitment",r).then(function(){var t=Object(i.a)(Object(s.a)().mark((function t(a){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"delete Successfully",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},AddFilter:function(){this.dataForm={positionName:"",positionName_en:"",positionDescription:"",positionDescription_en:"",requirements:"",requirements_en:"",salary:"",salary_en:"",status:"",createAt:new Date,updateAt:new Date,welfare:[],welfare_en:[]},this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.positionName||""==this.dataForm.positionDescription||""==this.dataForm.requirements||""==this.dataForm.salary||""==this.dataForm.status){t.next=9;break}return e=Object(r.a)({},this.dataForm),t.next=5,Object(n.a)("companyRecruitment",e);case 5:200==t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({title:"添加成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({title:"添加失败",message:"edit failly",type:"warning",duration:2e3}),t.next=10;break;case 9:this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.positionName||""==this.dataForm.positionDescription||""==this.dataForm.requirements||""==this.dataForm.salary||""==this.dataForm.status){t.next=10;break}return e={query:{_id:this.dataForm._id},update:Object(r.a)({},this.dataForm)},t.next=6,Object(n.d)("companyRecruitment",e);case 6:200==t.sent.code?(this.dialogFormVisible=!1,this.approveDialog=!1,this.fetchData(),this.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({title:"修改失败",message:"edit failly",type:"warning",duration:2e3}),t.next=11;break;case 10:this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),clearclick:function(){this.tableList=this.tableList1},Search:function(){this.searchReq={},this.positionName?this.searchReq.positionName={$regex:this.positionName}:delete this.searchReq.positionName,this.fetchData()}}},u=c,d=(a("639e"),a("2877")),m=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[t._v("职位名称:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入职位名称"},model:{value:t.positionName,callback:function(e){t.positionName=e},expression:"positionName"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.Search()}}},[t._v("查询搜索\n          ")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("职位列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddFilter}},[t._v("添加职位\n        ")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"职位名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.positionName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"职位福利",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.welfare,(function(e,s){return a("el-tag",{key:s},[t._v("\n            "+t._s(e.label)+"\n          ")])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"职位要求",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.requirements))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"职位薪水",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.salary)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"职位状态",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.status)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑查看\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n          ")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"职位信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"dataForm",staticStyle:{width:"100%"},attrs:{inline:!0,"label-position":"left","label-width":"70px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{required:"",label:"职位名称","label-width":"120"}},[a("el-input",{attrs:{placeholder:"职位名称"},model:{value:t.dataForm.positionName,callback:function(e){t.$set(t.dataForm,"positionName",e)},expression:"dataForm.positionName"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"职位要求","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"职位要求"},model:{value:t.dataForm.requirements,callback:function(e){t.$set(t.dataForm,"requirements",e)},expression:"dataForm.requirements"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{required:"",label:"职位薪水","label-width":"120"}},[a("el-input",{attrs:{placeholder:"职位薪水"},model:{value:t.dataForm.salary,callback:function(e){t.$set(t.dataForm,"salary",e)},expression:"dataForm.salary"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"职位福利","label-width":"120"}},[t._l(t.dataForm.welfare,(function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(e)}}},[t._v("\n                  "+t._s(e.label)+"\n                ")])})),t._v(" "),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{required:"",label:"职位状态","label-width":"120"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},t._l(t.statusList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("英文")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职位名称(name)","label-width":"120"}},[a("el-input",{attrs:{placeholder:"职位名称(name)"},model:{value:t.dataForm.positionName_en,callback:function(e){t.$set(t.dataForm,"positionName_en",e)},expression:"dataForm.positionName_en"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"职位要求(requirement)","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"职位要求(requirement)"},model:{value:t.dataForm.requirements_en,callback:function(e){t.$set(t.dataForm,"requirements_en",e)},expression:"dataForm.requirements_en"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职位薪水(salary)","label-width":"120"}},[a("el-input",{attrs:{placeholder:"职位薪水(salary)"},model:{value:t.dataForm.salary_en,callback:function(e){t.$set(t.dataForm,"salary_en",e)},expression:"dataForm.salary_en"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职位福利(welfare)","label-width":"120"}},[t._l(t.dataForm.welfare_en,(function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleCloseOth(e)}}},[t._v("\n                  "+t._s(e.label)+"\n                ")])})),t._v(" "),t.inputVisible_en?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirmOth},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirmOth(e)}},model:{value:t.inputValue_en,callback:function(e){t.inputValue_en=e},expression:"inputValue_en"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInputOth}},[t._v("+ New Tag")])],2)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职位状态(status)","label-width":"120"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},t._l(t.statusList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1)],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("职位描述")]),t._v(" "),a("WangEditor",{attrs:{value:t.dataForm.positionDescription},on:{"update:value":function(e){return t.$set(t.dataForm,"positionDescription",e)}}}),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("职位描述(Description)")]),t._v(" "),a("WangEditor",{attrs:{value:t.dataForm.positionDescription_en},on:{"update:value":function(e){return t.$set(t.dataForm,"positionDescription_en",e)}}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.editData()}}},[t._v("确定\n      ")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"2d77d515",null);e.default=m.exports},8862:function(t,e,a){},"8cdb":function(t,e,a){"use strict";a.r(e);var s=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pic-404"},[s("img",{staticClass:"pic-404__parent",attrs:{src:a("a36b"),alt:"404"}}),t._v(" "),s("img",{staticClass:"pic-404__child left",attrs:{src:a("26fc"),alt:"404"}}),t._v(" "),s("img",{staticClass:"pic-404__child mid",attrs:{src:a("26fc"),alt:"404"}}),t._v(" "),s("img",{staticClass:"pic-404__child right",attrs:{src:a("26fc"),alt:"404"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bullshit__info"},[t._v("All rights reserved\n        "),a("a",{staticStyle:{color:"#20a0ff"},attrs:{href:"https://wallstreetcn.com",target:"_blank"}},[t._v("wallstreetcn")])])}],r={name:"Page404",computed:{message:function(){return"The webmaster said that you can not enter this page..."}}},i=(a("dd53"),a("2877")),n=Object(i.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wscn-http404-container"},[a("div",{staticClass:"wscn-http404"},[t._m(0),t._v(" "),a("div",{staticClass:"bullshit"},[a("div",{staticClass:"bullshit__oops"},[t._v("OOPS!")]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"bullshit__headline"},[t._v(t._s(t.message))]),t._v(" "),a("div",{staticClass:"bullshit__info"},[t._v("Please check that the URL you entered is correct, or click the button below to return to the homepage.")]),t._v(" "),a("a",{staticClass:"bullshit__return-home",attrs:{href:""}},[t._v("Back to home")])])])])}),s,!1,null,"c095f994",null);e.default=n.exports},"8d38":function(t,e,a){"use strict";a("0fde")},"8d7d":function(t,e,a){"use strict";a.r(e);var s={data:function(){return{isFullscreen:!1}},mounted:function(){var t=this;setTimeout((function(){t.toFullOrExit()}),1e3)},methods:{toFullOrExit:function(){this.isFullscreen=!this.isFullscreen,this.isFullscreen?this.requestFullScreen():this.exitFullscreen()},requestFullScreen:function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()},exitFullscreen:function(){var t=document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()}}},r=s,i=(a("a954"),a("2877")),n=Object(i.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"all"},[s("img",{staticClass:"allimg",attrs:{src:a("0db1")},on:{click:t.toFullOrExit}})])}),[],!1,null,"4acfa77c",null);e.default=n.exports},"8d93":function(t,e,a){},"8e18":function(t,e,a){},"8fae":function(t,e,a){},"8fe3":function(t,e,a){},9026:function(t,e,a){},"90b6":function(t,e,a){"use strict";a.r(e);var s=(a("f576"),a("28a5"),a("2909")),r=(a("5df3"),a("34ef"),a("6762"),a("2fdb"),a("7514"),a("ade3")),i=(a("a481"),a("6b54"),a("5530")),n=a("c7eb"),o=(a("96cf"),a("1da1")),l=(a("ac6a"),a("456d"),a("7f7f"),a("c5f6"),a("7e1e")),c=a("c8d1"),u=a("1146"),d=a.n(u),m=a("7015"),p=a("b728"),f={name:"ExpertDatabase",props:{isSelectMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0},selectedIds:{type:Array,default:function(){return[]}},maxSelect:{type:Number,default:999},checkSelectable:{type:Function,default:null}},dicts:["delivery_method","expert_platform","category","level","brand"],components:{EditDialog:c.default,ZrAddressSelect:p.a},data:function(){return{searchForm:{name:"",mainNickname:"",mainPlatform:"",mainCategory:"",minFollowers:null,maxFollowers:null,area:[],platformName:"",platformId:"",platformNickname:"",platformUrl:"",whatsappAccount:"",agency:"",productPriceMin:null,productPriceMax:null,gpmMin:null,gpmMax:null,sellingMethod:[],followerWomanMin:null,followerWomanMax:null,monthlySalesMin:null,monthlySalesMax:null,monthlySalesAmountMin:null,monthlySalesAmountMax:null,cooperationBrands:[]},showAdvanced:!1,platformOptions:[{value:"抖音",label:"抖音"},{value:"小红书",label:"小红书"},{value:"微博",label:"微博"},{value:"B站",label:"B站"}],tableList:[],total:0,currentPage:1,pageSize:10,listLoading:!0,dialogFormVisible:!1,dialogStatus:"",dataForm:{avatar:"",name:"",phone:"",bio:"",mainPlatform:"",mainNickname:"",mainFollowers:0,mainCategory:"",contactInfo:"",agency:"",averageViews:0,monthlySales:0,monthlySalesAmount:0,followerAgeRange:"",followerMan:0,followerWoman:0,followerInterests:[],followerLocation:[],hotCategoryRatio:[],platforms:[],top3Products:[],sellingMethod:"",productPrice:0,gpm:0,cooperationHistory:[],collaborationCount:0,level:""},detailForm:{cooperationHistory:[]},importDialogVisible:!1,fileList:[],importing:!1,templateHeaders:["平台名称*","平台ID*","平台昵称*","平台链接","粉丝数量","分类","平均互动率","平均播放量","视频平均时长","地区","国家","省份","城市","联系方式","签约机构","WhatsApp账号","电话","粉丝年龄范围","男性粉丝比例","女性粉丝比例","热销品类比","Top3产品","带货方式","最低客单价","最高客单价","GPM"],selection:[],detailDialogVisible:!1}},created:function(){this.fetchData()},methods:Object(r.a)(Object(r.a)({searchData:function(){var t={query:{$and:[]},populate:JSON.stringify([{path:"createBy",select:"nickName"}])};if(this.searchForm.name&&t.query.$and.push({name:{$regex:this.searchForm.name,$options:"i"}}),this.searchForm.platformName&&t.query.$and.push({platformName:{$regex:this.searchForm.platformName,$options:"i"}}),this.searchForm.platformId&&t.query.$and.push({platformId:{$regex:this.searchForm.platformId,$options:"i"}}),this.searchForm.platformNickname&&t.query.$and.push({nickname:{$regex:this.searchForm.platformNickname,$options:"i"}}),this.searchForm.mainCategory&&t.query.$and.push({category:{$regex:this.searchForm.mainCategory,$options:"i"}}),this.searchForm.area&&this.searchForm.area.length>0&&t.query.$and.push({$or:this.searchForm.area.map((function(t){return{area:{$all:t}}}))}),!(null===this.searchForm.minFollowers&&null===this.searchForm.maxFollowers||0===this.searchForm.minFollowers&&0===this.searchForm.maxFollowers)){var e={};null!==this.searchForm.minFollowers&&(e.$gte=this.searchForm.minFollowers),null!==this.searchForm.maxFollowers&&(e.$lte=this.searchForm.maxFollowers),Object.keys(e).length>0&&t.query.$and.push({followers:e})}if(this.searchForm.category&&this.searchForm.category.length>0&&t.query.$and.push({category:{$all:this.searchForm.category}}),this.searchForm.level&&t.query.$and.push({level:{$regex:this.searchForm.level,$options:"i"}}),this.searchForm.platformUrl&&t.query.$and.push({platformUrl:{$regex:this.searchForm.platformUrl,$options:"i"}}),this.searchForm.whatsappAccount&&t.query.$and.push({whatsappAccount:{$regex:this.searchForm.whatsappAccount,$options:"i"}}),this.searchForm.agency&&t.query.$and.push({agency:{$regex:this.searchForm.agency,$options:"i"}}),this.searchForm.level&&t.query.$and.push({level:{$regex:this.searchForm.level,$options:"i"}}),this.searchForm.productPriceMin||this.searchForm.productPriceMax){var a={};this.searchForm.productPriceMin&&(a.$gte=this.searchForm.productPriceMin),this.searchForm.productPriceMax&&(a.$lte=this.searchForm.productPriceMax),Object.keys(a).length>0&&t.query.$and.push({productPrice:a})}if(this.searchForm.gpmMin||this.searchForm.gpmMax){var s={};this.searchForm.gpmMin&&(s.$gte=this.searchForm.gpmMin),this.searchForm.gpmMax&&(s.$lte=this.searchForm.gpmMax),Object.keys(s).length>0&&t.query.$and.push({gpm:s})}if(this.searchForm.sellingMethod&&this.searchForm.sellingMethod.length>0&&t.query.$and.push({sellingMethod:{$all:this.searchForm.sellingMethod}}),null!==this.searchForm.followerWomanMin&&0!==this.searchForm.followerWomanMin||null!==this.searchForm.followerWomanMax&&0!==this.searchForm.followerWomanMax){var r={};null!==this.searchForm.followerWomanMin&&0!==this.searchForm.followerWomanMin&&(r.$gte=this.searchForm.followerWomanMin),null!==this.searchForm.followerWomanMax&&0!==this.searchForm.followerWomanMax&&(r.$lte=this.searchForm.followerWomanMax),Object.keys(r).length>0&&t.query.$and.push({followerWoman:r})}if(null!==this.searchForm.monthlySalesMin&&0!==this.searchForm.monthlySalesMin||null!==this.searchForm.monthlySalesMax&&0!==this.searchForm.monthlySalesMax){var i={};null!==this.searchForm.monthlySalesMin&&0!==this.searchForm.monthlySalesMin&&(i.$gte=this.searchForm.monthlySalesMin),null!==this.searchForm.monthlySalesMax&&0!==this.searchForm.monthlySalesMax&&(i.$lte=this.searchForm.monthlySalesMax),Object.keys(i).length>0&&t.query.$and.push({monthlySales:i})}if(null!==this.searchForm.monthlySalesAmountMin&&0!==this.searchForm.monthlySalesAmountMin||null!==this.searchForm.monthlySalesAmountMax&&0!==this.searchForm.monthlySalesAmountMax){var n={};null!==this.searchForm.monthlySalesAmountMin&&0!==this.searchForm.monthlySalesAmountMin&&(n.$gte=this.searchForm.monthlySalesAmountMin),null!==this.searchForm.monthlySalesAmountMax&&0!==this.searchForm.monthlySalesAmountMax&&(n.$lte=this.searchForm.monthlySalesAmountMax),Object.keys(n).length>0&&t.query.$and.push({monthlySalesAmount:n})}return this.searchForm.cooperationBrands&&this.searchForm.cooperationBrands.length>0&&t.query.$and.push({"cooperationHistory.brandName":{$in:this.searchForm.cooperationBrands}}),t.query.$and.length||delete t.query.$and,t},fetchData:function(){var t=Object(o.a)(Object(n.a)().mark((function t(){var e,a;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e=this.searchData(),t.next=4,Object(l.b)("expert",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),search:function(){this.currentPage=1,this.fetchData()},handleEdit:function(t){this.dialogStatus="update",this.dataForm=Object(i.a)({},t),this.dialogFormVisible=!0},handleSubmit:function(t){"create"===this.dialogStatus?this.createExpert(t):this.updateExpert(t)},handleView:function(t){this.detailDialogVisible=!0,this.detailForm=Object(i.a)(Object(i.a)({},t),{},{cooperationHistory:t.cooperationHistory||[]})},handleDelete:function(t){var e=this;this.$confirm("确认删除达人?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o.a)(Object(n.a)().mark((function a(){return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.c)("expert",{query:{_id:t._id}});case 2:e.$message.success("删除成功"),e.fetchData();case 4:case"end":return a.stop()}}),a)})))).catch((function(){}))},detailDialogClose:function(){this.detailDialogVisible=!1,this.detailForm={}},addExpert:function(){this.dialogStatus="create",this.dataForm={avatar:"",name:"",phone:"",bio:"",mainPlatform:"",mainNickname:"",mainFollowers:0,mainCategory:"",contactInfo:"",area:[],agency:"",averageViews:0,monthlySales:0,monthlySalesAmount:0,followerAgeRange:"",followerMan:0,followerWoman:0,followerInterests:[],followerLocation:[],hotCategoryRatio:[],top3Products:[],platforms:[],sellingMethod:"",productPrice:0,gpm:0,cooperationHistory:[],collaborationCount:0,level:""},this.dialogFormVisible=!0},createExpert:function(){var t=Object(o.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(l.a)("expert",this.dataForm);case 3:200===t.sent.code?(this.$message.success("添加成功"),this.dialogFormVisible=!1,this.fetchData()):this.$message.error("添加失败");case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),updateExpert:function(){var t=Object(o.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.d)("expert",{query:{_id:this.dataForm._id},update:this.dataForm});case 2:200===t.sent.code?(this.$message.success("更新成功"),this.dialogFormVisible=!1,this.fetchData()):this.$message.error("更新失败");case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleAvatarSuccess:function(t,e){this.dataForm.avatar=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},fansNumber:function(t){return t<1e3?t.toString():t<1e4?(t/1e3).toFixed(1)+"k":t<1e6||t<1e7?(t/1e4).toFixed(1)+"w":t<1e8?(t/1e7).toFixed(1)+"千万":(t/1e8).toFixed(1)+"亿"},formatFansNumber:function(t){var e=t.reduce((function(t,e){return t+e.followers}),0);return e<1e3?e.toString():e<1e4?(e/1e3).toFixed(1)+"k":e<1e6||e<1e7?(e/1e4).toFixed(1)+"w":(e/1e7).toFixed(1)+"千万"},formatNumber:function(t){return null==t?"0":t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},toggleAdvanced:function(){this.showAdvanced=!this.showAdvanced},resetForm:function(){this.$refs.searchForm.resetFields(),this.searchForm={name:"",platformName:"",platformId:"",platformNickname:"",platformUrl:"",agency:"",whatsappAccount:"",level:"",category:"",sellingMethod:[],area:[],cooperationBrands:[],minFollowers:null,maxFollowers:null,followerWomanMin:null,followerWomanMax:null,monthlySalesMin:null,monthlySalesMax:null,monthlySalesAmountMin:null,monthlySalesAmountMax:null},this.currentPage=1,this.fetchData()},exportData:function(){var t=Object(o.a)(Object(n.a)().mark((function t(){var e,a,s,i,o,c,u,m,p,f=this;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.$message({message:"正在导出数据,请稍候...",type:"info"}),e=this.$loading({lock:!0,text:"导出中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),(a=this.searchData()).limit=1e6,t.next=7,Object(l.b)("expert",a);case 7:if((s=t.sent).data&&0!==s.data.length){t.next=12;break}return this.$message.warning("没有数据可供导出"),e.close(),t.abrupt("return");case 12:i=Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({avatar:"头像URL",name:"姓名",phone:"电话",bio:"个人简介",platformName:"平台名称",platformId:"平台ID",nickname:"平台昵称",followers:"粉丝数量",category:"分类",level:"达人等级",sellingMethod:"带货方式",averageEngagement:"平均互动率",averageViews:"平均播放量",videoDuration:"视频平均时长",country:"国家",region:"地区",city:"城市",contactInfo:"联系式",agency:"签约机构",followerAgeRange:"粉丝年龄范围",followerMan:"男性粉丝比例",followerWoman:"女性粉丝比例",followerInterests:"粉丝兴趣",followerLocation:"粉丝地理分布",hotCategoryRatio:"热销品类占比",top3Products:"Top3产品"},"sellingMethod","带货方式"),"productPrice","商品客单价"),"gpm","GPM"),"monthlySales","月销量"),"monthlySalesAmount","月销售额"),"collaborationCount","合作次数"),"createAt","创建时间"),"updateAt","更新时间"),o=s.data.map((function(t){var e={};return Object.keys(i).forEach((function(a){var s=t[a];switch(a){case"followers":case"averageViews":s=f.fansNumber(s);break;case"followerMan":case"followerWoman":case"hotCategoryRatio":case"averageEngagement":s=s?s+"%":"0%";break;case"productPrice":s=s?"¥"+s:"未设置";break;case"followerInterests":case"top3Products":case"sellingMethod":s=Array.isArray(s)?s.join("、"):"";break;case"followerLocation":s=Array.isArray(s)?s.map((function(t){return t.join("-")})).join("、"):"";break;case"createAt":case"updateAt":s=s?new Date(s).toLocaleString():""}e[i[a]]=s||"未设置"})),t.cooperationHistory&&t.cooperationHistory.length>0&&t.cooperationHistory.forEach((function(t,a){var s="合作记录".concat(a+1,"_");e[s+"品牌"]=t.brands||"",e[s+"视频/直播"]=t.videos||"",e[s+"评分"]=t.score||"",e[s+"销售额"]=t.sales?"¥"+f.formatNumber(t.sales):"",e[s+"备注"]=t.remark||""})),e})),c=d.a.utils.book_new(),u=d.a.utils.json_to_sheet(o),m=[],Object.keys(o[0]).forEach((function(t){m.push({wch:Math.max(2*t.length,15)})})),u["!cols"]=m,d.a.utils.book_append_sheet(c,u,"达人数据"),p="达人数据_".concat((new Date).toLocaleDateString(),".xlsx"),d.a.writeFile(c,p),e.close(),this.$message.success("导出成功!"),t.next=31;break;case 26:t.prev=26,t.t0=t.catch(0),this.$message.error("导出失败: "+(t.t0.message||"未知错误")),loading.close();case 31:case"end":return t.stop()}}),t,this,[[0,26]])})));return function(){return t.apply(this,arguments)}}(),getEngagementClass:function(t){return t?t>=5?"text-success":t>=3?"text-warning":"text-danger":""},formatArea:function(t){if(!Array.isArray(t)||0===t.length)return"未填写地区信息";for(var e=[],a=m,s=function(){var s=t[r],i=a.find((function(t){return t.value===s}));i&&(e.push(i.label),a=i.children||[])},r=0;r<t.length;r++)s();return e.join(" / ")},hasPermission:function(t){var e=this.$store.state.user;return!!this.$store.getters.roles.label.includes("Admin")||t.createBy===e.id},getGPMClass:function(t){return t?t>=1e3?"text-success":t>=500?"text-warning":"text-danger":""},showImportDialog:function(){this.importDialogVisible=!0,this.fileList=[]},handleFileChange:function(t){this.fileList=[t]},importData:function(){var t=Object(o.a)(Object(n.a)().mark((function t(){var e,a,r=this;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.fileList.length){t.next=3;break}return this.$message.warning("请先选择要导入的文件"),t.abrupt("return");case 3:try{this.importing=!0,e=this.fileList[0].raw,(a=new FileReader).onload=function(){var t=Object(o.a)(Object(n.a)().mark((function t(e){var a,i,o,c,u,m,p,f,h,v,b,g,_,y,k;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=new Uint8Array(e.target.result),i=d.a.read(a,{type:"array"}),o=i.SheetNames[0],c=i.Sheets[o],u=d.a.utils.sheet_to_json(c),m=u.map((function(t){return r.processImportRow(t)})),p=m.filter((function(t){return!t.platformName||!t.platformId||!t.nickname})),!(p.length>0)){t.next=10;break}return r.$message.error("存在数据缺少必填字段（平台名称、平台ID、平台昵称），请检查"),t.abrupt("return");case 10:if(f=m.map((function(t){return t.platformId})),h=f.filter((function(t,e){return f.indexOf(t)!==e})),!(h.length>0)){t.next=15;break}return r.$message.error("Excel中存在重复的平台ID: ".concat(h.join(", "))),t.abrupt("return");case 15:return t.prev=15,t.next=18,Object(l.b)("expert",{query:{platformId:{$in:f}},select:"platformId platformName nickname"});case 18:if(!((v=t.sent).data&&v.data.length>0)){t.next=40;break}return b=v.data.map((function(t){return{platformId:t.platformId,platformName:t.platformName,nickname:t.nickname}})),t.next=23,r.$confirm("以下平台ID的达人已存在，是否更新？\n".concat(b.map((function(t){return"平台ID: ".concat(t.platformId,", 平台: ").concat(t.platformName,", 昵称: ").concat(t.nickname)})).join("\n")),"确认更新",{confirmButtonText:"更新",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).catch((function(){return!1}));case 23:if(t.sent){t.next=27;break}return r.$message.info("已取消导入"),t.abrupt("return");case 27:return g=v.data.map((function(t){return t.platformId})),_=[],y=[],m.forEach((function(t){g.includes(t.platformId)?y.push(t):_.push(t)})),t.next=36,Promise.all([_.length>0?Object(l.a)("expert",_):Promise.resolve()].concat(Object(s.a)(y.map((function(t){return Object(l.d)("expert",{query:{platformId:t.platformId},update:t})})))));case 36:t.sent,r.$message.success("导入完成！新增: ".concat(_.length,"条, 更新: ").concat(y.length,"条")),t.next=45;break;case 40:return k=Array.isArray(m)?m:[m],t.next=44,Object(l.a)("expert",k);case 44:r.$message.success("导入完成！新增: ".concat(k.length,"条"));case 45:r.importDialogVisible=!1,r.fetchData(),t.next=53;break;case 49:t.prev=49,t.t0=t.catch(15),r.$message.error("导入失败："+(t.t0.message||"未知错误"));case 53:case"end":return t.stop()}}),t,null,[[15,49]])})));return function(e){return t.apply(this,arguments)}}(),a.readAsArrayBuffer(e)}catch(t){this.$message.error("处理文件时出错："+(t.message||"未知错误"))}finally{this.importing=!1}case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),processImportRow:function(t){var e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"、";return t?Array.isArray(t)?t:String(t).split(e).filter(Boolean):[]};return{platformName:t["平台名称*"]||"",platformId:t["平台ID*"]?String(t["平台ID*"]).trim():"",platformUrl:t["平台链接"]||"",nickname:t["平台昵称*"]||"",followers:this.parseNumber(t["粉丝数量"]),category:e(t["分类"]),averageEngagement:this.parseNumber(t["平均互动率"]),averageViews:this.parseNumber(t["平均播放量"]),videoDuration:this.parseNumber(t["视频平均时长"]),area:e(t["地区"]),country:t["国家"]||"",region:t["省份"]||"",city:t["城市"]||"",contactInfo:t["联系方式"]||"",agency:t["签约机构"]||"",whatsappAccount:t["WhatsApp账号"]||"",phone:t["电话"]||"",followerAgeRange:t["粉丝年龄范围"]||"",followerMan:this.parseNumber(t["男性粉丝比例"]),followerWoman:this.parseNumber(t["女性粉丝比例"]),followerInterests:e(t["粉丝兴趣"]),followerLocation:e(t["粉丝地理位置"]).map((function(t){return"string"==typeof t?t.split("-"):[t]})),hotCategoryRatio:e(t["热销品类占比"]),top3Products:e(t["Top3产品"]),sellingMethod:e(t["带货方式"]),productPriceMin:this.parseNumber(t["最低客单价"]),productPriceMax:this.parseNumber(t["最高客单价"]),gpm:this.parseNumber(t.GPM),collaborationCount:0,createBy:this.$store.state.user.id,updateBy:this.$store.state.user.id,createAt:new Date,updateAt:new Date}},parseNumber:function(t){if(!t)return 0;var e=Number(t.toString().replace(/[^0-9.-]/g,""));return isNaN(e)?0:e},batchImportExperts:function(){var t=Object(o.a)(Object(n.a)().mark((function t(e){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.a)("expert",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),downloadTemplate:function(){var t=[this.templateHeaders.reduce((function(t,e){return t[e]="",t}),{})],e=d.a.utils.book_new(),a=d.a.utils.json_to_sheet(t,{header:this.templateHeaders}),s=this.templateHeaders.map((function(t){return{wch:Math.max(2*t.length,15)}}));a["!cols"]=s,d.a.utils.book_append_sheet(e,a,"达人数据模板"),d.a.writeFile(e,"达人数据导入模板.xlsx")},handleSelectionChange:function(t){this.isSelectMode&&(this.selection=t,this.$emit("selection-change",t))},handleSelectable:function(t){return!(this.checkSelectable&&!this.checkSelectable(t))&&(this.multiple?this.selection.length<this.maxSelect||this.selection.includes(t):0===this.selection.length||this.selection.includes(t))},getSelectedExperts:function(){return this.selection},clearSelection:function(){this.$refs.baseTable&&this.$refs.baseTable.$refs.table&&(this.$refs.baseTable.$refs.table.clearSelection(),this.selection=[])},setSelection:function(t){var e=this;this.clearSelection(),this.$refs.baseTable&&this.$refs.baseTable.$refs.table&&t.forEach((function(t){e.$refs.baseTable.$refs.table.toggleRowSelection(t,!0)}))},formatDate:function(t){if(!t)return"暂无数据";var e=new Date(t);if(isNaN(e.getTime()))return"无效日期";var a=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(r," ").concat(i,":").concat(n)}},"formatNumber",(function(t){return t||0===t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"})),"openUrl",(function(t){t&&window.open(t,"_blank")})),watch:{selectedIds:{immediate:!0,handler:function(t){if(this.isSelectMode&&t&&t.length){var e=this.tableList.filter((function(e){return t.includes(e._id)}));this.setSelection(e)}}}}},h=f,v=(a("23e2"),a("2877")),b=Object(v.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("筛选搜索")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.toggleAdvanced}},[t._v("\n        "+t._s(t.showAdvanced?"收起":"展开")+"高级搜索\n      ")])],1),t._v(" "),a("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{model:t.searchForm}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"达人姓名"}},[a("el-input",{attrs:{placeholder:"请输入达人姓名",clearable:""},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合作平台"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择平台",clearable:""},model:{value:t.searchForm.platformName,callback:function(e){t.$set(t.searchForm,"platformName",e)},expression:"searchForm.platformName"}},t._l(t.dict.type.expert_platform,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"平台ID"}},[a("el-input",{attrs:{placeholder:"请输入平台ID",clearable:""},model:{value:t.searchForm.platformId,callback:function(e){t.$set(t.searchForm,"platformId",e)},expression:"searchForm.platformId"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"平台昵称"}},[a("el-input",{attrs:{placeholder:"请输入平台昵称",clearable:""},model:{value:t.searchForm.platformNickname,callback:function(e){t.$set(t.searchForm,"platformNickname",e)},expression:"searchForm.platformNickname"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"平台链接"}},[a("el-input",{attrs:{placeholder:"请输入平台链接",clearable:""},model:{value:t.searchForm.platformUrl,callback:function(e){t.$set(t.searchForm,"platformUrl",e)},expression:"searchForm.platformUrl"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"签约机构"}},[a("el-input",{attrs:{placeholder:"请输入签约机构",clearable:""},model:{value:t.searchForm.agency,callback:function(e){t.$set(t.searchForm,"agency",e)},expression:"searchForm.agency"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"达人等级"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择达人等级",clearable:""},model:{value:t.searchForm.level,callback:function(e){t.$set(t.searchForm,"level",e)},expression:"searchForm.level"}},t._l(t.dict.type.level,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"WhatsApp"}},[a("el-input",{attrs:{placeholder:"请输入WhatsApp账号",clearable:""},model:{value:t.searchForm.whatsappAccount,callback:function(e){t.$set(t.searchForm,"whatsappAccount",e)},expression:"searchForm.whatsappAccount"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"达人分类"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择达人分类",clearable:""},model:{value:t.searchForm.category,callback:function(e){t.$set(t.searchForm,"category",e)},expression:"searchForm.category"}},t._l(t.dict.type.category,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"带货方式"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择带货方式"},model:{value:t.searchForm.sellingMethod,callback:function(e){t.$set(t.searchForm,"sellingMethod",e)},expression:"searchForm.sellingMethod"}},t._l(t.dict.type.delivery_method,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"国家"}},[a("ZrAddressSelect",{attrs:{checkStrictly:!0,isMultiple:!0},model:{value:t.searchForm.area,callback:function(e){t.$set(t.searchForm,"area",e)},expression:"searchForm.area"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合作品牌"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",clearable:"",placeholder:"请选择或者输入合作品牌"},model:{value:t.searchForm.cooperationBrands,callback:function(e){t.$set(t.searchForm,"cooperationBrands",e)},expression:"searchForm.cooperationBrands"}},t._l(t.dict.type.brand,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdvanced,expression:"showAdvanced"}]},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"粉丝数范围"}},[a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"最小值"},model:{value:t.searchForm.minFollowers,callback:function(e){t.$set(t.searchForm,"minFollowers",e)},expression:"searchForm.minFollowers"}}),t._v(" "),a("span",{staticStyle:{margin:"0 10px"}},[t._v("-")]),t._v(" "),a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"最大值"},model:{value:t.searchForm.maxFollowers,callback:function(e){t.$set(t.searchForm,"maxFollowers",e)},expression:"searchForm.maxFollowers"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"女性占比范围"}},[a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,max:100,placeholder:"最小值"},model:{value:t.searchForm.followerWomanMin,callback:function(e){t.$set(t.searchForm,"followerWomanMin",e)},expression:"searchForm.followerWomanMin"}}),t._v(" "),a("span",{staticStyle:{margin:"0 10px"}},[t._v("-")]),t._v(" "),a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,max:100,placeholder:"最大值"},model:{value:t.searchForm.followerWomanMax,callback:function(e){t.$set(t.searchForm,"followerWomanMax",e)},expression:"searchForm.followerWomanMax"}})],1)],1)],1)],1)]),t._v(" "),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdvanced,expression:"showAdvanced"}]},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"月销量范围"}},[a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"最小值"},model:{value:t.searchForm.monthlySalesMin,callback:function(e){t.$set(t.searchForm,"monthlySalesMin",e)},expression:"searchForm.monthlySalesMin"}}),t._v(" "),a("span",{staticStyle:{margin:"0 10px"}},[t._v("-")]),t._v(" "),a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"最大值"},model:{value:t.searchForm.monthlySalesMax,callback:function(e){t.$set(t.searchForm,"monthlySalesMax",e)},expression:"searchForm.monthlySalesMax"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"月销售额范围"}},[a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"最小值"},model:{value:t.searchForm.monthlySalesAmountMin,callback:function(e){t.$set(t.searchForm,"monthlySalesAmountMin",e)},expression:"searchForm.monthlySalesAmountMin"}}),t._v(" "),a("span",{staticStyle:{margin:"0 10px"}},[t._v("-")]),t._v(" "),a("el-input-number",{staticStyle:{width:"45%"},attrs:{min:0,placeholder:"最大值"},model:{value:t.searchForm.monthlySalesAmountMax,callback:function(e){t.$set(t.searchForm,"monthlySalesAmountMax",e)},expression:"searchForm.monthlySalesAmountMax"}})],1)],1)],1)],1)]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询搜索")]),t._v(" "),a("el-button",{on:{click:t.resetForm}},[t._v("重置")]),t._v(" "),t.isSelectMode?t._e():[a("el-button",{attrs:{type:"success"},on:{click:t.exportData}},[t._v("导出数据")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:t.showImportDialog}},[t._v("导入数据")]),t._v(" "),a("el-button",{attrs:{type:"info"},on:{click:t.downloadTemplate}},[t._v("下载模板")])]],2)],1)],1),t._v(" "),t.isSelectMode?t._e():a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("达人列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.addExpert}},[t._v("添加达人")])],1)])]),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{"selection-change":t.handleSelectionChange,handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[t.isSelectMode?a("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.handleSelectable}}):t._e(),t._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"expert-expand",attrs:{"label-position":"left",inline:""}},[a("el-row",{staticClass:"expand-section"},[a("div",{staticClass:"section-title"},[t._v("粉丝画像")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"粉丝年龄"}},[a("span",[t._v(t._s(e.row.followerAgeRange||"暂无数据"))])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"性别比例"}},[a("span",[t._v("男: "+t._s(e.row.followerMan)+"% / 女: "+t._s(e.row.followerWoman)+"%")])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"粉丝兴趣"}},t._l(e.row.followerInterests,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)],1)],1),t._v(" "),a("el-row",{staticClass:"expand-section"},[a("div",{staticClass:"section-title"},[t._v("商业数据")]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"热销品类占比"}},[a("span",[t._v(t._s(e.row.hotCategoryRatio)+"%")])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客单价"}},[a("span",[t._v("¥"+t._s(e.row.productPrice||0))])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"GPM"}},[a("span",[t._v(t._s(e.row.gpm||0))])])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"带货方式"}},t._l(e.row.sellingMethod,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)],1)],1),t._v(" "),a("el-row",{staticClass:"expand-section"},[a("div",{staticClass:"section-title"},[t._v("经纪人信息")]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"经纪人"}},[a("span",[t._v(t._s(e.row.createBy&&e.row.createBy.nickName||"暂无数据"))])])],1)],1),t._v(" "),e.row.cooperationHistory&&e.row.cooperationHistory.length?a("el-row",{staticClass:"expand-section"},[a("div",{staticClass:"section-title"},[t._v("历史合作记录")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.cooperationHistory,size:"mini",border:""}},[a("el-table-column",{attrs:{prop:"brands",label:"合作品牌",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"videos",label:"视频/直播",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"score",label:"评分",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sales",label:"销售额",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    ¥"+t._s(t.formatNumber(e.row.sales))+"\n                  ")]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1)],1):t._e()],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"平台ID",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"info"}},[t._v(t._s(e.row.platformId))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"昵称",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.nickname)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"平台",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.platformName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分类",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.category,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n            "+t._s(e)+"\n          ")])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"带货方式",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.sellingMethod,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[t._v("\n            "+t._s(e)+"\n          ")])}))}}])}),t._v(" "),a("el-table-column",{attrs:{label:"签约机构",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.agency?a("span",[a("i",{staticClass:"el-icon-office-building"}),t._v(" "+t._s(e.row.agency)+"\n          ")]):a("span",[t._v("-")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"经纪人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.createBy&&e.row.createBy.nickName||"暂无数据"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"达人等级",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"warning"}},[t._v(t._s(e.row.level))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"粉丝数",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.fansNumber(e.row.followers))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"女粉占比",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.followerWoman||0)+"%")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"互动率",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.getEngagementClass(e.row.averageEngagement)},[t._v("\n            "+t._s(e.row.averageEngagement)+"%\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"平均播放",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.fansNumber(e.row.averageViews))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"月销量",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.monthlySales||0)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"月销售额",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.monthlySalesAmount||0)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"地区",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.area?a("div",[t._v("\n            "+t._s(t.formatArea(e.row.area))+"\n          ")]):a("div",[t._v("未填写地区信息")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"平台链接",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.platformUrl?a("el-link",{attrs:{type:"primary",href:e.row.platformUrl,target:"_blank"}},[a("i",{staticClass:"el-icon-link"}),t._v(" 访问\n          ")]):a("span",[t._v("-")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"WhatsApp",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.whatsappAccount?a("span",[a("i",{staticClass:"el-icon-chat-dot-square"}),t._v(" "+t._s(e.row.whatsappAccount)+"\n          ")]):a("span",[t._v("-")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"客单价",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.productPriceMin||e.row.productPriceMax?[t._v("\n            ¥"+t._s(e.row.productPriceMin||0)+" - ¥"+t._s(e.row.productPriceMax||0)+"\n          ")]:a("span",[t._v("-")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"GPM",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.getGPMClass(e.row.gpm)},[t._v("\n            "+t._s(e.row.gpm||0)+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合作次数",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("\n            "+t._s(e.row.collaborationCount||0)+"\n          ")])]}}])}),t._v(" "),t.isSelectMode?t._e():a("el-table-column",{attrs:{align:"center",label:"操作",width:"180",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleView(s)}}},[t._v("查看详情")]),t._v(" "),t.hasPermission(s)?[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除")])]:t._e()]]}}],null,!1,397326986)})],1)],2),t._v(" "),a("edit-dialog",{attrs:{dialogFormVisible:t.dialogFormVisible,dialogStatus:t.dialogStatus,dataForm:t.dataForm},on:{"update:dialogFormVisible":function(e){t.dialogFormVisible=e},"update:dialog-form-visible":function(e){t.dialogFormVisible=e},submit:t.handleSubmit}}),t._v(" "),a("el-dialog",{attrs:{title:"达人详情",visible:t.detailDialogVisible,width:"80%","custom-class":"modern-expert-dialog"},on:{"update:visible":function(e){t.detailDialogVisible=e},close:t.detailDialogClose}},[a("div",{staticClass:"expert-detail-container"},[a("el-card",{staticClass:"detail-card account-info"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("i",{staticClass:"el-icon-user"}),t._v(" "),a("span",[t._v("账号信息")])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[t._v("基础信息")]),t._v(" "),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("所属平台")]),t._v(" "),a("el-tag",{attrs:{type:"success",effect:"dark"}},[t._v(t._s(t.detailForm.platformName))])],1),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("平台ID")]),t._v(" "),a("el-tag",{attrs:{type:"info",effect:"plain"}},[t._v(t._s(t.detailForm.platformId))])],1),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("平台昵称")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v(t._s(t.detailForm.nickname))])])]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("账号链接")]),t._v(" "),t.detailForm.platformUrl?a("el-link",{attrs:{type:"primary",href:t.detailForm.platformUrl,target:"_blank"}},[a("i",{staticClass:"el-icon-link"}),t._v(" 访问主页\n                ")]):a("span",{staticClass:"empty-value"},[t._v("暂无链接")])],1),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("达人等级")]),t._v(" "),a("el-tag",{staticClass:"level-tag",attrs:{type:"warning",effect:"dark"}},[t._v(t._s(t.detailForm.level))])],1),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("经纪人")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.detailForm.createBy&&t.detailForm.createBy.nickName||"暂无"))])])]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item full-width"},[a("span",{staticClass:"label"},[t._v("账号分类")]),t._v(" "),a("div",{staticClass:"tags-container"},t._l(t.detailForm.category,(function(e){return a("el-tag",{key:e,staticClass:"category-tag",attrs:{size:"small",effect:"light"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)])])])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[t._v("联系方式")]),t._v(" "),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("电话")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.detailForm.phone||"暂无"))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("WhatsApp")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.detailForm.whatsappAccount||"暂无"))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("签约机构")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.detailForm.agency||"暂无"))])])]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item full-width"},[a("span",{staticClass:"label"},[t._v("其他联系方式")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.detailForm.contactInfo||"暂无"))])])])])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[t._v("平台数据")]),t._v(" "),a("div",{staticClass:"stats-grid"},[a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-value"},[t._v(t._s(t.fansNumber(t.detailForm.followers)))]),t._v(" "),a("div",{staticClass:"stat-label"},[t._v("粉丝数量")])]),t._v(" "),a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-value",class:t.getEngagementClass(t.detailForm.averageEngagement)},[t._v("\n                "+t._s(t.detailForm.averageEngagement)+"%\n              ")]),t._v(" "),a("div",{staticClass:"stat-label"},[t._v("平均互动率")])]),t._v(" "),a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-value"},[t._v(t._s(t.fansNumber(t.detailForm.averageViews)))]),t._v(" "),a("div",{staticClass:"stat-label"},[t._v("平均播放量")])]),t._v(" "),a("div",{staticClass:"stat-card"},[a("div",{staticClass:"stat-value"},[t._v("¥"+t._s(t.formatNumber(t.detailForm.monthlySalesAmount)))]),t._v(" "),a("div",{staticClass:"stat-label"},[t._v("月销售额")])])])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[t._v("粉丝画像")]),t._v(" "),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("男性粉丝")]),t._v(" "),a("div",{staticClass:"percentage-bar"},[a("div",{staticClass:"percentage-value"},[t._v(t._s(t.detailForm.followerMan)+"%")]),t._v(" "),a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"progress-inner male",style:{width:t.detailForm.followerMan+"%"}})])])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("女性粉丝")]),t._v(" "),a("div",{staticClass:"percentage-bar"},[a("div",{staticClass:"percentage-value"},[t._v(t._s(t.detailForm.followerWoman)+"%")]),t._v(" "),a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"progress-inner female",style:{width:t.detailForm.followerWoman+"%"}})])])])])])])]),t._v(" "),a("el-card",{staticClass:"detail-card sales-history"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("i",{staticClass:"el-icon-shopping-cart-full"}),t._v(" "),a("span",[t._v("带货数据与合作历史")])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-data-line"}),t._v(" "),a("span",[t._v("带货数据")])]),t._v(" "),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("热销品类占比")]),t._v(" "),a("div",{staticClass:"tags-container"},t._l(t.detailForm.hotCategoryRatio,(function(e){return a("el-tag",{key:e,staticClass:"category-tag",attrs:{size:"small",effect:"light"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("带货方式")]),t._v(" "),a("div",{staticClass:"tags-container"},t._l(t.detailForm.sellingMethod,(function(e){return a("el-tag",{key:e,attrs:{type:"success",effect:"light",size:"small"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)])]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("客单价区间")]),t._v(" "),a("span",{staticClass:"value"},[t._v("¥"+t._s(t.detailForm.productPriceMin||0)+" - ¥"+t._s(t.detailForm.productPriceMax||0))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("GPM")]),t._v(" "),a("span",{staticClass:"value",class:t.getGPMClass(t.detailForm.gpm)},[t._v(t._s(t.detailForm.gpm||0))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("月销量")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v(t._s(t.detailForm.monthlySales||0))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("月销售额")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v("¥"+t._s(t.detailForm.monthlySalesAmount||0))])])]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item full-width"},[a("span",{staticClass:"label"},[t._v("带货TOP3产品")]),t._v(" "),a("div",{staticClass:"tags-container"},t._l(t.detailForm.top3Products,(function(e){return a("el-tag",{key:e,attrs:{type:"warning",effect:"light",size:"small"}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),1)])])])]),t._v(" "),a("div",{staticClass:"section-block"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-time"}),t._v(" "),a("span",[t._v("合作历史")]),t._v(" "),a("span",{staticClass:"cooperation-count"},[t._v("共"+t._s((t.detailForm.cooperationHistory||[]).length)+"次合作")])]),t._v(" "),a("el-table",{staticClass:"history-table",staticStyle:{width:"100%"},attrs:{data:t.detailForm.cooperationHistory||[],"max-height":400}},[a("el-table-column",{attrs:{label:"品牌信息",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"brand-info"},[a("div",{staticClass:"brand-name"},[t._v(t._s(e.row.brandName))]),t._v(" "),a("el-tag",{attrs:{size:"mini",effect:"plain"}},[t._v(t._s(e.row.brandCategory))])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"视频数据",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"video-stats"},[a("div",{staticClass:"stat-item"},[a("i",{staticClass:"el-icon-video-camera"}),t._v(" "),e.row.videoUrl?a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.openUrl(e.row.videoUrl)}}},[t._v("\n                      查看视频\n                    ")]):a("span",[t._v("暂无视频")])],1),t._v(" "),a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("发布时间：")]),t._v(" "),a("span",[t._v(t._s(t.formatDate(e.row.videoPublishTime)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("GMV：")]),t._v(" "),a("span",{staticClass:"highlight"},[t._v("¥"+t._s(t.formatNumber(e.row.videoGMV)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("订单数：")]),t._v(" "),a("span",[t._v(t._s(t.formatNumber(e.row.videoOrders)))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"互动数据",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"interaction-stats"},[a("div",{staticClass:"stat-row"},[a("i",{staticClass:"el-icon-view"}),t._v(" "),a("span",[t._v(t._s(t.formatNumber(e.row.videoViews)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",[t._v(t._s(t.formatNumber(e.row.videoLikes)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),a("span",[t._v(t._s(t.formatNumber(e.row.videoComments)))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"直播数据",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"live-stats"},[a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("直播时间：")]),t._v(" "),a("span",[t._v(t._s(t.formatDate(e.row.liveTime)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("GMV：")]),t._v(" "),a("span",{staticClass:"highlight"},[t._v("¥"+t._s(t.formatNumber(e.row.liveGMV)))])]),t._v(" "),a("div",{staticClass:"stat-row"},[a("span",{staticClass:"stat-label"},[t._v("订单数：")]),t._v(" "),a("span",[t._v(t._s(t.formatNumber(e.row.liveOrders)))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"评价",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"evaluation"},[a("el-rate",{attrs:{disabled:"","show-score":""},model:{value:e.row.score,callback:function(a){t.$set(e.row,"score",a)},expression:"scope.row.score"}}),t._v(" "),e.row.remark?a("div",{staticClass:"remark"},[a("i",{staticClass:"el-icon-tickets"}),t._v("\n                    "+t._s(e.row.remark)+"\n                  ")]):t._e()],1)]}}])})],1)],1)])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"导入达人数据",visible:t.importDialogVisible,width:"500px"},on:{"update:visible":function(e){t.importDialogVisible=e}}},[a("div",{staticClass:"import-dialog"},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"#","auto-upload":!1,"on-change":t.handleFileChange,"file-list":t.fileList,accept:".xlsx,.xls"}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传 xlsx/xls 文件")])])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.importDialogVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.importing},on:{click:t.importData}},[t._v("开始导入")])],1)])],1)}),[],!1,null,"1a4e3556",null);e.default=b.exports},9878:function(t,e,a){"use strict";a("2710")},"991f":function(t,e,a){},"9ed6":function(t,e,a){"use strict";a.r(e);var s=(a("ac6a"),a("456d"),a("c7eb")),r=(a("96cf"),a("1da1")),i=a("61f7"),n={name:"Login",directives:{focus:{inserted:function(t){t.querySelector("input").focus()}}},watch:{$route:{handler:function(t){var e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},data:function(){return{title:"达人管理系统",loginForm:{userName:"",password:""},loginRules:{userName:[{required:!0,trigger:"blur",validator:function(t,e,a){""==e?a(new Error("用户名不能为空")):a()}}],password:[{required:!0,trigger:"blur",validator:function(t,e,a){Object(i.b)(e)?a():a(new Error("密码不能少于6位"))}}]},loading:!1,passwordType:"password",redirect:void 0}},created:function(){},methods:{showPwd:function(){var t=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){t.$refs.password.focus()}))},handleLogin:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){var e=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$refs.loginForm.validate((function(t){if(!t)return!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.$router.push({path:e.redirect||"/"}),e.loading=!1})).catch((function(t){e.loading=!1}))}));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),getOtherQuery:function(t){return Object.keys(t).reduce((function(e,a){return"redirect"!==a&&(e[a]=t[a]),e}),{})}}},o=n,l=(a("bf8f"),a("2877")),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"login-logo-bysj"}),t._v(" "),a("el-row",[a("el-col",{attrs:{lg:8,md:24,sm:24,xl:8,xs:24}},[a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules,"auto-complete":"off","label-position":"left"}},[a("div",{staticClass:"title"},[t._v("\n          hello !\n        ")]),t._v(" "),a("div",{staticClass:"title-tips"},[t._v("欢迎来到"+t._s(t.title)+"！")]),t._v(" "),a("el-form-item",{staticClass:"login-form-admin",staticStyle:{"margin-top":"49px"},attrs:{prop:"userName"}},[a("span",{staticClass:"svg-container svg-container-admin"},[a("byui-icon",{attrs:{icon:["fas","user"]}})],1),t._v(" "),a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{"auto-complete":"off",placeholder:"请输入用户名",tabindex:"1",type:"text"},model:{value:t.loginForm.userName,callback:function(e){t.$set(t.loginForm,"userName","string"==typeof e?e.trim():e)},expression:"loginForm.userName"}})],1),t._v(" "),a("el-form-item",{staticClass:"login-form-pass",attrs:{prop:"password"}},[a("span",{staticClass:"svg-container svg-container-pass"},[a("byui-icon",{attrs:{icon:["fas","lock"]}})],1),t._v(" "),a("el-input",{key:t.passwordType,ref:"password",attrs:{type:t.passwordType,"auto-complete":"on",placeholder:"请输入密码",tabindex:"2"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password","string"==typeof e?e.trim():e)},expression:"loginForm.password"}}),t._v(" "),"password"===t.passwordType?a("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[a("byui-icon",{attrs:{icon:["fas","eye-slash"]}})],1):a("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[a("byui-icon",{attrs:{icon:["fas","eye"]}})],1)],1),t._v(" "),a("el-button",{staticClass:"login-btn",attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("登录\n        ")])],1)],1)],1)],1)}),[],!1,null,"419d609f",null);e.default=c.exports},a2a3:function(t,e,a){"use strict";a.r(e);var s=a("ade3"),r=a("c7eb"),i=(a("96cf"),a("1da1")),n=a("1a2d"),o={components:{PasswordDialog:a("3946").default},data:function(){var t=this;return{dialogVisible:!1,uploadAvatarUrl:"https://macaojob.cn/darenSever/api/v1/upload/avatar",form:{avatar:"",nickName:"",password:"",newPassword:"",newPassword2:""},rules:{nickName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请设置新密码",trigger:"blur"},{validator:function(e,a,s){a===t.form.password?s(new Error("新密码不能与原密码相同!")):s()},trigger:"blur"}],newPassword2:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:function(e,a,s){a!==t.form.newPassword?s(new Error("与新密码不一致!")):s()},trigger:"blur"}]},uploadHeaders:{Authorization:"Bearer "+this.$store.state.user.token},uploadData:{type:"avatar"}}},methods:Object(s.a)({show:function(){this.dialogVisible=!0,this.getUserInfo()},getUserInfo:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$store.state.user.id,a={query:{_id:e}},t.next=5,Object(n.a)(a);case 5:(s=t.sent).data&&s.data[0]&&(this.form.nickName=s.data[0].nickName,this.form.avatar=s.data[0].avatar);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleAvatarSuccess:function(t,e){200===t.code?(this.form.avatar="https://macaojob.cn/darenSever/"+t.data.url,this.$message.success("头像上传成功")):this.$message.error(t.msg||"头像上传失败")},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2;return e?!!a||(this.$message.error("上传头像图片大小不能超过 2MB!"),!1):(this.$message.error("上传头像图片只能是 JPG 或 PNG 格式!"),!1)},handleCancel:function(){this.dialogVisible=!1,this.$refs.form.resetFields()},showPasswordDialog:function(){this.$refs.passwordDialog.show()},onSubmit:function(){var t=Object(i.a)(Object(r.a)().mark((function t(e){var a=this;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$refs[e].validate(function(){var t=Object(i.a)(Object(r.a)().mark((function t(e){var s,i;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=9;break}return s=a.$store.state.user.id,i={query:{_id:s},update:{$set:{nickName:a.form.nickName,avatar:a.form.avatar}}},t.next=5,Object(n.c)(i);case 5:200===t.sent.code?(a.$message.success("修改成功！"),a.dialogVisible=!1,a.$router.go(0)):a.$message.error("修改失败，请重试!"),t.next=11;break;case 9:return a.$message.error("请正确填写格式"),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),logout:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("user/logout");case 2:this.$router.push("/login");case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},"showPasswordDialog",(function(){this.$refs.passwordDialog.show()}))},l=o,c=(a("bf1f"),a("2877")),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"个人信息修改",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadAvatarUrl,headers:t.uploadHeaders,name:"avatar",data:t.uploadData,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.avatar?a("img",{staticClass:"avatar",attrs:{src:t.form.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"nickName"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.form.nickName,callback:function(e){t.$set(t.form,"nickName",e)},expression:"form.nickName"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning"},on:{click:t.showPasswordDialog}},[t._v("修改密码")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("保存信息")]),t._v(" "),a("el-button",{on:{click:t.handleCancel}},[t._v("取消")])],1)],1),t._v(" "),a("password-dialog",{ref:"passwordDialog"})],1)}),[],!1,null,"7fc85303",null);e.default=u.exports},a36b:function(t,e,a){t.exports=a.p+"static/img/404.a57b6f31.png"},a395d:function(t,e,a){},a5a0:function(t,e,a){"use strict";a.r(e);var s=a("5530"),r=a("c7eb"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("32db"),l=a("dacb"),c={filters:{},components:{UploadList:o.a,WangEditor:l.a},data:function(){return{tableList:[],total:0,currentPage:1,pageSize:10,options:{},searchTitle:"",searchReq:{},inputVisible:!1,inputValue:"",inputVisibleEn:!1,inputValueEn:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{icon:{type:String},title:{type:String},title_en:{type:String},Content:{type:String},Content_en:{type:String},tags:[{label:{type:String}}],tags_en:[{label:{type:String}}],exampleImages:[],productIds:[],createDate:{type:Date,default:Date.now},updateDate:{type:Date,default:Date.now}},textMap:{update:"Edit",create:"Create"},productOptions:[]}},created:function(){this.initproductOptions(),this.fetchData()},beforeCreate:function(){},methods:{initproductOptions:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.b)("companyProduct",{query:{}});case 2:e=t.sent,this.productOptions=e.data;case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleInputConfirm:function(){var t=this.inputValue.trim();if(t){var e={label:t};this.dataForm.tags.push(e)}this.inputVisible=!1,this.inputValue=""},handleInputConfirmEn:function(){var t=this.inputValueEn.trim();if(t){var e={label:t};this.dataForm.tags_en.push(e)}this.inputVisibleEn=!1,this.inputValueEn=""},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},showInputEn:function(){var t=this;this.inputVisibleEn=!0,this.$nextTick((function(e){t.$refs.saveTagInputEn.$refs.input.focus()}))},handleClose:function(t){var e=this.dataForm.tags.indexOf(t);-1!==e&&this.dataForm.tags.splice(e,1)},handleCloseEn:function(t){var e=this.dataForm.tags_en.indexOf(t);-1!==e&&this.dataForm.tags_en.splice(e,1)},baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeProcessRecordDialog:function(){this.tableList=[],this.total=0,this.currentPage=1,this.pageSize=10,this.processRecordShow=!1},getslect:function(t){},fetchData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:Object(s.a)({},this.searchReq),limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(n.b)("solution",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,t.QRDialog=!1,t.approveDialog=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dataForm=JSON.parse(JSON.stringify(t)),this.dialogStatus="edit"},handleDelete:function(t){var e=this;this.$confirm("删除信息",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(i.a)(Object(r.a)().mark((function a(){var s;return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s={query:{_id:t._id}},Object(n.c)("solution",s).then(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"delete Successfully",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},AddFilter:function(){this.dataForm={title:"",title_en:"",icon:"",tags:[],tags_en:[],Content:"",Content_en:"",exampleImages:[],productIds:[],createDate:"",updateDate:""},this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.title||""==this.dataForm.icon||""==this.dataForm.tags||""==this.dataForm.Content){t.next=9;break}return e=Object(s.a)({},this.dataForm),t.next=5,Object(n.a)("solution",e);case 5:200==t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({title:"添加成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({title:"添加失败",message:"edit failly",type:"warning",duration:2e3}),t.next=10;break;case 9:this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.title||""==this.dataForm.icon||""==this.dataForm.tags||""==this.dataForm.Content){t.next=10;break}return e={query:{_id:this.dataForm._id},update:Object(s.a)({},this.dataForm)},t.next=6,Object(n.d)("solution",e);case 6:200==t.sent.code?(this.dialogFormVisible=!1,this.approveDialog=!1,this.fetchData(),this.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({title:"修改失败",message:"edit failly",type:"warning",duration:2e3}),t.next=11;break;case 10:this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),clearclick:function(){this.tableList=this.tableList1},Search:function(){this.searchReq={},this.searchTitle?this.searchReq.title={$regex:this.searchTitle}:delete this.searchReq.title,this.fetchData()}}},u=c,d=(a("cc1c"),a("2877")),m=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[t._v("方案标题:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入方案标题"},model:{value:t.searchTitle,callback:function(e){t.searchTitle=e},expression:"searchTitle"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.Search()}}},[t._v("查询搜索\n          ")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddFilter}},[t._v("添加\n        ")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"Icon图标",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.icon,alt:"Icon图标"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"封面图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.exampleImages,alt:"封面图片"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"介绍",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.introduction))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"标签",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.tags,(function(e,s){return a("el-tag",{key:s},[t._v("\n            "+t._s(e.label)+"\n          ")])}))}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑查看\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n          ")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{inline:!0,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{required:"",label:"封面图片","label-width":"120"}},[a("ZrFile",{attrs:{max:1,value:t.dataForm.exampleImages},on:{"update:value":function(e){return t.$set(t.dataForm,"exampleImages",e)}}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"Icon图标","label-width":"120"}},[a("ZrFile",{attrs:{max:1,value:t.dataForm.icon},on:{"update:value":function(e){return t.$set(t.dataForm,"icon",e)}}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"标题","label-width":"120"}},[a("el-input",{attrs:{placeholder:"标题"},model:{value:t.dataForm.title,callback:function(e){t.$set(t.dataForm,"title",e)},expression:"dataForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"标签","label-width":"120"}},[t._l(t.dataForm.tags,(function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(e)}}},[t._v("\n          "+t._s(e.label)+"\n        ")])})),t._v(" "),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("英文")]),t._v(" "),a("el-form-item",{attrs:{label:"标题（title）","label-width":"120"}},[a("el-input",{attrs:{placeholder:"标题（title）"},model:{value:t.dataForm.title_en,callback:function(e){t.$set(t.dataForm,"title_en",e)},expression:"dataForm.title_en"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"标签（label）","label-width":"120"}},[t._l(t.dataForm.tags_en,(function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleCloseEn(e)}}},[t._v("\n          "+t._s(e.label)+"\n        ")])})),t._v(" "),t.inputVisibleEn?a("el-input",{ref:"saveTagInputEn",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirmEn},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirmEn(e)}},model:{value:t.inputValueEn,callback:function(e){t.inputValueEn=e},expression:"inputValueEn"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInputEn}},[t._v("+ New Tag")])],2)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("管理相关产品")]),t._v(" "),a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",placeholder:"请选择产品"},model:{value:t.dataForm.productIds,callback:function(e){t.$set(t.dataForm,"productIds",e)},expression:"dataForm.productIds"}},t._l(t.productOptions,(function(t){return a("el-option",{key:t._id,attrs:{label:t.productName,value:t._id}})})),1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("解决方案内容")]),t._v(" "),a("WangEditor",{attrs:{value:t.dataForm.Content},on:{"update:value":function(e){return t.$set(t.dataForm,"Content",e)}}}),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("解决方案内容（Content）")]),t._v(" "),a("WangEditor",{attrs:{value:t.dataForm.Content_en},on:{"update:value":function(e){return t.$set(t.dataForm,"Content_en",e)}}}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.editData()}}},[t._v("确定\n      ")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"814f925e",null);e.default=m.exports},a887:function(t,e,a){"use strict";a("e1e8")},a8c4:function(t,e,a){var s={"./views/404":"8cdb","./views/404.vue":"8cdb","./views/bigImg":"8d7d","./views/bigImg.vue":"8d7d","./views/carouselChart":"e429","./views/carouselChart/":"e429","./views/carouselChart/index":"e429","./views/carouselChart/index.vue":"e429","./views/culture":"17c4","./views/culture/":"17c4","./views/culture/index":"17c4","./views/culture/index.vue":"17c4","./views/dataManagement":"eea9","./views/dataManagement/":"eea9","./views/dataManagement/analysis":"83a4","./views/dataManagement/analysis.vue":"83a4","./views/dataManagement/components/BarChart":"3711","./views/dataManagement/components/BarChart.vue":"3711","./views/dataManagement/components/LineChart":"01aa","./views/dataManagement/components/LineChart.vue":"01aa","./views/dataManagement/components/Piechart":"150b","./views/dataManagement/components/Piechart.vue":"150b","./views/dataManagement/components/Piechart1":"6485","./views/dataManagement/components/Piechart1.vue":"6485","./views/dataManagement/components/Sumchart":"3764","./views/dataManagement/components/Sumchart.vue":"3764","./views/dataManagement/components/Tablechart":"4e0e","./views/dataManagement/components/Tablechart.vue":"4e0e","./views/dataManagement/components/mixins/resize":"570d","./views/dataManagement/components/mixins/resize.js":"570d","./views/dataManagement/index":"eea9","./views/dataManagement/index.vue":"eea9","./views/dictionary":"1be9","./views/dictionary/":"1be9","./views/dictionary/data":"6f9a","./views/dictionary/data.vue":"6f9a","./views/dictionary/index":"1be9","./views/dictionary/index.vue":"1be9","./views/expertDatabase":"90b6","./views/expertDatabase/":"90b6","./views/expertDatabase/AgentSelect":"4f49","./views/expertDatabase/AgentSelect.vue":"4f49","./views/expertDatabase/editDialog":"c8d1","./views/expertDatabase/editDialog.vue":"c8d1","./views/expertDatabase/index":"90b6","./views/expertDatabase/index.vue":"90b6","./views/history":"3c9d","./views/history/":"3c9d","./views/history/index":"3c9d","./views/history/index.vue":"3c9d","./views/home":"7abe","./views/home/":"7abe","./views/home/index":"7abe","./views/home/index.vue":"7abe","./views/honors":"a901","./views/honors/":"a901","./views/honors/index":"a901","./views/honors/index.vue":"a901","./views/imgbg.jpg":"0db1","./views/login":"9ed6","./views/login/":"9ed6","./views/login/index":"9ed6","./views/login/index.vue":"9ed6","./views/materiallibrary":"ebd5","./views/materiallibrary/":"ebd5","./views/materiallibrary/index":"ebd5","./views/materiallibrary/index.vue":"ebd5","./views/menu":"f833","./views/menu/":"f833","./views/menu/components/menuDialog":"e277","./views/menu/components/menuDialog.vue":"e277","./views/menu/index":"f833","./views/menu/index.vue":"f833","./views/message":"1d11","./views/message/":"1d11","./views/message/index":"1d11","./views/message/index.vue":"1d11","./views/mima":"a2a3","./views/mima/":"a2a3","./views/mima/PasswordDialog":"3946","./views/mima/PasswordDialog.vue":"3946","./views/mima/index":"a2a3","./views/mima/index.vue":"a2a3","./views/news":"7c64","./views/news/":"7c64","./views/news/index":"7c64","./views/news/index.vue":"7c64","./views/patents":"6179","./views/patents/":"6179","./views/patents/index":"6179","./views/patents/index.vue":"6179","./views/product":"e6e2","./views/product/":"e6e2","./views/product/index":"e6e2","./views/product/index.vue":"e6e2","./views/productCate":"3d2a","./views/productCate/":"3d2a","./views/productCate/index":"3d2a","./views/productCate/index.vue":"3d2a","./views/recruitment":"885f","./views/recruitment/":"885f","./views/recruitment/index":"885f","./views/recruitment/index.vue":"885f","./views/role":"6c35","./views/role/":"6c35","./views/role/components/roleDialog":"19c2","./views/role/components/roleDialog.vue":"19c2","./views/role/index":"6c35","./views/role/index.vue":"6c35","./views/solution":"a5a0","./views/solution/":"a5a0","./views/solution/index":"a5a0","./views/solution/index.vue":"a5a0","./views/taskCenter/components/AgentSelect":"3620","./views/taskCenter/components/AgentSelect.vue":"3620","./views/taskCenter/components/ExpertSelect":"5260","./views/taskCenter/components/ExpertSelect.vue":"5260","./views/taskCenter/components/TaskClaimDetails":"3e48","./views/taskCenter/components/TaskClaimDetails.vue":"3e48","./views/taskCenter/components/TaskProgressDialog":"cf83","./views/taskCenter/components/TaskProgressDialog.vue":"cf83","./views/taskCenter/components/TaskResultDialog":"6c29b","./views/taskCenter/components/TaskResultDialog.vue":"6c29b","./views/taskCenter/components/TaskSelect":"b8bf","./views/taskCenter/components/TaskSelect.vue":"b8bf","./views/taskCenter/components/TrackerSelect":"f186","./views/taskCenter/components/TrackerSelect.vue":"f186","./views/taskCenter/components/taskClaim":"7ae7","./views/taskCenter/components/taskClaim copy":"b45e","./views/taskCenter/components/taskClaim copy.vue":"b45e","./views/taskCenter/components/taskClaim.vue":"7ae7","./views/taskCenter/components/taskForm":"70b4","./views/taskCenter/components/taskForm.vue":"70b4","./views/taskCenter/editDialog":"1f24","./views/taskCenter/editDialog.vue":"1f24","./views/taskCenter/taskHall":"fc88","./views/taskCenter/taskHall.vue":"fc88","./views/taskCenter/trackerTasks":"cb28","./views/taskCenter/trackerTasks.vue":"cb28","./views/user":"e382","./views/user/":"e382","./views/user/index":"e382","./views/user/index.vue":"e382"};function r(t){var e=i(t);return a(e)}function i(t){var e=s[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}r.keys=function(){return Object.keys(s)},r.resolve=i,t.exports=r,r.id="a8c4"},a901:function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=a("5530"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("32db"),l=a("dacb"),c={filters:{},components:{UploadList:o.a,WangEditor:l.a},data:function(){return{tableList:[],total:0,currentPage:1,pageSize:10,options:{},searchReq:{},honorName:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{honorName:{type:String,required:!0},awardDate:Date,honorName_en:String,honorDescription_en:String,honorDescription:String,image:String},textMap:{update:"Edit",create:"Create"}}},created:function(){this.fetchData()},beforeCreate:function(){},methods:{baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeProcessRecordDialog:function(){this.tableList=[],this.total=0,this.currentPage=1,this.pageSize=10,this.processRecordShow=!1},getslect:function(t){},fetchData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:Object(r.a)({},this.searchReq),limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(n.b)("companyHonors",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,t.QRDialog=!1,t.approveDialog=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dataForm=JSON.parse(JSON.stringify(t)),this.dialogStatus="edit"},handleDelete:function(t){var e=this;this.$confirm("删除荣誉",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(i.a)(Object(s.a)().mark((function a(){var r;return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r={query:{_id:t._id}},Object(n.c)("companyHonors",r).then(function(){var t=Object(i.a)(Object(s.a)().mark((function t(a){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"delete Successfully",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},AddFilter:function(){this.dataForm={honorName:"",awardDate:"",honorDescription:"",honorName_en:"",honorDescription_en:"",image:""},this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.honorName||""==this.dataForm.awardDate||""==this.dataForm.honorDescription||""==this.dataForm.image){t.next=9;break}return e=Object(r.a)({},this.dataForm),t.next=5,Object(n.a)("companyHonors",e);case 5:200==t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({honorName:"添加成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({honorName:"添加失败",message:"edit failly",type:"warning",duration:2e3}),t.next=10;break;case 9:this.$notify({honorName:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.honorName||""==this.dataForm.awardDate||""==this.dataForm.honorDescription||""==this.dataForm.image){t.next=10;break}return e={query:{_id:this.dataForm._id},update:Object(r.a)({},this.dataForm)},t.next=6,Object(n.d)("companyHonors",e);case 6:200==t.sent.code?(this.dialogFormVisible=!1,this.approveDialog=!1,this.fetchData(),this.$notify({honorName:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({honorName:"修改失败",message:"edit failly",type:"warning",duration:2e3}),t.next=11;break;case 10:this.$notify({honorName:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),clearclick:function(){this.tableList=this.tableList1},Search:function(){this.searchReq={},this.honorName?this.searchReq.honorName={$regex:this.honorName}:delete this.searchReq.honorName,this.fetchData()}}},u=c,d=(a("d666"),a("2877")),m=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[t._v("荣誉名称:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入荣誉名称"},model:{value:t.honorName,callback:function(e){t.honorName=e},expression:"honorName"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.Search()}}},[t._v("查询搜索\n          ")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("荣誉列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddFilter}},[t._v("添加荣誉\n        ")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"荣誉名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.honorName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"荣誉时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.parseTime(e.row.awardDate,"{y}-{m}-{d} {h}:{i}")))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"荣誉描述",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.honorDescription)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"荣誉图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.image,alt:"专利图片"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑查看\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n          ")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"荣誉信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{inline:!0,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{required:"",label:"荣誉名称","label-width":"120"}},[a("el-input",{attrs:{placeholder:"荣誉名称"},model:{value:t.dataForm.honorName,callback:function(e){t.$set(t.dataForm,"honorName",e)},expression:"dataForm.honorName"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"荣誉时间","label-width":"120"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.dataForm.awardDate,callback:function(e){t.$set(t.dataForm,"awardDate",e)},expression:"dataForm.awardDate"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"荣誉描述","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"荣誉描述"},model:{value:t.dataForm.honorDescription,callback:function(e){t.$set(t.dataForm,"honorDescription",e)},expression:"dataForm.honorDescription"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"荣誉图片链接","label-width":"120"}},[a("ZrFile",{attrs:{max:1,value:t.dataForm.image},on:{"update:value":function(e){return t.$set(t.dataForm,"image",e)}}})],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("英文")]),t._v(" "),a("el-form-item",{attrs:{label:"荣誉名称(title)","label-width":"120"}},[a("el-input",{attrs:{placeholder:"荣誉名称(title)"},model:{value:t.dataForm.honorName_en,callback:function(e){t.$set(t.dataForm,"honorName_en",e)},expression:"dataForm.honorName_en"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"荣誉描述(description)","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"荣誉描述(description)"},model:{value:t.dataForm.honorDescription_en,callback:function(e){t.$set(t.dataForm,"honorDescription_en",e)},expression:"dataForm.honorDescription_en"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.editData()}}},[t._v("确定\n      ")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"fcd83166",null);e.default=m.exports},a954:function(t,e,a){"use strict";a("afc0")},afc0:function(t,e,a){},b001:function(t,e,a){"use strict";a("8fae")},b45e:function(t,e,a){"use strict";a.r(e);var s=(a("6b54"),a("a481"),a("7f7f"),a("5530")),r=a("c7eb"),i=(a("6762"),a("2fdb"),a("96cf"),a("1da1")),n=a("7e1e"),o=a("c466"),l={name:"TaskClaim",props:{taskId:{type:String,required:!0}},data:function(){return{currentUserId:"",isAdmin:!1,isAgent:!1,taskInfo:{},claimList:[],expertOptions:[],claimDialogVisible:!1,claimForm:{expertId:"",trackerId:"",remark:""},claimRules:{expertId:[{required:!0,message:"请选择达人",trigger:"change"}],trackerId:[{required:!0,message:"请选择任务跟踪员",trigger:"change"}]},progressDialogVisible:!1,progressForm:{status:"",trackerId:"",step:"",remark:"",trackingInfo:{buildConnectionSource:"",cooperationDate:null,receiveTime:null,estimatedPublishTime:null,actualPublishTime:null,adCode:""}},progressRules:{status:[{required:!0,message:"请选择进度状态",trigger:"change"}],step:[{required:!0,message:"请输入进度说明",trigger:"blur"}]},resultDialogVisible:!1,resultForm:{contentList:[],totalPerformance:{totalViews:0,totalLikes:0,totalComments:0,totalShares:0,totalGmv:0}},resultRules:{contentList:{type:"array",required:!0,message:"请至少添加一个内容",trigger:"change"}},currentClaim:null,detailsDialogVisible:!1,currentClaimDetails:{},trackerOptions:[],statusList:["未开始","沟通中","合作成功","寄送样品","样品跟踪","已收货","内容制作中","作品已发布","数据统计中","已完成","已取消"]}},created:function(){this.getCurrentUser(),this.fetchData(),this.loadTrackerOptions()},methods:{getCurrentUser:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.isAdmin=this.$store.getters.roles.label.includes("Admin"),this.isAgent=this.$store.getters.roles.label.includes("Agent")||this.$store.getters.roles.label.includes("Admin"),this.currentUserId=this.$store.getters.id}catch(t){}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),fetchData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(n.b)("task",{query:{_id:this.taskId}});case 3:return e=t.sent,this.taskInfo=e.data[0],t.next=7,Object(n.b)("taskClaim",{query:{taskId:this.taskId,isDeleted:!1},populate:JSON.stringify([{path:"agentId"},{path:"expertId"},{path:"trackerId"}])});case 7:a=t.sent,this.claimList=a.data.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{agentName:t.agentId.nickName,expertName:t.expertId.name,trackerName:t.trackerId&&t.trackerId.nickName?t.trackerId.nickName:"未指定"})})),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),this.$message.error("获取数据失败");case 15:case"end":return t.stop()}}),t,this,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),loadExpertOptions:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(n.b)("expert",{query:{}});case 3:e=t.sent,this.expertOptions=e.data.map((function(t){return{value:t._id,label:"".concat(t.name,"(").concat(t.platforms.map((function(t){return t.name})).join("/"),")")}})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),this.$message.error("获取达人列表失败");case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),loadTrackerOptions:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(n.b)("user_login",{query:{}});case 3:e=t.sent,this.trackerOptions=e.data.map((function(t){return{value:t._id,label:t.nickName||t.username}})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),this.$message.error("获取任务跟踪员列表失败");case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),handleClaim:function(){this.loadExpertOptions(),this.claimForm={expertId:"",remark:""},this.claimDialogVisible=!0},submitClaim:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e=this;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.$refs.claimForm.validate(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}return t.next=3,Object(n.a)("taskClaim",{taskId:e.taskId,agentId:e.currentUserId,expertId:e.claimForm.expertId,claimStatus:"待审核",remark:e.claimForm.remark});case 3:e.$message.success("认领成功，请等待审核"),e.claimDialogVisible=!1,e.fetchData();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(t){this.$message.error("认领失败")}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleAudit:function(){var t=Object(i.a)(Object(r.a)().mark((function t(e,a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(n.d)("taskClaim",{query:{_id:e._id},update:{claimStatus:a,auditTime:new Date,auditRemark:"已拒绝"===a?"不符合要求":"符合要求"}});case 3:this.$message.success("审核完成"),this.fetchData(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.$message.error("审核失");case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}(),handleUpdateProgress:function(t){if(this.currentClaim=t,this.progressForm={status:t.status||"",trackerId:t.trackerId||"",step:"",remark:"",trackingInfo:{buildConnectionSource:"",cooperationDate:null,receiveTime:null,estimatedPublishTime:null,actualPublishTime:null,adCode:""}},t.progressSteps&&t.progressSteps.length>0){var e=t.progressSteps[t.progressSteps.length-1];e.trackingInfo&&(this.progressForm.trackingInfo={buildConnectionSource:e.trackingInfo.buildConnectionSource||"",cooperationDate:e.trackingInfo.cooperationDate||null,receiveTime:e.trackingInfo.receiveTime||null,estimatedPublishTime:e.trackingInfo.estimatedPublishTime||null,actualPublishTime:e.trackingInfo.actualPublishTime||null,adCode:e.trackingInfo.adCode||""})}this.progressDialogVisible=!0},submitProgress:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs.progressForm.validate();case 3:return e={step:this.progressForm.step,status:this.progressForm.status,updateTime:new Date,updatedBy:this.currentUserId,remark:this.progressForm.remark,trackingInfo:Object(s.a)({},this.progressForm.trackingInfo)},t.next=6,Object(n.d)("taskClaim",{query:{_id:this.currentClaim._id},update:{status:this.progressForm.status,$push:{progressSteps:e}}});case 6:if("合作成功"!==this.progressForm.status){t.next=9;break}return t.next=9,Object(n.d)("taskClaim",{query:{_id:this.currentClaim._id},update:{trackerId:this.progressForm.trackerId}});case 9:this.$message.success("进度更新成功"),this.progressDialogVisible=!1,this.fetchData(),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),this.$message.error("进度更新失败");case 18:case"end":return t.stop()}}),t,this,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),handleSubmitResult:function(t){this.currentClaim=t,this.resultForm={contentList:[],totalPerformance:{totalViews:0,totalLikes:0,totalComments:0,totalShares:0,totalGmv:0}},t.result&&t.result.contentList&&(this.resultForm.contentList=t.result.contentList.map((function(t){return Object.assign({},t,{performanceData:Object.assign({views:0,likes:0,comments:0,shares:0,gmv:0},t.performanceData||{})})}))),this.resultDialogVisible=!0},addContent:function(){this.resultForm.contentList.push({platform:"",type:"",link:"",videoCode:"",publishTime:null,performanceData:{views:0,likes:0,comments:0,shares:0,gmv:0}})},removeContent:function(t){var e=this;this.$confirm("确定要删除该内容吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.resultForm.contentList.splice(t,1)})).catch((function(){}))},submitResult:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs.resultForm.validate();case 3:return e={totalViews:this.calculateTotalViews,totalLikes:this.calculateTotalLikes,totalComments:this.calculateTotalComments,totalShares:this.calculateTotalShares,totalGmv:this.calculateTotalGmv},t.next=7,Object(n.d)("taskClaim",{query:{_id:this.currentClaim._id},update:{result:{contentList:this.resultForm.contentList,totalPerformance:e},status:"数据统计中"}});case 7:return a={step:"提交执行结果",status:"数据统计中",updateTime:new Date,updatedBy:this.currentUserId,remark:"提交了".concat(this.resultForm.contentList.length,"个内容的执行结果")},t.next=10,Object(n.d)("taskClaim",{query:{_id:this.currentClaim._id},update:{$push:{progressSteps:a}}});case 10:this.$message.success("执行结果提交成功"),this.resultDialogVisible=!1,this.fetchData(),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),this.$message.error("提交执行结果失败");case 19:case"end":return t.stop()}}),t,this,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),handleViewDetails:function(t){this.currentClaimDetails=Object(s.a)(Object(s.a)({},t),{},{result:t.result?Object(s.a)(Object(s.a)({},t.result),{},{performanceData:Object(s.a)({views:0,likes:0,comments:0,shares:0,gmv:0},t.result.performanceData||{})}):null}),this.detailsDialogVisible=!0},formatDate:function(t){return t?Object(o.a)(new Date(t),"yyyy-MM-dd HH:mm"):""},getClaimStatusType:function(t){return{"待审核":"warning","已通过":"success","已拒绝":"danger"}[t]||"info"},getProgressStatusType:function(t){return{"未开始":"info","沟通中":"warning","合作成功":"success","寄送样品":"primary","样品跟踪":"primary","已收货":"success","内容制作中":"primary","作品已发布":"success","数据统计中":"warning","已完成":"success","已取消":"danger","合作失败":"danger"}[t]||"info"},getTaskTypeTag:function(t){return{"品牌宣传":"primary","达人推广":"success","达人直播":"warning","达人视���":"danger","直播带货":"info"}[t]||"info"},getTaskStatusTag:function(t){return{"进行中":"success","已结束":"info","已取消":"danger","待开始":"warning"}[t]||"info"},formatNumber:function(t){return t||0===t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"},calculateTotalViews:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.views||0)}),0):0},calculateTotalLikes:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.likes||0)}),0):0},calculateTotalComments:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.comments||0)}),0):0},calculateTotalShares:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.shares||0)}),0):0},calculateTotalGmv:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.gmv||0)}),0):0},getTimelineItemType:function(t){return{"未开始":"info","沟通中":"warning","执行中":"primary","已完成":"success","已取消":"danger"}[t]||"info"},getAvailableStatuses:function(){return this.statusList}},computed:{showTrackingInfo:function(){return["合作成功","寄送样品","样品跟踪","已收货","内容制作中","作品已发布"].includes(this.progressForm.status)},isAgent:function(){return this.userInfo.roles.some((function(t){return"Agent"===t.label}))},isTracker:function(){return this.userInfo.roles.some((function(t){return"TaskTracker"===t.label}))},getTotalViews:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.views||0)}),0):0},getTotalLikes:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.likes||0)}),0):0},getTotalComments:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.comments||0)}),0):0},getTotalShares:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.shares||0)}),0):0},getTotalGmv:function(){return this.resultForm&&this.resultForm.contentList?this.resultForm.contentList.reduce((function(t,e){return t+(e&&e.performanceData&&e.performanceData.gmv||0)}),0):0}}},c=l,u=(a("c4d1"),a("2877")),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-claim"},[a("el-card",{staticClass:"task-info"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("任务信息")])]),t._v(" "),a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("任务标题：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.taskInfo.title))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("任务类型：")]),t._v(" "),a("el-tag",{attrs:{type:t.getTaskTypeTag(t.taskInfo.type)}},[t._v(t._s(t.taskInfo.type))])],1),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("任务状态：")]),t._v(" "),a("el-tag",{attrs:{type:t.getTaskStatusTag(t.taskInfo.status)}},[t._v(t._s(t.taskInfo.status))])],1)]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("开始时间：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatDate(t.taskInfo.startTime)))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("结束时间：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatDate(t.taskInfo.endTime)))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("发布时间：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatDate(t.taskInfo.createTime)))])])])]),t._v(" "),a("div",{staticClass:"section-title"},[t._v("品牌合作信息")]),t._v(" "),a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("品牌名称：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.brandName))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("产品名称：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.productName))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("预算：")]),t._v(" "),a("span",{staticClass:"price"},[t._v("¥"+t._s(t.formatNumber(t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.commercialTerms&&t.taskInfo.cooperationDetails.commercialTerms.budget)))])])])]),t._v(" "),a("div",{staticClass:"section-title"},[t._v("合作要求")]),t._v(" "),a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("合作平台：")]),t._v(" "),t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.requirements&&t.taskInfo.cooperationDetails.requirements.platformType?t._l(t.taskInfo.cooperationDetails.requirements.platformType,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"}},[t._v("\n                            "+t._s(e)+"\n                        ")])})):t._e()],2),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("内容形式：")]),t._v(" "),t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.requirements&&t.taskInfo.cooperationDetails.requirements.contentType?t._l(t.taskInfo.cooperationDetails.requirements.contentType,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{type:"success"}},[t._v("\n                            "+t._s(e)+"\n                        ")])})):t._e()],2)]),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item full-width"},[a("span",{staticClass:"label"},[t._v("达人要求：")]),t._v(" "),t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.requirements&&t.taskInfo.cooperationDetails.requirements.expertRequirements?a("div",{staticClass:"requirement-list"},[t.taskInfo.cooperationDetails.requirements.expertRequirements.fansCountMin?a("div",{staticClass:"requirement-item"},[a("i",{staticClass:"el-icon-user"}),t._v(" 粉丝数："+t._s(t.formatNumber(t.taskInfo.cooperationDetails.requirements.expertRequirements.fansCountMin))+" - "+t._s(t.formatNumber(t.taskInfo.cooperationDetails.requirements.expertRequirements.fansCountMax))+"\n                        ")]):t._e(),t._v(" "),t.taskInfo.cooperationDetails.requirements.expertRequirements.expertCategory&&t.taskInfo.cooperationDetails.requirements.expertRequirements.expertCategory.length?a("div",{staticClass:"requirement-item"},[a("i",{staticClass:"el-icon-collection-tag"}),t._v(" 达人类目：\n                            "),t._l(t.taskInfo.cooperationDetails.requirements.expertRequirements.expertCategory,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"small",type:"warning"}},[t._v("\n                                "+t._s(e)+"\n                            ")])}))],2):t._e(),t._v(" "),t.taskInfo.cooperationDetails.requirements.expertRequirements.otherRequirements?a("div",{staticClass:"requirement-item"},[a("i",{staticClass:"el-icon-info"}),t._v(" 其他要求："+t._s(t.taskInfo.cooperationDetails.requirements.expertRequirements.otherRequirements)+"\n                        ")]):t._e()]):t._e()])])]),t._v(" "),a("div",{staticClass:"section-title"},[t._v("任务描述")]),t._v(" "),a("div",{staticClass:"task-description"},[t._v("\n            "+t._s(t.taskInfo.description||"暂无描述")+"\n        ")]),t._v(" "),a("div",{staticClass:"section-title"},[t._v("KPI目标")]),t._v(" "),a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("播放量目标：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatNumber(t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.kpiTargets&&t.taskInfo.cooperationDetails.kpiTargets.viewsTarget)))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("互动量目标：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatNumber(t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.kpiTargets&&t.taskInfo.cooperationDetails.kpiTargets.interactionTarget)))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("销售目标：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.formatNumber(t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.kpiTargets&&t.taskInfo.cooperationDetails.kpiTargets.salesTarget)))])])])]),t._v(" "),a("div",{staticClass:"section-title"},[t._v("商务条款")]),t._v(" "),a("div",{staticClass:"info-section"},[a("div",{staticClass:"info-row"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("佣金比例：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.commercialTerms&&t.taskInfo.cooperationDetails.commercialTerms.commissionRate)+"%")])]),t._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[t._v("独家期限：")]),t._v(" "),a("span",{staticClass:"content"},[t._v(t._s(t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.commercialTerms&&t.taskInfo.cooperationDetails.commercialTerms.exclusivityPeriod)+" 天")])])])]),t._v(" "),a("div",{staticClass:"section-title"},[t._v("物料信息")]),t._v(" "),a("div",{staticClass:"info-section"},[t.taskInfo.cooperationDetails&&t.taskInfo.cooperationDetails.materials&&t.taskInfo.cooperationDetails.materials.length?a("div",{staticClass:"materials-list"},[a("el-table",{attrs:{data:t.taskInfo.cooperationDetails.materials,border:"",size:"small"}},[a("el-table-column",{attrs:{label:"物料名称",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"物料类型",prop:"type"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"small"}},[t._v(t._s(e.row.type))])]}}],null,!1,3884746098)}),t._v(" "),a("el-table-column",{attrs:{label:"物料链接","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",href:e.row.url,target:"_blank"}},[t._v(t._s(e.row.url))])]}}],null,!1,3178991531)}),t._v(" "),a("el-table-column",{attrs:{label:"上传时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(t.formatDate(e.row.uploadTime))+"\n                        ")]}}],null,!1,1630876477)})],1)],1):a("div",{staticClass:"empty-materials"},[t._v("\n                暂无物料信息\n            ")])])]),t._v(" "),a("el-card",{staticClass:"claim-list"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("任务认领列表")]),t._v(" "),t.isAgent?a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.handleClaim}},[t._v("\n                认领任务\n            ")]):t._e()],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.claimList,border:""}},[a("el-table-column",{attrs:{label:"经纪人",prop:"agentName",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"关联达人",prop:"expertName",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"任务跟踪员",prop:"trackerName",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"认领状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.getClaimStatusType(e.row.claimStatus)}},[t._v(t._s(e.row.claimStatus))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"认领时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.formatDate(e.row.claimTime))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"任务进度",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.getProgressStatusType(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"最新进度"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.progressSteps&&e.row.progressSteps.length?a("div",[t._v("\n                        "+t._s(e.row.progressSteps[e.row.progressSteps.length-1].step)+"\n                        "),a("br"),t._v(" "),a("small",{staticStyle:{color:"#999"}},[t._v("\n                            "+t._s(t.formatDate(e.row.progressSteps[e.row.progressSteps.length-1].updateTime))+"\n                        ")])]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isAdmin?["待审核"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleAudit(e.row,"已通过")}}},[t._v("\n                            通过\n                        ")]):t._e(),t._v(" "),"待审核"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleAudit(e.row,"已拒绝")}}},[t._v("\n                            拒绝\n                        ")]):t._e()]:t._e(),t._v(" "),t.isAgent&&e.row.agentId._id===t.currentUserId?["已通过"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleUpdateProgress(e.row)}}},[t._v("\n                            更新进度\n                        ")]):t._e(),t._v(" "),"数据统计中"===e.row.status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleSubmitResult(e.row)}}},[t._v("\n                            提交结果\n                        ")]):t._e(),t._v(" "),a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.handleViewDetails(e.row)}}},[t._v("\n                            查看详情\n                        ")])]:t._e()]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"认领任务",visible:t.claimDialogVisible,"append-to-body":"",width:"50%"},on:{"update:visible":function(e){t.claimDialogVisible=e}}},[a("el-form",{ref:"claimForm",attrs:{model:t.claimForm,rules:t.claimRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择达人",prop:"expertId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择达人"},model:{value:t.claimForm.expertId,callback:function(e){t.$set(t.claimForm,"expertId",e)},expression:"claimForm.expertId"}},t._l(t.expertOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"认领说明"}},[a("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.claimForm.remark,callback:function(e){t.$set(t.claimForm,"remark",e)},expression:"claimForm.remark"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.claimDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitClaim}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"更新进度",visible:t.progressDialogVisible,width:"60%","custom-class":"progress-dialog","append-to-body":""},on:{"update:visible":function(e){t.progressDialogVisible=e}}},[a("el-form",{ref:"progressForm",attrs:{model:t.progressForm,rules:t.progressRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"进度状态",prop:"status"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.progressForm.status,callback:function(e){t.$set(t.progressForm,"status",e)},expression:"progressForm.status"}},t._l(t.getAvailableStatuses(),(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),t._v(" "),"合作成功"===t.progressForm.status?a("el-form-item",{attrs:{label:"任务跟踪员",prop:"trackerId",rules:{required:!0,message:"请选择任务跟踪员",trigger:"change"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择任务跟踪员"},model:{value:t.progressForm.trackerId,callback:function(e){t.$set(t.progressForm,"trackerId",e)},expression:"progressForm.trackerId"}},t._l(t.trackerOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t._v(" "),t.showTrackingInfo?[a("div",{staticClass:"tracking-info-section"},[["合作成功"].includes(t.progressForm.status)?a("el-form-item",{attrs:{label:"建联来源",prop:"trackingInfo.buildConnectionSource"}},[a("el-input",{attrs:{placeholder:"请输入建联来源"},model:{value:t.progressForm.trackingInfo.buildConnectionSource,callback:function(e){t.$set(t.progressForm.trackingInfo,"buildConnectionSource",e)},expression:"progressForm.trackingInfo.buildConnectionSource"}})],1):t._e(),t._v(" "),["合作成功"].includes(t.progressForm.status)?a("el-form-item",{attrs:{label:"确定合作日",prop:"trackingInfo.cooperationDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择确定合作日"},model:{value:t.progressForm.trackingInfo.cooperationDate,callback:function(e){t.$set(t.progressForm.trackingInfo,"cooperationDate",e)},expression:"progressForm.trackingInfo.cooperationDate"}})],1):t._e(),t._v(" "),["已收货"].includes(t.progressForm.status)?a("el-form-item",{attrs:{label:"收货时间",prop:"trackingInfo.receiveTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择收货时间"},model:{value:t.progressForm.trackingInfo.receiveTime,callback:function(e){t.$set(t.progressForm.trackingInfo,"receiveTime",e)},expression:"progressForm.trackingInfo.receiveTime"}})],1):t._e(),t._v(" "),["内容制作中"].includes(t.progressForm.status)?a("el-form-item",{attrs:{label:"预计发布时间",prop:"trackingInfo.estimatedPublishTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择预计发布时间"},model:{value:t.progressForm.trackingInfo.estimatedPublishTime,callback:function(e){t.$set(t.progressForm.trackingInfo,"estimatedPublishTime",e)},expression:"progressForm.trackingInfo.estimatedPublishTime"}})],1):t._e()],1)]:t._e(),t._v(" "),a("el-form-item",{attrs:{label:"进度备注",prop:"step"}},[a("el-input",{attrs:{placeholder:"请输入进度备注"},model:{value:t.progressForm.step,callback:function(e){t.$set(t.progressForm,"step",e)},expression:"progressForm.step"}})],1)],2),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.progressDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitProgress}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提交执行结果",visible:t.resultDialogVisible,width:"70%","custom-class":"result-dialog","append-to-body":""},on:{"update:visible":function(e){t.resultDialogVisible=e}}},[a("el-form",{ref:"resultForm",attrs:{model:t.resultForm,rules:t.resultRules,"label-width":"100px"}},[a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-video-camera"}),t._v("\n                    内容列表\n                ")]),t._v(" "),a("div",{staticClass:"content-list"},[t._l(t.resultForm.contentList,(function(e,s){return a("div",{key:s,staticClass:"content-item"},[a("div",{staticClass:"content-header"},[a("span",{staticClass:"content-index"},[t._v("内容 #"+t._s(s+1))]),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(e){return t.removeContent(s)}}})],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"平台",prop:"contentList."+s+".platform",rules:{required:!0,message:"请选择平台",trigger:"change"}}},[a("el-select",{attrs:{placeholder:"选择平台"},model:{value:e.platform,callback:function(a){t.$set(e,"platform",a)},expression:"content.platform"}},[a("el-option",{attrs:{label:"抖音",value:"抖音"}}),t._v(" "),a("el-option",{attrs:{label:"小红书",value:"小红书"}}),t._v(" "),a("el-option",{attrs:{label:"B站",value:"B站"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"类型",prop:"contentList."+s+".type",rules:{required:!0,message:"请选类型",trigger:"change"}}},[a("el-select",{attrs:{placeholder:"内容类型"},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"content.type"}},[a("el-option",{attrs:{label:"视频",value:"视频"}}),t._v(" "),a("el-option",{attrs:{label:"直播",value:"直播"}}),t._v(" "),a("el-option",{attrs:{label:"图文",value:"图文"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发布时间",prop:"contentList."+s+".publishTime",rules:{required:!0,message:"请选择发布时间",trigger:"change"}}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择发布时间"},model:{value:e.publishTime,callback:function(a){t.$set(e,"publishTime",a)},expression:"content.publishTime"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"内容链接",prop:"contentList."+s+".link",rules:{required:!0,message:"请输入内容链接",trigger:"blur"}}},[a("el-input",{attrs:{placeholder:"请输入内容链接"},model:{value:e.link,callback:function(a){t.$set(e,"link",a)},expression:"content.link"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"视频代码",prop:"contentList."+s+".videoCode"}},[a("el-input",{attrs:{placeholder:"请输入视频/直播代码"},model:{value:e.videoCode,callback:function(a){t.$set(e,"videoCode",a)},expression:"content.videoCode"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"performance-data"},[a("div",{staticClass:"sub-title"},[t._v("效果数据")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"播放量",prop:"contentList."+s+".performanceData.views"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.views,callback:function(a){t.$set(e.performanceData,"views",a)},expression:"content.performanceData.views"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"点赞数",prop:"contentList."+s+".performanceData.likes"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.likes,callback:function(a){t.$set(e.performanceData,"likes",a)},expression:"content.performanceData.likes"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"评论数",prop:"contentList."+s+".performanceData.comments"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.comments,callback:function(a){t.$set(e.performanceData,"comments",a)},expression:"content.performanceData.comments"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"分享数",prop:"contentList."+s+".performanceData.shares"}},[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.performanceData.shares,callback:function(a){t.$set(e.performanceData,"shares",a)},expression:"content.performanceData.shares"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"GMV",prop:"contentList."+s+".performanceData.gmv"}},[a("el-input-number",{attrs:{min:0,precision:2,"controls-position":"right"},model:{value:e.performanceData.gmv,callback:function(a){t.$set(e.performanceData,"gmv",a)},expression:"content.performanceData.gmv"}})],1)],1)],1)],1)],1)})),t._v(" "),a("div",{staticClass:"add-content-btn"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:t.addContent}},[t._v("\n                            添加内容\n                        ")])],1)],2)]),t._v(" "),a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-title"},[a("i",{staticClass:"el-icon-data-analysis"}),t._v("\n                    合计效果数据\n                ")]),t._v(" "),a("div",{staticClass:"total-performance"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-video-play"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("总播放量")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalViews)))])])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-star-on"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("总点赞数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalLikes)))])])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-chat-dot-round"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("总评论数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalComments)))])])])])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-share"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("总分享数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v(t._s(t.formatNumber(t.getTotalShares)))])])])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"data-card"},[a("div",{staticClass:"data-icon"},[a("i",{staticClass:"el-icon-money"})]),t._v(" "),a("div",{staticClass:"data-content"},[a("div",{staticClass:"data-label"},[t._v("总GMV")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("¥"+t._s(t.formatNumber(t.getTotalGmv)))])])])])],1)],1)])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.resultDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitResult}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"任务详情",visible:t.detailsDialogVisible,width:"70%","close-on-click-modal":!1,"custom-class":"claim-details-dialog","append-to-body":""},on:{"update:visible":function(e){t.detailsDialogVisible=e}}},[a("div",{staticClass:"claim-details"},[a("div",{staticClass:"detail-section"},[a("div",{staticClass:"section-title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("经纪人")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.currentClaimDetails.agentName))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("关联达人")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.currentClaimDetails.expertName))])]),t._v(" "),a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("认领状态")]),t._v(" "),a("div",{staticClass:"info-content"},[a("el-tag",{attrs:{type:t.getClaimStatusType(t.currentClaimDetails.claimStatus)}},[t._v("\n                                "+t._s(t.currentClaimDetails.claimStatus)+"\n                            ")])],1)]),t._v(" "),a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-label"},[t._v("认领时间")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.formatDate(t.currentClaimDetails.claimTime)))])]),t._v(" "),a("div",{staticClass:"info-item full-width"},[a("div",{staticClass:"info-label"},[t._v("认领说明")]),t._v(" "),a("div",{staticClass:"info-content"},[t._v(t._s(t.currentClaimDetails.remark||"无"))])])])]),t._v(" "),a("div",{staticClass:"detail-section"},[a("div",{staticClass:"section-title"},[t._v("进度记录")]),t._v(" "),a("div",{staticClass:"progress-timeline"},[a("el-timeline",t._l(t.currentClaimDetails.progressSteps,(function(e,s){return a("el-timeline-item",{key:s,attrs:{timestamp:t.formatDate(e.updateTime),type:t.getTimelineItemType(e.status)}},[a("div",{staticClass:"progress-item"},[a("div",{staticClass:"progress-header"},[a("el-tag",{attrs:{type:t.getProgressStatusType(e.status),size:"small"}},[t._v("\n                                        "+t._s(e.status)+"\n                                    ")]),t._v(" "),a("span",{staticClass:"progress-step"},[t._v(t._s(e.step))])],1),t._v(" "),e.remark?a("div",{staticClass:"progress-remark"},[t._v("\n                                    "+t._s(e.remark)+"\n                                ")]):t._e()])])})),1)],1)]),t._v(" "),t.currentClaimDetails.result&&t.currentClaimDetails.result.contentList?a("div",{staticClass:"detail-section"},[a("div",{staticClass:"section-title"},[t._v("执行结果")]),t._v(" "),a("div",{staticClass:"result-section"},[a("div",{staticClass:"sub-title"},[t._v("内容列表")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.currentClaimDetails.result.contentList,border:"",size:"small"}},[a("el-table-column",{attrs:{label:"平台",prop:"platform",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"类型",prop:"type",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                "+t._s(t.formatDate(e.row.publishTime))+"\n                            ")]}}],null,!1,2123706631)}),t._v(" "),a("el-table-column",{attrs:{label:"链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",href:e.row.link,target:"_blank"}},[t._v("\n                                    "+t._s(e.row.link)+"\n                                ")])]}}],null,!1,4047939275)}),t._v(" "),a("el-table-column",{attrs:{label:"视频代码",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.videoCode?a("span",[t._v(t._s(e.row.videoCode))]):a("span",[t._v("-")])]}}],null,!1,2314334044)}),t._v(" "),a("el-table-column",{attrs:{label:"内容效果数据"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"performance-data"},[a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-video-play"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("播放量")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                                            "+t._s(t.formatNumber(e.row.performanceData.views))+"\n                                        ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("点赞数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                                            "+t._s(t.formatNumber(e.row.performanceData.likes))+"\n                                        ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("评论数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                                            "+t._s(t.formatNumber(e.row.performanceData.comments||0))+"\n                                        ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-share"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总分享数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                                            "+t._s(t.formatNumber(e.row.performanceData.shares||0))+"\n                                        ")])]),t._v(" "),a("div",{staticClass:"data-item",staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-money"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("GMV")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                                            "+t._s(t.formatNumber(e.row.performanceData.gmv||0))+"\n                                        ")])])])]}}],null,!1,37437486)})],1)],1),t._v(" "),a("div",{staticClass:"result-section"},[a("div",{staticClass:"sub-title"},[t._v("效果数据")]),t._v(" "),a("div",{staticClass:"data-grid"},[a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-video-play"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总播放量")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                                "+t._s(t.formatNumber(t.currentClaimDetails.result.totalPerformance.totalViews||0))+"\n                            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总点赞数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                                "+t._s(t.formatNumber(t.currentClaimDetails.result.totalPerformance.totalLikes||0))+"\n                            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总评论数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                                "+t._s(t.formatNumber(t.currentClaimDetails.result.totalPerformance.totalComments||0))+"\n                            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-share"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总分享数")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                                "+t._s(t.formatNumber(t.currentClaimDetails.result.totalPerformance.totalShares||0))+"\n                            ")])]),t._v(" "),a("div",{staticClass:"data-item"},[a("i",{staticClass:"el-icon-money"}),t._v(" "),a("div",{staticClass:"data-label"},[t._v("总GMV")]),t._v(" "),a("div",{staticClass:"data-value"},[t._v("\n                                ¥"+t._s(t.formatNumber(t.currentClaimDetails.result.totalPerformance.totalGmv||0))+"\n                            ")])])])])]):t._e()])])],1)}),[],!1,null,null,null);e.default=d.exports},b505:function(t,e,a){"use strict";a("8d93")},b695:function(t,e,a){"use strict";a("8fe3")},b6ad:function(t,e,a){},b7d7:function(t,e,a){"use strict";a("49e2")},b8bf:function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=(a("96cf"),a("1da1")),i=a("7e1e"),n={name:"TaskSelect",props:{value:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,options:[],selectedTasks:[]}},watch:{value:{immediate:!0,handler:function(t){this.selectedTasks=t,t&&t.length>0&&this.fetchSelectedTasks(t)}}},methods:{remoteSearch:function(){var t=Object(r.a)(Object(s.a)().mark((function t(e){var a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=18;break}return this.loading=!0,t.prev=2,t.next=5,Object(i.b)("task",{query:{title:{$regex:e,$options:"i"}},limit:20});case 5:a=t.sent,this.options=a.data,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),this.$message.error("搜索任务失败");case 13:return t.prev=13,this.loading=!1,t.finish(13);case 16:t.next=19;break;case 18:this.options=[];case 19:case"end":return t.stop()}}),t,this,[[2,9,13,16]])})));return function(e){return t.apply(this,arguments)}}(),fetchSelectedTasks:function(){var t=Object(r.a)(Object(s.a)().mark((function t(e){var a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&0!==e.length){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,Object(i.b)("task",{query:{_id:{$in:e}}});case 5:a=t.sent,this.options=a.data,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),handleChange:function(t){this.$emit("input",t)}}},o=n,l=a("2877"),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入任务标题搜索","remote-method":t.remoteSearch,loading:t.loading},on:{change:t.handleChange},model:{value:t.selectedTasks,callback:function(e){t.selectedTasks=e},expression:"selectedTasks"}},t._l(t.options,(function(e){return a("el-option",{key:e._id,attrs:{label:e.title,value:e._id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.title))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v("\n      "+t._s(e.type)+"\n    ")])])})),1)}),[],!1,null,null,null);e.default=c.exports},bf1f:function(t,e,a){"use strict";a("8e18")},bf8f:function(t,e,a){"use strict";a("e0f6")},c466:function(t,e,a){"use strict";function s(t){return t?(("string"==typeof t||"number"==typeof t)&&(t=new Date(t)),t.getFullYear()+"-"+(t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())):""}function r(t){return t||0===t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"}a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return r})),a("6b54"),a("a481")},c4d1:function(t,e,a){"use strict";a("1c1b")},c7d4:function(t,e,a){"use strict";a("3b6d")},c8d1:function(t,e,a){"use strict";a.r(e);var s=(a("6b54"),a("a481"),a("c7eb")),r=a("5530"),i=(a("96cf"),a("1da1")),n=(a("6762"),a("2fdb"),a("7e1e")),o=a("b5c9"),l=a("b728"),c=a("4f49"),u={dicts:["delivery_method","expert_platform","category","level"],components:{TagInput:o.a,ZrAddressSelect:l.a,AgentSelect:c.default},props:{dialogFormVisible:{type:Boolean,required:!0},dialogStatus:{type:String,required:!0},dataForm:{type:Object,required:!0}},data:function(){return{inputVisible:!1,inputValue:"",uploadAvatarUrl:"https://macaojob.cn/darenSever/api/upload/avatar",serverUrl:"https://macaojob.cn/darenSever",systemCooperationHistory:[],localVisible:!1,isAdmin:!1}},created:function(){this.isAdmin=this.$store.getters.roles.includes("admin")},methods:{handleClose:function(t){this.dataForm.followerInterests.splice(this.dataForm.followerInterests.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var t=this.inputValue;t&&this.dataForm.followerInterests.push(t),this.inputVisible=!1,this.inputValue=""},handleAvatarSuccess:function(t,e){200===t.code?(this.dataForm.avatar=this.serverUrl+t.data.url,this.$message.success("头像上传成功")):this.$message.error(t.msg||"头像上传失败")},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},checkPlatformIdExists:function(){var t=Object(i.a)(Object(s.a)().mark((function t(e){var a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(n.b)("expert",{query:Object(r.a)({platformId:e},"update"===this.dialogStatus&&{_id:{$ne:this.dataForm._id}})});case 3:return a=t.sent,t.abrupt("return",a.data&&a.data.length>0);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),submitForm:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$refs.dataForm.validate(function(){var t=Object(i.a)(Object(s.a)().mark((function t(a){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}if(!(e.dataForm.productPriceMax<e.dataForm.productPriceMin)){t.next=4;break}return e.$message.error("商品客单价区间有误：最高价不能小于最低价"),t.abrupt("return");case 4:return t.next=6,e.checkPlatformIdExists(e.dataForm.platformId);case 6:if(!t.sent){t.next=10;break}return e.$message.error("该平台ID已存在，请修改后重试"),t.abrupt("return");case 10:e.isAdmin||"edit"!==e.dialogStatus||(e.dataForm.createBy=e.$store.getters.userId),e.$emit("submit",e.dataForm),e.$emit("update:dialogFormVisible",!1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),addCooperationHistory:function(){this.dataForm.cooperationHistory.push({brands:"",videos:"",score:0,sales:0,remark:""})},removeCooperationHistory:function(t){this.dataForm.cooperationHistory.splice(t,1)},fetchSystemCooperationHistory:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dataForm._id){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,Object(n.b)("taskClaim",{query:{expertId:this.dataForm._id,status:{$in:["已完成"]},isDeleted:!1},populate:JSON.stringify([{path:"taskId"}])});case 5:e=t.sent,this.systemCooperationHistory=e.data.map((function(t){var e=t.result&&t.result.performanceData?t.result.performanceData:{views:0,interactions:0,sales:0};return{taskId:t.taskId._id,taskTitle:t.taskId.title,taskType:t.taskId.type,cooperationTime:t.taskId.startTime,status:t.status,performanceData:e,score:t.result&&t.result.score?t.result.score:0}})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),this.$message.error("获取系统合作历史失败");case 13:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(){return t.apply(this,arguments)}}(),viewTaskDetails:function(t){this.$router.push("/task-center/task-claim/".concat(t))},getCooperationStatusType:function(t){return{"已完成":"success","进行中":"primary","已取消":"danger"}[t]||"info"},formatNumber:function(t){return t||0===t?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"0"},openPlatformUrl:function(){this.dataForm.platformUrl&&window.open(this.dataForm.platformUrl,"_blank")},openWhatsApp:function(){if(this.dataForm.whatsappAccount){var t="https://wa.me/".concat(this.dataForm.whatsappAccount.replace(/\D/g,""));window.open(t,"_blank")}},initForm:function(){this.dataForm={platformUrl:"",whatsappAccount:""}}},watch:{dialogFormVisible:function(t){this.localVisible=t,t&&this.dataForm._id&&this.fetchSystemCooperationHistory()},localVisible:function(t){t!==this.dialogFormVisible&&this.$emit("update:dialogFormVisible",t)}}},d=u,m=(a("82cb"),a("2877")),p=Object(m.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"create"===t.dialogStatus?"添加达人":"编辑达人",visible:t.localVisible,width:"80%"},on:{"update:visible":function(e){t.localVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,"label-width":"120px"}},[a("div",{staticStyle:{"font-size":"18px","font-weight":"bold","margin-bottom":"10px"}},[t._v("账号信息")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属平台",prop:"platformName"}},[a("el-select",{attrs:{disabled:!t.isAdmin&&"edit"===t.dialogStatus,placeholder:"请选择平台"},model:{value:t.dataForm.platformName,callback:function(e){t.$set(t.dataForm,"platformName",e)},expression:"dataForm.platformName"}},t._l(t.dict.type.expert_platform,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"平台ID",prop:"platformId"}},[a("el-input",{attrs:{placeholder:"请输入平台ID"},model:{value:t.dataForm.platformId,callback:function(e){t.$set(t.dataForm,"platformId",e)},expression:"dataForm.platformId"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"平台昵称",prop:"nickname"}},[a("el-input",{attrs:{placeholder:"请输入平台昵称"},model:{value:t.dataForm.nickname,callback:function(e){t.$set(t.dataForm,"nickname",e)},expression:"dataForm.nickname"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"账号链接",prop:"platformUrl"}},[a("el-input",{attrs:{placeholder:"请输入账号链接"},model:{value:t.dataForm.platformUrl,callback:function(e){t.$set(t.dataForm,"platformUrl",e)},expression:"dataForm.platformUrl"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"达人等级",prop:"level"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择账号分类",clearable:""},model:{value:t.dataForm.level,callback:function(e){t.$set(t.dataForm,"level",e)},expression:"dataForm.level"}},t._l(t.dict.type.level,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"粉丝数量",prop:"followers"}},[a("el-input-number",{attrs:{min:0,placeholder:"粉丝数量"},model:{value:t.dataForm.followers,callback:function(e){t.$set(t.dataForm,"followers",e)},expression:"dataForm.followers"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"账号分类",prop:"category"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择账号分类",clearable:""},model:{value:t.dataForm.category,callback:function(e){t.$set(t.dataForm,"category",e)},expression:"dataForm.category"}},t._l(t.dict.type.category,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"平均互动率",prop:"averageEngagement"}},[a("el-input-number",{attrs:{min:0,max:100,precision:2,placeholder:"平均互动率"},model:{value:t.dataForm.averageEngagement,callback:function(e){t.$set(t.dataForm,"averageEngagement",e)},expression:"dataForm.averageEngagement"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"平均播放量",prop:"averageViews"}},[a("el-input-number",{attrs:{min:0,placeholder:"平均播放量"},model:{value:t.dataForm.averageViews,callback:function(e){t.$set(t.dataForm,"averageViews",e)},expression:"dataForm.averageViews"}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"font-size":"18px","font-weight":"bold",margin:"30px 0"}},[t._v("经纪人信息")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"经纪人",prop:"createBy"}},[a("AgentSelect",{attrs:{disabled:!t.isAdmin&&"edit"===t.dialogStatus},model:{value:t.dataForm.createBy,callback:function(e){t.$set(t.dataForm,"createBy",e)},expression:"dataForm.createBy"}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"font-size":"18px","font-weight":"bold",margin:"30px 0"}},[t._v("联系方式")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入电话",clearable:""},model:{value:t.dataForm.phone,callback:function(e){t.$set(t.dataForm,"phone",e)},expression:"dataForm.phone"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"其他联系方式",prop:"contactInfo"}},[a("el-input",{attrs:{placeholder:"请输入联系方式",clearable:""},model:{value:t.dataForm.contactInfo,callback:function(e){t.$set(t.dataForm,"contactInfo",e)},expression:"dataForm.contactInfo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"WhatsApp账号",prop:"whatsappAccount"}},[a("el-input",{attrs:{placeholder:"请输入WhatsApp账号",clearable:""},model:{value:t.dataForm.whatsappAccount,callback:function(e){t.$set(t.dataForm,"whatsappAccount",e)},expression:"dataForm.whatsappAccount"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"签约机构",prop:"agency"}},[a("el-input",{attrs:{placeholder:"请输入签约机构",clearable:""},model:{value:t.dataForm.agency,callback:function(e){t.$set(t.dataForm,"agency",e)},expression:"dataForm.agency"}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"font-size":"18px","font-weight":"bold","margin-bottom":"10px"}},[t._v("地区信息")]),t._v(" "),a("el-form-item",{attrs:{label:"所在地区",prop:"area"}},[a("ZrAddressSelect",{model:{value:t.dataForm.area,callback:function(e){t.$set(t.dataForm,"area",e)},expression:"dataForm.area"}})],1),t._v(" "),a("div",{staticStyle:{"font-size":"18px","font-weight":"bold",margin:"30px 0"}},[t._v("粉丝画像")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"粉丝男性比例",prop:"followerMan"}},[a("el-input-number",{attrs:{min:0,max:100,placeholder:"请输入粉丝男性比例"},model:{value:t.dataForm.followerMan,callback:function(e){t.$set(t.dataForm,"followerMan",e)},expression:"dataForm.followerMan"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"粉丝女性比例",prop:"followerWoman"}},[a("el-input-number",{attrs:{min:0,max:100,placeholder:"请输入粉丝女性比例"},model:{value:t.dataForm.followerWoman,callback:function(e){t.$set(t.dataForm,"followerWoman",e)},expression:"dataForm.followerWoman"}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"font-size":"18px","font-weight":"bold",margin:"30px 0"}},[t._v("带货数据")]),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"热销品类占比",prop:"hotCategoryRatio"}},[a("TagInput",{model:{value:t.dataForm.hotCategoryRatio,callback:function(e){t.$set(t.dataForm,"hotCategoryRatio",e)},expression:"dataForm.hotCategoryRatio"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"GPM",prop:"gpm"}},[a("el-input-number",{attrs:{min:0,placeholder:"请输入GPM"},model:{value:t.dataForm.gpm,callback:function(e){t.$set(t.dataForm,"gpm",e)},expression:"dataForm.gpm"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"商品客单价区间",prop:"productPrice"}},[a("el-input-number",{staticStyle:{width:"150px"},attrs:{min:0,placeholder:"最低价"},model:{value:t.dataForm.productPriceMin,callback:function(e){t.$set(t.dataForm,"productPriceMin",e)},expression:"dataForm.productPriceMin"}}),t._v(" "),a("span",{staticStyle:{margin:"0 10px"}},[t._v("-")]),t._v(" "),a("el-input-number",{staticStyle:{width:"150px"},attrs:{min:0,placeholder:"最高价"},model:{value:t.dataForm.productPriceMax,callback:function(e){t.$set(t.dataForm,"productPriceMax",e)},expression:"dataForm.productPriceMax"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"带货top3产品",prop:"top3Products"}},[a("TagInput",{model:{value:t.dataForm.top3Products,callback:function(e){t.$set(t.dataForm,"top3Products",e)},expression:"dataForm.top3Products"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"带货方式",prop:"sellingMethod"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择带货方式"},model:{value:t.dataForm.sellingMethod,callback:function(e){t.$set(t.dataForm,"sellingMethod",e)},expression:"dataForm.sellingMethod"}},t._l(t.dict.type.delivery_method,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"月销量",prop:"followerMan"}},[a("el-input-number",{attrs:{min:0,max:100,placeholder:"请输入月销量"},model:{value:t.dataForm.monthlySales,callback:function(e){t.$set(t.dataForm,"monthlySales",e)},expression:"dataForm.monthlySales"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"月销售额",prop:"followerWoman"}},[a("el-input-number",{attrs:{min:0,max:100,placeholder:"请输入月销售额"},model:{value:t.dataForm.monthlySalesAmount,callback:function(e){t.$set(t.dataForm,"monthlySalesAmount",e)},expression:"dataForm.monthlySalesAmount"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"合作次数"}},[t._v("\n            "+t._s(t.dataForm.cooperationHistory.length)+"\n        ")]),t._v(" "),a("div",{staticStyle:{"font-size":"18px","font-weight":"bold",margin:"30px 0"}},[t._v("合作历史")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addCooperationHistory}},[t._v("添加合作历史")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","border-radius":"8px",overflow:"hidden"},attrs:{data:t.dataForm.cooperationHistory}},[a("el-table-column",{attrs:{label:"品牌名称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"品牌名称",clearable:""},model:{value:e.row.brandName,callback:function(a){t.$set(e.row,"brandName",a)},expression:"scope.row.brandName"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"品牌类目",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"品牌类目",clearable:""},model:{value:e.row.brandCategory,callback:function(a){t.$set(e.row,"brandCategory",a)},expression:"scope.row.brandCategory"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"视频链接",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"视频链接",clearable:""},model:{value:e.row.videoUrl,callback:function(a){t.$set(e.row,"videoUrl",a)},expression:"scope.row.videoUrl"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"视频发布时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择发时间",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.row.videoPublishTime,callback:function(a){t.$set(e.row,"videoPublishTime",a)},expression:"scope.row.videoPublishTime"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"视频GMV",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:0,placeholder:"视频GMV",size:"mini"},model:{value:e.row.videoGMV,callback:function(a){t.$set(e.row,"videoGMV",a)},expression:"scope.row.videoGMV"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"视频订单数",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:0,placeholder:"订单数",size:"mini"},model:{value:e.row.videoOrders,callback:function(a){t.$set(e.row,"videoOrders",a)},expression:"scope.row.videoOrders"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"观看数",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:0,placeholder:"观看数",size:"mini"},model:{value:e.row.videoViews,callback:function(a){t.$set(e.row,"videoViews",a)},expression:"scope.row.videoViews"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"点赞数",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:0,placeholder:"点赞数",size:"mini"},model:{value:e.row.videoLikes,callback:function(a){t.$set(e.row,"videoLikes",a)},expression:"scope.row.videoLikes"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"评论数",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:0,placeholder:"评论数",size:"mini"},model:{value:e.row.videoComments,callback:function(a){t.$set(e.row,"videoComments",a)},expression:"scope.row.videoComments"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"直播时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-date-picker",{attrs:{type:"datetime",placeholder:"直播时间",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.row.liveTime,callback:function(a){t.$set(e.row,"liveTime",a)},expression:"scope.row.liveTime"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"直播GMV",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:0,placeholder:"直播GMV",size:"mini"},model:{value:e.row.liveGMV,callback:function(a){t.$set(e.row,"liveGMV",a)},expression:"scope.row.liveGMV"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"直播订单数",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:0,placeholder:"直播订单数",size:"mini"},model:{value:e.row.liveOrders,callback:function(a){t.$set(e.row,"liveOrders",a)},expression:"scope.row.liveOrders"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"评分",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-rate",{attrs:{max:5},model:{value:e.row.score,callback:function(a){t.$set(e.row,"score",a)},expression:"scope.row.score"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"备注",type:"textarea"},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.removeCooperationHistory(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticStyle:{"font-size":"18px","font-weight":"bold",margin:"30px 0"}},[t._v("任务历史")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","border-radius":"8px",overflow:"hidden"},attrs:{data:t.systemCooperationHistory}},[a("el-table-column",{attrs:{label:"任务标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.viewTaskDetails(e.row.taskId)}}},[t._v(t._s(e.row.taskTitle))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"任务类型",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"mini"}},[t._v(t._s(e.row.taskType))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合作时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.formatDate(e.row.cooperationTime))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合作状态",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.getCooperationStatusType(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"播放量",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.views))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"互动量",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.formatNumber(e.row.performanceData.interactions))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"销售额",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"price"},[t._v("¥"+t._s(t.formatNumber(e.row.performanceData.sales)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"评分",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-rate",{attrs:{disabled:"","show-score":""},model:{value:e.row.score,callback:function(a){t.$set(e.row,"score",a)},expression:"scope.row.score"}})]}}])})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.localVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)}),[],!1,null,"70b062e6",null);e.default=p.exports},cb28:function(t,e,a){"use strict";a.r(e);var s=(a("6b54"),a("a481"),a("7f7f"),a("5530")),r=a("c7eb"),i=(a("6762"),a("2fdb"),a("96cf"),a("1da1")),n=a("2909"),o=a("7e1e"),l=a("c466"),c=a("cf83"),u=a("6c29b"),d=a("3e48"),m=a("5260"),p=a("3620"),f=a("b8bf"),h=a("f186"),v={dicts:["expert_platform","task_type","content_type","category","task_progress","broker_task_progress","tracker_task_progress"],name:"TrackerTasks",components:{TaskProgressDialog:c.default,TaskResultDialog:u.default,TaskClaimDetails:d.default,ExpertSelect:m.default,AgentSelect:p.default,TaskSelect:f.default,TrackerSelect:h.default},data:function(){return{claimStatusList:["待审核","已通过","已拒绝"],currentUserId:"",isAdmin:!1,isAgent:!1,isTracker:!1,taskInfo:null,searchForm:{taskIds:[],taskType:"",status:"",claimStatus:"",publishTimeRange:[],videoGmvMin:null,videoGmvMax:null,liveGmvMin:null,liveGmvMax:null,expertIds:[],agentIds:[]},taskList:[],page:{current:1,size:10,total:0},statusList:[],showProgressHistory:!1,showResultDialog:!1,progressDialogVisible:!1,resultDialogVisible:!1,detailsDialogVisible:!1,currentClaim:null,currentClaimDetails:null,taskTypeTagMap:{"直播带货":"success","短视频":"primary","图文":"warning"},taskStatusTagMap:{"待开始":"info","进行中":"primary","已结束":"success","已取消":"danger"},progressStatusTagMap:{"未开始":"info","沟通中":"warning","合作成功":"success","寄送样品":"primary","样品跟踪":"warning","已收货":"success","内容制作中":"primary","作品已发布":"success","数据统计中":"warning","已完成":"success","已取消":"danger"},claimStatusTagMap:{"待审核":"warning","已通过":"success","已拒绝":"danger"},taskConfig:{requireClaimAudit:!1},taskTypeList:["直播带货","短视频","图文"]}},created:function(){this.getCurrentUser(),this.fetchData()},methods:{checkAgentPermission:function(t){return!t.progressSteps.some((function(t){return"合作成功"===t.status}))},checkTrackerPermission:function(t){return t.progressSteps.some((function(t){return"合作成功"===t.status}))},getAvailableStatuses:function(){if(this.isAgent)return this.statusList=[].concat(Object(n.a)(this.dict.type.broker_task_progress),[{label:"合作成功",value:"合作成功",type:"success"}]);if(this.isTracker){var t=[{label:"合作成功",value:"合作成功",type:"success"}];return t=[].concat(Object(n.a)(t),Object(n.a)(this.dict.type.tracker_task_progress)),this.statusList=t}return this.statusList},calculateTotalMetric:function(t,e){return t&&Array.isArray(t)?t.reduce((function(t,a){return t+(a.performanceData&&a.performanceData[e]||0)}),0):0},calculateTotalInteractions:function(t){return t&&Array.isArray(t)?t.reduce((function(t,e){var a=e.performanceData||{};return t+(a.likes||0)+(a.comments||0)+(a.shares||0)}),0):0},getContentTimelineType:function(t){return{"短视频":"primary","直播":"success","图文":"warning"}[t.contentType]||"info"},getCurrentUser:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.isAdmin=this.$store.getters.roles.label.includes("Admin"),this.isAgent=this.$store.getters.roles.label.includes("Agent")||this.$store.getters.roles.label.includes("Admin"),this.isTracker=this.$store.getters.roles.label.includes("Tracker")||this.$store.getters.roles.label.includes("Admin"),this.currentUserId=this.$store.state.user.id}catch(t){}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),fetchData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.buildQuery();case 3:return e=t.sent,t.next=6,Object(o.b)("taskClaim",{query:e,populate:JSON.stringify([{path:"taskId"},{path:"agentId"},{path:"expertId"},{path:"trackerId"}]),sort:{_id:-1},page:this.page.current,limit:this.page.size});case 6:a=t.sent,this.taskList=a.data.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{taskInfo:t.taskId,agentName:t.agentId&&t.agentId.nickName?t.agentId.nickName:"未知",expertName:t.expertId&&t.expertId.nickname?t.expertId.nickname:"未知",trackerName:t.trackerId&&t.trackerId.nickName?t.trackerId.nickName:"未指定"})})),this.page.total=a.total,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),this.$message.error("获取数据失败");case 15:case"end":return t.stop()}}),t,this,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),buildQuery:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e={},this.searchForm.taskIds&&this.searchForm.taskIds.length>0&&(e.taskId={$in:this.searchForm.taskIds}),!this.searchForm.taskType){t.next=8;break}return t.next=5,this.getTaskIdsByType(this.searchForm.taskType);case 5:(a=t.sent).length>0&&(e.taskId={$in:a});case 8:if(!this.searchForm.contentType){t.next=13;break}return t.next=11,this.getTaskIdsByContentType(this.searchForm.contentType);case 11:(s=t.sent).length>0&&(e.taskId={$in:s});case 13:return this.searchForm.status&&(e.status=this.searchForm.status),this.searchForm.claimStatus&&(e.claimStatus=this.searchForm.claimStatus),this.searchForm.publishTimeRange&&2===this.searchForm.publishTimeRange.length&&(e["result.contentList.publishTime"]={$gte:new Date(this.searchForm.publishTimeRange[0]),$lte:new Date(this.searchForm.publishTimeRange[1])}),(this.searchForm.videoGmvMin||this.searchForm.videoGmvMax)&&(e["result.contentList.performanceData.videoGmv"]={},this.searchForm.videoGmvMin&&(e["result.contentList.performanceData.videoGmv"].$gte=this.searchForm.videoGmvMin),this.searchForm.videoGmvMax&&(e["result.contentList.performanceData.videoGmv"].$lte=this.searchForm.videoGmvMax)),(this.searchForm.liveGmvMin||this.searchForm.liveGmvMax)&&(e["result.contentList.performanceData.liveGmv"]={},this.searchForm.liveGmvMin&&(e["result.contentList.performanceData.liveGmv"].$gte=this.searchForm.liveGmvMin),this.searchForm.liveGmvMax&&(e["result.contentList.performanceData.liveGmv"].$lte=this.searchForm.liveGmvMax)),this.searchForm.expertIds&&this.searchForm.expertIds.length>0&&(e.expertId={$in:this.searchForm.expertIds}),this.searchForm.agentIds&&this.searchForm.agentIds.length>0&&(e.agentId={$in:this.searchForm.agentIds}),this.isAdmin||(this.isAgent&&(e.agentId=this.$store.state.user.id),this.isTracker&&(e.trackerId=this.$store.state.user.id)),t.abrupt("return",e);case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleAudit:function(){var t=Object(i.a)(Object(r.a)().mark((function t(e,a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.d)("taskClaim",{query:{_id:e._id},update:{claimStatus:a,auditTime:new Date,auditRemark:"已拒绝"===a?"不符合要求":"符合要求"}});case 3:this.$message.success("审核完成"),this.fetchData(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),this.$message.error("审核失败");case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}(),handleProgressSubmit:function(){var t=Object(i.a)(Object(r.a)().mark((function t(e){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a={status:e.status,$push:{progressSteps:{step:e.step,status:e.status,updateTime:new Date,updatedBy:this.currentUserId,remark:e.remark,trackingInfo:e.trackingInfo}}},"合作成功"!==e.status){t.next=6;break}return a.trackerId=e.trackerId,t.next=6,Object(o.a)("messageLog",{title:"跟踪员指派通知",content:"您已被指派为任务【".concat(this.taskInfo.title,"】的跟踪员"),type:"TRACKER_ASSIGNED",taskId:this.taskInfo._id,taskClaimId:this.currentClaim._id,sender:{userId:this.$store.state.user.id,role:"AGENT"},receivers:[{userId:e.trackerId,role:"TRACKER",isRead:!1}],isSystem:!1});case 6:return t.next=8,Object(o.d)("taskClaim",{query:{_id:this.currentClaim._id},update:a});case 8:return this.$message.success("进度更新成功"),t.next=11,Object(o.a)("messageLog",{title:"任务进度更新",content:"任务【".concat(this.taskInfo.title,"】的进度已更新为：").concat(e.status),type:"TASK_PROGRESS",taskId:this.taskInfo._id,taskClaimId:this.currentClaim._id,sender:{userId:this.$store.state.user.id,role:this.isTracker?"TRACKER":"AGENT"},receivers:[{userId:this.currentClaim.agentId&&this.currentClaim.agentId._id,role:"AGENT",isRead:!1},{userId:this.currentClaim.trackerId&&this.currentClaim.trackerId._id,role:"TRACKER",isRead:!1}],isSystem:!1});case 11:this.$message.success("进度更新成功"),this.fetchData(),this.progressDialogVisible=!1,t.next=20;break;case 16:t.prev=16,t.t0=t.catch(0),this.$message.error("进度更新失败");case 20:case"end":return t.stop()}}),t,this,[[0,16]])})));return function(e){return t.apply(this,arguments)}}(),getTaskTypeTag:function(t){return this.taskTypeTagMap[t]||"info"},getTaskStatusTag:function(t){return this.taskStatusTagMap[t]||"info"},getProgressStatusType:function(t){return this.progressStatusTagMap[t]||"info"},getClaimStatusType:function(t){return this.claimStatusTagMap[t]||"info"},handleUpdateProgress:function(t){this.taskInfo=t.taskId,this.currentClaim=t,this.progressDialogVisible=!0},handleSubmitResult:function(t){this.taskInfo=t.taskId,this.currentClaim=t,this.resultDialogVisible=!0},handleViewDetails:function(t){t?(this.currentClaimDetails={_id:t._id||"",taskInfo:t.taskInfo||{},agentName:t.agentId&&t.agentId.nickName?t.agentId.nickName:"未知",expertName:t.expertId&&t.expertId.name?t.expertId.name:"未知",trackerName:t.trackerId&&t.trackerId.nickName?t.trackerId.nickName:"未指定",claimStatus:t.claimStatus||"未知",claimTime:t.claimTime||null,status:t.status||"未知",progressSteps:t.progressSteps||[],result:t.result?Object(s.a)(Object(s.a)({},t.result),{},{performanceData:{views:t.result&&t.result.performanceData&&t.result.performanceData.views||0,likes:t.result&&t.result.performanceData&&t.result.performanceData.likes||0,comments:t.result&&t.result.performanceData&&t.result.performanceData.comments||0,shares:t.result&&t.result.performanceData&&t.result.performanceData.shares||0,gmv:t.result&&t.result.performanceData&&t.result.performanceData.gmv||0,orderCount:t.result&&t.result.performanceData&&t.result.performanceData.orderCount||0}}):null},this.detailsDialogVisible=!0):this.$message.warning("数据不完整")},handleSearch:function(){this.page.current=1,this.fetchData()},resetSearch:function(){this.searchForm={taskIds:[],taskType:"",status:"",claimStatus:"",publishTimeRange:[],videoGmvMin:null,videoGmvMax:null,liveGmvMin:null,liveGmvMax:null,expertIds:[],agentIds:[]},this.handleSearch()},handleSizeChange:function(t){this.page.size=t,this.fetchData()},handleCurrentChange:function(t){this.page.current=t,this.fetchData()},formatNumber:function(t){return t?t.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"):"0"},formatDate:function(t){return Object(l.a)(t)},getTaskIdsByType:function(){var t=Object(i.a)(Object(r.a)().mark((function t(e){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.b)("task",{query:{type:e},select:"_id"});case 3:return a=t.sent,t.abrupt("return",a.data.map((function(t){return t._id})));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",[]);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),getTaskIdsByContentType:function(){var t=Object(i.a)(Object(r.a)().mark((function t(e){var a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.b)("task",{query:{"cooperationDetails.requirements.contentType":e},select:"_id"});case 3:return a=t.sent,t.abrupt("return",a.data.map((function(t){return t._id})));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",[]);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},computed:{}},b=v,g=(a("edbc"),a("2877")),_=Object(g.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tracker-tasks"},[a("el-card",{staticClass:"search-card"},[a("el-form",{staticClass:"search-form",attrs:{inline:!0,model:t.searchForm}},[a("el-form-item",{attrs:{label:"任务标题"}},[a("task-select",{model:{value:t.searchForm.taskIds,callback:function(e){t.$set(t.searchForm,"taskIds",e)},expression:"searchForm.taskIds"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务类型"}},[a("el-select",{attrs:{placeholder:"请选择任务类型",clearable:""},model:{value:t.searchForm.taskType,callback:function(e){t.$set(t.searchForm,"taskType",e)},expression:"searchForm.taskType"}},t._l(t.dict.type.task_type,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"内容形式"}},[a("el-select",{attrs:{placeholder:"请选择内容形式",clearable:""},model:{value:t.searchForm.contentType,callback:function(e){t.$set(t.searchForm,"contentType",e)},expression:"searchForm.contentType"}},t._l(t.dict.type.content_type,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"任务进度"}},[a("el-select",{attrs:{placeholder:"请选择进度",clearable:""},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},t._l(t.dict.type.task_progress,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),t.taskConfig.requireClaimAudit?a("el-form-item",{attrs:{label:"审核状态"}},[a("el-select",{attrs:{placeholder:"请选择审核状态",clearable:""},model:{value:t.searchForm.claimStatus,callback:function(e){t.$set(t.searchForm,"claimStatus",e)},expression:"searchForm.claimStatus"}},t._l(t.claimStatusList,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"发布时间"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","default-time":["00:00:00","23:59:59"]},model:{value:t.searchForm.publishTimeRange,callback:function(e){t.$set(t.searchForm,"publishTimeRange",e)},expression:"searchForm.publishTimeRange"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"达人"}},[a("expert-select",{model:{value:t.searchForm.expertIds,callback:function(e){t.$set(t.searchForm,"expertIds",e)},expression:"searchForm.expertIds"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"经纪人"}},[a("agent-select",{model:{value:t.searchForm.agentIds,callback:function(e){t.$set(t.searchForm,"agentIds",e)},expression:"searchForm.agentIds"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跟踪员"}},[a("tracker-select",{model:{value:t.searchForm.trackerIds,callback:function(e){t.$set(t.searchForm,"trackerIds",e)},expression:"searchForm.trackerIds"}})],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"视频GMV"}},[a("el-input-number",{attrs:{placeholder:"最小值",min:0},model:{value:t.searchForm.videoGmvMin,callback:function(e){t.$set(t.searchForm,"videoGmvMin",e)},expression:"searchForm.videoGmvMin"}}),t._v(" "),a("span",{staticClass:"range-separator"},[t._v("-")]),t._v(" "),a("el-input-number",{attrs:{placeholder:"最大值",min:0},model:{value:t.searchForm.videoGmvMax,callback:function(e){t.$set(t.searchForm,"videoGmvMax",e)},expression:"searchForm.videoGmvMax"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"直播GMV"}},[a("el-input-number",{attrs:{placeholder:"最小值",min:0},model:{value:t.searchForm.liveGmvMin,callback:function(e){t.$set(t.searchForm,"liveGmvMin",e)},expression:"searchForm.liveGmvMin"}}),t._v(" "),a("span",{staticClass:"range-separator"},[t._v("-")]),t._v(" "),a("el-input-number",{attrs:{placeholder:"最大值",min:0},model:{value:t.searchForm.liveGmvMax,callback:function(e){t.$set(t.searchForm,"liveGmvMax",e)},expression:"searchForm.liveGmvMax"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("搜索")]),t._v(" "),a("el-button",{on:{click:t.resetSearch}},[t._v("重置")])],1)],1)],1),t._v(" "),a("el-card",{staticClass:"task-list"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("任务列表")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"warning",size:"small"},on:{click:function(e){t.showProgressHistory=!t.showProgressHistory}}},[t._v("\n        "+t._s(t.showProgressHistory?"隐藏任务进度历史":"展开任务进度历史")+"\n      ")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"warning",size:"small"},on:{click:function(e){t.showResultDialog=!t.showResultDialog}}},[t._v("\n        "+t._s(t.showResultDialog?"隐藏执行结果列表":"展开执行结果列表")+"\n      ")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.taskList,border:""}},[a("el-table-column",{attrs:{label:"任务信息","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"task-info"},[a("div",{staticClass:"task-title"},[t._v(t._s(e.row.taskInfo.title))]),t._v(" "),a("div",{staticClass:"task-meta"},[a("el-tag",{attrs:{size:"small",type:t.getTaskTypeTag(e.row.taskInfo.type)}},[t._v("\n                "+t._s(e.row.taskInfo.type)+"\n              ")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"任务时间","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"mini",type:"success"}},[t._v("开始："+t._s(t.formatDate(e.row.taskInfo.startTime))+" ")]),t._v(" "),a("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v("结束："+t._s(t.formatDate(e.row.taskInfo.endTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"达人信息","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"expert-info"},[a("div",[t._v(t._s(e.row.expertName))]),t._v(" "),a("small",{staticClass:"agent-name"},[t._v("经纪人："+t._s(e.row.agentName))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"任务经纪人","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.agentName)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"当前任务进度","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.getProgressStatusType(e.row.status)}},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"跟踪员","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.trackerName)+"\n        ")]}}])}),t._v(" "),t.showProgressHistory?a("el-table-column",{attrs:{label:"进度历史","min-width":"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.progressSteps&&e.row.progressSteps.length?a("el-timeline",t._l(e.row.progressSteps,(function(e,s){return a("el-timeline-item",{key:s,attrs:{type:t.getProgressStatusType(e.status),size:"small",timestamp:t.formatDate(e.updateTime)}},[a("div",{staticClass:"progress-item"},[a("div",{staticClass:"progress-header"},[a("el-tag",{attrs:{size:"mini",type:t.getProgressStatusType(e.status)}},[t._v("\n                    "+t._s(e.status)+"\n                  ")]),t._v(" "),a("span",{staticClass:"progress-step"},[t._v(t._s(e.step))])],1),t._v(" "),e.remark?a("div",{staticClass:"progress-remark"},[t._v("\n                  "+t._s(e.remark)+"\n                ")]):t._e()])])})),1):a("span",[t._v("暂无进度")])]}}],null,!1,865908661)}):t._e(),t._v(" "),t.isTracker?a("el-table-column",{attrs:{label:"执行结果",width:"600"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.result&&e.row.result.contentList&&e.row.result.contentList.length?[a("div",{staticClass:"result-summary",staticStyle:{width:"150px"}},[a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("总播放量：")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.formatNumber(t.calculateTotalMetric(e.row.result.contentList,"views"))))])]),t._v(" "),a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("总互动量：")]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.formatNumber(t.calculateTotalInteractions(e.row.result.contentList))))])]),t._v(" "),a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("总视频销售额：")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v("¥"+t._s(t.formatNumber(t.calculateTotalMetric(e.row.result.contentList,"videoGmv"))))])]),t._v(" "),a("div",{staticClass:"result-data-item"},[a("span",{staticClass:"label"},[t._v("总直播销售额：")]),t._v(" "),a("span",{staticClass:"value highlight"},[t._v("¥"+t._s(t.formatNumber(t.calculateTotalMetric(e.row.result.contentList,"liveGmv"))))])])]),t._v(" "),t.showResultDialog?a("el-table",{staticClass:"content-table",attrs:{data:e.row.result.contentList,size:"mini",border:""}},[a("el-table-column",{attrs:{label:"发布平台",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{size:"mini",type:"primary"}},[t._v(t._s(e.row.platform))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"内容类型",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{staticStyle:{"margin-top":"4px"},attrs:{size:"mini",type:"success"}},[t._v(t._s(e.row.type))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"视频链接",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",href:e.row.link,target:"_blank"}},[t._v(t._s(e.row.link))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"广告码",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s(e.row.adCode)+"\n                ")]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"publish-time"},[t._v(t._s(t.formatDate(e.row.publishTime)))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"数据表现"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"metrics-container"},[a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-video-play"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.views)))])]),t._v(" "),a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-star-on"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.likes)))])]),t._v(" "),a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.comments)))])]),t._v(" "),a("div",{staticClass:"metric-item"},[a("i",{staticClass:"el-icon-share"}),t._v(" "),a("span",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(e.row.performanceData.shares)))])]),t._v(" "),a("div",{staticClass:"metric-item highlight"},[t._v("\n                      视频GMV：¥"+t._s(t.formatNumber(e.row.performanceData.videoGmv))+"\n                    ")]),t._v(" "),a("div",{staticClass:"metric-item highlight"},[t._v("\n                      直播GMV：¥"+t._s(t.formatNumber(e.row.performanceData.liveGmv))+"\n                    ")])])]}}],null,!0)})],1):t._e()]:a("span",{staticClass:"no-result"},[t._v("暂无执行结果")])]}}],null,!1,1302769326)}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:t.isAdmin&&t.taskConfig.requireClaimAudit||t.isTracker?300:200,fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.handleViewDetails(e.row)}}},[t._v("\n            查看详情\n          ")]),t._v(" "),t.isAdmin&&t.taskConfig.requireClaimAudit?["待审核"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleAudit(e.row,"已通过")}}},[t._v("\n              通过\n            ")]):t._e(),t._v(" "),"待审核"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleAudit(e.row,"已拒绝")}}},[t._v("\n              拒绝\n            ")]):t._e()]:t._e(),t._v(" "),t.isAgent&&e.row.agentId&&e.row.agentId._id===t.currentUserId&&t.checkAgentPermission(e.row)?["已通过"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleUpdateProgress(e.row)}}},[t._v("\n              更新进度\n            ")]):t._e()]:t._e(),t._v(" "),e.row.trackerId&&e.row.trackerId._id===t.currentUserId&&t.checkTrackerPermission(e.row)?["已通过"===e.row.claimStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleUpdateProgress(e.row)}}},[t._v("\n              更新进度\n            ")]):t._e(),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.handleSubmitResult(e.row)}}},[t._v("\n              提交结果\n            ")])]:t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.page.current,"page-sizes":[10,20,50,100],"page-size":t.page.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("task-progress-dialog",{attrs:{visible:t.progressDialogVisible,"current-claim":t.currentClaim,"status-list":t.getAvailableStatuses()},on:{"update:visible":function(e){t.progressDialogVisible=e},submit:t.handleProgressSubmit}}),t._v(" "),a("task-result-dialog",{attrs:{visible:t.resultDialogVisible,"current-claim":t.currentClaim},on:{"update:visible":function(e){t.resultDialogVisible=e},"submit-success":t.fetchData}}),t._v(" "),a("task-claim-details",{attrs:{visible:t.detailsDialogVisible,details:t.currentClaimDetails},on:{"update:visible":function(e){t.detailsDialogVisible=e}}})],1)}),[],!1,null,"a1d7d8ac",null);e.default=_.exports},cb6b:function(t,e,a){},cbb3:function(t,e,a){"use strict";a("60a1")},cc1c:function(t,e,a){"use strict";a("ed44")},cd7c:function(t,e,a){"use strict";a("2b38")},cd8e:function(t,e,a){"use strict";a("42ea")},cf44:function(t,e,a){},cf83:function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=(a("96cf"),a("1da1")),i=(a("6762"),a("2fdb"),a("ac6a"),a("456d"),a("7e1e")),n={dicts:["tracker_task_progress"],name:"TaskProgressDialog",props:{visible:{type:Boolean,default:!1},currentClaim:{type:Object,default:function(){return{}}},statusList:{type:Array,default:function(){return[]}}},data:function(){return{isAdmin:!1,isAgent:!1,isTracker:!1,currentUserId:"",form:{status:"",trackerId:"",step:"",remark:"",trackingInfo:{buildConnectionSource:"",cooperationDate:null,receiveTime:null,estimatedPublishTime:null}},rules:{status:[{required:!0,message:"请选择进度状态",trigger:"change"}],step:[{message:"请输入进度说明",trigger:"blur"}],"trackingInfo.buildConnectionSource":[{required:!0,message:"请输入建联来源",trigger:"blur"}],"trackingInfo.cooperationDate":[{required:!0,message:"请选择确定合作日",trigger:"change"}],"trackingInfo.receiveTime":[{required:!0,message:"请选择收货时间",trigger:"change"}],"trackingInfo.estimatedPublishTime":[{required:!0,message:"请选择预计发布时间",trigger:"change"}]},trackerOptions:[]}},watch:{visible:{immediate:!0,handler:function(t){t&&(this.initForm(),this.getCurrentUser(),this.loadTrackerOptions())}},currentClaim:{immediate:!0,handler:function(t){t&&Object.keys(t).length>0&&this.initForm()}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}},showTrackingInfo:function(){return this.dict.type.tracker_task_progress.map((function(t){return t.value})).includes(this.form.status)},availableStatuses:function(){return this.statusList}},methods:{handleClose:function(){this.dialogVisible=!1},getCurrentUser:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.isAdmin=this.$store.getters.roles.label.includes("Admin"),this.isAgent=this.$store.getters.roles.label.includes("Agent")||this.$store.getters.roles.label.includes("Admin"),this.isTracker=this.$store.getters.roles.label.includes("Tracker")||this.$store.getters.roles.label.includes("Admin"),this.currentUserId=this.$store.state.user.id}catch(t){}case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),initForm:function(){if(this.currentClaim){var t=this.currentClaim.progressSteps||[],e=(t.length>0?t[t.length-1]:{}).trackingInfo||{};this.form={status:this.currentClaim.status||"",trackerId:this.currentClaim.trackerId||"",step:"",remark:"",trackingInfo:{buildConnectionSource:e.buildConnectionSource||"",cooperationDate:e.cooperationDate||null,receiveTime:e.receiveTime||null,estimatedPublishTime:e.estimatedPublishTime||null}}}},loadTrackerOptions:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i.b)("user_login",{query:{role:"6734de3a55647e147063f158"}});case 3:(e=t.sent).data&&(this.trackerOptions=e.data.map((function(t){return{value:t._id,label:t.nickName||t.username}}))),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),this.$message.error("获取任务跟踪员列表失败");case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),handleSubmit:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs.progressForm.validate();case 3:if("合作成功"!==this.form.status){t.next=13;break}if(this.form.trackerId){t.next=7;break}return this.$message.error("请选择任务跟踪员"),t.abrupt("return");case 7:if(this.form.trackingInfo.buildConnectionSource){t.next=10;break}return this.$message.error("请输入建联来源"),t.abrupt("return");case 10:if(this.form.trackingInfo.cooperationDate){t.next=13;break}return this.$message.error("请选择确定合作日"),t.abrupt("return");case 13:if("已签收"!==this.form.status||this.form.trackingInfo.receiveTime){t.next=16;break}return this.$message.error("请选择收货时间"),t.abrupt("return");case 16:if("内容制作中"!==this.form.status||this.form.trackingInfo.estimatedPublishTime){t.next=19;break}return this.$message.error("请选择预计发布时间"),t.abrupt("return");case 19:this.$emit("submit",this.form),this.handleClose(),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0);case 26:case"end":return t.stop()}}),t,this,[[0,23]])})));return function(){return t.apply(this,arguments)}}()}},o=n,l=a("2877"),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"更新进度",visible:t.dialogVisible,width:"60%","custom-class":"progress-dialog","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[a("el-form",{ref:"progressForm",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"进度状态",prop:"status"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.availableStatuses,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),"合作成功"===t.form.status?a("el-form-item",{attrs:{label:"任务跟踪员",prop:"trackerId",rules:{required:!0,message:"请选择任务跟踪员",trigger:"change"}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择任务跟踪员"},model:{value:t.form.trackerId,callback:function(e){t.$set(t.form,"trackerId",e)},expression:"form.trackerId"}},t._l(t.trackerOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e(),t._v(" "),t.isAgent?[a("div",{staticClass:"tracking-info-section"},[["合作成功"].includes(t.form.status)?a("el-form-item",{attrs:{label:"建联来源",prop:"trackingInfo.buildConnectionSource"}},[a("el-input",{attrs:{placeholder:"请输入建联来源"},model:{value:t.form.trackingInfo.buildConnectionSource,callback:function(e){t.$set(t.form.trackingInfo,"buildConnectionSource",e)},expression:"form.trackingInfo.buildConnectionSource"}})],1):t._e(),t._v(" "),["合作成功"].includes(t.form.status)?a("el-form-item",{attrs:{label:"确定合作日",prop:"trackingInfo.cooperationDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择确定合作日"},model:{value:t.form.trackingInfo.cooperationDate,callback:function(e){t.$set(t.form.trackingInfo,"cooperationDate",e)},expression:"form.trackingInfo.cooperationDate"}})],1):t._e()],1)]:t._e(),t._v(" "),t.isTracker?[a("div",{staticClass:"tracking-info-section"},[["已签收"].includes(t.form.status)?a("el-form-item",{attrs:{label:"收货时间",prop:"trackingInfo.receiveTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择收货时间"},model:{value:t.form.trackingInfo.receiveTime,callback:function(e){t.$set(t.form.trackingInfo,"receiveTime",e)},expression:"form.trackingInfo.receiveTime"}})],1):t._e()],1)]:t._e(),t._v(" "),a("el-form-item",{attrs:{label:"进度备注",prop:"step"}},[a("el-input",{attrs:{placeholder:"进度备注"},model:{value:t.form.step,callback:function(e){t.$set(t.form,"step",e)},expression:"form.step"}})],1)],2),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)}),[],!1,null,null,null);e.default=c.exports},d044:function(t,e,a){var s;t.exports=function(){function t(t){this.mode=a.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,s=this.data.length;e<s;e++){var r=[],i=this.data.charCodeAt(e);i>65536?(r[0]=240|(1835008&i)>>>18,r[1]=128|(258048&i)>>>12,r[2]=128|(4032&i)>>>6,r[3]=128|63&i):i>2048?(r[0]=224|(61440&i)>>>12,r[1]=128|(4032&i)>>>6,r[2]=128|63&i):i>128?(r[0]=192|(1984&i)>>>6,r[1]=128|63&i):r[0]=i,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,a=this.parsedData.length;e<a;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var a=new t(e);this.dataList.push(a),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,a){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[s][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,a),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,a)},setupPositionProbePattern:function(t,e){for(var a=-1;a<=7;a++)if(!(t+a<=-1||this.moduleCount<=t+a))for(var s=-1;s<=7;s++)e+s<=-1||this.moduleCount<=e+s||(this.modules[t+a][e+s]=0<=a&&a<=6&&(0==s||6==s)||0<=s&&s<=6&&(0==a||6==a)||2<=a&&a<=4&&2<=s&&s<=4)},getBestMaskPattern:function(){for(var t=0,e=0,a=0;a<8;a++){this.makeImpl(!0,a);var s=n.getLostPoint(this);(0==a||t>s)&&(t=s,e=a)}return e},createMovieClip:function(t,e,a){var s=t.createEmptyMovieClip(e,a),r=1;this.make();for(var i=0;i<this.modules.length;i++)for(var n=i*r,o=0;o<this.modules[i].length;o++){var l=o*r;this.modules[i][o]&&(s.beginFill(0,100),s.moveTo(l,n),s.lineTo(l+r,n),s.lineTo(l+r,n+r),s.lineTo(l,n+r),s.endFill())}return s},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=n.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var a=0;a<t.length;a++){var s=t[e],r=t[a];if(null==this.modules[s][r])for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)this.modules[s+i][r+o]=-2==i||2==i||-2==o||2==o||0==i&&0==o}},setupTypeNumber:function(t){for(var e=n.getBCHTypeNumber(this.typeNumber),a=0;a<18;a++){var s=!t&&1==(e>>a&1);this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=s}for(a=0;a<18;a++)s=!t&&1==(e>>a&1),this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=s},setupTypeInfo:function(t,e){for(var a=this.errorCorrectLevel<<3|e,s=n.getBCHTypeInfo(a),r=0;r<15;r++){var i=!t&&1==(s>>r&1);r<6?this.modules[r][8]=i:r<8?this.modules[r+1][8]=i:this.modules[this.moduleCount-15+r][8]=i}for(r=0;r<15;r++)i=!t&&1==(s>>r&1),r<8?this.modules[8][this.moduleCount-r-1]=i:r<9?this.modules[8][15-r-1+1]=i:this.modules[8][15-r-1]=i;this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var a=-1,s=this.moduleCount-1,r=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var l=0;l<2;l++)if(null==this.modules[s][o-l]){var c=!1;i<t.length&&(c=1==(t[i]>>>r&1)),n.getMask(e,s,o-l)&&(c=!c),this.modules[s][o-l]=c,-1==--r&&(i++,r=7)}if((s+=a)<0||this.moduleCount<=s){s-=a,a=-a;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,a,s){for(var r=u.getRSBlocks(t,a),i=new d,o=0;o<s.length;o++){var l=s[o];i.put(l.mode,4),i.put(l.getLength(),n.getLengthInBits(l.mode,t)),l.write(i)}var c=0;for(o=0;o<r.length;o++)c+=r[o].dataCount;if(i.getLengthInBits()>8*c)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*c+")");for(i.getLengthInBits()+4<=8*c&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*c||(i.put(e.PAD0,8),i.getLengthInBits()>=8*c));)i.put(e.PAD1,8);return e.createBytes(i,r)},e.createBytes=function(t,e){for(var a=0,s=0,r=0,i=new Array(e.length),o=new Array(e.length),l=0;l<e.length;l++){var u=e[l].dataCount,d=e[l].totalCount-u;s=Math.max(s,u),r=Math.max(r,d),i[l]=new Array(u);for(var m=0;m<i[l].length;m++)i[l][m]=255&t.buffer[m+a];a+=u;var p=n.getErrorCorrectPolynomial(d),f=new c(i[l],p.getLength()-1).mod(p);for(o[l]=new Array(p.getLength()-1),m=0;m<o[l].length;m++){var h=m+f.getLength()-o[l].length;o[l][m]=h>=0?f.get(h):0}}var v=0;for(m=0;m<e.length;m++)v+=e[m].totalCount;var b=new Array(v),g=0;for(m=0;m<s;m++)for(l=0;l<e.length;l++)m<i[l].length&&(b[g++]=i[l][m]);for(m=0;m<r;m++)for(l=0;l<e.length;l++)m<o[l].length&&(b[g++]=o[l][m]);return b};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={L:1,M:0,Q:3,H:2},i={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},n={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;n.getBCHDigit(e)-n.getBCHDigit(n.G15)>=0;)e^=n.G15<<n.getBCHDigit(e)-n.getBCHDigit(n.G15);return(t<<10|e)^n.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;n.getBCHDigit(e)-n.getBCHDigit(n.G18)>=0;)e^=n.G18<<n.getBCHDigit(e)-n.getBCHDigit(n.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return n.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,a){switch(t){case i.PATTERN000:return(e+a)%2==0;case i.PATTERN001:return e%2==0;case i.PATTERN010:return a%3==0;case i.PATTERN011:return(e+a)%3==0;case i.PATTERN100:return(Math.floor(e/2)+Math.floor(a/3))%2==0;case i.PATTERN101:return e*a%2+e*a%3==0;case i.PATTERN110:return(e*a%2+e*a%3)%2==0;case i.PATTERN111:return(e*a%3+(e+a)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new c([1],0),a=0;a<t;a++)e=e.multiply(new c([1,o.gexp(a)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:case a.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),a=0,s=0;s<e;s++)for(var r=0;r<e;r++){for(var i=0,n=t.isDark(s,r),o=-1;o<=1;o++)if(!(s+o<0||e<=s+o))for(var l=-1;l<=1;l++)r+l<0||e<=r+l||0==o&&0==l||n==t.isDark(s+o,r+l)&&i++;i>5&&(a+=3+i-5)}for(s=0;s<e-1;s++)for(r=0;r<e-1;r++){var c=0;t.isDark(s,r)&&c++,t.isDark(s+1,r)&&c++,t.isDark(s,r+1)&&c++,t.isDark(s+1,r+1)&&c++,0!=c&&4!=c||(a+=3)}for(s=0;s<e;s++)for(r=0;r<e-6;r++)t.isDark(s,r)&&!t.isDark(s,r+1)&&t.isDark(s,r+2)&&t.isDark(s,r+3)&&t.isDark(s,r+4)&&!t.isDark(s,r+5)&&t.isDark(s,r+6)&&(a+=40);for(r=0;r<e;r++)for(s=0;s<e-6;s++)t.isDark(s,r)&&!t.isDark(s+1,r)&&t.isDark(s+2,r)&&t.isDark(s+3,r)&&t.isDark(s+4,r)&&!t.isDark(s+5,r)&&t.isDark(s+6,r)&&(a+=40);var u=0;for(r=0;r<e;r++)for(s=0;s<e;s++)t.isDark(s,r)&&u++;return a+=Math.abs(100*u/e/e-50)/5*10}},o={glog:function(t){if(t<1)throw new Error("glog("+t+")");return o.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return o.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},l=0;l<8;l++)o.EXP_TABLE[l]=1<<l;for(l=8;l<256;l++)o.EXP_TABLE[l]=o.EXP_TABLE[l-4]^o.EXP_TABLE[l-5]^o.EXP_TABLE[l-6]^o.EXP_TABLE[l-8];for(l=0;l<255;l++)o.LOG_TABLE[o.EXP_TABLE[l]]=l;function c(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var a=0;a<t.length&&0==t[a];)a++;this.num=new Array(t.length-a+e);for(var s=0;s<t.length-a;s++)this.num[s]=t[s+a]}function u(t,e){this.totalCount=t,this.dataCount=e}function d(){this.buffer=[],this.length=0}c.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),a=0;a<this.getLength();a++)for(var s=0;s<t.getLength();s++)e[a+s]^=o.gexp(o.glog(this.get(a))+o.glog(t.get(s)));return new c(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=o.glog(this.get(0))-o.glog(t.get(0)),a=new Array(this.getLength()),s=0;s<this.getLength();s++)a[s]=this.get(s);for(s=0;s<t.getLength();s++)a[s]^=o.gexp(o.glog(t.get(s))+e);return new c(a,0).mod(t)}},u.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],u.getRSBlocks=function(t,e){var a=u.getRsBlockTable(t,e);if(null==a)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var s=a.length/3,r=[],i=0;i<s;i++)for(var n=a[3*i+0],o=a[3*i+1],l=a[3*i+2],c=0;c<n;c++)r.push(new u(o,l));return r},u.getRsBlockTable=function(t,e){switch(e){case r.L:return u.RS_BLOCK_TABLE[4*(t-1)+0];case r.M:return u.RS_BLOCK_TABLE[4*(t-1)+1];case r.Q:return u.RS_BLOCK_TABLE[4*(t-1)+2];case r.H:return u.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},d.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var a=0;a<e;a++)this.putBit(1==(t>>>e-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function p(){return"undefined"!=typeof CanvasRenderingContext2D}function f(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var a=e.toString().match(/android ([0-9]\.[0-9])/i);a&&a[1]&&(t=parseFloat(a[1]))}return t}var h=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){var e=this._htOption,a=this._el,s=t.getModuleCount();function r(t,e){var a=document.createElementNS("http://www.w3.org/2000/svg",t);for(var s in e)e.hasOwnProperty(s)&&a.setAttribute(s,e[s]);return a}Math.floor(e.width/s),Math.floor(e.height/s),this.clear();var i=r("svg",{viewBox:"0 0 "+String(s)+" "+String(s),width:"100%",height:"100%",fill:e.colorLight});i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),a.appendChild(i),i.appendChild(r("rect",{fill:e.colorLight,width:"100%",height:"100%"})),i.appendChild(r("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var n=0;n<s;n++)for(var o=0;o<s;o++)if(t.isDark(n,o)){var l=r("use",{x:String(o),y:String(n)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),i.appendChild(l)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),v="svg"===document.documentElement.tagName.toLowerCase()?h:p()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var e=1/window.devicePixelRatio,a=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,s,r,i,n,o,l,c,u){if("nodeName"in t&&/img/i.test(t.nodeName))for(var d=arguments.length-1;d>=1;d--)arguments[d]=arguments[d]*e;else void 0===c&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);a.apply(this,arguments)}}function s(t,e){var a=this;if(a._fFail=e,a._fSuccess=t,null===a._bSupportDataURI){var s=document.createElement("img"),r=function(){a._bSupportDataURI=!1,a._fFail&&a._fFail.call(a)},i=function(){a._bSupportDataURI=!0,a._fSuccess&&a._fSuccess.call(a)};return s.onabort=r,s.onerror=r,s.onload=i,void(s.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===a._bSupportDataURI&&a._fSuccess?a._fSuccess.call(a):!1===a._bSupportDataURI&&a._fFail&&a._fFail.call(a)}var r=function(t,e){this._bIsPainted=!1,this._android=f(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return r.prototype.draw=function(t){var e=this._elImage,a=this._oContext,s=this._htOption,r=t.getModuleCount(),i=s.width/r,n=s.height/r,o=Math.round(i),l=Math.round(n);e.style.display="none",this.clear();for(var c=0;c<r;c++)for(var u=0;u<r;u++){var d=t.isDark(c,u),m=u*i,p=c*n;a.strokeStyle=d?s.colorDark:s.colorLight,a.lineWidth=1,a.fillStyle=d?s.colorDark:s.colorLight,a.fillRect(m,p,i,n),a.strokeRect(Math.floor(m)+.5,Math.floor(p)+.5,o,l),a.strokeRect(Math.ceil(m)-.5,Math.ceil(p)-.5,o,l)}this._bIsPainted=!0},r.prototype.makeImage=function(){this._bIsPainted&&s.call(this,t)},r.prototype.isPainted=function(){return this._bIsPainted},r.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},r.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},r}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,a=this._el,s=t.getModuleCount(),r=Math.floor(e.width/s),i=Math.floor(e.height/s),n=['<table style="border:0;border-collapse:collapse;">'],o=0;o<s;o++){n.push("<tr>");for(var l=0;l<s;l++)n.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+r+"px;height:"+i+"px;background-color:"+(t.isDark(o,l)?e.colorDark:e.colorLight)+';"></td>');n.push("</tr>")}n.push("</table>"),a.innerHTML=n.join("");var c=a.childNodes[0],u=(e.width-c.offsetWidth)/2,d=(e.height-c.offsetHeight)/2;u>0&&d>0&&(c.style.margin=d+"px "+u+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();function b(t,e){for(var a=1,s=g(t),i=0,n=m.length;i<=n;i++){var o=0;switch(e){case r.L:o=m[i][0];break;case r.M:o=m[i][1];break;case r.Q:o=m[i][2];break;case r.H:o=m[i][3]}if(s<=o)break;a++}if(a>m.length)throw new Error("Too long data");return a}function g(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}return s=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:r.H},"string"==typeof e&&(e={text:e}),e)for(var a in e)this._htOption[a]=e[a];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(v=h),this._android=f(),this._el=t,this._oQRCode=null,this._oDrawing=new v(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},s.prototype.makeCode=function(t){this._oQRCode=new e(b(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},s.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},s.prototype.clear=function(){this._oDrawing.clear()},s.CorrectLevel=r,s}()},d666:function(t,e,a){"use strict";a("3ca7")},dd53:function(t,e,a){"use strict";a("cb6b")},df835:function(t,e,a){"use strict";a("e987")},e0f6:function(t,e,a){},e1e8:function(t,e,a){},e277:function(t,e,a){"use strict";a.r(e);var s=a("5530"),r=a("c7eb"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("5aee"),l=a("46ac"),c={components:{IconSelect:o.a},porps:["dialogFormVisible"],data:function(){return{dialogFormVisible:!1,add:!0,_id:null,postList:{type:"目录",parentId:null,sortNum:1,visible:!1,status:!0},optionsList:null,isShow:!1}},created:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),methods:{getSelectData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.b)("menu",{query:{},sort:{sortNum:1}});case 2:e=t.sent,a=e.data,this.optionsList=Object(l.a)(a,null,[]);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),AddClick:function(){var t=this;this.isShow=!1,this.postList={parentId:null,type:"目录",sortNum:1,status:!0},this.add=!0,this.dialogFormVisible=!0,this.getSelectData(),this.$nextTick((function(){t.isShow=!0,t.$refs.IconSelects.editClicks()}))},EditClick:function(t){var e=this;this.add=!1,this.isShow=!0,this._id=t._id,this.postList=t,this.dialogFormVisible=!0,this.getSelectData(),this.$nextTick((function(){e.$forceUpdate(),e.$refs.IconSelects.editClicks()}))},createData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.postList.menuName){t.next=4;break}return this.$message.warning("节点标题不能为空"),t.abrupt("return");case 4:return e=Object(s.a)({},this.postList),t.next=8,Object(n.a)("menu",e);case 8:t.sent?(this.$emit("custom-event"),this.dialogFormVisible=!1,this.postList={parentId:null,type:"目录",sortNum:1,status:!0},this.$notify({title:"添加菜单成功",message:"Add Successfully",type:"success",duration:2e3})):this.$notify({title:"添加失败，请重试或刷新",message:"Add unsuccessful",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleClose:function(t){},editData:function(){if(this.postList.menuName){delete this.postList._id;var t={query:{_id:this._id},update:Object(s.a)({},this.postList)};Object(n.d)("menu",t);this.dialogFormVisible=!1,this.$emit("custom-event"),this.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})}else this.$message.warning("节点标题不能为空")},getParentId:function(t){Array.isArray(t)&&(this.postList.parentId=t[t.length-1])}}},u=c,d=a("2877"),m=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-dialog",{attrs:{title:t.add?"添加菜单":"编辑菜单",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[t.isShow?a("el-form",{ref:"dataForm",attrs:{"label-position":"right"},model:{value:t.postList,callback:function(e){t.postList=e},expression:"postList"}},[a("el-form-item",{attrs:{label:"类型","label-width":"100px"}},[a("el-radio-group",{model:{value:t.postList.type,callback:function(e){t.$set(t.postList,"type",e)},expression:"postList.type"}},[a("el-radio",{attrs:{label:"目录"}},[t._v("目录")]),t._v(" "),a("el-radio",{attrs:{label:"菜单"}},[t._v("菜单")]),t._v(" "),a("el-radio",{attrs:{label:"权限"}},[t._v("权限")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"节点标题","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入节点标题"},model:{value:t.postList.menuName,callback:function(e){t.$set(t.postList,"menuName",e)},expression:"postList.menuName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上级节点","label-width":"100px"}},[a("el-cascader",{attrs:{options:t.optionsList,props:{checkStrictly:!0,value:"_id",label:"menuName"},clearable:"",filterable:"",placeholder:"请选择上级节点"},on:{change:t.getParentId},model:{value:t.postList.parentId,callback:function(e){t.$set(t.postList,"parentId",e)},expression:"postList.parentId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单顺序","label-width":"100px"}},[a("el-input-number",{attrs:{max:1e3,min:0,label:"菜单顺序"},model:{value:t.postList.sortNum,callback:function(e){t.$set(t.postList,"sortNum",e)},expression:"postList.sortNum"}})],1),t._v(" "),a("el-divider"),t._v(" "),"权限"!=t.postList.type?a("el-form-item",{attrs:{label:"路由路径","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入路由路径"},model:{value:t.postList.path,callback:function(e){t.$set(t.postList,"path",e)},expression:"postList.path"}})],1):t._e(),t._v(" "),"菜单"===t.postList.type?a("el-form-item",{attrs:{label:"文件路径","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入文件路径"},model:{value:t.postList.component,callback:function(e){t.$set(t.postList,"component",e)},expression:"postList.component"}})],1):t._e(),t._v(" "),"菜单"===t.postList.type?a("el-form-item",{attrs:{label:"传递参数","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入访问路由的默认传递参数"},model:{value:t.postList.query,callback:function(e){t.$set(t.postList,"query",e)},expression:"postList.query"}})],1):t._e(),t._v(" "),"权限"===t.postList.type?a("el-form-item",{attrs:{label:"权限标签","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入权限标签"},model:{value:t.postList.perms,callback:function(e){t.$set(t.postList,"perms",e)},expression:"postList.perms"}})],1):t._e(),t._v(" "),"权限"!=t.postList.type?a("el-form-item",{attrs:{label:"节点图标","label-width":"100px"}},[a("IconSelect",{ref:"IconSelects",attrs:{IconData:t.postList.icon},on:{"update:IconData":function(e){return t.$set(t.postList,"icon",e)},"update:icon-data":function(e){return t.$set(t.postList,"icon",e)}}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"是否显示","label-width":"100px"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.postList.visible,callback:function(e){t.$set(t.postList,"visible",e)},expression:"postList.visible"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否启用","label-width":"100px"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.postList.status,callback:function(e){t.$set(t.postList,"status",e)},expression:"postList.status"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":"100px"}},[a("el-input",{attrs:{placeholder:"请输入备注",type:"textarea"},model:{value:t.postList.remark,callback:function(e){t.$set(t.postList,"remark",e)},expression:"postList.remark"}})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.add?t.createData():t.editData()}}},[t._v("确定\n      ")])],1)],1)],1)}),[],!1,null,"52fad1e6",null);e.default=m.exports},e382:function(t,e,a){"use strict";a.r(e);var s=(a("20d6"),a("7f7f"),a("5530")),r=a("c7eb"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("1a2d"),l={filters:{},data:function(){return{userName:"",roles:"",role:"",roledata:"",password:"Enterprise123",userlist:[],categorylist:[],categorylist1:[],labellist:[],listLoading:!0,downloadLoading:!1,_id:"",categorytitle:"",labeltitle:"",address:"",addresstime:"",userId:"",number:"",name:"",phone:"",checkList:"",labelindex:"",labelcategoryindex:"",dialogStatus:"",dialogFormVisible:!1,dialogFormVisible1:!1,textMap:{update:"Edit",create:"Create"},searchReq:{}}},created:function(){this.getUserRole(),this.fetchData()},beforeCreate:function(){},methods:{getUserRole:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.b)("role",{query:{}});case 2:e=t.sent,a=e.data,this.userlist=a;case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),fetchData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a,i;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:Object(s.a)({},this.searchReq),populate:JSON.stringify([{path:"role"}])},t.next=4,Object(n.b)("user_login",e);case 4:a=t.sent,i=a.data,this.categorylist=i,this.categorylist1=this.categorylist,this.listLoading=!1;case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleEdit:function(t){this.dialogFormVisible=!0,this._id=t._id,this.password=t.password,this.role=t.role._id?t.role._id:t.role,this.number=t.userName,this.name=t.nickName,this.phone=t.phone,this.dialogStatus="edit"},handisshow:function(t){var e=this,a={query:{_id:t._id},update:{status:!t.status}};Object(o.c)(a).then((function(t){200==t.code?(e.dialogFormVisible=!1,e.fetchData(),e.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):e.$notify({title:"修改失败",message:"edit failly",type:"warning",duration:2e3})}))},AddFilter:function(){this._id="",this.userId="",this.number="",this.role="部门管理员",this.password="Enterprise123",this.name="",this.phone="",this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var t=this;if(""!=this.number&&""!=this.name&&""!=this.password&&""!=this.phone&&""!=this.role)if(-1==this.categorylist.findIndex((function(e){return e.usernumber===t.number}))){var e={nickName:this.name,userName:this.number,password:this.password,phone:this.phone,role:this.role};Object(o.b)(e).then((function(e){200==e.code?(t.dialogFormVisible=!1,t.fetchData(),t.$notify({title:"添加成功",message:"edit Successfully",type:"success",duration:2e3})):t.$notify({title:"添加失败",message:"edit failly",type:"warning",duration:2e3})}))}else this.$notify({title:"此用户已是管理人员",message:"Again input",type:"warning",duration:2e3});else this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3})},editData:function(){var t=this;if(""!=this.number&&""!=this.name&&""!=this.phone&&""!=this.password&&""!=this.role){var e={query:{_id:this._id},update:{nickName:this.name,userName:this.number,password:this.password,phone:this.phone,role:this.role}};Object(o.c)(e).then((function(e){200==e.code?(t.dialogFormVisible=!1,t.fetchData(),t.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):t.$notify({title:"修改失败",message:"edit failly",type:"warning",duration:2e3})}))}else this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3})},clearclick:function(){this.categorylist=this.categorylist1},Search:function(){this.searchReq={},this.userName?this.searchReq.userName={$regex:this.userName}:delete this.searchReq.userName,this.fetchData()},searchrole:function(){if(this.roledata){var t=this.searchByIndexOf1(this.roledata,this.categorylist1);this.categorylist=t}else this.categorylist=this.categorylist1},searchByIndexOf:function(t,e){if(e instanceof Array){for(var a=e.length,s=[],r=0;r<a;r++)e[r].username.indexOf(t)>=0&&s.push(e[r]);return s}},searchByIndexOf1:function(t,e){if(e instanceof Array){for(var a=e.length,s=[],r=0;r<a;r++)e[r].role==t&&s.push(e[r]);return s}}}},c=l,u=(a("fe8f"),a("2877")),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"140px"}},[t._v("用户名称:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入用户名称"},on:{clear:function(e){return t.clearclick()}},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.Search()}}},[t._v("查询搜索\n          ")])],1),t._v(" "),"超级管理员"==t.$store.state.user.roles?a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"80px"}},[t._v("用户角色:")]),t._v(" "),a("el-select",{staticStyle:{width:""},attrs:{filterable:"",placeholder:"请选择用户角色"},on:{change:t.searchrole,clear:function(e){return t.clearclick()}},model:{value:t.roledata,callback:function(e){t.roledata=e},expression:"roledata"}},t._l(t.userlist,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1):t._e()])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("管理员列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddFilter}},[t._v("添加管理人员\n        ")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.categorylist,border:"","element-loading-text":"Loading",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"用户名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.nickName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"账号",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.userName))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"密码",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.password))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户角色",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.role?e.row.role.name:"无")+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"审核状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v("在线")]):a("el-tag",{attrs:{type:"warning"}},[t._v("不在线")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"created_at",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),t._v(" "),a("span",[t._v(t._s(t._f("parseTime")(e.row.createAt,"{y}-{m}-{d} {h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑\n        ")]),t._v(" "),s.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handisshow(s)}}},[t._v("下线\n        ")]):a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.handisshow(s)}}},[t._v("上线\n        ")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFormVisible,title:"管理人员信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"用户账号","label-width":"120"}},[a("el-input",{attrs:{placeholder:"管理人员的账号"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户密码","label-width":"120"}},[a("el-input",{attrs:{placeholder:"请输入管理人员的密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系姓名","label-width":"120"}},[a("el-input",{attrs:{placeholder:"请输入管理人员的姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系方式","label-width":"120"}},[a("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户角色","label-width":"120"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择用户角色"},model:{value:t.role,callback:function(e){t.role=e},expression:"role"}},t._l(t.userlist,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t._id}})})),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.editData()}}},[t._v("确定\n      ")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"0be5b2c7",null);e.default=d.exports},e429:function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=a("5530"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("32db"),l=a("b442"),c={filters:{},components:{UploadList:o.a,ZrFile:l.a},data:function(){return{tableList:[],total:0,currentPage:1,pageSize:10,options:{},searchReq:{},title:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{title:"",title_en:"",desc:"",desc_en:"",url:"",type:1,createAt:new Date,updateAt:new Date},textMap:{update:"Edit",create:"Create"},marketName:"",marketlist:[]}},created:function(){this.fetchData()},beforeCreate:function(){},methods:{baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeProcessRecordDialog:function(){this.tableList=[],this.total=0,this.currentPage=1,this.pageSize=10,this.processRecordShow=!1},getslect:function(t){},fetchData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e,a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:Object(r.a)({},this.searchReq),limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(n.b)("carouselChart",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,t.QRDialog=!1,t.approveDialog=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dataForm=JSON.parse(JSON.stringify(t)),this.dialogStatus="edit"},handleDelete:function(t){var e=this;this.$confirm("删除轮播图",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(i.a)(Object(s.a)().mark((function a(){var r;return Object(s.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r={query:{_id:t._id}},Object(n.c)("carouselChart",r).then(function(){var t=Object(i.a)(Object(s.a)().mark((function t(a){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"delete Successfully",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"delete failly",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},AddFilter:function(){this.dataForm={title:"",title_en:"",desc:"",desc_en:"",url:"",type:1,createAt:new Date,updateAt:new Date},this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.title||""==this.dataForm.type||""==this.dataForm.url||""==this.dataForm.desc){t.next=9;break}return e=Object(r.a)({},this.dataForm),t.next=5,Object(n.a)("carouselChart",e);case 5:200==t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({title:"添加成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({title:"添加失败",message:"edit failly",type:"warning",duration:2e3}),t.next=10;break;case 9:this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editData:function(){var t=Object(i.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==this.dataForm.title||""==this.dataForm.type||""==this.dataForm.url||""==this.dataForm.desc){t.next=10;break}return e={query:{_id:this.dataForm._id},update:Object(r.a)({},this.dataForm)},t.next=6,Object(n.d)("carouselChart",e);case 6:200==t.sent.code?(this.dialogFormVisible=!1,this.approveDialog=!1,this.fetchData(),this.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):this.$notify({title:"修改失败",message:"edit failly",type:"warning",duration:2e3}),t.next=11;break;case 10:this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),clearclick:function(){this.tableList=this.tableList1},Search:function(){this.searchReq={},this.title?this.searchReq.title={$regex:this.title}:delete this.searchReq.title,this.fetchData()}}},u=c,d=(a("cd8e"),a("2877")),m=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"200px"}},[t._v("轮播图标题:")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入轮播图标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.Search()}}},[t._v("查询搜索\n          ")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("轮播图列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddFilter}},[t._v("添加轮播图\n        ")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"轮播图标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"轮播图描述",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.desc)+" ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"轮播图链接",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.url,alt:"轮播图链接"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"轮播图类型",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1==e.row.type?"图片":"视频"))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑查看\n          ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n          ")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"轮播图信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{inline:!0,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{required:"",label:"轮播图标题","label-width":"120"}},[a("el-input",{attrs:{placeholder:"轮播图标题"},model:{value:t.dataForm.title,callback:function(e){t.$set(t.dataForm,"title",e)},expression:"dataForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"轮播图描述","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"轮播图描述"},model:{value:t.dataForm.desc,callback:function(e){t.$set(t.dataForm,"desc",e)},expression:"dataForm.desc"}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"轮播图链接","label-width":"120"}},[a("ZrFile",{attrs:{max:1,value:t.dataForm.url},on:{"update:value":function(e){return t.$set(t.dataForm,"url",e)}}})],1),t._v(" "),a("el-form-item",{attrs:{required:"",label:"轮播图类型"}},[a("el-select",{attrs:{placeholder:"请选择轮播图类型"},model:{value:t.dataForm.type,callback:function(e){t.$set(t.dataForm,"type",e)},expression:"dataForm.type"}},[a("el-option",{key:2,attrs:{label:"视频",value:2}}),t._v(" "),a("el-option",{key:1,attrs:{label:"图片",value:1}})],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("英文")]),t._v(" "),a("el-form-item",{attrs:{label:"轮播图标题(title)","label-width":"120"}},[a("el-input",{attrs:{placeholder:"title"},model:{value:t.dataForm.title_en,callback:function(e){t.$set(t.dataForm,"title_en",e)},expression:"dataForm.title_en"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"轮播图描述(description)","label-width":"120"}},[a("el-input",{attrs:{type:"textarea",placeholder:"description"},model:{value:t.dataForm.desc_en,callback:function(e){t.$set(t.dataForm,"desc_en",e)},expression:"dataForm.desc_en"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.editData()}}},[t._v("确定\n      ")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"14cc6283",null);e.default=m.exports},e6e2:function(t,e,a){"use strict";a.r(e);var s=a("5530"),r=a("c7eb"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("32db"),l=a("dacb"),c={filters:{},components:{UploadList:o.a,WangEditor:l.a},data:function(){return{activeName:"english",tableList:[],total:0,currentPage:1,pageSize:10,productName:"",listLoading:!0,dialogStatus:"",dialogFormVisible:!1,dataForm:{productName:"",introduction:"",productName_en:"",category:"",hot:!1,introduction_en:"",productImages:[],applicationArea:"",applicationArea_en:"",featureAttributes:"",featureAttributes_en:"",productEffect:"",productEffect_en:"",applicationBenefits:"",applicationBenefits_en:"",applicationObjects:"",applicationObjects_en:"",technicalParameters:[],productVideo:"",createDate:new Date,updateDate:new Date},imageUrl:"",categoryOptions:[]}},created:function(){this.initcategoryOptions(),this.fetchData()},beforeCreate:function(){},methods:{initcategoryOptions:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(n.b)("productCate",{});case 2:e=t.sent,this.categoryOptions=e.data;case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),addImage:function(){""!==this.imageUrl.trim()?(this.dataForm.productImages.push({url:this.imageUrl.trim()}),this.imageUrl=""):this.$message.error("请输入图片地址")},removeImage:function(t){this.dataForm.productImages.splice(t,1)},baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeDialog:function(){this.dialogFormVisible=!1,this.clearForm()},clearForm:function(){this.dataForm={productName:"",introduction:"",productName_en:"",category:"",hot:!1,introduction_en:"",productImages:[],applicationArea:"",applicationArea_en:"",featureAttributes:"",featureAttributes_en:"",productEffect:"",productEffect_en:"",applicationBenefits:"",applicationBenefits_en:"",applicationObjects:"",applicationObjects_en:"",technicalParameters:[],productVideo:"",createDate:new Date,updateDate:new Date}},fetchData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,e={query:{productName:{$regex:this.productName}},limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0},t.next=4,Object(n.b)("companyProduct",e);case 4:a=t.sent,this.tableList=a.data,this.total=a.countnum,this.listLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dialogStatus="edit",this.dataForm=Object(s.a)({},t)},handleDelete:function(t){var e=this;this.$confirm("删除产品",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(Object(i.a)(Object(r.a)().mark((function a(){var s;return Object(r.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s={query:{_id:t._id}},Object(n.c)("companyProduct",s).then(function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200==a.code?(e.fetchData(),e.$notify({title:"删除成功",message:"删除成功",type:"success",duration:2e3})):e.$notify({title:"删除失败",message:"删除失败",type:"warning",duration:2e3});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)}))))},addProduct:function(){this.dataForm={productName:"",introduction:"",productName_en:"",category:"",hot:!1,introduction_en:"",productImages:[],applicationArea:"",applicationArea_en:"",featureAttributes:"",featureAttributes_en:"",productEffect:"",productEffect_en:"",applicationBenefits:"",applicationBenefits_en:"",applicationObjects:"",applicationObjects_en:"",technicalParameters:[],createDate:new Date,updateDate:new Date},this.dialogFormVisible=!0,this.dialogStatus="create"},createProduct:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(""!==this.dataForm.productName&&""!==this.dataForm.category&&""!==this.dataForm.introduction&&this.dataForm.productImages.length>0&&""!==this.dataForm.applicationArea&&""!==this.dataForm.featureAttributes&&""!==this.dataForm.productEffect&&""!==this.dataForm.applicationBenefits&&""!==this.dataForm.applicationObjects&&this.dataForm.technicalParameters.length>0)){t.next=8;break}return e=Object(s.a)({},this.dataForm),t.next=4,Object(n.a)("companyProduct",e);case 4:200===t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({title:"添加成功",message:"添加成功",type:"success",duration:2e3})):this.$notify({title:"添加失败",message:"添加失败，请重试",type:"error",duration:2e3}),t.next=9;break;case 8:this.$notify({title:"请填写必要信息",message:"产品名称、介绍等不能为空",type:"warning",duration:2e3});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editProduct:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(""!==this.dataForm.productName&&""!==this.dataForm.category&&""!==this.dataForm.introduction&&this.dataForm.productImages.length>0&&""!==this.dataForm.applicationArea&&""!==this.dataForm.featureAttributes&&""!==this.dataForm.productEffect&&""!==this.dataForm.applicationBenefits&&""!==this.dataForm.applicationObjects&&this.dataForm.technicalParameters.length>0)){t.next=8;break}return e={query:{_id:this.dataForm._id},update:Object(s.a)({},this.dataForm)},t.next=4,Object(n.d)("companyProduct",e);case 4:200===t.sent.code?(this.dialogFormVisible=!1,this.fetchData(),this.$notify({title:"修改成功",message:"修改成功",type:"success",duration:2e3})):this.$notify({title:"修改失败",message:"修改失败，请重试",type:"error",duration:2e3}),t.next=9;break;case 8:this.$notify({title:"请填写必要信息",message:"产品名称、介绍等不能为空",type:"warning",duration:2e3});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),search:function(){this.fetchData()}}},u=c,d=(a("cbb3"),a("2877")),m=Object(d.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"100px"}},[t._v("产品名称:")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入产品名称"},model:{value:t.productName,callback:function(e){t.productName=e},expression:"productName"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.search()}}},[t._v("查询搜索")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("产品列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.addProduct}},[t._v("添加产品")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.tableList,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{label:"产品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.productName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品分类",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.category))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否首页展示",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(e.row.hot?"首页展示":"无"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品图片列表",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.productImages.length>0?a("el-image",{staticStyle:{"max-width":"100px","max-height":"100px"},attrs:{src:e.row.productImages[0]}}):a("span",[t._v("暂无图片")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑查看")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"产品信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"100%"},attrs:{model:t.dataForm,"label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{required:"",label:"产品名称",prop:"productName"}},[a("el-input",{attrs:{placeholder:"产品名称"},model:{value:t.dataForm.productName,callback:function(e){t.$set(t.dataForm,"productName",e)},expression:"dataForm.productName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品分类"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.category,callback:function(e){t.$set(t.dataForm,"category",e)},expression:"dataForm.category"}},t._l(t.categoryOptions,(function(t){return a("el-option",{key:t._id,attrs:{label:t.title,value:t.title}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"是否热门显示"}},[a("el-switch",{model:{value:t.dataForm.hot,callback:function(e){t.$set(t.dataForm,"hot",e)},expression:"dataForm.hot"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品图片列表"}},[a("ZrFile",{attrs:{max:5,value:t.dataForm.productImages},on:{"update:value":function(e){return t.$set(t.dataForm,"productImages",e)}}})],1),t._v(" "),a("el-form-item",{attrs:{label:"应用领域"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"应用领域"},model:{value:t.dataForm.applicationArea,callback:function(e){t.$set(t.dataForm,"applicationArea",e)},expression:"dataForm.applicationArea"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"功能属性"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"功能属性"},model:{value:t.dataForm.featureAttributes,callback:function(e){t.$set(t.dataForm,"featureAttributes",e)},expression:"dataForm.featureAttributes"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品作用"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"产品作用"},model:{value:t.dataForm.productEffect,callback:function(e){t.$set(t.dataForm,"productEffect",e)},expression:"dataForm.productEffect"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"应用效益"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"应用效益"},model:{value:t.dataForm.applicationBenefits,callback:function(e){t.$set(t.dataForm,"applicationBenefits",e)},expression:"dataForm.applicationBenefits"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"应用对象"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"应用对象"},model:{value:t.dataForm.applicationObjects,callback:function(e){t.$set(t.dataForm,"applicationObjects",e)},expression:"dataForm.applicationObjects"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"技术参数"}},[a("ZrFile",{attrs:{max:5,value:t.dataForm.technicalParameters},on:{"update:value":function(e){return t.$set(t.dataForm,"technicalParameters",e)}}})],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("产品介绍")]),t._v(" "),a("WangEditor",{attrs:{value:t.dataForm.introduction},on:{"update:value":function(e){return t.$set(t.dataForm,"introduction",e)}}}),t._v(" "),a("el-collapse",{attrs:{accordion:""},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-collapse-item",{attrs:{title:"英文部分（English）",name:"english","collapse-transition":!1}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称（Name）",prop:"productName"}},[a("el-input",{attrs:{placeholder:"Product Name"},model:{value:t.dataForm.productName_en,callback:function(e){t.$set(t.dataForm,"productName_en",e)},expression:"dataForm.productName_en"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"应用领域（Fields）"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Fields of Application"},model:{value:t.dataForm.applicationArea_en,callback:function(e){t.$set(t.dataForm,"applicationArea_en",e)},expression:"dataForm.applicationArea_en"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"应用对象（Objects）"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Objects of application"},model:{value:t.dataForm.applicationObjects_en,callback:function(e){t.$set(t.dataForm,"applicationObjects_en",e)},expression:"dataForm.applicationObjects_en"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"功能属性（Functional）"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Functional Attributes"},model:{value:t.dataForm.featureAttributes_en,callback:function(e){t.$set(t.dataForm,"featureAttributes_en",e)},expression:"dataForm.featureAttributes_en"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品作用（Benefits）"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Benefits"},model:{value:t.dataForm.productEffect_en,callback:function(e){t.$set(t.dataForm,"productEffect_en",e)},expression:"dataForm.productEffect_en"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"应用效益（Application Benefits）"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"Application Benefits"},model:{value:t.dataForm.applicationBenefits_en,callback:function(e){t.$set(t.dataForm,"applicationBenefits_en",e)},expression:"dataForm.applicationBenefits_en"}})],1)],1)],1),t._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[t._v("产品介绍（Introduction）")]),t._v(" "),a("WangEditor",{attrs:{value:t.dataForm.introduction_en},on:{"update:value":function(e){return t.$set(t.dataForm,"introduction_en",e)}}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createProduct():t.editProduct()}}},[t._v("确定")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"af535f3c",null);e.default=m.exports},e987:function(t,e,a){},ebd5:function(t,e,a){"use strict";a.r(e);var s=a("c7eb"),r=(a("96cf"),a("1da1")),i=(a("c5f6"),a("6e8e")),n=a("fc24"),o=a("7e1e"),l={props:{value:{type:String},min:{type:Number,default:0},max:{type:Number,default:100},select:{type:Boolean,default:!1}},name:"images",components:{tree:i.a,treeContent:n.a},data:function(){return{active:"images",treeList:[],foldesList:[],imageList:[],treeLoading:!1,contentLoading:!1,nodeTitle:"",nodeId:"",fileList:[]}},mounted:function(){this.loadData()},methods:{loadData:function(){},nodeClick:function(){var t=Object(r.a)(Object(s.a)().mark((function t(e){var a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.contentLoading=!0,t.next=4,Object(o.b)("zrFile",{query:{zrFileTreeId:e._id}});case 4:a=t.sent,this.fileList=a.data,this.nodeTitle=e.label,this.nodeId=e._id,this.contentLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),refresh:function(){var t=Object(r.a)(Object(s.a)().mark((function t(){var e;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.contentLoading=!0,t.next=3,Object(o.b)("zrFile",{query:{zrFileTreeId:this.nodeId}});case 3:e=t.sent,this.fileList=e.data,this.contentLoading=!1;case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),enterSelect:function(){var t=Object(r.a)(Object(s.a)().mark((function t(e){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:1==this.max?$emit("update:value",e.selectfileUrl[0]):$emit("update:value",e.selectfileUrl);case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}},c=l,u=(a("78ce2"),a("2877")),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{staticStyle:{"min-height":"50vh"},attrs:{type:"border-card"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("el-tab-pane",{attrs:{name:"images",label:"文件管理"}},[a("div",{staticClass:"images"},[a("tree",{staticClass:"tree",on:{nodeClick:t.nodeClick}}),t._v(" "),a("tree-content",{directives:[{name:"loading",rawName:"v-loading",value:t.contentLoading,expression:"contentLoading"}],staticClass:"content",attrs:{fileList:t.fileList,nodeTitle:t.nodeTitle,nodeId:t.nodeId,select:t.select,min:t.min,max:t.max},on:{refresh:t.refresh,enterSelect:t.enterSelect}})],1)])],1)}),[],!1,null,"ab8d0b12",null),m={components:{ZrFilepage:d.exports}},p=Object(u.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("ZrFilepage")],1)}),[],!1,null,null,null);e.default=p.exports},ec1b:function(t,e,a){t.exports=function(t){function e(s){if(a[s])return a[s].exports;var r=a[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,s){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=2)}([function(t,e,a){var s=a(4)(a(1),a(5),null,null);t.exports=s.exports},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(3);e.default={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator:function(t){return t>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default:function(t,e,a,s){return a*(1-Math.pow(2,-10*t/s))*1024/1023+e}}},data:function(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown:function(){return this.startVal>this.endVal}},watch:{startVal:function(){this.autoplay&&this.start()},endVal:function(){this.autoplay&&this.start()}},mounted:function(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start:function(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=(0,s.requestAnimationFrame)(this.count)},pauseResume:function(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause:function(){(0,s.cancelAnimationFrame)(this.rAF)},resume:function(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,(0,s.requestAnimationFrame)(this.count)},reset:function(){this.startTime=null,(0,s.cancelAnimationFrame)(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count:function(t){this.startTime||(this.startTime=t),this.timestamp=t;var e=t-this.startTime;this.remaining=this.localDuration-e,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(e,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(e,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(e/this.localDuration):this.printVal=this.localStartVal+(this.localStartVal-this.startVal)*(e/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),e<this.localDuration?this.rAF=(0,s.requestAnimationFrame)(this.count):this.$emit("callback")},isNumber:function(t){return!isNaN(parseFloat(t))},formatNumber:function(t){t=t.toFixed(this.decimals);var e=(t+="").split("."),a=e[0],s=e.length>1?this.decimal+e[1]:"",r=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;r.test(a);)a=a.replace(r,"$1"+this.separator+"$2");return this.prefix+a+s+this.suffix}},destroyed:function(){(0,s.cancelAnimationFrame)(this.rAF)}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){return t&&t.__esModule?t:{default:t}}(a(0));e.default=s.default,"undefined"!=typeof window&&window.Vue&&window.Vue.component("count-to",s.default)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=0,r="webkit moz ms o".split(" "),i=void 0,n=void 0;if("undefined"==typeof window)e.requestAnimationFrame=i=function(){},e.cancelAnimationFrame=n=function(){};else{e.requestAnimationFrame=i=window.requestAnimationFrame,e.cancelAnimationFrame=n=window.cancelAnimationFrame;for(var o=void 0,l=0;l<r.length&&(!i||!n);l++)o=r[l],e.requestAnimationFrame=i=i||window[o+"RequestAnimationFrame"],e.cancelAnimationFrame=n=n||window[o+"CancelAnimationFrame"]||window[o+"CancelRequestAnimationFrame"];i&&n||(e.requestAnimationFrame=i=function(t){var e=(new Date).getTime(),a=Math.max(0,16-(e-s)),r=window.setTimeout((function(){t(e+a)}),a);return s=e+a,r},e.cancelAnimationFrame=n=function(t){window.clearTimeout(t)})}e.requestAnimationFrame=i,e.cancelAnimationFrame=n},function(t,e){t.exports=function(t,e,a,s){var r,i=t=t||{},n=typeof t.default;"object"!==n&&"function"!==n||(r=t,i=t.default);var o="function"==typeof i?i.options:i;if(e&&(o.render=e.render,o.staticRenderFns=e.staticRenderFns),a&&(o._scopeId=a),s){var l=Object.create(o.computed||null);Object.keys(s).forEach((function(t){var e=s[t];l[t]=function(){return e}})),o.computed=l}return{esModule:r,exports:i,options:o}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",[t._v("\n  "+t._s(t.displayValue)+"\n")])},staticRenderFns:[]}}])},eccf:function(t,e,a){},ed44:function(t,e,a){},edbc:function(t,e,a){"use strict";a("29a2")},eea9:function(t,e,a){"use strict";a.r(e);var s=(a("20d6"),a("5530")),r=(a("7f7f"),a("ade3")),i=a("7e1e"),n=a("8492"),o=a("4124"),l={filters:{},components:{},data:function(){var t;return t={typeoptions:[{value:"食品检验",label:"食品检验"},{value:"设备检测",label:"设备检测"}],statusoptions:[{value:"已处理",label:"已处理"},{value:"未处理",label:"未处理"}],deviceStatusoptions:[{value:"离线",label:"离线"},{value:"在线",label:"在线"}],rowId:"",categorylist:[],total:0,type:"",currentPage:1,pageSize:10,options:{},charge:{},record_id:"",marketlist:[],merchantlist:[],searchReq:{}},Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(t,"categorylist",[]),"categorylist1",[]),"labellist",[]),"listLoading",!0),"downloadLoading",!1),"_id",""),"categorytitle",""),"labeltitle",""),"address",""),"addresstime",""),Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(t,"name",""),"phone",""),"checkList",""),"labelindex",""),"labelcategoryindex",""),"dialogStatus",""),"dialogFormVisible",!1),"dialogFormVisible2",!1),"dialogFormVisible1",!1),"dataForm",{marketId:null,merchantId:null,type:"",status:"未处理",total:"",qualified:"",scaleID:"",deviceStatus:"",description:"",createAt:new Date,updateAt:new Date}),Object(r.a)(t,"textMap",{update:"Edit",create:"Create"})},created:function(){this.fetchData(),this.init()},beforeCreate:function(){},computed:{foodAlertContent:function(){return function(t){var e=(t.total-t.qualified)/t.total*100;return"".concat(t.marketId.name,"检验不合格率超过【").concat(e.toFixed(2),"%】")}},deviceAlertContent:function(){return function(t){return"".concat(t.merchantId.name,"电子秤【").concat(t.scaleID,"】已离线")}}},methods:{init:function(){var t=this;Object(n.a)({}).then((function(e){t.merchantlist=e.data})),Object(o.a)({}).then((function(e){t.marketlist=e.data}))},baseTableHandleCurrentChange:function(t){this.currentPage=t,this.fetchData()},baseTableHandleSizeChange:function(t){this.pageSize=t,this.fetchData()},closeProcessRecordDialog:function(){this.categorylist=[],this.total=0,this.currentPage=1,this.pageSize=10,this.processRecordShow=!1},getslect:function(t){},fetchData:function(){var t=this;this.listLoading=!0;var e={query:Object(s.a)({},this.searchReq),populate:JSON.stringify([{path:"marketId"},{path:"merchantId"}]),limit:this.pageSize,skip:(this.currentPage-1)*this.pageSize,count:!0};Object(i.b)("dataEarlyWarning",e).then((function(e){t.categorylist=e.data,t.total=e.countnum,t.categorylist1=JSON.parse(JSON.stringify(e.data)),t.listLoading=!1}))},beforeClose:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible=!1,done()})).catch((function(t){}))},beforeClose2:function(){var t=this;this.$confirm("确认关闭？").then((function(e){t.dialogFormVisible2=!1,done()})).catch((function(t){}))},handleEdit:function(t){this.dialogFormVisible=!0,this.dataForm=JSON.parse(JSON.stringify(this.$adjustDataFormat(t))),this.dialogStatus="edit"},handleEdit2:function(t){this.dialogFormVisible2=!0,this.dataForm=JSON.parse(JSON.stringify(this.$adjustDataFormat(t))),this.dialogStatus="edit"},regionMange:function(t){this.$router.push({path:"/farm/region",query:{farm_id:t._id}})},AddFilter:function(){this.dataForm={marketId:null,merchantId:null,type:"",status:"未处理",total:"",qualified:"",scaleID:"",deviceStatus:"",description:"",createAt:new Date,updateAt:new Date},this.dialogFormVisible=!0,this.dialogStatus="create"},createData:function(){var t=this;if(""!=this.dataForm.type)if("食品检验"==this.dataForm.type?(this.dataForm.merchantId=null,this.dataForm.scaleID="",this.dataForm.deviceStatus="",this.dataForm.status="未处理"):"设备检测"==this.dataForm.type&&(this.dataForm.marketId=null,this.dataForm.total="",this.dataForm.qualified="",this.dataForm.status="未处理"),-1==this.categorylist.findIndex((function(e){return e.name===t.dataForm.type}))){var e=Object(s.a)({},this.dataForm);Object(i.a)("dataEarlyWarning",e).then((function(e){200==e.code?(t.dialogFormVisible=!1,t.fetchData(),t.$notify({title:"添加成功",message:"edit Successfully",type:"success",duration:2e3})):t.$notify({title:"添加失败",message:"edit failly",type:"warning",duration:2e3})}))}else this.$notify({title:"此经预警方已是预警方",message:"Again input",type:"warning",duration:2e3});else this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3})},editData:function(t){var e=this;if(""!=this.dataForm.type){1==t&&("食品检验"==this.dataForm.type?(this.dataForm.merchantId=null,this.dataForm.scaleID="",this.dataForm.deviceStatus="",this.dataForm.status="未处理"):"设备检测"==this.dataForm.type&&(this.dataForm.marketId=null,this.dataForm.total="",this.dataForm.qualified="",this.dataForm.status="未处理"));var a={query:{_id:this.dataForm._id},update:Object(s.a)({},this.dataForm)};Object(i.d)("dataEarlyWarning",a).then((function(t){200==t.code?(e.dialogFormVisible=!1,e.dialogFormVisible2=!1,e.fetchData(),e.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):e.$notify({title:"修改失败",message:"edit failly",type:"warning",duration:2e3})}))}else this.$notify({title:"请完善信息",message:"Again input",type:"warning",duration:2e3})},clearclick:function(){this.categorylist=this.categorylist1},Search:function(){this.searchReq={},this.type?this.searchReq.type=this.type:delete this.searchReq.type,this.fetchData()}}},c=l,u=a("2877"),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"screen"},[a("div",{staticClass:"screen_content"},[t._m(0),t._v(" "),a("div",{staticClass:"screen_content_second"},[a("div",{staticClass:"screen_content_second_one"},[a("div",{staticStyle:{width:"140px"}},[t._v("预警类型:")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择预警类型"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.typeoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.Search()}}},[t._v("查询搜索")])],1)])])]),t._v(" "),a("div",{staticClass:"screen1"},[a("div",{staticClass:"screen_content"},[a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-tickets"},[t._v("预警列表")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.AddFilter}},[t._v("添加预警")])],1)])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("base-table",{ref:"baseTable",attrs:{currentPage:t.currentPage,"highlight-current-row":!0,pageSize:t.pageSize,tableData:t.categorylist,tableDataloading:t.listLoading,total:t.total},on:{handleCurrentChange:t.baseTableHandleCurrentChange,handleSizeChange:t.baseTableHandleSizeChange}},[a("template",{slot:"law"},[a("el-table-column",{attrs:{align:"center",label:"预警分类",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.type)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"预警内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.qualified?a("span",{staticClass:"link-type"},[t._v(t._s(e.row.marketId&&t.foodAlertContent(e.row)||"预警数据丢失"))]):e.row.deviceStatus?a("span",{staticClass:"link-type"},[t._v(t._s(e.row.merchantId&&t.deviceAlertContent(e.row)||"预警数据丢失"))]):a("span",{staticClass:"link-type"},[t._v("\n                          预警数据丢失\n                      ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"设备状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.deviceStatus?e.row.deviceStatus:"无"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"预警描述"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.description?e.row.description:"无"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"预警时间",prop:"created_at",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),t._v(" "),a("span",[t._v(t._s(t._f("parseTime")(e.row.updateAt,"{y}-{m}-{d} {h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"处理状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:"未处理"==e.row.status?"color: red":"color:green"},[t._v("\n                          "+t._s(e.row.status)+"\n                      ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("预警查看")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleEdit2(s)}}},[t._v("预警处理")])]}}])})],1)],2),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose,visible:t.dialogFormVisible,title:"预警信息"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{inline:!0,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"预警类型","label-width":"120",required:""}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.type,callback:function(e){t.$set(t.dataForm,"type",e)},expression:"dataForm.type"}},t._l(t.typeoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),"食品检验"==t.dataForm.type?a("el-form-item",{attrs:{label:"市场名称","label-width":"120",required:""}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.marketId,callback:function(e){t.$set(t.dataForm,"marketId",e)},expression:"dataForm.marketId"}},t._l(t.marketlist,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.responsible_person))])])})),1)],1):t._e(),t._v(" "),"设备检测"==t.dataForm.type?a("el-form-item",{attrs:{label:"所属商户","label-width":"120",required:""}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.merchantId,callback:function(e){t.$set(t.dataForm,"merchantId",e)},expression:"dataForm.merchantId"}},t._l(t.merchantlist,(function(e){return a("el-option",{key:e._id,attrs:{label:e.name,value:e._id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.responsible_person))])])})),1)],1):t._e(),t._v(" "),t.dataForm.type?a("el-divider",{attrs:{"content-position":"left"}},[t._v("预警详情")]):t._e(),t._v(" "),"食品检验"==t.dataForm.type?a("div",[a("el-form-item",{attrs:{label:"检测数量","label-width":"120",required:""}},[a("el-input",{attrs:{placeholder:"检测数量"},model:{value:t.dataForm.total,callback:function(e){t.$set(t.dataForm,"total",e)},expression:"dataForm.total"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"合格数量","label-width":"120",required:""}},[a("el-input",{attrs:{placeholder:"合格数量"},model:{value:t.dataForm.qualified,callback:function(e){t.$set(t.dataForm,"qualified",e)},expression:"dataForm.qualified"}})],1)],1):t._e(),t._v(" "),"设备检测"==t.dataForm.type?a("div",[a("el-form-item",{attrs:{label:"电子称ID","label-width":"120",required:""}},[a("el-input",{attrs:{placeholder:"电子称ID"},model:{value:t.dataForm.scaleID,callback:function(e){t.$set(t.dataForm,"scaleID",e)},expression:"dataForm.scaleID"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"设备状态","label-width":"120",required:""}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.deviceStatus,callback:function(e){t.$set(t.dataForm,"deviceStatus",e)},expression:"dataForm.deviceStatus"}},t._l(t.deviceStatusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.editData(1)}}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"before-close":t.beforeClose2,visible:t.dialogFormVisible2,title:"预警处理"},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{inline:!0,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"是否处理","label-width":"120",required:""}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.status,callback:function(e){t.$set(t.dataForm,"status",e)},expression:"dataForm.status"}},t._l(t.statusoptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"处理说明","label-width":"120",required:""}},[a("el-input",{attrs:{placeholder:"请对处理进行简单说明",type:"textarea"},model:{value:t.dataForm.description,callback:function(e){t.$set(t.dataForm,"description",e)},expression:"dataForm.description"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"==t.dialogStatus?t.createData():t.editData(2)}}},[t._v("确定")])],1)],1)],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen_content_first"},[a("i",{staticClass:"el-icon-search"},[t._v("筛选搜索")]),t._v(" "),a("div",{staticClass:"screen_content_first_btutton"})])}],!1,null,"399c7a30",null);e.default=d.exports},f07a:function(t,e,a){},f186:function(t,e,a){"use strict";a.r(e);var s=(a("7514"),a("c7eb")),r=(a("5df3"),a("f400"),a("ac6a"),a("2909")),i=(a("6762"),a("2fdb"),a("96cf"),a("1da1")),n=a("7e1e"),o={name:"AgentSelect",props:{value:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,agents:[],selectedAgents:this.value}},watch:{value:{handler:function(t){this.selectedAgents=t,t&&t.length&&!this.agents.length&&this.fetchAgentsByIds(t)},immediate:!0}},methods:{getAgentLabel:function(t){return"".concat(t.nickName).concat(t.company?" - ".concat(t.company):"")},remoteSearch:function(){var t=Object(i.a)(Object(s.a)().mark((function t(e){var a,i,o=this;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e){t.next=15;break}return this.loading=!0,t.prev=2,t.next=5,Object(n.b)("user_login",{query:JSON.stringify({$or:[{nickName:{$regex:e,$options:"i"}},{phone:{$regex:e,$options:"i"}}],roles:{$elemMatch:{label:"Tracker"}}}),limit:20});case 5:a=t.sent,i=this.agents.filter((function(t){return o.selectedAgents.includes(t._id)})),this.agents=Object(r.a)(new Map([].concat(Object(r.a)(i),Object(r.a)(a.data)).map((function(t){return[t._id,t]}))).values()),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),this.$message.error("搜索经纪人失败");case 14:this.loading=!1;case 15:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),handleChange:function(t){this.$emit("input",t);var e=this.agents.filter((function(e){return t.includes(e._id)}));this.$emit("select",e)},fetchAgentsByIds:function(){var t=Object(i.a)(Object(s.a)().mark((function t(e){var a,i;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,Object(n.b)("user_login",{query:JSON.stringify({_id:{$in:e}})});case 5:(a=t.sent).data&&a.data.length>0&&(i=this.agents.filter((function(t){return!a.data.find((function(e){return e._id===t._id}))})),this.agents=[].concat(Object(r.a)(i),Object(r.a)(a.data))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,this,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}},l=o,c=(a("134f"),a("2877")),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入经纪人名称搜索","remote-method":t.remoteSearch,loading:t.loading,clearable:"","collapse-tags":""},on:{change:t.handleChange},model:{value:t.selectedAgents,callback:function(e){t.selectedAgents=e},expression:"selectedAgents"}},t._l(t.agents,(function(e){return a("el-option",{key:e._id,attrs:{label:t.getAgentLabel(e),value:e._id}},[a("div",{staticClass:"agent-option"},[a("div",{staticClass:"agent-info"},[a("span",{staticClass:"name"},[t._v(t._s(e.nickName))]),t._v(" "),a("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(t._s(e.phone))])],1),t._v(" "),e.company?a("div",{staticClass:"company-info"},[a("small",[t._v(t._s(e.company))])]):t._e()])])})),1)}),[],!1,null,"5ad2e46e",null);e.default=u.exports},f4a2:function(t,e,a){"use strict";a("cf44")},f693:function(t,e,a){"use strict";a("eccf")},f833:function(t,e,a){"use strict";a.r(e);var s=a("5530"),r=a("c7eb"),i=(a("96cf"),a("1da1")),n=a("7e1e"),o=a("e277"),l=a("cf1e"),c=a.n(l),u=a("46ac"),d={components:{menuDialog:o.default},data:function(){return{list:[],backupslist:null,listLoading:!0,downloadLoading:!1,inputVisible:!1,rows:"",dialogFormVisible:!1,dialogFormVisible1:!1,seachdataname:"",add:!0,temp:[],postlist:{}}},created:function(){this.fetchData()},methods:{variables:function(){return{background:c.a.tableBg,color:c.a.tableText,"font-weight":c.a.tableTextWeight}},fetchData:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){var e,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.listLoading=!0,this.list=[],t.next=4,Object(n.b)("menu",{query:{},sort:{sortNum:1}});case 4:e=t.sent,a=e.data,this.list=Object(u.a)(a,null,[]),this.listLoading=!1;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),handleFilter:function(){this.$refs.menuDialogRef.AddClick()},createData:function(){var t=this,e=Object(s.a)({},this.postlist);postmenu(e).then((function(e){e?(t.fetchData(),t.dialogFormVisible=!1,t.postlist={label:"",value:"",sort:0,type:"菜单"},t.$notify({title:"添加Success",message:"Add Successfully",type:"success",duration:2e3})):t.$notify({title:"Add失败，请重试或刷新",message:"Add unsuccessful",type:"warning",duration:2e3})}))},handleClose:function(t){this.temp.splice(t,1)},handleEdit:function(t){this.$refs.menuDialogRef.EditClick(t)},editData:function(){var t=this,e=this.postlist._id;delete this.postlist._id;var a={query:{_id:e},update:Object(s.a)({},this.postlist)};putmenu(a).then((function(e){200==e.code?(t.dialogFormVisible=!1,t.fetchData(),t.$notify({title:"修改成功",message:"edit Successfully",type:"success",duration:2e3})):t.$notify({title:"修改失败，请重新刷新",message:"edit failly",type:"warning",duration:2e3})}))},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleDelete:function(t,e){var a=this;this.$confirm("确定删除"+t.menuName+"吗？").then(function(){var e=Object(i.a)(Object(r.a)().mark((function e(s){var i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={query:{_id:t._id}},e.next=3,Object(n.c)("menu",i);case 3:e.sent,a.fetchData(),a.$notify({title:"删除成功",message:"已将"+t.menuName+"删除",type:"danger",duration:2e3});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){a.dialogVisible=!1}))},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-6e87ca78"),a.e("chunk-54c12e41")]).then(a.bind(null,"4bf8d")).then((function(e){var a=Object.getOwnPropertyNames(t.list[0]),s=a,r=a,i=t.formatJson(r);e.export_json_to_excel({header:s,data:i,filename:"职位信息表"}),t.downloadLoading=!1}))},formatJson:function(t){return this.list.map((function(e){return t.map((function(t){return"Add_time"===t?parseTime(e[t]):e[t]}))}))},imgSaveToUrl:function(t,e,a){var s=this;this.localFile=t.raw;var r=new FormData;r.append("file",this.localFile),postmenuimg(r).then((function(t){if(2e4==t.code){var e=t.filename;s.temp1[a].subImg=e}else that.$message.error(t.message)}))},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=t}}},m=d,p=(a("6175"),a("2877")),f=Object(p.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.handleFilter}},[t._v("添加菜单\n    ")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,"header-cell-style":t.variables(),"tree-props":{children:"children"},border:"","element-loading-text":"Loading",fit:"","highlight-current-row":"","row-key":"_id"}},[a("el-table-column",{attrs:{align:"left",fixed:"left",label:"菜单标题",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.menuName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"图标"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.icon?a("i",{class:e.row.icon}):a("span",{class:e.row.icon},[t._v("无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.type))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"菜单顺序"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sortNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"节点路由"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.path))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"文件路径"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.component))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"传递参数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.query))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"权限标签"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.perms))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"是否可见"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.visible?"可见":"隐藏"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:1==e.row.status?"success":"danger"}},[t._v(t._s(e.row.status?"启用":"禁用")+"\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"更新时间",prop:"created_at",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),t._v(" "),a("span",[t._v(t._s(t._f("parseTime")(e.row.updateAt,"{y}-{m}-{d} {h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{staticStyle:{color:"blue"},attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleEdit(s)}}},[t._v("编辑\n        ")]),t._v(" "),a("el-button",{staticStyle:{color:"red"},attrs:{size:"mini",type:"text"},on:{click:function(e){return t.handleDelete(s)}}},[t._v("删除\n        ")])]}}])})],1),t._v(" "),a("menuDialog",{ref:"menuDialogRef",attrs:{dialogFormVisible:t.dialogFormVisible},on:{"custom-event":t.fetchData}})],1)}),[],!1,null,"79dbdc59",null);e.default=f.exports},fae1:function(t,e,a){},fc88:function(t,e,a){"use strict";a.r(e);var s=a("ade3"),r=a("5530"),i=(a("6b54"),a("a481"),a("3b2b"),a("c7eb")),n=(a("96cf"),a("1da1")),o=(a("6762"),a("2fdb"),a("7e1e")),l=a("c466"),c=a("7ae7"),u=a("1f24"),d={dicts:["expert_platform","task_type","content_type"],name:"TaskHall",components:{TaskClaim:c.default,EditDialog:u.default},data:function(){return{isAdmin:!1,searchForm:{title:"",type:"",brandName:"",platform:"",contentType:"",minBudget:null,maxBudget:null,timeRange:[]},showAdvanced:!1,taskTypeOptions:[{value:"品牌宣传",label:"品牌宣传"},{value:"达人推广",label:"达人推广"},{value:"达人直播",label:"达人直播"},{value:"达人视频",label:"达人视频"},{value:"直播带货",label:"直播带货"}],platformOptions:[{value:"抖音",label:"抖音"},{value:"小红书",label:"小红书"},{value:"B站",label:"B站"},{value:"微博",label:"微博"}],contentTypeOptions:[{value:"短视频",label:"短视频"},{value:"直播",label:"直播"},{value:"图文",label:"图文"}],loading:!1,taskList:[],currentPage:1,pageSize:10,total:0,taskDetailVisible:!1,taskDetailTitle:"",selectedTaskId:null,taskForm:{title:"",type:"",description:"",startTime:"",endTime:"",cooperationDetails:{brandName:"",brandIndustry:"",productName:"",productCategory:"",productDetails:"",requirements:{platformType:[],contentType:[],expertRequirements:{fansCountMin:0,fansCountMax:0,expertCategory:[]}},commercialTerms:{budget:0,commissionRate:0},kpiTargets:{viewsTarget:0,interactionTarget:0,salesTarget:0,expertCount:0,videoCount:0,liveStreamCount:0},remarks:[]}},taskFormVisible:!1,editTaskId:""}},created:function(){this.checkUserRole(),this.fetchData()},computed:{isAdmin:function(){return this.$store.getters.roles.some((function(t){return"Admin"===t.label}))}},methods:Object(s.a)({checkUserRole:function(){this.isAdmin=this.$store.getters.roles.label.includes("Admin")},fetchData:function(){var t=Object(n.a)(Object(i.a)().mark((function t(){var e,a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,e=this.buildQuery(),t.next=5,Object(o.b)("task",{query:e,page:this.currentPage,limit:this.pageSize,sort:{createTime:-1}});case 5:a=t.sent,this.taskList=a.data,this.total=a.total,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),this.$message.error("获取任务列表失败");case 14:this.loading=!1;case 15:case"end":return t.stop()}}),t,this,[[1,10]])})));return function(){return t.apply(this,arguments)}}(),buildQuery:function(){var t={isDeleted:!1};return this.searchForm.title&&(t.title={$regex:this.searchForm.title,$options:"i"}),this.searchForm.type&&(t.type=this.searchForm.type),this.searchForm.brandName&&(t["cooperationDetails.brandName"]=new RegExp(this.searchForm.brandName,"i")),this.searchForm.platform&&(t["cooperationDetails.requirements.platformType"]=this.searchForm.platform),this.searchForm.contentType&&(t["cooperationDetails.requirements.contentType"]=this.searchForm.contentType),(this.searchForm.minBudget||this.searchForm.maxBudget)&&(t["cooperationDetails.commercialTerms.budget"]={},this.searchForm.minBudget&&(t["cooperationDetails.commercialTerms.budget"].$gte=this.searchForm.minBudget),this.searchForm.maxBudget&&(t["cooperationDetails.commercialTerms.budget"].$lte=this.searchForm.maxBudget)),this.searchForm.timeRange&&2===this.searchForm.timeRange.length&&(t.createTime={$gte:this.searchForm.timeRange[0],$lte:this.searchForm.timeRange[1]}),t},handleSearch:function(){this.currentPage=1,this.fetchData()},resetSearch:function(){this.$refs.searchForm.resetFields(),this.currentPage=1,this.fetchData()},toggleAdvanced:function(){this.showAdvanced=!this.showAdvanced},handleSizeChange:function(t){this.pageSize=t,this.fetchData()},handleCurrentChange:function(t){this.currentPage=t,this.fetchData()},handleViewTask:function(t){this.selectedTaskId=t._id,this.taskDetailTitle=t.title,this.taskDetailVisible=!0,this.taskFormVisible=!1},handleCreate:function(){this.editTaskId="",this.resetTaskForm(),this.taskFormVisible=!0},handleEdit:function(){var t=Object(n.a)(Object(i.a)().mark((function t(e){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.editTaskId=e._id,this.taskForm=JSON.parse(JSON.stringify(e)),this.taskFormVisible=!0,this.taskDetailVisible=!1;case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),resetTaskForm:function(){this.taskForm={title:"",type:"",description:"",startTime:"",endTime:"",cooperationDetails:{brandName:"",brandIndustry:"",productName:"",productCategory:"",productDetails:"",requirements:{platformType:[],contentType:[],expertRequirements:{fansCountMin:0,fansCountMax:0,expertCategory:[]}},commercialTerms:{budget:0,commissionRate:0},kpiTargets:{viewsTarget:0,interactionTarget:0,salesTarget:0,expertCount:0,videoCount:0,liveStreamCount:0},remarks:[]}}},handleDelete:function(){var t=Object(n.a)(Object(i.a)().mark((function t(e){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$confirm("确认删除该任务?","提示",{type:"warning"});case 3:return t.next=5,Object(o.c)("task",{query:{_id:e._id}});case 5:this.$message.success("删除成功"),this.fetchData(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),"cancel"!==t.t0&&this.$message.error("删除失败");case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),formatDate:function(t){return Object(l.a)(new Date(t),"yyyy-MM-dd HH:mm")},formatNumber:function(t){return t?t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):"0"},getTaskTypeTag:function(t){return{"品牌宣传":"primary","达人推广":"success","达人直播":"warning","达人视频":"danger","直播带货":"info"}[t]||"info"},getAgentUsers:function(){var t=Object(n.a)(Object(i.a)().mark((function t(){var e;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.b)("user_login",{query:{role:"6734ddfc55647e147063f152"}});case 3:return e=t.sent,t.abrupt("return",e.data||[]);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),createMessageLog:function(){var t=Object(n.a)(Object(i.a)().mark((function t(e){var a,s;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getAgentUsers();case 3:return a=t.sent,s=Object(r.a)(Object(r.a)({},e),{},{receivers:a.map((function(t){return{userId:t._id,role:"AGENT",isRead:!1}}))}),t.next=8,Object(o.a)("messageLog",s);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),handleSubmitTask:function(){var t=Object(n.a)(Object(i.a)().mark((function t(e){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.editTaskId){t.next=12;break}return e.updateBy=this.$store.state.user.id,e.createAt=new Date,e.updateAt=new Date,t.next=7,Object(o.d)("task",{query:{_id:this.editTaskId},update:e});case 7:return this.$message.success("更新任务成功"),t.next=10,this.createMessageLog({title:"任务更新通知",content:"任务【".concat(e.title,"】已更新"),type:"TASK_UPDATED",taskId:this.editTaskId,sender:{userId:this.$store.state.user.id,role:"ADMIN"},isSystem:!0});case 10:t.next=21;break;case 12:return e.createBy=this.$store.state.user.id,e.createAt=new Date,e.updateAt=new Date,t.next=17,Object(o.a)("task",e);case 17:return a=t.sent,this.$message.success("创建任务成功"),t.next=21,this.createMessageLog({title:"新任务发布通知",content:"新任务【".concat(e.title,"】已发布，快来查看吧！"),type:"TASK_PUBLISHED",taskId:a.data._id,sender:{userId:this.$store.state.user.id,role:"ADMIN"},isSystem:!0});case 21:this.taskFormVisible=!1,this.fetchData(),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(0),this.$message.error("保存任务失败");case 29:case"end":return t.stop()}}),t,this,[[0,25]])})));return function(e){return t.apply(this,arguments)}}()},"handleDelete",function(){var t=Object(n.a)(Object(i.a)().mark((function t(e){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$confirm("确认删除该任务?","提示",{type:"warning"});case 3:return t.next=5,Object(o.d)("task",{query:{_id:e._id},update:{isDeleted:!0}});case 5:return t.next=7,this.createMessageLog({title:"任务删除通知",content:"任务【".concat(e.title,"】已被删除"),type:"TASK_DELETED",taskId:e._id,sender:{userId:this.$store.state.user.id,role:"ADMIN"},isSystem:!0});case 7:this.$message.success("删除成功"),this.fetchData(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),"cancel"!==t.t0&&this.$message.error("删除失败");case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));return function(e){return t.apply(this,arguments)}}())},m=d,p=(a("a887"),a("2877")),f=Object(p.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-hall"},[a("el-card",{staticClass:"filter-container"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("筛选搜索")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.toggleAdvanced}},[t._v("\n                "+t._s(t.showAdvanced?"收起":"展开")+"高级搜索\n            ")])],1),t._v(" "),a("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{model:t.searchForm}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"任务标题"}},[a("el-input",{attrs:{placeholder:"请输入任务标题",clearable:""},model:{value:t.searchForm.title,callback:function(e){t.$set(t.searchForm,"title",e)},expression:"searchForm.title"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"任务类型"}},[a("el-select",{attrs:{placeholder:"请选择任务类型",clearable:""},model:{value:t.searchForm.type,callback:function(e){t.$set(t.searchForm,"type",e)},expression:"searchForm.type"}},t._l(t.dict.type.task_type,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品牌名称"}},[a("el-input",{attrs:{placeholder:"请输入品牌名称",clearable:""},model:{value:t.searchForm.brandName,callback:function(e){t.$set(t.searchForm,"brandName",e)},expression:"searchForm.brandName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合作平台"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择平台",clearable:""},model:{value:t.searchForm.platformName,callback:function(e){t.$set(t.searchForm,"platformName",e)},expression:"searchForm.platformName"}},t._l(t.dict.type.expert_platform,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),t._v(" "),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdvanced,expression:"showAdvanced"}]},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"内容形式"}},[a("el-select",{attrs:{placeholder:"请选择内容形式",clearable:""},model:{value:t.searchForm.contentType,callback:function(e){t.$set(t.searchForm,"contentType",e)},expression:"searchForm.contentType"}},t._l(t.dict.type.content_type,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"预算范围"}},[a("el-input-number",{staticStyle:{width:"110px"},attrs:{placeholder:"最小预算"},model:{value:t.searchForm.minBudget,callback:function(e){t.$set(t.searchForm,"minBudget",e)},expression:"searchForm.minBudget"}}),t._v(" "),a("span",{staticStyle:{margin:"0 5px"}},[t._v("-")]),t._v(" "),a("el-input-number",{staticStyle:{width:"110px"},attrs:{placeholder:"最大预算"},model:{value:t.searchForm.maxBudget,callback:function(e){t.$set(t.searchForm,"maxBudget",e)},expression:"searchForm.maxBudget"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发布时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchForm.timeRange,callback:function(e){t.$set(t.searchForm,"timeRange",e)},expression:"searchForm.timeRange"}})],1)],1)],1)],1)]),t._v(" "),a("el-row",[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.resetSearch}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-card",{staticClass:"task-list"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("任务列表")]),t._v(" "),t.isAdmin?a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:t.handleCreate}},[t._v("\n                发布任务\n            ")]):t._e()],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.taskList,border:""}},[a("el-table-column",{attrs:{label:"任务标题","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleViewTask(e.row)}}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"任务类型",prop:"type",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.getTaskTypeTag(e.row.type)}},[t._v(t._s(e.row.type))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"品牌信息","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("品牌："+t._s(e.row.cooperationDetails.brandName))]),t._v(" "),a("div",[t._v("产品："+t._s(e.row.cooperationDetails.productName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"合作要求","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",t._l(e.row.cooperationDetails.requirements.platformType,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{size:"small"}},[t._v("\n                            "+t._s(e)+"\n                        ")])})),1),t._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},t._l(e.row.cooperationDetails.requirements.contentType,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"}},[t._v("\n                            "+t._s(e)+"\n                        ")])})),1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"预算",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    ¥"+t._s(t.formatNumber(e.row.cooperationDetails.commercialTerms.budget))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.formatDate(e.row.createTime))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleViewTask(e.row)}}},[t._v("查看")]),t._v(" "),t.isAdmin?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),t.isAdmin?a("el-button",{staticClass:"delete-btn",attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,30,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{staticClass:"task-detail-dialog",attrs:{title:t.taskDetailTitle,visible:t.taskDetailVisible,width:"80%","destroy-on-close":""},on:{"update:visible":function(e){t.taskDetailVisible=e}}},[t.taskDetailVisible?a("task-claim",{key:t.selectedTaskId,attrs:{taskId:t.selectedTaskId}}):t._e()],1),t._v(" "),a("edit-dialog",{attrs:{"dialog-form-visible":t.taskFormVisible,"dialog-status":t.editTaskId?"edit":"create","data-form":t.taskForm},on:{"update:dialogFormVisible":function(e){t.taskFormVisible=e},"update:dialog-form-visible":function(e){t.taskFormVisible=e},submit:t.handleSubmitTask}})],1)}),[],!1,null,"1a12ef4b",null);e.default=f.exports},fe8f:function(t,e,a){"use strict";a("9026")}}]);